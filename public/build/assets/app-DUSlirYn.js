import{p as uc,f as FS,a as MS,c as x_,b as Hf,k as Np,t as Vp,d as E_,g as S_,s as LS,e as BS,h as NS,i as VS,j as T_,S as Iv,l as zS,m as zp,n as C0,o as hp,q as A_,r as ro,u as HS,v as US,w as WS,x as jS,y as $S,z as qS,A as P_,B as GS,C as I_,D as KS,E as ZS,F as YS,G as Go,H as D_,I as JS,J as XS,K as QS,L as R_,M as O_,N as eT,O as fp,P as x0,Q as mp,R as bl,T as Nd,U as Hp,V as tT,W as qh,X as Vg,Y as nT,Z as iT}from"./main.esm-lQv4b4jE.js";function rT(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(i,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}function F_(i,e){return function(){return i.apply(e,arguments)}}var oT={};const{toString:sT}=Object.prototype,{getPrototypeOf:E0}=Object,Up=(i=>e=>{const t=sT.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Js=i=>(i=i.toLowerCase(),e=>Up(e)===i),Wp=i=>e=>typeof e===i,{isArray:Kd}=Array,wf=Wp("undefined");function aT(i){return i!==null&&!wf(i)&&i.constructor!==null&&!wf(i.constructor)&&Xo(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const M_=Js("ArrayBuffer");function lT(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&M_(i.buffer),e}const cT=Wp("string"),Xo=Wp("function"),L_=Wp("number"),jp=i=>i!==null&&typeof i=="object",uT=i=>i===!0||i===!1,Xm=i=>{if(Up(i)!=="object")return!1;const e=E0(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},dT=Js("Date"),hT=Js("File"),fT=Js("Blob"),mT=Js("FileList"),pT=i=>jp(i)&&Xo(i.pipe),gT=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||Xo(i.append)&&((e=Up(i))==="formdata"||e==="object"&&Xo(i.toString)&&i.toString()==="[object FormData]"))},bT=Js("URLSearchParams"),[vT,wT,yT,_T]=["ReadableStream","Request","Response","Headers"].map(Js),kT=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Uf(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,r;if(typeof i!="object"&&(i=[i]),Kd(i))for(n=0,r=i.length;n<r;n++)e.call(null,i[n],n,i);else{const o=t?Object.getOwnPropertyNames(i):Object.keys(i),s=o.length;let l;for(n=0;n<s;n++)l=o[n],e.call(null,i[l],l,i)}}function B_(i,e){e=e.toLowerCase();const t=Object.keys(i);let n=t.length,r;for(;n-- >0;)if(r=t[n],e===r.toLowerCase())return r;return null}const au=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:oT,N_=i=>!wf(i)&&i!==au;function Tb(){const{caseless:i}=N_(this)&&this||{},e={},t=(n,r)=>{const o=i&&B_(e,r)||r;Xm(e[o])&&Xm(n)?e[o]=Tb(e[o],n):Xm(n)?e[o]=Tb({},n):Kd(n)?e[o]=n.slice():e[o]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Uf(arguments[n],t);return e}const CT=(i,e,t,{allOwnKeys:n}={})=>(Uf(e,(r,o)=>{t&&Xo(r)?i[o]=F_(r,t):i[o]=r},{allOwnKeys:n}),i),xT=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),ET=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},ST=(i,e,t,n)=>{let r,o,s;const l={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),o=r.length;o-- >0;)s=r[o],(!n||n(s,i,e))&&!l[s]&&(e[s]=i[s],l[s]=!0);i=t!==!1&&E0(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},TT=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},AT=i=>{if(!i)return null;if(Kd(i))return i;let e=i.length;if(!L_(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},PT=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&E0(Uint8Array)),IT=(i,e)=>{const n=(i&&i[Symbol.iterator]).call(i);let r;for(;(r=n.next())&&!r.done;){const o=r.value;e.call(i,o[0],o[1])}},DT=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},RT=Js("HTMLFormElement"),OT=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),Dv=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),FT=Js("RegExp"),V_=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};Uf(t,(r,o)=>{let s;(s=e(r,o,i))!==!1&&(n[o]=s||r)}),Object.defineProperties(i,n)},MT=i=>{V_(i,(e,t)=>{if(Xo(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(Xo(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},LT=(i,e)=>{const t={},n=r=>{r.forEach(o=>{t[o]=!0})};return Kd(i)?n(i):n(String(i).split(e)),t},BT=()=>{},NT=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e,zg="abcdefghijklmnopqrstuvwxyz",Rv="0123456789",z_={DIGIT:Rv,ALPHA:zg,ALPHA_DIGIT:zg+zg.toUpperCase()+Rv},VT=(i=16,e=z_.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;i--;)t+=e[Math.random()*n|0];return t};function zT(i){return!!(i&&Xo(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const HT=i=>{const e=new Array(10),t=(n,r)=>{if(jp(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[r]=n;const o=Kd(n)?[]:{};return Uf(n,(s,l)=>{const c=t(s,r+1);!wf(c)&&(o[l]=c)}),e[r]=void 0,o}}return n};return t(i,0)},UT=Js("AsyncFunction"),WT=i=>i&&(jp(i)||Xo(i))&&Xo(i.then)&&Xo(i.catch),H_=((i,e)=>i?setImmediate:e?((t,n)=>(au.addEventListener("message",({source:r,data:o})=>{r===au&&o===t&&n.length&&n.shift()()},!1),r=>{n.push(r),au.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Xo(au.postMessage)),jT=typeof queueMicrotask<"u"?queueMicrotask.bind(au):typeof process<"u"&&process.nextTick||H_,We={isArray:Kd,isArrayBuffer:M_,isBuffer:aT,isFormData:gT,isArrayBufferView:lT,isString:cT,isNumber:L_,isBoolean:uT,isObject:jp,isPlainObject:Xm,isReadableStream:vT,isRequest:wT,isResponse:yT,isHeaders:_T,isUndefined:wf,isDate:dT,isFile:hT,isBlob:fT,isRegExp:FT,isFunction:Xo,isStream:pT,isURLSearchParams:bT,isTypedArray:PT,isFileList:mT,forEach:Uf,merge:Tb,extend:CT,trim:kT,stripBOM:xT,inherits:ET,toFlatObject:ST,kindOf:Up,kindOfTest:Js,endsWith:TT,toArray:AT,forEachEntry:IT,matchAll:DT,isHTMLForm:RT,hasOwnProperty:Dv,hasOwnProp:Dv,reduceDescriptors:V_,freezeMethods:MT,toObjectSet:LT,toCamelCase:OT,noop:BT,toFiniteNumber:NT,findKey:B_,global:au,isContextDefined:N_,ALPHABET:z_,generateString:VT,isSpecCompliantForm:zT,toJSONObject:HT,isAsyncFn:UT,isThenable:WT,setImmediate:H_,asap:jT};function an(i,e,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}We.inherits(an,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:We.toJSONObject(this.config),code:this.code,status:this.status}}});const U_=an.prototype,W_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{W_[i]={value:i}});Object.defineProperties(an,W_);Object.defineProperty(U_,"isAxiosError",{value:!0});an.from=(i,e,t,n,r,o)=>{const s=Object.create(U_);return We.toFlatObject(i,s,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),an.call(s,i.message,e,t,n,r),s.cause=i,s.name=i.name,o&&Object.assign(s,o),s};const $T=null;function Ab(i){return We.isPlainObject(i)||We.isArray(i)}function j_(i){return We.endsWith(i,"[]")?i.slice(0,-2):i}function Ov(i,e,t){return i?i.concat(e).map(function(r,o){return r=j_(r),!t&&o?"["+r+"]":r}).join(t?".":""):e}function qT(i){return We.isArray(i)&&!i.some(Ab)}const GT=We.toFlatObject(We,{},null,function(e){return/^is[A-Z]/.test(e)});function $p(i,e,t){if(!We.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=We.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,L){return!We.isUndefined(L[D])});const n=t.metaTokens,r=t.visitor||g,o=t.dots,s=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&We.isSpecCompliantForm(e);if(!We.isFunction(r))throw new TypeError("visitor must be a function");function h(x){if(x===null)return"";if(We.isDate(x))return x.toISOString();if(!c&&We.isBlob(x))throw new an("Blob is not supported. Use a Buffer instead.");return We.isArrayBuffer(x)||We.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function g(x,D,L){let M=x;if(x&&!L&&typeof x=="object"){if(We.endsWith(D,"{}"))D=n?D:D.slice(0,-2),x=JSON.stringify(x);else if(We.isArray(x)&&qT(x)||(We.isFileList(x)||We.endsWith(D,"[]"))&&(M=We.toArray(x)))return D=j_(D),M.forEach(function(O,U){!(We.isUndefined(O)||O===null)&&e.append(s===!0?Ov([D],U,o):s===null?D:D+"[]",h(O))}),!1}return Ab(x)?!0:(e.append(Ov(L,D,o),h(x)),!1)}const b=[],y=Object.assign(GT,{defaultVisitor:g,convertValue:h,isVisitable:Ab});function k(x,D){if(!We.isUndefined(x)){if(b.indexOf(x)!==-1)throw Error("Circular reference detected in "+D.join("."));b.push(x),We.forEach(x,function(M,V){(!(We.isUndefined(M)||M===null)&&r.call(e,M,We.isString(V)?V.trim():V,D,y))===!0&&k(M,D?D.concat(V):[V])}),b.pop()}}if(!We.isObject(i))throw new TypeError("data must be an object");return k(i),e}function Fv(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function S0(i,e){this._pairs=[],i&&$p(i,this,e)}const $_=S0.prototype;$_.append=function(e,t){this._pairs.push([e,t])};$_.toString=function(e){const t=e?function(n){return e.call(this,n,Fv)}:Fv;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function KT(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function q_(i,e,t){if(!e)return i;const n=t&&t.encode||KT,r=t&&t.serialize;let o;if(r?o=r(e,t):o=We.isURLSearchParams(e)?e.toString():new S0(e,t).toString(n),o){const s=i.indexOf("#");s!==-1&&(i=i.slice(0,s)),i+=(i.indexOf("?")===-1?"?":"&")+o}return i}class Mv{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){We.forEach(this.handlers,function(n){n!==null&&e(n)})}}const G_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZT=typeof URLSearchParams<"u"?URLSearchParams:S0,YT=typeof FormData<"u"?FormData:null,JT=typeof Blob<"u"?Blob:null,XT={isBrowser:!0,classes:{URLSearchParams:ZT,FormData:YT,Blob:JT},protocols:["http","https","file","blob","url","data"]},T0=typeof window<"u"&&typeof document<"u",Pb=typeof navigator=="object"&&navigator||void 0,QT=T0&&(!Pb||["ReactNative","NativeScript","NS"].indexOf(Pb.product)<0),eA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tA=T0&&window.location.href||"http://localhost",nA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:T0,hasStandardBrowserEnv:QT,hasStandardBrowserWebWorkerEnv:eA,navigator:Pb,origin:tA},Symbol.toStringTag,{value:"Module"})),Oo={...nA,...XT};function iA(i,e){return $p(i,new Oo.classes.URLSearchParams,Object.assign({visitor:function(t,n,r,o){return Oo.isNode&&We.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function rA(i){return We.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function oA(i){const e={},t=Object.keys(i);let n;const r=t.length;let o;for(n=0;n<r;n++)o=t[n],e[o]=i[o];return e}function K_(i){function e(t,n,r,o){let s=t[o++];if(s==="__proto__")return!0;const l=Number.isFinite(+s),c=o>=t.length;return s=!s&&We.isArray(r)?r.length:s,c?(We.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!l):((!r[s]||!We.isObject(r[s]))&&(r[s]=[]),e(t,n,r[s],o)&&We.isArray(r[s])&&(r[s]=oA(r[s])),!l)}if(We.isFormData(i)&&We.isFunction(i.entries)){const t={};return We.forEachEntry(i,(n,r)=>{e(rA(n),r,t,0)}),t}return null}function sA(i,e,t){if(We.isString(i))try{return(e||JSON.parse)(i),We.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(i)}const Wf={transitional:G_,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=We.isObject(e);if(o&&We.isHTMLForm(e)&&(e=new FormData(e)),We.isFormData(e))return r?JSON.stringify(K_(e)):e;if(We.isArrayBuffer(e)||We.isBuffer(e)||We.isStream(e)||We.isFile(e)||We.isBlob(e)||We.isReadableStream(e))return e;if(We.isArrayBufferView(e))return e.buffer;if(We.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return iA(e,this.formSerializer).toString();if((l=We.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return $p(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),sA(e)):e}],transformResponse:[function(e){const t=this.transitional||Wf.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(We.isResponse(e)||We.isReadableStream(e))return e;if(e&&We.isString(e)&&(n&&!this.responseType||r)){const s=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(l){if(s)throw l.name==="SyntaxError"?an.from(l,an.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Oo.classes.FormData,Blob:Oo.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};We.forEach(["delete","get","head","post","put","patch"],i=>{Wf.headers[i]={}});const aA=We.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lA=i=>{const e={};let t,n,r;return i&&i.split(`
`).forEach(function(s){r=s.indexOf(":"),t=s.substring(0,r).trim().toLowerCase(),n=s.substring(r+1).trim(),!(!t||e[t]&&aA[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Lv=Symbol("internals");function Gh(i){return i&&String(i).trim().toLowerCase()}function Qm(i){return i===!1||i==null?i:We.isArray(i)?i.map(Qm):String(i)}function cA(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const uA=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function Hg(i,e,t,n,r){if(We.isFunction(n))return n.call(this,e,t);if(r&&(e=t),!!We.isString(e)){if(We.isString(n))return e.indexOf(n)!==-1;if(We.isRegExp(n))return n.test(e)}}function dA(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function hA(i,e){const t=We.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(r,o,s){return this[n].call(this,e,r,o,s)},configurable:!0})})}class Fo{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(l,c,h){const g=Gh(c);if(!g)throw new Error("header name must be a non-empty string");const b=We.findKey(r,g);(!b||r[b]===void 0||h===!0||h===void 0&&r[b]!==!1)&&(r[b||c]=Qm(l))}const s=(l,c)=>We.forEach(l,(h,g)=>o(h,g,c));if(We.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(We.isString(e)&&(e=e.trim())&&!uA(e))s(lA(e),t);else if(We.isHeaders(e))for(const[l,c]of e.entries())o(c,l,n);else e!=null&&o(t,e,n);return this}get(e,t){if(e=Gh(e),e){const n=We.findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return cA(r);if(We.isFunction(t))return t.call(this,r,n);if(We.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gh(e),e){const n=We.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Hg(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let r=!1;function o(s){if(s=Gh(s),s){const l=We.findKey(n,s);l&&(!t||Hg(n,n[l],l,t))&&(delete n[l],r=!0)}}return We.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];(!e||Hg(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return We.forEach(this,(r,o)=>{const s=We.findKey(n,o);if(s){t[s]=Qm(r),delete t[o];return}const l=e?dA(o):String(o).trim();l!==o&&delete t[o],t[l]=Qm(r),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return We.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&We.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[Lv]=this[Lv]={accessors:{}}).accessors,r=this.prototype;function o(s){const l=Gh(s);n[l]||(hA(r,s),n[l]=!0)}return We.isArray(e)?e.forEach(o):o(e),this}}Fo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);We.reduceDescriptors(Fo.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(n){this[t]=n}}});We.freezeMethods(Fo);function Ug(i,e){const t=this||Wf,n=e||t,r=Fo.from(n.headers);let o=n.data;return We.forEach(i,function(l){o=l.call(t,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function Z_(i){return!!(i&&i.__CANCEL__)}function Zd(i,e,t){an.call(this,i??"canceled",an.ERR_CANCELED,e,t),this.name="CanceledError"}We.inherits(Zd,an,{__CANCEL__:!0});function Y_(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new an("Request failed with status code "+t.status,[an.ERR_BAD_REQUEST,an.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function fA(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function mA(i,e){i=i||10;const t=new Array(i),n=new Array(i);let r=0,o=0,s;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),g=n[o];s||(s=h),t[r]=c,n[r]=h;let b=o,y=0;for(;b!==r;)y+=t[b++],b=b%i;if(r=(r+1)%i,r===o&&(o=(o+1)%i),h-s<e)return;const k=g&&h-g;return k?Math.round(y*1e3/k):void 0}}function pA(i,e){let t=0,n=1e3/e,r,o;const s=(h,g=Date.now())=>{t=g,r=null,o&&(clearTimeout(o),o=null),i.apply(null,h)};return[(...h)=>{const g=Date.now(),b=g-t;b>=n?s(h,g):(r=h,o||(o=setTimeout(()=>{o=null,s(r)},n-b)))},()=>r&&s(r)]}const pp=(i,e,t=3)=>{let n=0;const r=mA(50,250);return pA(o=>{const s=o.loaded,l=o.lengthComputable?o.total:void 0,c=s-n,h=r(c),g=s<=l;n=s;const b={loaded:s,total:l,progress:l?s/l:void 0,bytes:c,rate:h||void 0,estimated:h&&l&&g?(l-s)/h:void 0,event:o,lengthComputable:l!=null,[e?"download":"upload"]:!0};i(b)},t)},Bv=(i,e)=>{const t=i!=null;return[n=>e[0]({lengthComputable:t,total:i,loaded:n}),e[1]]},Nv=i=>(...e)=>We.asap(()=>i(...e)),gA=Oo.hasStandardBrowserEnv?function(){const e=Oo.navigator&&/(msie|trident)/i.test(Oo.navigator.userAgent),t=document.createElement("a");let n;function r(o){let s=o;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(s){const l=We.isString(s)?r(s):s;return l.protocol===n.protocol&&l.host===n.host}}():function(){return function(){return!0}}(),bA=Oo.hasStandardBrowserEnv?{write(i,e,t,n,r,o){const s=[i+"="+encodeURIComponent(e)];We.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),We.isString(n)&&s.push("path="+n),We.isString(r)&&s.push("domain="+r),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vA(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function wA(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function J_(i,e){return i&&!vA(e)?wA(i,e):e}const Vv=i=>i instanceof Fo?{...i}:i;function pu(i,e){e=e||{};const t={};function n(h,g,b){return We.isPlainObject(h)&&We.isPlainObject(g)?We.merge.call({caseless:b},h,g):We.isPlainObject(g)?We.merge({},g):We.isArray(g)?g.slice():g}function r(h,g,b){if(We.isUndefined(g)){if(!We.isUndefined(h))return n(void 0,h,b)}else return n(h,g,b)}function o(h,g){if(!We.isUndefined(g))return n(void 0,g)}function s(h,g){if(We.isUndefined(g)){if(!We.isUndefined(h))return n(void 0,h)}else return n(void 0,g)}function l(h,g,b){if(b in e)return n(h,g);if(b in i)return n(void 0,h)}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(h,g)=>r(Vv(h),Vv(g),!0)};return We.forEach(Object.keys(Object.assign({},i,e)),function(g){const b=c[g]||r,y=b(i[g],e[g],g);We.isUndefined(y)&&b!==l||(t[g]=y)}),t}const X_=i=>{const e=pu({},i);let{data:t,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:o,headers:s,auth:l}=e;e.headers=s=Fo.from(s),e.url=q_(J_(e.baseURL,e.url),i.params,i.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(We.isFormData(t)){if(Oo.hasStandardBrowserEnv||Oo.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[h,...g]=c?c.split(";").map(b=>b.trim()).filter(Boolean):[];s.setContentType([h||"multipart/form-data",...g].join("; "))}}if(Oo.hasStandardBrowserEnv&&(n&&We.isFunction(n)&&(n=n(e)),n||n!==!1&&gA(e.url))){const h=r&&o&&bA.read(o);h&&s.set(r,h)}return e},yA=typeof XMLHttpRequest<"u",_A=yA&&function(i){return new Promise(function(t,n){const r=X_(i);let o=r.data;const s=Fo.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:h}=r,g,b,y,k,x;function D(){k&&k(),x&&x(),r.cancelToken&&r.cancelToken.unsubscribe(g),r.signal&&r.signal.removeEventListener("abort",g)}let L=new XMLHttpRequest;L.open(r.method.toUpperCase(),r.url,!0),L.timeout=r.timeout;function M(){if(!L)return;const O=Fo.from("getAllResponseHeaders"in L&&L.getAllResponseHeaders()),K={data:!l||l==="text"||l==="json"?L.responseText:L.response,status:L.status,statusText:L.statusText,headers:O,config:i,request:L};Y_(function(Q){t(Q),D()},function(Q){n(Q),D()},K),L=null}"onloadend"in L?L.onloadend=M:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(M)},L.onabort=function(){L&&(n(new an("Request aborted",an.ECONNABORTED,i,L)),L=null)},L.onerror=function(){n(new an("Network Error",an.ERR_NETWORK,i,L)),L=null},L.ontimeout=function(){let U=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const K=r.transitional||G_;r.timeoutErrorMessage&&(U=r.timeoutErrorMessage),n(new an(U,K.clarifyTimeoutError?an.ETIMEDOUT:an.ECONNABORTED,i,L)),L=null},o===void 0&&s.setContentType(null),"setRequestHeader"in L&&We.forEach(s.toJSON(),function(U,K){L.setRequestHeader(K,U)}),We.isUndefined(r.withCredentials)||(L.withCredentials=!!r.withCredentials),l&&l!=="json"&&(L.responseType=r.responseType),h&&([y,x]=pp(h,!0),L.addEventListener("progress",y)),c&&L.upload&&([b,k]=pp(c),L.upload.addEventListener("progress",b),L.upload.addEventListener("loadend",k)),(r.cancelToken||r.signal)&&(g=O=>{L&&(n(!O||O.type?new Zd(null,i,L):O),L.abort(),L=null)},r.cancelToken&&r.cancelToken.subscribe(g),r.signal&&(r.signal.aborted?g():r.signal.addEventListener("abort",g)));const V=fA(r.url);if(V&&Oo.protocols.indexOf(V)===-1){n(new an("Unsupported protocol "+V+":",an.ERR_BAD_REQUEST,i));return}L.send(o||null)})},kA=(i,e)=>{const{length:t}=i=i?i.filter(Boolean):[];if(e||t){let n=new AbortController,r;const o=function(h){if(!r){r=!0,l();const g=h instanceof Error?h:this.reason;n.abort(g instanceof an?g:new Zd(g instanceof Error?g.message:g))}};let s=e&&setTimeout(()=>{s=null,o(new an(`timeout ${e} of ms exceeded`,an.ETIMEDOUT))},e);const l=()=>{i&&(s&&clearTimeout(s),s=null,i.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),i=null)};i.forEach(h=>h.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>We.asap(l),c}},CA=function*(i,e){let t=i.byteLength;if(t<e){yield i;return}let n=0,r;for(;n<t;)r=n+e,yield i.slice(n,r),n=r},xA=async function*(i,e){for await(const t of EA(i))yield*CA(t,e)},EA=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const e=i.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},zv=(i,e,t,n)=>{const r=xA(i,e);let o=0,s,l=c=>{s||(s=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:h,value:g}=await r.next();if(h){l(),c.close();return}let b=g.byteLength;if(t){let y=o+=b;t(y)}c.enqueue(new Uint8Array(g))}catch(h){throw l(h),h}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},qp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Q_=qp&&typeof ReadableStream=="function",SA=qp&&(typeof TextEncoder=="function"?(i=>e=>i.encode(e))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),ek=(i,...e)=>{try{return!!i(...e)}catch{return!1}},TA=Q_&&ek(()=>{let i=!1;const e=new Request(Oo.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!e}),Hv=64*1024,Ib=Q_&&ek(()=>We.isReadableStream(new Response("").body)),gp={stream:Ib&&(i=>i.body)};qp&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!gp[e]&&(gp[e]=We.isFunction(i[e])?t=>t[e]():(t,n)=>{throw new an(`Response type '${e}' is not supported`,an.ERR_NOT_SUPPORT,n)})})})(new Response);const AA=async i=>{if(i==null)return 0;if(We.isBlob(i))return i.size;if(We.isSpecCompliantForm(i))return(await new Request(Oo.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(We.isArrayBufferView(i)||We.isArrayBuffer(i))return i.byteLength;if(We.isURLSearchParams(i)&&(i=i+""),We.isString(i))return(await SA(i)).byteLength},PA=async(i,e)=>{const t=We.toFiniteNumber(i.getContentLength());return t??AA(e)},IA=qp&&(async i=>{let{url:e,method:t,data:n,signal:r,cancelToken:o,timeout:s,onDownloadProgress:l,onUploadProgress:c,responseType:h,headers:g,withCredentials:b="same-origin",fetchOptions:y}=X_(i);h=h?(h+"").toLowerCase():"text";let k=kA([r,o&&o.toAbortSignal()],s),x;const D=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let L;try{if(c&&TA&&t!=="get"&&t!=="head"&&(L=await PA(g,n))!==0){let K=new Request(e,{method:"POST",body:n,duplex:"half"}),q;if(We.isFormData(n)&&(q=K.headers.get("content-type"))&&g.setContentType(q),K.body){const[Q,ne]=Bv(L,pp(Nv(c)));n=zv(K.body,Hv,Q,ne)}}We.isString(b)||(b=b?"include":"omit");const M="credentials"in Request.prototype;x=new Request(e,{...y,signal:k,method:t.toUpperCase(),headers:g.normalize().toJSON(),body:n,duplex:"half",credentials:M?b:void 0});let V=await fetch(x);const O=Ib&&(h==="stream"||h==="response");if(Ib&&(l||O&&D)){const K={};["status","statusText","headers"].forEach(X=>{K[X]=V[X]});const q=We.toFiniteNumber(V.headers.get("content-length")),[Q,ne]=l&&Bv(q,pp(Nv(l),!0))||[];V=new Response(zv(V.body,Hv,Q,()=>{ne&&ne(),D&&D()}),K)}h=h||"text";let U=await gp[We.findKey(gp,h)||"text"](V,i);return!O&&D&&D(),await new Promise((K,q)=>{Y_(K,q,{data:U,headers:Fo.from(V.headers),status:V.status,statusText:V.statusText,config:i,request:x})})}catch(M){throw D&&D(),M&&M.name==="TypeError"&&/fetch/i.test(M.message)?Object.assign(new an("Network Error",an.ERR_NETWORK,i,x),{cause:M.cause||M}):an.from(M,M&&M.code,i,x)}}),Db={http:$T,xhr:_A,fetch:IA};We.forEach(Db,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const Uv=i=>`- ${i}`,DA=i=>We.isFunction(i)||i===null||i===!1,tk={getAdapter:i=>{i=We.isArray(i)?i:[i];const{length:e}=i;let t,n;const r={};for(let o=0;o<e;o++){t=i[o];let s;if(n=t,!DA(t)&&(n=Db[(s=String(t)).toLowerCase()],n===void 0))throw new an(`Unknown adapter '${s}'`);if(n)break;r[s||"#"+o]=n}if(!n){const o=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=e?o.length>1?`since :
`+o.map(Uv).join(`
`):" "+Uv(o[0]):"as no adapter specified";throw new an("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:Db};function Wg(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Zd(null,i)}function Wv(i){return Wg(i),i.headers=Fo.from(i.headers),i.data=Ug.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),tk.getAdapter(i.adapter||Wf.adapter)(i).then(function(n){return Wg(i),n.data=Ug.call(i,i.transformResponse,n),n.headers=Fo.from(n.headers),n},function(n){return Z_(n)||(Wg(i),n&&n.response&&(n.response.data=Ug.call(i,i.transformResponse,n.response),n.response.headers=Fo.from(n.response.headers))),Promise.reject(n)})}const nk="1.7.7",A0={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{A0[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const jv={};A0.transitional=function(e,t,n){function r(o,s){return"[Axios v"+nk+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return(o,s,l)=>{if(e===!1)throw new an(r(s," has been removed"+(t?" in "+t:"")),an.ERR_DEPRECATED);return t&&!jv[s]&&(jv[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,s,l):!0}};function RA(i,e,t){if(typeof i!="object")throw new an("options must be an object",an.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let r=n.length;for(;r-- >0;){const o=n[r],s=e[o];if(s){const l=i[o],c=l===void 0||s(l,o,i);if(c!==!0)throw new an("option "+o+" must be "+c,an.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new an("Unknown option "+o,an.ERR_BAD_OPTION)}}const Rb={assertOptions:RA,validators:A0},dc=Rb.validators;class cu{constructor(e){this.defaults=e,this.interceptors={request:new Mv,response:new Mv}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=pu(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;n!==void 0&&Rb.assertOptions(n,{silentJSONParsing:dc.transitional(dc.boolean),forcedJSONParsing:dc.transitional(dc.boolean),clarifyTimeoutError:dc.transitional(dc.boolean)},!1),r!=null&&(We.isFunction(r)?t.paramsSerializer={serialize:r}:Rb.assertOptions(r,{encode:dc.function,serialize:dc.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=o&&We.merge(o.common,o[t.method]);o&&We.forEach(["delete","get","head","post","put","patch","common"],x=>{delete o[x]}),t.headers=Fo.concat(s,o);const l=[];let c=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(t)===!1||(c=c&&D.synchronous,l.unshift(D.fulfilled,D.rejected))});const h=[];this.interceptors.response.forEach(function(D){h.push(D.fulfilled,D.rejected)});let g,b=0,y;if(!c){const x=[Wv.bind(this),void 0];for(x.unshift.apply(x,l),x.push.apply(x,h),y=x.length,g=Promise.resolve(t);b<y;)g=g.then(x[b++],x[b++]);return g}y=l.length;let k=t;for(b=0;b<y;){const x=l[b++],D=l[b++];try{k=x(k)}catch(L){D.call(this,L);break}}try{g=Wv.call(this,k)}catch(x){return Promise.reject(x)}for(b=0,y=h.length;b<y;)g=g.then(h[b++],h[b++]);return g}getUri(e){e=pu(this.defaults,e);const t=J_(e.baseURL,e.url);return q_(t,e.params,e.paramsSerializer)}}We.forEach(["delete","get","head","options"],function(e){cu.prototype[e]=function(t,n){return this.request(pu(n||{},{method:e,url:t,data:(n||{}).data}))}});We.forEach(["post","put","patch"],function(e){function t(n){return function(o,s,l){return this.request(pu(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}cu.prototype[e]=t(),cu.prototype[e+"Form"]=t(!0)});class P0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(r=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](r);n._listeners=null}),this.promise.then=r=>{let o;const s=new Promise(l=>{n.subscribe(l),o=l}).then(r);return s.cancel=function(){n.unsubscribe(o)},s},e(function(o,s,l){n.reason||(n.reason=new Zd(o,s,l),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new P0(function(r){e=r}),cancel:e}}}function OA(i){return function(t){return i.apply(null,t)}}function FA(i){return We.isObject(i)&&i.isAxiosError===!0}const Ob={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ob).forEach(([i,e])=>{Ob[e]=i});function ik(i){const e=new cu(i),t=F_(cu.prototype.request,e);return We.extend(t,cu.prototype,e,{allOwnKeys:!0}),We.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return ik(pu(i,r))},t}const cr=ik(Wf);cr.Axios=cu;cr.CanceledError=Zd;cr.CancelToken=P0;cr.isCancel=Z_;cr.VERSION=nk;cr.toFormData=$p;cr.AxiosError=an;cr.Cancel=cr.CanceledError;cr.all=function(e){return Promise.all(e)};cr.spread=OA;cr.isAxiosError=FA;cr.mergeConfig=pu;cr.AxiosHeaders=Fo;cr.formToJSON=i=>K_(We.isHTMLForm(i)?new FormData(i):i);cr.getAdapter=tk.getAdapter;cr.HttpStatusCode=Ob;cr.default=cr;window.axios=cr;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";class MA{id;rootElement;vizId;data=[];layout={};config=[];baseurl;filterable=!1;emptyLayout={xaxis:{visible:!1},yaxis:{visible:!1},plot_bgcolor:"#f1f5f9",annotations:[{text:"There is no data for selected area",xref:"paper",yref:"paper",showarrow:!1,font:{size:28}}]};async fetchData(e,t=""){const n=await axios.get(`/api/visualization/${e}?path=${t}`);console.log("Fetched chart via axios:",n.data),this.data=n.data.data,this.layout=n.data.layout,this.config=n.data.config,this.filterable=n.data.filterable}constructor(e){this.id=e,this.rootElement=document.getElementById(e),this.baseurl=this.rootElement.dataset.baseurl,this.config.locale==="fr"?uc.register(FS):this.config.locale==="pt"&&uc.register(MS),this.vizId=this.rootElement.getAttribute("viz-id"),this.rootElement.innerHTML="",this.vizId?this.fetchData(this.vizId).then(()=>{console.log({data:this.data}),uc.newPlot(this.rootElement,this.data,this.layout,this.config),this.registerLivewireEventListeners(this.filterable)}):(this.data=JSON.parse(this.rootElement.dataset.data),this.layout=JSON.parse(this.rootElement.dataset.layout),this.config=JSON.parse(this.rootElement.dataset.config),console.log({data:this.data,layout:this.layout,config:this.config}),uc.newPlot(this.rootElement,this.data,this.layout,this.config),this.registerLivewireEventListeners(this.filterable)),document.getElementById("should-capture-thumbnail")?.value&&(console.log("Capturing and sending thumbnail...",this.vizId),uc.toImage(this.id,{format:"png",width:600,height:400}).then(n=>{console.log({imageData:n}),Livewire.dispatch("thumbnailCaptured",{imageData:n})}).catch(n=>console.error("Error converting plot to image:",n)))}registerLivewireEventListeners(e){Livewire.on(`updateResponse.${this.id}`,t=>{console.log("Received updateResponse: "+this.id,t),uc.react(this.id,...t,this.config)}),e&&Livewire.on("filterChanged",t=>{let n,r;[n,r]=t,this.fetchData(this.vizId,n).then(()=>{this.data.length?uc.react(this.rootElement,this.data,this.layout):uc.react(this.rootElement,this.data,this.emptyLayout)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Fb;try{Fb={window,document}}catch{/* istanbul ignore next -- @preserve */Fb={window:{},document:{}}}const _t=Fb;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function LA(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const ru=LA(),Yt={isMac:rk(ru),isWindows:BA(ru),isGecko:NA(ru),isSafari:VA(ru),isiOS:zA(ru),isAndroid:HA(ru),isBlink:UA(ru),get isMediaForcedColors(){return jA()},get isMotionReduced(){return $A()},features:{isRegExpUnicodePropertySupported:WA()}};function rk(i){return i.indexOf("macintosh")>-1}function BA(i){return i.indexOf("windows")>-1}function NA(i){return!!i.match(/gecko\/\d+/)}function VA(i){return i.indexOf(" applewebkit/")>-1&&i.indexOf("chrome")===-1}function zA(i){return!!i.match(/iphone|ipad/i)||rk(i)&&navigator.maxTouchPoints>0}function HA(i){return i.indexOf("android")>-1}function UA(i){return i.indexOf("chrome/")>-1&&i.indexOf("edge/")<0}function WA(){let i=!1;try{i="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return i}function jA(){return _t.window.matchMedia?_t.window.matchMedia("(forced-colors: active)").matches:!1}function $A(){return _t.window.matchMedia?_t.window.matchMedia("(prefers-reduced-motion)").matches:!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ok(i,e,t,n){t=t||function(c,h){return c===h};const r=Array.isArray(i)?i:Array.prototype.slice.call(i),o=Array.isArray(e)?e:Array.prototype.slice.call(e),s=qA(r,o,t);return n?KA(s,o.length):GA(o,s)}function qA(i,e,t){const n=$v(i,e,t);if(n===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const r=qv(i,n),o=qv(e,n),s=$v(r,o,t),l=i.length-s,c=e.length-s;return{firstIndex:n,lastIndexOld:l,lastIndexNew:c}}function $v(i,e,t){for(let n=0;n<Math.max(i.length,e.length);n++)if(i[n]===void 0||e[n]===void 0||!t(i[n],e[n]))return n;return-1}function qv(i,e){return i.slice(e).reverse()}function GA(i,e){const t=[],{firstIndex:n,lastIndexOld:r,lastIndexNew:o}=e;return o-n>0&&t.push({index:n,type:"insert",values:i.slice(n,o)}),r-n>0&&t.push({index:n+(o-n),type:"delete",howMany:r-n}),t}function KA(i,e){const{firstIndex:t,lastIndexOld:n,lastIndexNew:r}=i;if(t===-1)return Array(e).fill("equal");let o=[];return t>0&&(o=o.concat(Array(t).fill("equal"))),r-t>0&&(o=o.concat(Array(r-t).fill("insert"))),n-t>0&&(o=o.concat(Array(n-t).fill("delete"))),r<e&&(o=o.concat(Array(e-r).fill("equal"))),o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lf(i,e,t){t=t||function(D,L){return D===L};const n=i.length,r=e.length;if(n>200||r>200||n+r>300)return lf.fastDiff(i,e,t,!0);let o,s;if(r<n){const D=i;i=e,e=D,o="delete",s="insert"}else o="insert",s="delete";const l=i.length,c=e.length,h=c-l,g={},b={};function y(D){const L=(b[D-1]!==void 0?b[D-1]:-1)+1,M=b[D+1]!==void 0?b[D+1]:-1,V=L>M?-1:1;g[D+V]&&(g[D]=g[D+V].slice(0)),g[D]||(g[D]=[]),g[D].push(L>M?o:s);let O=Math.max(L,M),U=O-D;for(;U<l&&O<c&&t(i[U],e[O]);)U++,O++,g[D].push("equal");return O}let k=0,x;do{for(x=-k;x<h;x++)b[x]=y(x);for(x=h+k;x>h;x--)b[x]=y(x);b[h]=y(h),k++}while(b[h]!==c);return g[h].slice(1)}lf.fastDiff=ok;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gv(){return function i(){i.called=!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vl{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=Gv(),this.off=Gv()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const no=new Array(256).fill("").map((i,e)=>("0"+e.toString(16)).slice(-2));function xs(){const[i,e,t,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+no[i>>0&255]+no[i>>8&255]+no[i>>16&255]+no[i>>24&255]+no[e>>0&255]+no[e>>8&255]+no[e>>16&255]+no[e>>24&255]+no[t>>0&255]+no[t>>8&255]+no[t>>16&255]+no[t>>24&255]+no[n>>0&255]+no[n>>8&255]+no[n>>16&255]+no[n>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zo={get(i="normal"){return typeof i!="number"?this[i]||this.normal:i},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sk(i,e){const t=Zo.get(e.priority);for(let n=0;n<i.length;n++)if(Zo.get(i[n].priority)<t){i.splice(n,0,e);return}i.push(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ZA="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class be extends Error{constructor(e,t,n){super(YA(e,n)),this.name="CKEditorError",this.context=t,this.data=n}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const n=new be(e.message,t);throw n.stack=e.stack,n}}function vn(i,e){console.warn(...JA(i,e))}function ak(i){return`
Read more: ${ZA}#error-${i}`}function YA(i,e){const t=new WeakSet,r=e?` ${JSON.stringify(e,(s,l)=>{if(typeof l=="object"&&l!==null){if(t.has(l))return`[object ${l.constructor.name}]`;t.add(l)}return l})}`:"",o=ak(i);return i+r+o}function JA(i,e){const t=ak(i);return e?[i,e,t]:[i,t]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const XA="43.2.0",QA=new Date(2024,9,2);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new be("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=XA;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Td=Symbol("listeningTo"),Mb=Symbol("emitterId"),al=Symbol("delegations"),lk=Yn(Object);function Yn(i){if(!i)return lk;class e extends i{on(n,r,o){this.listenTo(this,n,r,o)}once(n,r,o){let s=!1;const l=(c,...h)=>{s||(s=!0,c.off(),r.call(this,c,...h))};this.listenTo(this,n,l,o)}off(n,r){this.stopListening(this,n,r)}listenTo(n,r,o,s={}){let l,c;this[Td]||(this[Td]={});const h=this[Td];jg(n)||ck(n);const g=jg(n);(l=h[g])||(l=h[g]={emitter:n,callbacks:{}}),(c=l.callbacks[r])||(c=l.callbacks[r]=[]),c.push(o),i5(this,n,r,o,s)}stopListening(n,r,o){const s=this[Td];let l=n&&jg(n);const c=s&&l?s[l]:void 0,h=c&&r?c.callbacks[r]:void 0;if(!(!s||n&&!c||r&&!h))if(o)$g(this,n,r,o),h.indexOf(o)!==-1&&(h.length===1?delete c.callbacks[r]:$g(this,n,r,o));else if(h){for(;o=h.pop();)$g(this,n,r,o);delete c.callbacks[r]}else if(c){for(r in c.callbacks)this.stopListening(n,r);delete s[l]}else{for(l in s)this.stopListening(s[l].emitter);delete this[Td]}}fire(n,...r){try{const o=n instanceof vl?n:new vl(this,n),s=o.name;let l=dk(this,s);if(o.path.push(this),l){const h=[o,...r];l=Array.from(l);for(let g=0;g<l.length&&(l[g].callback.apply(this,h),o.off.called&&(delete o.off.called,this._removeEventListener(s,l[g].callback)),!o.stop.called);g++);}const c=this[al];if(c){const h=c.get(s),g=c.get("*");h&&Kv(h,o,r),g&&Kv(g,o,r)}return o.return}catch(o){/* istanbul ignore next -- @preserve */be.rethrowUnexpectedError(o,this)}}delegate(...n){return{to:(r,o)=>{this[al]||(this[al]=new Map),n.forEach(s=>{const l=this[al].get(s);l?l.set(r,o):this[al].set(s,new Map([[r,o]]))})}}}stopDelegating(n,r){if(this[al])if(!n)this[al].clear();else if(!r)this[al].delete(n);else{const o=this[al].get(n);o&&o.delete(r)}}_addEventListener(n,r,o){n5(this,n);const s=Lb(this,n),l=Zo.get(o.priority),c={callback:r,priority:l};for(const h of s)sk(h,c)}_removeEventListener(n,r){const o=Lb(this,n);for(const s of o)for(let l=0;l<s.length;l++)s[l].callback==r&&(s.splice(l,1),l--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Yn[i]=lk.prototype[i]});function e5(i,e){const t=i[Td];return t&&t[e]?t[e].emitter:null}function ck(i,e){i[Mb]||(i[Mb]=e||xs())}function jg(i){return i[Mb]}function uk(i){return i._events||Object.defineProperty(i,"_events",{value:{}}),i._events}function t5(){return{callbacks:[],childEvents:[]}}function n5(i,e){const t=uk(i);if(t[e])return;let n=e,r=null;const o=[];for(;n!==""&&!t[n];)t[n]=t5(),o.push(t[n]),r&&t[n].childEvents.push(r),r=n,n=n.substr(0,n.lastIndexOf(":"));if(n!==""){for(const s of o)s.callbacks=t[n].callbacks.slice();t[n].childEvents.push(r)}}function Lb(i,e){const t=uk(i)[e];if(!t)return[];let n=[t.callbacks];for(let r=0;r<t.childEvents.length;r++){const o=Lb(i,t.childEvents[r]);n=n.concat(o)}return n}function dk(i,e){let t;return!i._events||!(t=i._events[e])||!t.callbacks.length?e.indexOf(":")>-1?dk(i,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function Kv(i,e,t){for(let[n,r]of i){r?typeof r=="function"&&(r=r(e.name)):r=e.name;const o=new vl(e.source,r);o.path=[...e.path],n.fire(o,...t)}}function i5(i,e,t,n,r){e._addEventListener?e._addEventListener(t,n,r):i._addEventListener.call(e,t,n,r)}function $g(i,e,t,n){e._removeEventListener?e._removeEventListener(t,n):i._removeEventListener.call(e,t,n)}var hk=x_(function(i,e){Hf(e,Np(e),i)});function fk(i,e,t){var n=-1,r=i.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(r);++n<r;)o[n]=i[n+e];return o}function r5(i,e,t){var n=i.length;return t=t===void 0?n:t,!e&&t>=n?i:fk(i,e,t)}var o5="\\ud800-\\udfff",s5="\\u0300-\\u036f",a5="\\ufe20-\\ufe2f",l5="\\u20d0-\\u20ff",c5=s5+a5+l5,u5="\\ufe0e\\ufe0f",d5="\\u200d",h5=RegExp("["+d5+o5+c5+u5+"]");function mk(i){return h5.test(i)}function f5(i){return i.split("")}var pk="\\ud800-\\udfff",m5="\\u0300-\\u036f",p5="\\ufe20-\\ufe2f",g5="\\u20d0-\\u20ff",b5=m5+p5+g5,v5="\\ufe0e\\ufe0f",w5="["+pk+"]",Bb="["+b5+"]",Nb="\\ud83c[\\udffb-\\udfff]",y5="(?:"+Bb+"|"+Nb+")",gk="[^"+pk+"]",bk="(?:\\ud83c[\\udde6-\\uddff]){2}",vk="[\\ud800-\\udbff][\\udc00-\\udfff]",_5="\\u200d",wk=y5+"?",yk="["+v5+"]?",k5="(?:"+_5+"(?:"+[gk,bk,vk].join("|")+")"+yk+wk+")*",C5=yk+wk+k5,x5="(?:"+[gk+Bb+"?",Bb,bk,vk,w5].join("|")+")",E5=RegExp(Nb+"(?="+Nb+")|"+x5+C5,"g");function S5(i){return i.match(E5)||[]}function T5(i){return mk(i)?S5(i):f5(i)}function A5(i){return function(e){e=Vp(e);var t=mk(e)?T5(e):void 0,n=t?t[0]:e.charAt(0),r=t?r5(t,1).join(""):e.slice(1);return n[i]()+r}}var _k=A5("toUpperCase");function P5(i,e,t,n){for(var r=-1,o=i==null?0:i.length;++r<o;)t=e(t,i[r],r,i);return t}function I5(i){return function(e){return i?.[e]}}var D5={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},R5=I5(D5),O5=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,F5="\\u0300-\\u036f",M5="\\ufe20-\\ufe2f",L5="\\u20d0-\\u20ff",B5=F5+M5+L5,N5="["+B5+"]",V5=RegExp(N5,"g");function z5(i){return i=Vp(i),i&&i.replace(O5,R5).replace(V5,"")}var H5=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function U5(i){return i.match(H5)||[]}var W5=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function j5(i){return W5.test(i)}var kk="\\ud800-\\udfff",$5="\\u0300-\\u036f",q5="\\ufe20-\\ufe2f",G5="\\u20d0-\\u20ff",K5=$5+q5+G5,Ck="\\u2700-\\u27bf",xk="a-z\\xdf-\\xf6\\xf8-\\xff",Z5="\\xac\\xb1\\xd7\\xf7",Y5="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",J5="\\u2000-\\u206f",X5=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ek="A-Z\\xc0-\\xd6\\xd8-\\xde",Q5="\\ufe0e\\ufe0f",Sk=Z5+Y5+J5+X5,Tk="['’]",Zv="["+Sk+"]",eP="["+K5+"]",Ak="\\d+",tP="["+Ck+"]",Pk="["+xk+"]",Ik="[^"+kk+Sk+Ak+Ck+xk+Ek+"]",nP="\\ud83c[\\udffb-\\udfff]",iP="(?:"+eP+"|"+nP+")",rP="[^"+kk+"]",Dk="(?:\\ud83c[\\udde6-\\uddff]){2}",Rk="[\\ud800-\\udbff][\\udc00-\\udfff]",Ad="["+Ek+"]",oP="\\u200d",Yv="(?:"+Pk+"|"+Ik+")",sP="(?:"+Ad+"|"+Ik+")",Jv="(?:"+Tk+"(?:d|ll|m|re|s|t|ve))?",Xv="(?:"+Tk+"(?:D|LL|M|RE|S|T|VE))?",Ok=iP+"?",Fk="["+Q5+"]?",aP="(?:"+oP+"(?:"+[rP,Dk,Rk].join("|")+")"+Fk+Ok+")*",lP="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cP="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",uP=Fk+Ok+aP,dP="(?:"+[tP,Dk,Rk].join("|")+")"+uP,hP=RegExp([Ad+"?"+Pk+"+"+Jv+"(?="+[Zv,Ad,"$"].join("|")+")",sP+"+"+Xv+"(?="+[Zv,Ad+Yv,"$"].join("|")+")",Ad+"?"+Yv+"+"+Jv,Ad+"+"+Xv,cP,lP,Ak,dP].join("|"),"g");function fP(i){return i.match(hP)||[]}function mP(i,e,t){return i=Vp(i),e=e,e===void 0?j5(i)?fP(i):U5(i):i.match(e)||[]}var pP="['’]",gP=RegExp(pP,"g");function bP(i){return function(e){return P5(mP(z5(e).replace(gP,"")),i,"")}}function vP(i,e){return i&&Hf(e,E_(e),i)}function wP(i,e){return i&&Hf(e,Np(e),i)}function yP(i,e){return Hf(i,S_(i),e)}var _P=Object.getOwnPropertySymbols,Mk=_P?function(i){for(var e=[];i;)BS(e,S_(i)),i=NS(i);return e}:LS;function kP(i,e){return Hf(i,Mk(i),e)}function CP(i){return VS(i,Np,Mk)}var xP=Object.prototype,EP=xP.hasOwnProperty;function SP(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&EP.call(i,"index")&&(t.index=i.index,t.input=i.input),t}function TP(i,e){var t=e?T_(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var AP=/\w*$/;function PP(i){var e=new i.constructor(i.source,AP.exec(i));return e.lastIndex=i.lastIndex,e}var Qv=Iv?Iv.prototype:void 0,ew=Qv?Qv.valueOf:void 0;function IP(i){return ew?Object(ew.call(i)):{}}var DP="[object Boolean]",RP="[object Date]",OP="[object Map]",FP="[object Number]",MP="[object RegExp]",LP="[object Set]",BP="[object String]",NP="[object Symbol]",VP="[object ArrayBuffer]",zP="[object DataView]",HP="[object Float32Array]",UP="[object Float64Array]",WP="[object Int8Array]",jP="[object Int16Array]",$P="[object Int32Array]",qP="[object Uint8Array]",GP="[object Uint8ClampedArray]",KP="[object Uint16Array]",ZP="[object Uint32Array]";function YP(i,e,t){var n=i.constructor;switch(e){case VP:return T_(i);case DP:case RP:return new n(+i);case zP:return TP(i,t);case HP:case UP:case WP:case jP:case $P:case qP:case GP:case KP:case ZP:return zS(i,t);case OP:return new n;case FP:case BP:return new n(i);case MP:return PP(i);case LP:return new n;case NP:return IP(i)}}var JP="[object Map]";function XP(i){return zp(i)&&C0(i)==JP}var tw=hp&&hp.isMap,QP=tw?A_(tw):XP,eI="[object Set]";function tI(i){return zp(i)&&C0(i)==eI}var nw=hp&&hp.isSet,nI=nw?A_(nw):tI,iI=1,rI=2,oI=4,Lk="[object Arguments]",sI="[object Array]",aI="[object Boolean]",lI="[object Date]",cI="[object Error]",Bk="[object Function]",uI="[object GeneratorFunction]",dI="[object Map]",hI="[object Number]",Nk="[object Object]",fI="[object RegExp]",mI="[object Set]",pI="[object String]",gI="[object Symbol]",bI="[object WeakMap]",vI="[object ArrayBuffer]",wI="[object DataView]",yI="[object Float32Array]",_I="[object Float64Array]",kI="[object Int8Array]",CI="[object Int16Array]",xI="[object Int32Array]",EI="[object Uint8Array]",SI="[object Uint8ClampedArray]",TI="[object Uint16Array]",AI="[object Uint32Array]",Qn={};Qn[Lk]=Qn[sI]=Qn[vI]=Qn[wI]=Qn[aI]=Qn[lI]=Qn[yI]=Qn[_I]=Qn[kI]=Qn[CI]=Qn[xI]=Qn[dI]=Qn[hI]=Qn[Nk]=Qn[fI]=Qn[mI]=Qn[pI]=Qn[gI]=Qn[EI]=Qn[SI]=Qn[TI]=Qn[AI]=!0;Qn[cI]=Qn[Bk]=Qn[bI]=!1;function Ld(i,e,t,n,r,o){var s,l=e&iI,c=e&rI,h=e&oI;if(t&&(s=r?t(i,n,r,o):t(i)),s!==void 0)return s;if(!ro(i))return i;var g=P_(i);if(g){if(s=SP(i),!l)return HS(i,s)}else{var b=C0(i),y=b==Bk||b==uI;if(US(i))return WS(i,l);if(b==Nk||b==Lk||y&&!r){if(s=c||y?{}:jS(i),!l)return c?kP(i,wP(s,i)):yP(i,vP(s,i))}else{if(!Qn[b])return r?i:{};s=YP(i,b,l)}}o||(o=new $S);var k=o.get(i);if(k)return k;o.set(i,s),nI(i)?i.forEach(function(L){s.add(Ld(L,e,t,L,i,o))}):QP(i)&&i.forEach(function(L,M){s.set(M,Ld(L,e,t,M,i,o))});var x=h?c?CP:GS:c?Np:E_,D=g?void 0:x(i);return qS(D||i,function(L,M){D&&(M=L,L=i[M]),I_(s,M,Ld(L,e,t,M,i,o))}),s}var PI=4;function Vk(i){return Ld(i,PI)}var II=1,DI=4;function Ss(i){return Ld(i,II|DI)}var RI=1,OI=4;function I0(i,e){return e=typeof e=="function"?e:void 0,Ld(i,RI|OI,e)}var FI=x_(function(i,e,t,n){KS(i,e,t,n)});function MI(i){var e=i==null?0:i.length;return e?i[e-1]:void 0}var zk=/[\\^$.*+?()[\]{}|]/g,LI=RegExp(zk.source);function Hk(i){return i=Vp(i),i&&LI.test(i)?i.replace(zk,"\\$&"):i}var BI="[object String]";function iw(i){return typeof i=="string"||!P_(i)&&zp(i)&&ZS(i)==BI}function NI(i,e){return e.length<2?i:YS(i,fk(e,0,-1))}function gu(i){return zp(i)&&i.nodeType===1&&!Go(i)}function Vd(i,e){return D_(i,e)}function VI(i,e,t){t=typeof t=="function"?t:void 0;var n=t?t(i,e):void 0;return n===void 0?D_(i,e,void 0,t):!!n}function zI(i,e){var t={};return e=JS(e),XS(i,function(n,r,o){QS(t,r,e(n,r,o))}),t}function HI(i,e){return e=R_(e,i),i=NI(i,e),i==null||delete i[O_(MI(e))]}function UI(i,e,t,n){if(!ro(i))return i;e=R_(e,i);for(var r=-1,o=e.length,s=o-1,l=i;l!=null&&++r<o;){var c=O_(e[r]),h=t;if(c==="__proto__"||c==="constructor"||c==="prototype")return i;if(r!=s){var g=l[c];h=void 0,h===void 0&&(h=ro(g)?g:eT(e[r+1])?[]:{})}I_(l,c,h),l=l[c]}return i}function WI(i,e,t){return i==null?i:UI(i,e,t)}var jI=bP(function(i,e,t){return i+(t?" ":"")+_k(e)});function $I(i,e){return i==null?!0:HI(i,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const bp=Symbol("observableProperties"),Gp=Symbol("boundObservables"),vp=Symbol("boundProperties"),md=Symbol("decoratedMethods"),rw=Symbol("decoratedOriginal"),Uk=Vn(Yn());function Vn(i){if(!i)return Uk;class e extends i{set(n,r){if(ro(n)){Object.keys(n).forEach(s=>{this.set(s,n[s])},this);return}qg(this);const o=this[bp];if(n in this&&!o.has(n))throw new be("observable-set-cannot-override",this);Object.defineProperty(this,n,{enumerable:!0,configurable:!0,get(){return o.get(n)},set(s){const l=o.get(n);let c=this.fire(`set:${n}`,n,s,l);c===void 0&&(c=s),(l!==c||!o.has(n))&&(o.set(n,c),this.fire(`change:${n}`,n,c,l))}}),this[n]=r}bind(...n){if(!n.length||!ow(n))throw new be("observable-bind-wrong-properties",this);if(new Set(n).size!==n.length)throw new be("observable-bind-duplicate-properties",this);qg(this);const r=this[vp];n.forEach(s=>{if(r.has(s))throw new be("observable-bind-rebind",this)});const o=new Map;return n.forEach(s=>{const l={property:s,to:[]};r.set(s,l),o.set(s,l)}),{to:qI,toMany:GI,_observable:this,_bindProperties:n,_to:[],_bindings:o}}unbind(...n){if(!this[bp])return;const r=this[vp],o=this[Gp];if(n.length){if(!ow(n))throw new be("observable-unbind-wrong-properties",this);n.forEach(s=>{const l=r.get(s);l&&(l.to.forEach(([c,h])=>{const g=o.get(c),b=g[h];b.delete(l),b.size||delete g[h],Object.keys(g).length||(o.delete(c),this.stopListening(c,"change"))}),r.delete(s))})}else o.forEach((s,l)=>{this.stopListening(l,"change")}),o.clear(),r.clear()}decorate(n){qg(this);const r=this[n];if(!r)throw new be("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:n});this.on(n,(o,s)=>{o.return=r.apply(this,s)}),this[n]=function(...o){return this.fire(n,o)},this[n][rw]=r,this[md]||(this[md]=[]),this[md].push(n)}stopListening(n,r,o){if(!n&&this[md]){for(const s of this[md])this[s]=this[s][rw];delete this[md]}super.stopListening(n,r,o)}}return e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Vn[i]=Uk.prototype[i]});function qg(i){i[bp]||(Object.defineProperty(i,bp,{value:new Map}),Object.defineProperty(i,Gp,{value:new Map}),Object.defineProperty(i,vp,{value:new Map}))}function qI(...i){const e=ZI(...i),t=Array.from(this._bindings.keys()),n=t.length;if(!e.callback&&e.to.length>1)throw new be("observable-bind-to-no-callback",this);if(n>1&&e.callback)throw new be("observable-bind-to-extra-callback",this);e.to.forEach(r=>{if(r.properties.length&&r.properties.length!==n)throw new be("observable-bind-to-properties-length",this);r.properties.length||(r.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),XI(this._observable,this._to),JI(this),this._bindProperties.forEach(r=>{Wk(this._observable,r)})}function GI(i,e,t){if(this._bindings.size>1)throw new be("observable-bind-to-many-not-one-binding",this);this.to(...KI(i,e),t)}function KI(i,e){const t=i.map(n=>[n,e]);return Array.prototype.concat.apply([],t)}function ow(i){return i.every(e=>typeof e=="string")}function ZI(...i){if(!i.length)throw new be("observable-bind-to-parse-error",null);const e={to:[]};let t;return typeof i[i.length-1]=="function"&&(e.callback=i.pop()),i.forEach(n=>{if(typeof n=="string")t.properties.push(n);else if(typeof n=="object")t={observable:n,properties:[]},e.to.push(t);else throw new be("observable-bind-to-parse-error",null)}),e}function YI(i,e,t,n){const r=i[Gp],o=r.get(t),s=o||{};s[n]||(s[n]=new Set),s[n].add(e),o||r.set(t,s)}function JI(i){let e;i._bindings.forEach((t,n)=>{i._to.forEach(r=>{e=r.properties[t.callback?0:i._bindProperties.indexOf(n)],t.to.push([r.observable,e]),YI(i._observable,t,r.observable,e)})})}function Wk(i,e){const n=i[vp].get(e);let r;n.callback?r=n.callback.apply(i,n.to.map(o=>o[0][o[1]])):(r=n.to[0],r=r[0][r[1]]),Object.prototype.hasOwnProperty.call(i,e)?i[e]=r:i.set(e,r)}function XI(i,e){e.forEach(t=>{const n=i[Gp];let r;n.get(t.observable)||i.listenTo(t.observable,"change",(o,s)=>{r=n.get(t.observable)[s],r&&r.forEach(l=>{Wk(i,l.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jk{constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Vb(i){let e=0;for(const t of i)e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function io(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)if(i[n]!=e[n])return n;return i.length==e.length?"same":i.length<e.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function es(i){return!!(i&&i[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Pr(i,e,t={},n=[]){const r=t&&t.xmlns,o=r?i.createElementNS(r,e):i.createElement(e);for(const s in t)o.setAttribute(s,t[s]);(iw(n)||!es(n))&&(n=[n]);for(let s of n)iw(s)&&(s=i.createTextNode(s)),o.appendChild(s);return o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $k{constructor(e,t){this._config=Object.create(null),t&&this.define(sw(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,n,r=!1){if(Go(t)){this._setObjectToTarget(e,t,r);return}const o=t.split(".");t=o.pop();for(const s of o)Go(e[s])||(e[s]=Object.create(null)),e=e[s];if(Go(n)){Go(e[t])||(e[t]=Object.create(null)),e=e[t],this._setObjectToTarget(e,n,r);return}r&&typeof e[t]<"u"||(e[t]=n)}_getFromSource(e,t){const n=t.split(".");t=n.pop();for(const r of n){if(!Go(e[r])){e=null;break}e=e[r]}return e?sw(e[t]):void 0}_setObjectToTarget(e,t,n){Object.keys(t).forEach(r=>{this._setToTarget(e,r,t[r],n)})}}function sw(i){return I0(i,QI)}function QI(i){return gu(i)||typeof i=="function"?i:void 0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vc(i){if(i){if(i.defaultView)return i instanceof i.defaultView.Document;if(i.ownerDocument&&i.ownerDocument.defaultView)return i instanceof i.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wp(i){const e=Object.prototype.toString.apply(i);return e=="[object Window]"||e=="[object global]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const qk=Bo(Yn());function Bo(i){if(!i)return qk;class e extends i{listenTo(n,r,o,s={}){if(vc(n)||wp(n)){const l={capture:!!s.useCapture,passive:!!s.usePassive},c=this._getProxyEmitter(n,l)||new eD(n,l);this.listenTo(c,r,o,s)}else super.listenTo(n,r,o,s)}stopListening(n,r,o){if(vc(n)||wp(n)){const s=this._getAllProxyEmitters(n);for(const l of s)this.stopListening(l,r,o)}else super.stopListening(n,r,o)}_getProxyEmitter(n,r){return e5(this,Gk(n,r))}_getAllProxyEmitters(n){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(r=>this._getProxyEmitter(n,r)).filter(r=>!!r)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Bo[i]=qk.prototype[i]});class eD extends Yn(){constructor(e,t){super(),ck(this,Gk(e,t)),this._domNode=e,this._options=t}attach(e){if(this._domListeners&&this._domListeners[e])return;const t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,n){this.attach(e),Yn().prototype._addEventListener.call(this,e,t,n)}_removeEventListener(e,t){Yn().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){const t=n=>{this.fire(e,n)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}}function tD(i){return i["data-ck-expando"]||(i["data-ck-expando"]=xs())}function Gk(i,e){let t=tD(i);for(const n of Object.keys(e).sort())e[n]&&(t+="-"+n);return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function nD(i){const e=[];let t=i;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function iD(i){return i instanceof HTMLTextAreaElement?i.value:i.innerHTML}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Kk(i){const e=i.ownerDocument.defaultView.getComputedStyle(i);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zk(i){if(!i.target)return null;const e=i.target.ownerDocument,t=i.clientX,n=i.clientY;let r=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(t,n)?r=e.caretRangeFromPoint(t,n):i.rangeParent&&(r=e.createRange(),r.setStart(i.rangeParent,i.rangeOffset),r.collapse(!0)),r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Pi(i){return Object.prototype.toString.call(i)=="[object Text]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Kp(i){return Object.prototype.toString.apply(i)=="[object Range]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yk(i){return!i||!i.parentNode||i.offsetParent===_t.document.body?null:i.offsetParent}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Jk=["top","right","bottom","left","width","height"];class Jt{constructor(e){const t=Kp(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),zb(e)||t)if(t){const n=Jt.getDomRangeRects(e);Tm(this,Jt.getBoundingRect(n))}else Tm(this,e.getBoundingClientRect());else if(wp(e)){const{innerWidth:n,innerHeight:r}=e;Tm(this,{top:0,right:n,bottom:r,left:0,width:n,height:r})}else Tm(this,e)}clone(){return new Jt(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const n=new Jt(t);return n._source=this._source,n}}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(aw(e))return t;let n=e,r=e.parentNode||e.commonAncestorContainer,o;for(;r&&!aw(r);){const s=rD(r)==="visible";n instanceof HTMLElement&&lw(n)==="absolute"&&(o=n);const l=lw(r);if(s||o&&(l==="relative"&&s||l!=="relative")){n=r,r=r.parentNode;continue}const c=new Jt(r),h=t.getIntersection(c);if(h)h.getArea()<t.getArea()&&(t=h);else return null;n=r,r=r.parentNode}return t}isEqual(e){for(const t of Jk)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:t}=_t.window,n=this.clone().moveBy(e,t);if(zb(n._source)){const r=Yk(n._source);r&&oD(n,r)}return n}excludeScrollbarsAndBorders(){const e=this._source;let t,n,r;if(wp(e))t=e.innerWidth-e.document.documentElement.clientWidth,n=e.innerHeight-e.document.documentElement.clientHeight,r=e.getComputedStyle(e.document.documentElement).direction;else{const o=Kk(e);t=e.offsetWidth-e.clientWidth-o.left-o.right,n=e.offsetHeight-e.clientHeight-o.top-o.bottom,r=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,r==="ltr"?this.right-=t:this.left+=t,this.height-=n,this.bottom-=n,this}static getDomRangeRects(e){const t=[],n=Array.from(e.getClientRects());if(n.length)for(const r of n)t.push(new Jt(r));else{let r=e.startContainer;Pi(r)&&(r=r.parentNode);const o=new Jt(r.getBoundingClientRect());o.right=o.left,o.width=0,t.push(o)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let n=0;for(const r of e)n++,t.left=Math.min(t.left,r.left),t.top=Math.min(t.top,r.top),t.right=Math.max(t.right,r.right),t.bottom=Math.max(t.bottom,r.bottom);return n==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Jt(t))}}function Tm(i,e){for(const t of Jk)i[t]=e[t]}function aw(i){return zb(i)?i===i.ownerDocument.body:!1}function zb(i){return i!==null&&typeof i=="object"&&i.nodeType===1&&typeof i.getBoundingClientRect=="function"}function lw(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).position:"static"}function rD(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).overflow:"visible"}function oD(i,e){const t=new Jt(e),n=Kk(e);let r=0,o=0;r-=t.left,o-=t.top,r+=e.scrollLeft,o+=e.scrollTop,r-=n.left,o-=n.top,i.moveBy(r,o)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ei{constructor(e,t){ei._observerInstance||ei._createObserver(),this._element=e,this._callback=t,ei._addElementCallback(e,t),ei._observerInstance.observe(e)}get element(){return this._element}destroy(){ei._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){ei._elementCallbacks||(ei._elementCallbacks=new Map);let n=ei._elementCallbacks.get(e);n||(n=new Set,ei._elementCallbacks.set(e,n)),n.add(t)}static _deleteElementCallback(e,t){const n=ei._getElementCallbacks(e);n&&(n.delete(t),n.size||(ei._elementCallbacks.delete(e),ei._observerInstance.unobserve(e))),ei._elementCallbacks&&!ei._elementCallbacks.size&&(ei._observerInstance=null,ei._elementCallbacks=null)}static _getElementCallbacks(e){return ei._elementCallbacks?ei._elementCallbacks.get(e):null}static _createObserver(){ei._observerInstance=new _t.window.ResizeObserver(e=>{for(const t of e){const n=ei._getElementCallbacks(t.target);if(n)for(const r of n)r(t)}})}}ei._observerInstance=null;ei._elementCallbacks=null;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cw(i,e){i instanceof HTMLTextAreaElement&&(i.value=e),i.innerHTML=e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yd(i){return e=>e+i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function rf(i){let e=0;for(;i.previousSibling;)i=i.previousSibling,e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xk(i,e,t){i.insertBefore(t,i.childNodes[e]||null)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cf(i){return i&&i.nodeType===Node.COMMENT_NODE}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qk(i){try{_t.document.createAttribute(i)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wl(i){return i?Pi(i)?wl(i.parentElement):i.getClientRects?!!i.getClientRects().length:!1:!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zp({element:i,target:e,positions:t,limiter:n,fitInViewport:r,viewportOffsetConfig:o}){fp(e)&&(e=e()),fp(n)&&(n=n());const s=Yk(i),l=sD(o),c=new Jt(i),h=uw(e,l);let g;if(!h||!l.getIntersection(h))return null;const b={targetRect:h,elementRect:c,positionedElementAncestor:s,viewportRect:l};if(!n&&!r)g=new eC(t[0],b);else{if(n){const y=uw(n,l);y&&(b.limiterRect=y)}g=aD(t,b)}return g}function uw(i,e){const t=new Jt(i).getVisible();return t?t.getIntersection(e):null}function sD(i){i=Object.assign({top:0,bottom:0,left:0,right:0},i);const e=new Jt(_t.window);return e.top+=i.top,e.height-=i.top,e.bottom-=i.bottom,e.height-=i.bottom,e}function aD(i,e){const{elementRect:t}=e,n=t.getArea(),r=i.map(l=>new eC(l,e)).filter(l=>!!l.name);let o=0,s=null;for(const l of r){const{limiterIntersectionArea:c,viewportIntersectionArea:h}=l;if(c===n)return l;const g=h**2+c**2;g>o&&(o=g,s=l)}return s}class eC{constructor(e,t){const n=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!n)return;const{left:r,top:o,name:s,config:l}=n;this.name=s,this.config=l,this._positioningFunctionCoordinates={left:r,top:o},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function dw(i){const e=i.parentNode;e&&e.removeChild(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lD({target:i,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:n,forceScroll:r}){const o=D0(i);let s=o,l=null;for(e=dD(e);s;){let c;s==o?c=hw(i):c=hw(l),uD({parent:c,getRect:()=>fw(i,s),alignToTop:n,ancestorOffset:t,forceScroll:r});const h=fw(i,s);if(cD({window:s,rect:h,viewportOffset:e,alignToTop:n,forceScroll:r}),s.parent!=s){if(l=s.frameElement,s=s.parent,!l)return}else s=null}}function cD({window:i,rect:e,alignToTop:t,forceScroll:n,viewportOffset:r}){const o=e.clone().moveBy(0,r.bottom),s=e.clone().moveBy(0,-r.top),l=new Jt(i).excludeScrollbarsAndBorders(),c=[s,o],h=t&&n,g=c.every(D=>l.contains(D));let{scrollX:b,scrollY:y}=i;const k=b,x=y;h?y-=l.top-e.top+r.top:g||(nC(s,l)?y-=l.top-e.top+r.top:tC(o,l)&&(t?y+=e.top-l.top-r.top:y+=e.bottom-l.bottom+r.bottom)),g||(iC(e,l)?b-=l.left-e.left+r.left:rC(e,l)&&(b+=e.right-l.right+r.right)),(b!=k||y!==x)&&i.scrollTo(b,y)}function uD({parent:i,getRect:e,alignToTop:t,forceScroll:n,ancestorOffset:r=0,limiterElement:o}){const s=D0(i),l=t&&n;let c,h,g;const b=o||s.document.body;for(;i!=b;)h=e(),c=new Jt(i).excludeScrollbarsAndBorders(),g=c.contains(h),l?i.scrollTop-=c.top-h.top+r:g||(nC(h,c)?i.scrollTop-=c.top-h.top+r:tC(h,c)&&(t?i.scrollTop+=h.top-c.top-r:i.scrollTop+=h.bottom-c.bottom+r)),g||(iC(h,c)?i.scrollLeft-=c.left-h.left+r:rC(h,c)&&(i.scrollLeft+=h.right-c.right+r)),i=i.parentNode}function tC(i,e){return i.bottom>e.bottom}function nC(i,e){return i.top<e.top}function iC(i,e){return i.left<e.left}function rC(i,e){return i.right>e.right}function D0(i){return Kp(i)?i.startContainer.ownerDocument.defaultView:i.ownerDocument.defaultView}function hw(i){if(Kp(i)){let e=i.commonAncestorContainer;return Pi(e)&&(e=e.parentNode),e}else return i.parentNode}function fw(i,e){const t=D0(i),n=new Jt(i);if(t===e)return n;{let r=t;for(;r!=e;){const o=r.frameElement,s=new Jt(o).excludeScrollbarsAndBorders();n.moveBy(s.left,s.top),r=r.parent}}return n}function dD(i){return typeof i=="number"?{top:i,bottom:i,left:i,right:i}:i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hD={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},fD={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},mw={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},Cn=vD(),mD=Object.fromEntries(Object.entries(Cn).map(([i,e])=>{let t;return e in mw?t=mw[e]:t=i.charAt(0).toUpperCase()+i.slice(1),[e,t]}));function zd(i){let e;if(typeof i=="string"){if(e=Cn[i.toLowerCase()],!e)throw new be("keyboard-unknown-key",null,{key:i})}else e=i.keyCode+(i.altKey?Cn.alt:0)+(i.ctrlKey?Cn.ctrl:0)+(i.shiftKey?Cn.shift:0)+(i.metaKey?Cn.cmd:0);return e}function R0(i){return typeof i=="string"&&(i=wD(i)),i.map(e=>typeof e=="string"?gD(e):e).reduce((e,t)=>t+e,0)}function yp(i){let e=R0(i);return Object.entries(Yt.isMac||Yt.isiOS?hD:fD).reduce((r,[o,s])=>(e&Cn[o]&&(e&=~Cn[o],r+=s),r),"")+(e?mD[e]:"")}function pD(i){return i==Cn.arrowright||i==Cn.arrowleft||i==Cn.arrowup||i==Cn.arrowdown}function O0(i,e){const t=e==="ltr";switch(i){case Cn.arrowleft:return t?"left":"right";case Cn.arrowright:return t?"right":"left";case Cn.arrowup:return"up";case Cn.arrowdown:return"down"}}function gD(i){if(i.endsWith("!"))return zd(i.slice(0,-1));const e=zd(i);return(Yt.isMac||Yt.isiOS)&&e==Cn.ctrl?Cn.cmd:e}function bD(i,e){const t=O0(i,e);return t==="down"||t==="right"}function vD(){const i={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const t=String.fromCharCode(e);i[t.toLowerCase()]=e}for(let e=48;e<=57;e++)i[e-48]=e;for(let e=112;e<=123;e++)i["f"+(e-111)]=e;return Object.assign(i,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),i}function wD(i){return i.split("+").map(e=>e.trim())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yD=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function pw(i){return yD.includes(i)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function An(i){return Array.isArray(i)?i:[i]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore else -- @preserve */_t.window.CKEDITOR_TRANSLATIONS||(_t.window.CKEDITOR_TRANSLATIONS={});function _D(i,e,t=1,n){if(typeof t!="number")throw new be("translation-service-quantity-not-a-number",null,{quantity:t});const r=n||_t.window.CKEDITOR_TRANSLATIONS,o=xD(r);o===1&&(i=Object.keys(r)[0]);const s=e.id||e.string;if(o===0||!CD(i,s,r))return t!==1?e.plural:e.string;const l=r[i].dictionary,c=r[i].getPluralForm||(b=>b===1?0:1),h=l[s];if(typeof h=="string")return h;const g=Number(c(t));return h[g]}function kD(i){return Array.isArray(i)?i.reduce((e,t)=>x0(e,t)):i}function CD(i,e,t){return!!t[i]&&!!t[i].dictionary[e]}function xD(i){return Object.keys(i).length}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ED{constructor({uiLanguage:e="en",contentLanguage:t,translations:n}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=pw(this.uiLanguage),this.contentLanguageDirection=pw(this.contentLanguage),this.translations=kD(n),this.t=(r,o)=>this._t(r,o)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=An(t),typeof e=="string"&&(e={string:e});const r=!!e.plural?t[0]:1,o=_D(this.uiLanguage,e,r,this.translations);return SD(o,t)}}function SD(i,e){return i.replace(/%(\d+)/g,(t,n)=>n<e.length?e[n]:t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Or extends Yn(){constructor(e={},t={}){super();const n=es(e);if(n||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new be("collection-add-item-invalid-index",this);let n=0;for(const r of e){const o=this._getItemIdBeforeAdding(r),s=t+n;this._items.splice(s,0,r),this._itemMap.set(o,r),this.fire("add",r,s),n++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new be("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const t=this._idProperty,n=e[t];return n&&this._itemMap.has(n)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){const[t,n]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:n}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new be("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(n=>new t(n))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(n=>n[t])}}}_setUpBindToBinding(e){const t=this._bindToCollection,n=(r,o,s)=>{const l=t._bindToCollection==this,c=t._bindToInternalToExternalMap.get(o);if(l&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const h=e(o);if(!h){this._skippedIndexesFromExternal.push(s);return}let g=s;for(const b of this._skippedIndexesFromExternal)s>b&&g--;for(const b of t._skippedIndexesFromExternal)g>=b&&g++;this._bindToExternalToInternalMap.set(o,h),this._bindToInternalToExternalMap.set(h,o),this.add(h,g);for(let b=0;b<t._skippedIndexesFromExternal.length;b++)g<=t._skippedIndexesFromExternal[b]&&t._skippedIndexesFromExternal[b]++}};for(const r of t)n(null,r,t.getIndex(r));this.listenTo(t,"add",n),this.listenTo(t,"remove",(r,o,s)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,h)=>(s<h&&c.push(h-1),s>h&&c.push(h),c),[])})}_getItemIdBeforeAdding(e){const t=this._idProperty;let n;if(t in e){if(n=e[t],typeof n!="string")throw new be("collection-add-invalid-id",this);if(this.get(n))throw new be("collection-add-item-already-exists",this)}else e[t]=n=xs();return n}_remove(e){let t,n,r,o=!1;const s=this._idProperty;if(typeof e=="string"?(n=e,r=this._itemMap.get(n),o=!r,r&&(t=this._items.indexOf(r))):typeof e=="number"?(t=e,r=this._items[t],o=!r,r&&(n=r[s])):(r=e,n=r[s],t=this._items.indexOf(r),o=t==-1||!this._itemMap.get(n)),o)throw new be("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(n);const l=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(l),this.fire("remove",r,t),[r,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Wi(i){const e=i.next();return e.done?null:e.value}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jn extends Bo(Vn()){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}add(e){if(this._elements.has(e))throw new be("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class di{constructor(){this._listener=new(Bo())}listenTo(e){this._listener.listenTo(e,"keydown",(t,n)=>{this._listener.fire("_keydown:"+zd(n),n)})}set(e,t,n={}){const r=R0(e),o=n.priority;this._listener.listenTo(this._listener,"_keydown:"+r,(s,l)=>{n.filter&&!n.filter(l)||(t(l,()=>{l.preventDefault(),l.stopPropagation(),s.stop()}),s.return=!0)},{priority:o})}press(e){return!!this._listener.fire("_keydown:"+zd(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function TD(i){const e=new Map;for(const t in i)e.set(t,i[t]);return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ta(i){return es(i)?new Map(i):TD(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const AD=1e4;function PD(i,e,t,n){if(Math.max(e.length,i.length)>AD)return i.slice(0,t).concat(e).concat(i.slice(t+n,i.length));{const r=Array.from(i);return r.splice(t,n,...e),r}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function F0(i,e){let t;function n(...r){n.cancel(),t=setTimeout(()=>i(...r),e)}return n.cancel=()=>{clearTimeout(t)},n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ID(i){function e(b){return b.length>=40&&b.length<=255?"VALID":"INVALID"}if(!i)return"INVALID";let t="";try{t=atob(i)}catch{return"INVALID"}const n=t.split("-"),r=n[0],o=n[1];if(!o)return e(i);try{atob(o)}catch{try{if(atob(r),!atob(r).length)return e(i)}catch{return e(i)}}if(r.length<40||r.length>255)return"INVALID";let s="";try{atob(r),s=atob(o)}catch{return"INVALID"}if(s.length!==8)return"INVALID";const l=Number(s.substring(0,4)),c=Number(s.substring(4,6))-1,h=Number(s.substring(6,8)),g=new Date(l,c,h);return g<QA||isNaN(Number(g))?"INVALID":"VALID"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function DD(i){return!!i&&i.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i)}function RD(i){return!!i&&i.length==1&&/[\ud800-\udbff]/.test(i)}function OD(i){return!!i&&i.length==1&&/[\udc00-\udfff]/.test(i)}function M0(i,e){return RD(i.charAt(e-1))&&OD(i.charAt(e))}function L0(i,e){return DD(i.charAt(e))}const FD=MD();function oC(i,e){const t=String(i).matchAll(FD);return Array.from(t).some(n=>n.index<e&&e<n.index+n[0].length)}function MD(){const i=[/\p{Emoji}[\u{E0020}-\u{E007E}]+\u{E007F}/u,/\p{Emoji}\u{FE0F}?\u{20E3}/u,/\p{Emoji}\u{FE0F}/u,/(?=\p{General_Category=Other_Symbol})\p{Emoji}\p{Emoji_Modifier}*/u],e=/\p{Regional_Indicator}{2}/u.source,t="(?:"+i.map(r=>r.source).join("|")+")",n=`${e}|${t}(?:‍${t})*`;return new RegExp(n,"ug")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wr extends Or{constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(t,n,r)=>{this._renderViewIntoCollectionParent(n,r)}),this.on("remove",(t,n)=>{n.element&&this._parentElement&&n.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!LD(e))throw new be("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const n of this)for(const r of e)n.delegate(r).to(t);this.on("add",(n,r)=>{for(const o of e)r.delegate(o).to(t)}),this.on("remove",(n,r)=>{for(const o of e)r.stopDelegating(o,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}}function LD(i){return i.every(e=>typeof e=="string")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const BD="http://www.w3.org/1999/xhtml";class Mo extends Yn(){constructor(e){super(),Object.assign(this,bw(gw(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=yw(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new be("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(const n of t.children)_p(n)?yield n:B0(n)&&(yield*e(n))}yield*e(this)}static bind(e,t){return{to(n,r){return new ND({eventNameOrFunction:n,attribute:n,observable:e,emitter:t,callback:r})},if(n,r,o){return new sC({observable:e,emitter:t,attribute:n,valueIfTrue:r,callback:o})}}}static extend(e,t){if(e._isRendered)throw new be("template-extend-render",[this,e]);uC(e,bw(gw(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new be("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||BD,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),ep(this.text)?this._bindToObservable({schema:this.text,updater:zD(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;const t=e.node,n=e.revertData;for(const r in this.attributes){const o=t.getAttribute(r),s=this.attributes[r];n&&(n.attributes[r]=o);const l=ww(s)?s[0].ns:null;if(ep(s)){const c=ww(s)?s[0].value:s;n&&_w(r)&&c.unshift(o),this._bindToObservable({schema:c,updater:HD(t,r,l),data:e})}else if(r=="style"&&typeof s[0]!="string")this._renderStyleAttribute(s[0],e);else{n&&o&&_w(r)&&s.unshift(o);const c=s.map(h=>h&&(h.value||h)).reduce((h,g)=>h.concat(g),[]).reduce(cC,"");Hd(c)||t.setAttributeNS(l,r,c)}}}_renderStyleAttribute(e,t){const n=t.node;for(const r in e){const o=e[r];ep(o)?this._bindToObservable({schema:[o],updater:UD(n,r),data:t}):n.style[r]=o}}_renderElementChildren(e){const t=e.node,n=e.intoFragment?document.createDocumentFragment():t,r=e.isApplying;let o=0;for(const s of this.children)if(N0(s)){if(!r){s.setParent(t);for(const l of s)n.appendChild(l.element)}}else if(_p(s))r||(s.isRendered||s.render(),n.appendChild(s.element));else if(vc(s))n.appendChild(s);else if(r){const l=e.revertData,c=yw();l.children.push(c),s._renderNode({intoFragment:!1,node:n.childNodes[o++],isApplying:!0,revertData:c})}else n.appendChild(s.render());e.intoFragment&&t.appendChild(n)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const n=this.eventListeners[t].map(r=>{const[o,s]=t.split("@");return r.activateDomEventListener(o,s,e)});e.revertData&&e.revertData.bindings.push(n)}}_bindToObservable({schema:e,updater:t,data:n}){const r=n.revertData;aC(e,t,n);const o=e.filter(s=>!Hd(s)).filter(s=>s.observable).map(s=>s.activateAttributeListener(e,t,n));r&&r.bindings.push(o)}_revertTemplateFromNode(e,t){for(const r of t.bindings)for(const o of r)o();if(t.text){e.textContent=t.text;return}const n=e;for(const r in t.attributes){const o=t.attributes[r];o===null?n.removeAttribute(r):n.setAttribute(r,o)}for(let r=0;r<t.children.length;++r)this._revertTemplateFromNode(n.childNodes[r],t.children[r])}}class jf{constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,n){const r=()=>aC(e,t,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,r),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,r)}}}class ND extends jf{constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,n){const r=(o,s)=>{(!t||s.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(s):this.observable.fire(this.eventNameOrFunction,s))};return this.emitter.listenTo(n.node,e,r),()=>{this.emitter.stopListening(n.node,e,r)}}}class sC extends jf{constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){const t=super.getValue(e);return Hd(t)?!1:this.valueIfTrue||!0}}function ep(i){return i?(i.value&&(i=i.value),Array.isArray(i)?i.some(ep):i instanceof jf):!1}function VD(i,e){return i.map(t=>t instanceof jf?t.getValue(e):t)}function aC(i,e,{node:t}){const n=VD(i,t);let r;i.length==1&&i[0]instanceof sC?r=n[0]:r=n.reduce(cC,""),Hd(r)?e.remove():e.set(r)}function zD(i){return{set(e){i.textContent=e},remove(){i.textContent=""}}}function HD(i,e,t){return{set(n){i.setAttributeNS(t,e,n)},remove(){i.removeAttributeNS(t,e)}}}function UD(i,e){return{set(t){i.style[e]=t},remove(){i.style[e]=null}}}function gw(i){return I0(i,t=>{if(t&&(t instanceof jf||B0(t)||_p(t)||N0(t)))return t})}function bw(i){if(typeof i=="string"?i=$D(i):i.text&&qD(i),i.on&&(i.eventListeners=jD(i.on),delete i.on),!i.text){i.attributes&&WD(i.attributes);const e=[];if(i.children)if(N0(i.children))e.push(i.children);else for(const t of i.children)B0(t)||_p(t)||vc(t)?e.push(t):e.push(new Mo(t));i.children=e}return i}function WD(i){for(const e in i)i[e].value&&(i[e].value=An(i[e].value)),lC(i,e)}function jD(i){for(const e in i)lC(i,e);return i}function $D(i){return{text:[i]}}function qD(i){i.text=An(i.text)}function lC(i,e){i[e]=An(i[e])}function cC(i,e){return Hd(e)?i:Hd(i)?e:`${i} ${e}`}function vw(i,e){for(const t in e)i[t]?i[t].push(...e[t]):i[t]=e[t]}function uC(i,e){if(e.attributes&&(i.attributes||(i.attributes={}),vw(i.attributes,e.attributes)),e.eventListeners&&(i.eventListeners||(i.eventListeners={}),vw(i.eventListeners,e.eventListeners)),e.text&&i.text.push(...e.text),e.children&&e.children.length){if(i.children.length!=e.children.length)throw new be("ui-template-extend-children-mismatch",i);let t=0;for(const n of e.children)uC(i.children[t++],n)}}function Hd(i){return!i&&i!==0}function _p(i){return i instanceof mt}function B0(i){return i instanceof Mo}function N0(i){return i instanceof Wr}function ww(i){return ro(i[0])&&i[0].ns}function yw(){return{children:[],bindings:[],attributes:{}}}function _w(i){return i=="class"||i=="style"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let mt=class extends Bo(Vn()){constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Or,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,n)=>{n.locale=e,n.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Mo.bind(this,this)}createCollection(e){const t=new Wr(e);return this._viewCollections.add(t),t}registerChild(e){es(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){es(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new Mo(e)}extendTemplate(e){Mo.extend(this.template,e)}render(){if(this.isRendered)throw new be("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cu({emitter:i,activator:e,callback:t,contextElements:n,listenerOptions:r}){i.listenTo(document,"mousedown",(o,s)=>{if(!e())return;const l=typeof s.composedPath=="function"?s.composedPath():[],c=typeof n=="function"?n():n;for(const h of c)if(h.contains(s.target)||l.includes(h))return;t()},r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yp(i){class e extends i{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...n){super(...n),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xu({view:i}){i.listenTo(i.element,"submit",(e,t)=>{t.preventDefault(),i.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function V0({keystrokeHandler:i,focusTracker:e,gridItems:t,numberOfColumns:n,uiLanguageDirection:r}){const o=typeof n=="number"?()=>n:n;i.set("arrowright",s((h,g)=>r==="rtl"?c(h,g.length):l(h,g.length))),i.set("arrowleft",s((h,g)=>r==="rtl"?l(h,g.length):c(h,g.length))),i.set("arrowup",s((h,g)=>{let b=h-o();return b<0&&(b=h+o()*Math.floor(g.length/o()),b>g.length-1&&(b-=o())),b})),i.set("arrowdown",s((h,g)=>{let b=h+o();return b>g.length-1&&(b=h%o()),b}));function s(h){return g=>{const b=t.find(x=>x.element===e.focusedElement),y=t.getIndex(b),k=h(y,t);t.get(k).focus(),g.stopPropagation(),g.preventDefault()}}function l(h,g){return h===g-1?0:h+1}function c(h,g){return h===0?g-1:h-1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fe extends Vn(){constructor(e){super(),this._disableStack=new Set,this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",kw,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",kw),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function kw(i){i.return=!1,i.stop()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wt extends Vn(){constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;const n=e.model.document.selection,o=!(n.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(n);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",Cw,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",Cw),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function Cw(i){i.return=!1,i.stop()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xw extends Wt{constructor(){super(...arguments),this._childCommandsDefinitions=[]}refresh(){}execute(...e){const t=this._getFirstEnabledCommand();return!!t&&t.execute(e)}registerChildCommand(e,t={}){sk(this._childCommandsDefinitions,{command:e,priority:t.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:t})=>t.isEnabled);return e&&e.command}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dC extends Yn(){constructor(e,t=[],n=[]){super(),this._plugins=new Map,this._context=e,this._availablePlugins=new Map;for(const r of t)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(const[r,o]of n)this._contextPlugins.set(r,o),this._contextPlugins.set(o,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let n=e;throw typeof e=="function"&&(n=e.pluginName||e.name),new be("plugincollection-plugin-not-loaded",this._context,{plugin:n})}return t}has(e){return this._plugins.has(e)}init(e,t=[],n=[]){const r=this,o=this._context;k(e),D(e);const s=e.filter(q=>!b(q,t)),l=[...x(s)];K(l,n);const c=O(l);return U(c,"init").then(()=>U(c,"afterInit")).then(()=>c);function h(q){return typeof q=="function"}function g(q){return h(q)&&!!q.isContextPlugin}function b(q,Q){return Q.some(ne=>ne===q||y(q)===ne||y(ne)===q)}function y(q){return h(q)?q.pluginName||q.name:q}function k(q,Q=new Set){q.forEach(ne=>{h(ne)&&(Q.has(ne)||(Q.add(ne),ne.pluginName&&!r._availablePlugins.has(ne.pluginName)&&r._availablePlugins.set(ne.pluginName,ne),ne.requires&&k(ne.requires,Q)))})}function x(q,Q=new Set){return q.map(ne=>h(ne)?ne:r._availablePlugins.get(ne)).reduce((ne,X)=>Q.has(X)?ne:(Q.add(X),X.requires&&(D(X.requires,X),x(X.requires,Q).forEach(se=>ne.add(se))),ne.add(X)),new Set)}function D(q,Q=null){q.map(ne=>h(ne)?ne:r._availablePlugins.get(ne)||ne).forEach(ne=>{L(ne,Q),M(ne,Q),V(ne,Q)})}function L(q,Q){if(!h(q))throw Q?new be("plugincollection-soft-required",o,{missingPlugin:q,requiredBy:y(Q)}):new be("plugincollection-plugin-not-found",o,{plugin:q})}function M(q,Q){if(g(Q)&&!g(q))throw new be("plugincollection-context-required",o,{plugin:y(q),requiredBy:y(Q)})}function V(q,Q){if(Q&&b(q,t))throw new be("plugincollection-required",o,{plugin:y(q),requiredBy:y(Q)})}function O(q){return q.map(Q=>{let ne=r._contextPlugins.get(Q);return ne=ne||new Q(o),r._add(Q,ne),ne})}function U(q,Q){return q.reduce((ne,X)=>!X[Q]||r._contextPlugins.has(X)?ne:ne.then(X[Q].bind(X)),Promise.resolve())}function K(q,Q){for(const ne of Q){if(typeof ne!="function")throw new be("plugincollection-replace-plugin-invalid-type",null,{pluginItem:ne});const X=ne.pluginName;if(!X)throw new be("plugincollection-replace-plugin-missing-name",null,{pluginItem:ne});if(ne.requires&&ne.requires.length)throw new be("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:X});const se=r._availablePlugins.get(X);if(!se)throw new be("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:X});const fe=q.indexOf(se);if(fe===-1){if(r._contextPlugins.has(se))return;throw new be("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:X})}if(se.requires&&se.requires.length)throw new be("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:X});q.splice(fe,1,ne),r._availablePlugins.set(X,ne)}}}destroy(){const e=[];for(const[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const n=e.pluginName;if(n){if(this._plugins.has(n))throw new be("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:e});this._plugins.set(n,t)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hC{constructor(e){this._contextOwner=null;const{translations:t,...n}=e||{};this.config=new $k(n,this.constructor.defaultConfig);const r=this.constructor.builtinPlugins;this.config.define("plugins",r),this.plugins=new dC(this,r);const o=this.config.get("language")||{};this.locale=new ED({uiLanguage:typeof o=="string"?o:o.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new Or}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const n of e.concat(t)){if(typeof n!="function")throw new be("context-initplugins-constructor-only",null,{Plugin:n});if(n.isContextPlugin!==!0)throw new be("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new be("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const n=new this(e);t(n.initPlugins().then(()=>n))})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fC extends Vn(){constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tp=new WeakMap;let Ew=!1;function mC({view:i,element:e,text:t,isDirectHost:n=!0,keepOnFocus:r=!1}){const o=i.document;tp.has(o)||(tp.set(o,new Map),o.registerPostFixer(l=>Gg(o,l)),o.on("change:isComposing",()=>{i.change(l=>Gg(o,l))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(l,c,h)=>{s(h)}),e.placeholder?s(e.placeholder):t&&s(t),t&&JD();function s(l){tp.get(o).set(e,{text:l,isDirectHost:n,keepOnFocus:r,hostElement:n?e:null}),i.change(c=>Gg(o,c))}}function GD(i,e){return e.hasClass("ck-placeholder")?!1:(i.addClass("ck-placeholder",e),!0)}function KD(i,e){return e.hasClass("ck-placeholder")?(i.removeClass("ck-placeholder",e),!0):!1}function ZD(i,e){if(!i.isAttached()||Array.from(i.getChildren()).some(s=>!s.is("uiElement")))return!1;const n=i.document,o=n.selection.anchor;return n.isComposing&&o&&o.parent===i?!1:e||!n.isFocused?!0:!!o&&o.parent!==i}function Gg(i,e){const t=tp.get(i),n=[];let r=!1;for(const[o,s]of t)s.isDirectHost&&(n.push(o),Sw(e,o,s)&&(r=!0));for(const[o,s]of t){if(s.isDirectHost)continue;const l=YD(o);l&&(n.includes(l)||(s.hostElement=l,Sw(e,o,s)&&(r=!0)))}return r}function Sw(i,e,t){const{text:n,isDirectHost:r,hostElement:o}=t;let s=!1;return o.getAttribute("data-placeholder")!==n&&(i.setAttribute("data-placeholder",n,o),s=!0),(r||e.childCount==1)&&ZD(o,t.keepOnFocus)?GD(i,o)&&(s=!0):KD(i,o)&&(s=!0),s}function YD(i){if(i.childCount){const e=i.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function JD(){Ew||vn("enableplaceholder-deprecated-text-option"),Ew=!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Eu=class{is(){throw new Error("is() method is abstract")}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Su=class extends Yn(Eu){constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new be("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){const n=this.getAncestors(t),r=e.getAncestors(t);let o=0;for(;n[o]==r[o]&&n[o];)o++;return o===0?null:n[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),n=e.getPath(),r=io(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=Vk(this);return delete e.parent,e}};Su.prototype.is=function(i){return i==="node"||i==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ui=class Hb extends Su{constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Hb?this===e||this.data===e.data:!1}_clone(){return new Hb(this.document,this.data)}};ui.prototype.is=function(i){return i==="$text"||i==="view:$text"||i==="text"||i==="view:text"||i==="node"||i==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ca=class extends Eu{constructor(e,t,n){if(super(),this.textNode=e,t<0||t>e.data.length)throw new be("view-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.data.length)throw new be("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const t=[];let n=e.includeSelf?this.textNode:this.parent;for(;n!==null;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}};Ca.prototype.is=function(i){return i==="$textProxy"||i==="view:$textProxy"||i==="textProxy"||i==="view:textProxy"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wc{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const n of this._patterns){const r=Tw(t,n);if(r)return{element:t,pattern:n,match:r}}return null}matchAll(...e){const t=[];for(const n of e)for(const r of this._patterns){const o=Tw(n,r);o&&t.push({element:n,pattern:r,match:o})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}}function Tw(i,e){if(typeof e=="function")return e(i);const t={};return e.name&&(t.name=XD(e.name,i.name),!t.name)||e.attributes&&(t.attributes=nR(e.attributes,i),!t.attributes)||e.classes&&(t.classes=iR(e.classes,i),!t.classes)||e.styles&&(t.styles=rR(e.styles,i),!t.styles)?null:t}function XD(i,e){return i instanceof RegExp?!!e.match(i):i===e}function z0(i,e,t){const n=QD(i),r=Array.from(e),o=[];if(n.forEach(([s,l])=>{r.forEach(c=>{eR(s,c)&&tR(l,c,t)&&o.push(c)})}),!(!n.length||o.length<n.length))return o}function QD(i){return Array.isArray(i)?i.map(e=>Go(e)?((e.key===void 0||e.value===void 0)&&vn("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):Go(i)?Object.entries(i):[[i,!0]]}function eR(i,e){return i===!0||i===e||i instanceof RegExp&&e.match(i)}function tR(i,e,t){if(i===!0)return!0;const n=t(e);return i===n||i instanceof RegExp&&!!String(n).match(i)}function nR(i,e){const t=new Set(e.getAttributeKeys());return Go(i)?(i.style!==void 0&&vn("matcher-pattern-deprecated-attributes-style-key",i),i.class!==void 0&&vn("matcher-pattern-deprecated-attributes-class-key",i)):(t.delete("style"),t.delete("class")),z0(i,t,n=>e.getAttribute(n))}function iR(i,e){return z0(i,e.getClassNames(),()=>{})}function rR(i,e){return z0(i,e.getStyleNames(!0),t=>e.getStyle(t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kp{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=sR(e);for(const[n,r]of t)this._styleProcessor.toNormalizedForm(n,r,this._styles)}has(e){if(this.isEmpty)return!1;const n=this._styleProcessor.getReducedForm(e,this._styles).find(([r])=>r===e);return Array.isArray(n)}set(e,t){if(ro(e))for(const[n,r]of Object.entries(e))this._styleProcessor.toNormalizedForm(n,r,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=Ub(e);$I(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!ro(this._styles[e]))return this._styles[e];const n=this._styleProcessor.getReducedForm(e,this._styles).find(([r])=>r===e);if(Array.isArray(n))return n[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([n])=>n)}clear(){this._styles={}}getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const n of t)e.push(...this._styleProcessor.getReducedForm(n,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const r=t.splice(0,t.length-1).join("."),o=mp(this._styles,r);if(!o)return;!Object.keys(o).length&&this.remove(r)}}class oR{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,n){if(ro(t)){Kg(n,Ub(e),t);return}if(this._normalizers.has(e)){const r=this._normalizers.get(e),{path:o,value:s}=r(t);Kg(n,o,s)}else Kg(n,e,t)}getNormalized(e,t){if(!e)return x0({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const n=this._extractors.get(e);if(typeof n=="string")return mp(t,n);const r=n(e,t);if(r)return r}return mp(t,Ub(e))}getReducedForm(e,t){const n=this.getNormalized(e,t);return n===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(n):[[e,n]]}getStyleNames(e){const t=new Set;for(const n of this._consumables.keys()){const r=this.getNormalized(n,e);r&&(typeof r!="object"||Object.keys(r).length)&&t.add(n)}for(const n of Object.keys(e))t.add(n);return Array.from(t)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const n of t)this._mapStyleNames(n,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function sR(i){let e=null,t=0,n=0,r=null;const o=new Map;if(i==="")return o;i.charAt(i.length-1)!=";"&&(i=i+";");for(let s=0;s<i.length;s++){const l=i.charAt(s);if(e===null)switch(l){case":":r||(r=i.substr(t,s-t),n=s+1);break;case'"':case"'":e=l;break;case";":{const c=i.substr(n,s-n);r&&o.set(r.trim(),c.trim()),r=null,t=s+1;break}}else l===e&&(e=null)}return o}function Ub(i){return i.replace("-",".")}function Kg(i,e,t){let n=t;ro(t)&&(n=x0({},mp(i,e),t)),WI(i,e,n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ks=class pC extends Su{constructor(e,t,n,r){if(super(e),this._unsafeAttributesToRender=[],this._customProperties=new Map,this.name=t,this._attrs=aR(n),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");Aw(this._classes,o),this._attrs.delete("class")}this._styles=new kp(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof pC))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,n]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==n)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new wc(...e);let n=this.parent;for(;n&&!n.is("documentFragment");){if(t.match(n))return n;n=n.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),n=Array.from(this._attrs).map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(n==""?"":` ${n}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const t=[];if(e)for(const r of this.getChildren())t.push(r._clone(e));const n=new this.constructor(this.document,this.name,this._attrs,t);return n._classes=new Set(this._classes),n._styles.set(this._styles.getNormalized()),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._unsafeAttributesToRender=this._unsafeAttributesToRender,n}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let n=0;const r=lR(this.document,t);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){const n=String(t);this._fireChange("attributes",this),e=="class"?Aw(this._classes,n):e=="style"?this._styles.setTo(n):this._attrs.set(e,n)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of An(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of An(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of An(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Ks.prototype.is=function(i,e){return e?e===this.name&&(i==="element"||i==="view:element"):i==="element"||i==="view:element"||i==="node"||i==="view:node"};function aR(i){const e=Ta(i);for(const[t,n]of e)n===null?e.delete(t):typeof n!="string"&&e.set(t,String(n));return e}function Aw(i,e){const t=e.split(/\s+/);i.clear(),t.forEach(n=>i.add(n))}function lR(i,e){return typeof e=="string"?[new ui(i,e)]:(es(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new ui(i,t):t instanceof Ca?new ui(i,t.data):t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yf extends Ks{constructor(e,t,n,r){super(e,t,n,r),this.getFillerOffset=cR}}yf.prototype.is=function(i,e){return e?e===this.name&&(i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function cR(){const i=[...this.getChildren()],e=i[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of i)if(!t.is("uiElement"))return null;return this.childCount}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jp extends Vn(yf){constructor(e,t,n,r){super(e,t,n,r),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",o=>o&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}}Jp.prototype.is=function(i,e){return e?e===this.name&&(i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Pw=Symbol("rootName");class gC extends Jp{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(Pw)}set rootName(e){this._setCustomProperty(Pw,e)}set _name(e){this.name=e}}gC.prototype.is=function(i,e){return e?e===this.name&&(i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let lu=class{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new be("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new be("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=gt._createAt(e.startPosition):this._position=gt._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,n;do n=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=n)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,n=e.parent;if(n.parent===null&&e.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let r;if(n instanceof ui){if(e.isAtEnd)return this._position=gt._createAfter(n),this._next();r=n.data[e.offset]}else r=n.getChild(e.offset);if(r instanceof Ks){if(!this.shallow)e=new gt(r,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",r,t,e,1)}if(r instanceof ui){if(this.singleCharacters)return e=new gt(r,0),this._position=e,this._next();let o=r.data.length,s;return r==this._boundaryEndParent?(o=this.boundaries.end.offset,s=new Ca(r,0,o),e=gt._createAfter(s)):(s=new Ca(r,0,r.data.length),e.offset++),this._position=e,this._formatReturnValue("text",s,t,e,o)}if(typeof r=="string"){let o;this.singleCharacters?o=1:o=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-e.offset;const s=new Ca(n,e.offset,o);return e.offset+=o,this._position=e,this._formatReturnValue("text",s,t,e,o)}return e=gt._createAfter(n),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,t,e)}_previous(){let e=this.position.clone();const t=this.position,n=e.parent;if(n.parent===null&&e.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let r;if(n instanceof ui){if(e.isAtStart)return this._position=gt._createBefore(n),this._previous();r=n.data[e.offset-1]}else r=n.getChild(e.offset-1);if(r instanceof Ks)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",r,t,e,1)):(e=new gt(r,r.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",r,t,e));if(r instanceof ui){if(this.singleCharacters)return e=new gt(r,r.data.length),this._position=e,this._previous();let o=r.data.length,s;if(r==this._boundaryStartParent){const l=this.boundaries.start.offset;s=new Ca(r,l,r.data.length-l),o=s.data.length,e=gt._createBefore(s)}else s=new Ca(r,0,r.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",s,t,e,o)}if(typeof r=="string"){let o;if(this.singleCharacters)o=1;else{const l=n===this._boundaryStartParent?this.boundaries.start.offset:0;o=e.offset-l}e.offset-=o;const s=new Ca(n,e.offset,o);return this._position=e,this._formatReturnValue("text",s,t,e,o)}return e=gt._createBefore(n),this._position=e,this._formatReturnValue("elementStart",n,t,e,1)}_formatReturnValue(e,t,n,r,o){return t instanceof Ca&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(r=gt._createAfter(t.textNode),this._position=r):n=gt._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(r=gt._createBefore(t.textNode),this._position=r):n=gt._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:r,length:o}}}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let gt=class ul extends Eu{constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Jp);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const t=ul._createAt(this),n=t.offset+e;return t.offset=n<0?0:n,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const n=new lu(t);return n.skip(e),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),n=e.getAncestors();let r=0;for(;t[r]==n[r]&&t[r];)r++;return r===0?null:t[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],n=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),n.push(e.offset);const r=io(t,n);switch(r){case"prefix":return"before";case"extension":return"after";default:return t[r]<n[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new lu(e)}clone(){return new ul(this.parent,this.offset)}static _createAt(e,t){if(e instanceof ul)return new this(e.parent,e.offset);{const n=e;if(t=="end")t=n.is("$text")?n.data.length:n.childCount;else{if(t=="before")return this._createBefore(n);if(t=="after")return this._createAfter(n);if(t!==0&&!t)throw new be("view-createpositionat-offset-required",n)}return new ul(n,t)}}static _createAfter(e){if(e.is("$textProxy"))return new ul(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new be("view-position-after-root",e,{root:e});return new ul(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new ul(e.textNode,e.offsetInText);if(!e.parent)throw new be("view-position-before-root",e,{root:e});return new ul(e.parent,e.index)}};gt.prototype.is=function(i){return i==="position"||i==="view:position"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let un=class mc extends Eu{constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new lu({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Am,{direction:"backward"}),t=this.end.getLastMatchingPosition(Am);return e.parent.is("$text")&&e.isAtStart&&(e=gt._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=gt._createAfter(t.parent)),new mc(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(Am);if(e.isAfter(this.end)||e.isEqual(this.end))return new mc(e,e);let t=this.end.getLastMatchingPosition(Am,{direction:"backward"});const n=e.nodeAfter,r=t.nodeBefore;return n&&n.is("$text")&&(e=new gt(n,0)),r&&r.is("$text")&&(t=new gt(r,r.data.length)),new mc(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new mc(this.start,e.start)),this.containsPosition(e.end)&&t.push(new mc(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new mc(t,n)}return null}getWalker(e={}){return e.boundaries=this,new lu(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new mc(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new lu(e);for(const n of t)yield n.item}*getPositions(e={}){e.boundaries=this;const t=new lu(e);yield t.position;for(const n of t)yield n.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,n,r){return new this(new gt(e,t),new gt(n,r))}static _createFromPositionAndShift(e,t){const n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(gt._createBefore(e),t)}};un.prototype.is=function(i){return i==="range"||i==="view:range"};function Am(i){return!!(i.item.is("attributeElement")||i.item.is("uiElement"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let pl=class bC extends Yn(Eu){constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let n=!1;for(const r of e._ranges)if(t.isEqual(r)){n=!0;break}if(!n)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=Vb(this.getRanges()),n=Vb(e.getRanges());if(t!=n)return!1;if(t==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let s of e.getRanges())if(s=s.getTrimmed(),r.start.isEqual(s.start)&&r.end.isEqual(s.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,n,r]=e;if(typeof n=="object"&&(r=n,n=void 0),t===null)this._setRanges([]),this._setFakeOptions(r);else if(t instanceof bC||t instanceof H0)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof un)this._setRanges([t],r&&r.backward),this._setFakeOptions(r);else if(t instanceof gt)this._setRanges([new un(t)]),this._setFakeOptions(r);else if(t instanceof Su){const o=!!r&&!!r.backward;let s;if(n===void 0)throw new be("view-selection-setto-required-second-parameter",this);n=="in"?s=un._createIn(t):n=="on"?s=un._createOn(t):s=new un(gt._createAt(t,n)),this._setRanges([s],o),this._setFakeOptions(r)}else if(es(t))this._setRanges(t,r&&r.backward),this._setFakeOptions(r);else throw new be("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new be("view-selection-setfocus-no-ranges",this);const n=gt._createAt(e,t);if(n.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),n.compareWith(r)=="before"?this._addRange(new un(n,r),!0):this._addRange(new un(r,n)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const n of e)this._addRange(n);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof un))throw new be("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new be("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new un(e.start,e.end))}};pl.prototype.is=function(i){return i==="selection"||i==="view:selection"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let H0=class extends Yn(Eu){constructor(...e){super(),this._selection=new pl,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};H0.prototype.is=function(i){return i==="selection"||i=="documentSelection"||i=="view:selection"||i=="view:documentSelection"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jd extends vl{constructor(e,t,n){super(e,t),this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zg=Symbol("bubbling contexts");function Wb(i){class e extends i{fire(n,...r){try{const o=n instanceof vl?n:new vl(this,n),s=Yg(this);if(!s.size)return;if(Kh(o,"capturing",this),pd(s,"$capture",o,...r))return o.return;const l=o.startRange||this.selection.getFirstRange(),c=l?l.getContainedElement():null,h=c?!!vC(s,c):!1;let g=c||uR(l);if(Kh(o,"atTarget",g),!h){if(pd(s,"$text",o,...r))return o.return;Kh(o,"bubbling",g)}for(;g;){if(g.is("rootElement")){if(pd(s,"$root",o,...r))return o.return}else if(g.is("element")&&pd(s,g.name,o,...r))return o.return;if(pd(s,g,o,...r))return o.return;g=g.parent,Kh(o,"bubbling",g)}return Kh(o,"bubbling",this),pd(s,"$document",o,...r),o.return}catch(o){/* istanbul ignore next -- @preserve */be.rethrowUnexpectedError(o,this)}}_addEventListener(n,r,o){const s=An(o.context||"$document"),l=Yg(this);for(const c of s){let h=l.get(c);h||(h=new(Yn()),l.set(c,h)),this.listenTo(h,n,r,o)}}_removeEventListener(n,r){const o=Yg(this);for(const s of o.values())this.stopListening(s,n,r)}}return e}{const i=Wb(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{Wb[e]=i.prototype[e]})}function Kh(i,e,t){i instanceof Jd&&(i._eventPhase=e,i._currentTarget=t)}function pd(i,e,t,...n){const r=typeof e=="string"?i.get(e):vC(i,e);return r?(r.fire(t,...n),t.stop.called):!1}function vC(i,e){for(const[t,n]of i)if(typeof t=="function"&&t(e))return n;return null}function Yg(i){return i[Zg]||(i[Zg]=new Map),i[Zg]}function uR(i){if(!i)return null;const e=i.start.parent,t=i.end.parent,n=e.getPath(),r=t.getPath();return n.length>r.length?e:t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let wC=class extends Wb(Vn()){constructor(e){super(),this._postFixers=new Set,this.selection=new H0,this.roots=new Or({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const n of this._postFixers)if(t=n(e),t)break;while(t)}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yC=10;class uu extends Ks{constructor(e,t,n,r){super(e,t,n,r),this._priority=yC,this._id=null,this._clonesGroup=null,this.getFillerOffset=dR}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new be("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}uu.DEFAULT_PRIORITY=yC;uu.prototype.is=function(i,e){return e?e===this.name&&(i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"):i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function dR(){if(Jg(this))return null;let i=this.parent;for(;i&&i.is("attributeElement");){if(Jg(i)>1)return null;i=i.parent}return!i||Jg(i)>1?null:this.childCount}function Jg(i){return Array.from(i.getChildren()).filter(e=>!e.is("uiElement")).length}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class U0 extends Ks{constructor(e,t,n,r){super(e,t,n,r),this.getFillerOffset=hR}_insertChild(e,t){if(t&&(t instanceof Su||Array.from(t).length>0))throw new be("view-emptyelement-cannot-add",[this,t]);return 0}}U0.prototype.is=function(i,e){return e?e===this.name&&(i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"):i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function hR(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xp extends Ks{constructor(e,t,n,r){super(e,t,n,r),this.getFillerOffset=mR}_insertChild(e,t){if(t&&(t instanceof Su||Array.from(t).length>0))throw new be("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const n of this.getAttributeKeys())t.setAttribute(n,this.getAttribute(n));return t}}Xp.prototype.is=function(i,e){return e?e===this.name&&(i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"):i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function fR(i){i.document.on("arrowKey",(e,t)=>pR(e,t,i.domConverter),{priority:"low"})}function mR(){return null}function pR(i,e,t){if(e.keyCode==Cn.arrowright){const n=e.domTarget.ownerDocument.defaultView.getSelection(),r=n.rangeCount==1&&n.getRangeAt(0).collapsed;if(r||e.shiftKey){const o=n.focusNode,s=n.focusOffset,l=t.domPositionToView(o,s);if(l===null)return;let c=!1;const h=l.getLastMatchingPosition(g=>(g.item.is("uiElement")&&(c=!0),!!(g.item.is("uiElement")||g.item.is("attributeElement"))));if(c){const g=t.viewPositionToDom(h);r?n.collapse(g.parent,g.offset):n.extend(g.parent,g.offset)}}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class W0 extends Ks{constructor(e,t,n,r){super(e,t,n,r),this.getFillerOffset=gR}_insertChild(e,t){if(t&&(t instanceof Su||Array.from(t).length>0))throw new be("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}W0.prototype.is=function(i,e){return e?e===this.name&&(i==="rawElement"||i==="view:rawElement"||i==="element"||i==="view:element"):i==="rawElement"||i==="view:rawElement"||i===this.name||i==="view:"+this.name||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function gR(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let du=class extends Yn(Eu){constructor(e,t){super(),this._children=[],this._customProperties=new Map,this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let n=0;const r=bR(this.document,t);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};du.prototype.is=function(i){return i==="documentFragment"||i==="view:documentFragment"};function bR(i,e){return typeof e=="string"?[new ui(i,e)]:(es(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new ui(i,t):t instanceof Ca?new ui(i,t.data):t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _C{constructor(e){this._cloneGroups=new Map,this._slotFactory=null,this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new du(this.document,e)}createText(e){return new ui(this.document,e)}createAttributeElement(e,t,n={}){const r=new uu(this.document,e,t);return typeof n.priority=="number"&&(r._priority=n.priority),n.id&&(r._id=n.id),n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createContainerElement(e,t,n={},r={}){let o=null;Go(n)?r=n:o=n;const s=new yf(this.document,e,t,o);return r.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),s}createEditableElement(e,t,n={}){const r=new Jp(this.document,e,t);return n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createEmptyElement(e,t,n={}){const r=new U0(this.document,e,t);return n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createUIElement(e,t,n){const r=new Xp(this.document,e,t);return n&&(r.render=n),r}createRawElement(e,t,n,r={}){const o=new W0(this.document,e,t);return n&&(o.render=n),r.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),o}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){Go(e)&&n===void 0?t._setStyle(e):n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof gt?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new be("view-writer-break-non-container-element",this.document);if(!t.parent)throw new be("view-writer-break-root",this.document);if(e.isAtStart)return gt._createBefore(t);if(!e.isAtEnd){const n=t._clone(!1);this.insert(gt._createAfter(t),n);const r=new un(e,gt._createAt(t,"end")),o=new gt(n,0);this.move(r,o)}return gt._createAfter(t)}mergeAttributes(e){const t=e.offset,n=e.parent;if(n.is("$text"))return e;if(n.is("attributeElement")&&n.childCount===0){const s=n.parent,l=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new gt(s,l))}const r=n.getChild(t-1),o=n.getChild(t);if(!r||!o)return e;if(r.is("$text")&&o.is("$text"))return Dw(r,o);if(r.is("attributeElement")&&o.is("attributeElement")&&r.isSimilar(o)){const s=r.childCount;return r._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new gt(r,s))}return e}mergeContainers(e){const t=e.nodeBefore,n=e.nodeAfter;if(!t||!n||!t.is("containerElement")||!n.is("containerElement"))throw new be("view-writer-merge-containers-invalid-position",this.document);const r=t.getChild(t.childCount-1),o=r instanceof ui?gt._createAt(r,"end"):gt._createAt(t,"end");return this.move(un._createIn(n),gt._createAt(t,"end")),this.remove(un._createOn(n)),o}insert(e,t){t=es(t)?[...t]:[t],kC(t,this.document);const n=t.reduce((s,l)=>{const c=s[s.length-1],h=!l.is("uiElement");return!c||c.breakAttributes!=h?s.push({breakAttributes:h,nodes:[l]}):c.nodes.push(l),s},[]);let r=null,o=e;for(const{nodes:s,breakAttributes:l}of n){const c=this._insertNodes(o,s,l);r||(r=c.start),o=c.end}return r?new un(r,o):new un(e)}remove(e){const t=e instanceof un?e:un._createOn(e);if(Zh(t,this.document),t.isCollapsed)return new du(this.document);const{start:n,end:r}=this._breakAttributesRange(t,!0),o=n.parent,s=r.offset-n.offset,l=o._removeChildren(n.offset,s);for(const h of l)this._removeFromClonedElementsGroup(h);const c=this.mergeAttributes(n);return t.start=c,t.end=c.clone(),new du(this.document,l)}clear(e,t){Zh(e,this.document);const n=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const r of n){const o=r.item;let s;if(o.is("element")&&t.isSimilar(o))s=un._createOn(o);else if(!r.nextPosition.isAfter(e.start)&&o.is("$textProxy")){const l=o.getAncestors().find(c=>c.is("element")&&t.isSimilar(c));l&&(s=un._createIn(l))}s&&(s.end.isAfter(e.end)&&(s.end=e.end),s.start.isBefore(e.start)&&(s.start=e.start),this.remove(s))}}move(e,t){let n;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const r=t.parent,o=r.childCount;e=this._breakAttributesRange(e,!0),n=this.remove(e),t.offset+=r.childCount-o}else n=this.remove(e);return this.insert(t,n)}wrap(e,t){if(!(t instanceof uu))throw new be("view-writer-wrap-invalid-attribute",this.document);if(Zh(e,this.document),e.isCollapsed){let n=e.start;n.parent.is("element")&&!vR(n.parent)&&(n=n.getLastMatchingPosition(o=>o.item.is("uiElement"))),n=this._wrapPosition(n,t);const r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(e.start)&&this.setSelection(n),new un(n)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof uu))throw new be("view-writer-unwrap-invalid-attribute",this.document);if(Zh(e,this.document),e.isCollapsed)return e;const{start:n,end:r}=this._breakAttributesRange(e,!0),o=n.parent,s=this._unwrapChildren(o,n.offset,r.offset,t),l=this.mergeAttributes(s.start);l.isEqual(s.start)||s.end.offset--;const c=this.mergeAttributes(s.end);return new un(l,c)}rename(e,t){const n=new yf(this.document,e,t.getAttributes());return this.insert(gt._createAfter(t),n),this.move(un._createIn(t),gt._createAt(n,0)),this.remove(un._createOn(t)),n}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return gt._createAt(e,t)}createPositionAfter(e){return gt._createAfter(e)}createPositionBefore(e){return gt._createBefore(e)}createRange(e,t){return new un(e,t)}createRangeOn(e){return un._createOn(e)}createRangeIn(e){return un._createIn(e)}createSelection(...e){return new pl(...e)}createSlot(e="children"){if(!this._slotFactory)throw new be("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,n){let r;if(n?r=jb(e):r=e.parent.is("$text")?e.parent.parent:e.parent,!r)throw new be("view-writer-invalid-position-container",this.document);let o;n?o=this._breakAttributes(e,!0):o=e.parent.is("$text")?Xg(e):e;const s=r._insertChild(o.offset,t);for(const g of t)this._addToClonedElementsGroup(g);const l=o.getShiftedBy(s),c=this.mergeAttributes(o);c.isEqual(o)||l.offset--;const h=this.mergeAttributes(l);return new un(c,h)}_wrapChildren(e,t,n,r){let o=t;const s=[];for(;o<n;){const c=e.getChild(o),h=c.is("$text"),g=c.is("attributeElement");if(g&&this._wrapAttributeElement(r,c))s.push(new gt(e,o));else if(h||!g||wR(r,c)){const b=r._clone();c._remove(),b._appendChild(c),e._insertChild(o,b),this._addToClonedElementsGroup(b),s.push(new gt(e,o))}else this._wrapChildren(c,0,c.childCount,r);o++}let l=0;for(const c of s){if(c.offset-=l,c.offset==t)continue;this.mergeAttributes(c).isEqual(c)||(l++,n--)}return un._createFromParentsAndOffsets(e,t,e,n)}_unwrapChildren(e,t,n,r){let o=t;const s=[];for(;o<n;){const c=e.getChild(o);if(!c.is("attributeElement")){o++;continue}if(c.isSimilar(r)){const h=c.getChildren(),g=c.childCount;c._remove(),e._insertChild(o,h),this._removeFromClonedElementsGroup(c),s.push(new gt(e,o),new gt(e,o+g)),o+=g,n+=g-1;continue}if(this._unwrapAttributeElement(r,c)){s.push(new gt(e,o),new gt(e,o+1)),o++;continue}this._unwrapChildren(c,0,c.childCount,r),o++}let l=0;for(const c of s){if(c.offset-=l,c.offset==t||c.offset==n)continue;this.mergeAttributes(c).isEqual(c)||(l++,n--)}return un._createFromParentsAndOffsets(e,t,e,n)}_wrapRange(e,t){const{start:n,end:r}=this._breakAttributesRange(e,!0),o=n.parent,s=this._wrapChildren(o,n.offset,r.offset,t),l=this.mergeAttributes(s.start);l.isEqual(s.start)||s.end.offset--;const c=this.mergeAttributes(s.end);return new un(l,c)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return Iw(e.clone());e.parent.is("$text")&&(e=Xg(e));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,e.parent._insertChild(e.offset,n);const r=new un(e,e.getShiftedBy(1));this.wrap(r,t);const o=new gt(n.parent,n.index);n._remove();const s=o.nodeBefore,l=o.nodeAfter;return s instanceof ui&&l instanceof ui?Dw(s,l):Iw(o)}_wrapAttributeElement(e,t){if(!Rw(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const n of e.getAttributeKeys())if(!(n==="class"||n==="style")&&t.hasAttribute(n)&&t.getAttribute(n)!==e.getAttribute(n))return!1;for(const n of e.getStyleNames())if(t.hasStyle(n)&&t.getStyle(n)!==e.getStyle(n))return!1;for(const n of e.getAttributeKeys())n==="class"||n==="style"||t.hasAttribute(n)||this.setAttribute(n,e.getAttribute(n),t);for(const n of e.getStyleNames())t.hasStyle(n)||this.setStyle(n,e.getStyle(n),t);for(const n of e.getClassNames())t.hasClass(n)||this.addClass(n,t);return!0}_unwrapAttributeElement(e,t){if(!Rw(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const n of e.getAttributeKeys())if(!(n==="class"||n==="style")&&(!t.hasAttribute(n)||t.getAttribute(n)!==e.getAttribute(n)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const n of e.getStyleNames())if(!t.hasStyle(n)||t.getStyle(n)!==e.getStyle(n))return!1;for(const n of e.getAttributeKeys())n==="class"||n==="style"||this.removeAttribute(n,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const n=e.start,r=e.end;if(Zh(e,this.document),e.isCollapsed){const c=this._breakAttributes(e.start,t);return new un(c,c)}const o=this._breakAttributes(r,t),s=o.parent.childCount,l=this._breakAttributes(n,t);return o.offset+=o.parent.childCount-s,new un(l,o)}_breakAttributes(e,t=!1){const n=e.offset,r=e.parent;if(e.parent.is("emptyElement"))throw new be("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new be("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new be("view-writer-cannot-break-raw-element",this.document);if(!t&&r.is("$text")&&$b(r.parent)||$b(r))return e.clone();if(r.is("$text"))return this._breakAttributes(Xg(e),t);const o=r.childCount;if(n==o){const s=new gt(r.parent,r.index+1);return this._breakAttributes(s,t)}else if(n===0){const s=new gt(r.parent,r.index);return this._breakAttributes(s,t)}else{const s=r.index+1,l=r._clone();r.parent._insertChild(s,l),this._addToClonedElementsGroup(l);const c=r.childCount-n,h=r._removeChildren(n,c);l._appendChild(h);const g=new gt(r.parent,s);return this._breakAttributes(g,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const r of e.getChildren())this._addToClonedElementsGroup(r);const t=e.id;if(!t)return;let n=this._cloneGroups.get(t);n||(n=new Set,this._cloneGroups.set(t,n)),n.add(e),e._clonesGroup=n}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const r of e.getChildren())this._removeFromClonedElementsGroup(r);const t=e.id;if(!t)return;const n=this._cloneGroups.get(t);n&&n.delete(e)}}function vR(i){return Array.from(i.getChildren()).some(e=>!e.is("uiElement"))}function jb(i){let e=i.parent;for(;!$b(e);){if(!e)return;e=e.parent}return e}function wR(i,e){return i.priority<e.priority?!0:i.priority>e.priority?!1:i.getIdentity()<e.getIdentity()}function Iw(i){const e=i.nodeBefore;if(e&&e.is("$text"))return new gt(e,e.data.length);const t=i.nodeAfter;return t&&t.is("$text")?new gt(t,0):i}function Xg(i){if(i.offset==i.parent.data.length)return new gt(i.parent.parent,i.parent.index+1);if(i.offset===0)return new gt(i.parent.parent,i.parent.index);const e=i.parent.data.slice(i.offset);return i.parent._data=i.parent.data.slice(0,i.offset),i.parent.parent._insertChild(i.parent.index+1,new ui(i.root.document,e)),new gt(i.parent.parent,i.parent.index+1)}function Dw(i,e){const t=i.data.length;return i._data+=e.data,e._remove(),new gt(i,t)}const yR=[ui,uu,yf,U0,W0,Xp];function kC(i,e){for(const t of i){if(!yR.some(n=>t instanceof n))throw new be("view-writer-insert-invalid-node-type",e);t.is("$text")||kC(t.getChildren(),e)}}function $b(i){return i&&(i.is("containerElement")||i.is("documentFragment"))}function Zh(i,e){const t=jb(i.start),n=jb(i.end);if(!t||!n||t!==n)throw new be("view-writer-invalid-range-container",e)}function Rw(i,e){return i.id===null&&e.id===null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const CC=i=>i.createTextNode(" "),xC=i=>{const e=i.createElement("span");return e.dataset.ckeFiller="true",e.innerText=" ",e},EC=i=>{const e=i.createElement("br");return e.dataset.ckeFiller="true",e},qs=7,_f="⁠".repeat(qs);function qo(i){return typeof i=="string"?i.substr(0,qs)===_f:Pi(i)&&i.data.substr(0,qs)===_f}function Fd(i){return i.data.length==qs&&qo(i)}function Ow(i){const e=typeof i=="string"?i:i.data;return qo(i)?e.slice(qs):e}function _R(i){i.document.on("arrowKey",kR,{priority:"low"})}function kR(i,e){if(e.keyCode==Cn.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const n=t.getRangeAt(0).startContainer,r=t.getRangeAt(0).startOffset;qo(n)&&r<=qs&&t.collapse(n,0)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CR extends Vn(){constructor(e,t){super(),this.domDocuments=new Set,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this._inlineFiller=null,this._fakeSelectionContainer=null,this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),Yt.isBlink&&!Yt.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new be("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Yt.isAndroid)return;let e=null;const t=Yt.isBlink&&!Yt.isAndroid?!this.isSelecting:!0;for(const n of this.markedChildren)this._updateChildrenMappings(n);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=gt._createBefore(e.parent)));for(const n of this.markedAttributes)this._updateAttrs(n);for(const n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:e});for(const n of this.markedTexts)!this.markedChildren.has(n.parent)&&this.domConverter.mapViewToDom(n.parent)&&this._updateText(n,{inlineFillerPosition:e});if(t)if(e){const n=this.domConverter.viewPositionToDom(e),r=n.parent.ownerDocument;qo(n.parent)?this._inlineFiller=n.parent:this._inlineFiller=Fw(r,n.parent,n.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const n=Array.from(t.childNodes),r=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(n,r),s=this._findUpdateActions(o,n,r,ER);if(s.indexOf("update")!==-1){const l={equal:0,insert:0,delete:0};for(const c of s)if(c==="update"){const h=l.equal+l.insert,g=l.equal+l.delete,b=e.getChild(h);b&&!b.is("uiElement")&&!b.is("rawElement")&&this._updateElementMappings(b,n[g]),dw(r[h]),l.equal++}else l[c]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?gt._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&Pi(t.parent)&&qo(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!qo(e))throw new be("view-renderer-filler-was-lost",this);Fd(e)?e.remove():e.data=e.data.substr(qs),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,n=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!xR(t))return!1;const r=e.nodeBefore,o=e.nodeAfter;return!(r instanceof ui||o instanceof ui||n===t.getFillerOffset()&&(!r||!r.is("element","br"))||Yt.isAndroid&&(r||o))}_updateText(e,t){const n=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const s=t.inlineFillerPosition;s&&s.parent==e.parent&&s.offset==e.index&&(o=_f+o),this._updateTextNode(n,o)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(t){for(const n of t.attributes){const r=n.name;e.hasAttribute(r)||this.domConverter.removeDomElementAttribute(t,r)}for(const n of e.getAttributeKeys())this.domConverter.setDomElementAttribute(t,n,e.getAttribute(n),e)}}_updateChildren(e,t){const n=this.domConverter.mapViewToDom(e);if(!n)return;if(Yt.isAndroid){let b=null;for(const y of Array.from(n.childNodes)){if(b&&Pi(b)&&Pi(y)){n.normalize();break}b=y}}const r=t.inlineFillerPosition,o=n.childNodes,s=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));r&&r.parent===e&&Fw(n.ownerDocument,s,r.offset);const l=this._diffNodeLists(o,s),c=this._findUpdateActions(l,o,s,SR);let h=0;const g=new Set;for(const b of c)b==="delete"?(g.add(o[h]),dw(o[h])):(b==="equal"||b==="update")&&h++;h=0;for(const b of c)b==="insert"?(Xk(n,h,s[h]),h++):b==="update"?(this._updateTextNode(o[h],s[h].data),h++):b==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(s[h])),h++);for(const b of g)b.parentNode||this.domConverter.unbindDomElement(b)}_diffNodeLists(e,t){return e=PR(e,this._fakeSelectionContainer),lf(e,t,TR.bind(null,this.domConverter))}_findUpdateActions(e,t,n,r){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],s=[],l=[];const c={equal:0,insert:0,delete:0};for(const h of e)h==="insert"?l.push(n[c.equal+c.insert]):h==="delete"?s.push(t[c.equal+c.delete]):(o=o.concat(lf(s,l,r).map(g=>g==="equal"?"update":g)),o.push("equal"),s=[],l=[]),c[h]++;return o.concat(lf(s,l,r).map(h=>h==="equal"?"update":h))}_updateTextNode(e,t){const n=e.data;n!=t&&(Yt.isAndroid&&this.isComposing&&n.replace(/\u00A0/g," ")==t.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,t))}_updateTextNodeInternal(e,t){const n=ok(e.data,t);for(const r of n)r.type==="insert"?e.insertData(r.index,r.values.join("")):e.deleteData(r.index,r.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(Yt.isBlink&&!Yt.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Yt.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=IR(t));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!n.parentElement||n.parentElement!=e)&&e.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||" ";const r=t.getSelection(),o=t.createRange();r.removeAllRanges(),o.selectNodeContents(n),r.addRange(o)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(n.parent,n.offset,r.parent,r.offset),Yt.isGecko&&AR(r,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,n=e.ownerDocument.getSelection();return!t||t.parentElement!==e||n.anchorNode!==t&&!t.contains(n.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const n=e.activeElement,r=this.domConverter.mapDomToView(n);n&&r&&t.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function xR(i){if(i.getAttribute("contenteditable")=="false")return!1;const e=i.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function Fw(i,e,t){const n=e instanceof Array?e:e.childNodes,r=n[t];if(Pi(r))return r.data=_f+r.data,r;{const o=i.createTextNode(_f);return Array.isArray(e)?n.splice(t,0,o):Xk(e,t,o),o}}function ER(i,e){return vc(i)&&vc(e)&&!Pi(i)&&!Pi(e)&&!cf(i)&&!cf(e)&&i.tagName.toLowerCase()===e.tagName.toLowerCase()}function SR(i,e){return vc(i)&&vc(e)&&Pi(i)&&Pi(e)}function TR(i,e,t){return e===t?!0:Pi(e)&&Pi(t)?e.data===t.data:!!(i.isBlockFiller(e)&&i.isBlockFiller(t))}function AR(i,e){let t=i.parent,n=i.offset;if(Pi(t)&&Fd(t)&&(n=rf(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||n!=t.childNodes.length-1)return;const r=t.childNodes[n];r&&r.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function PR(i,e){const t=Array.from(i);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function IR(i){const e=i.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const DR=EC(_t.document),RR=CC(_t.document),OR=xC(_t.document),Pm="data-ck-unsafe-attribute-",Mw="data-ck-unsafe-element";class SC{constructor(e,{blockFillerMode:t,renderingMode:n="editing"}={}){this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new wc,this._inlineObjectElementMatcher=new wc,this._elementsWithTemporaryCustomProperties=new Set,this.document=e,this.renderingMode=n,this.blockFillerMode=t||(n==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?_t.document:_t.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new pl(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const n of e.children)this.unbindDomElement(n)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,n){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:n==="img"&&(e==="src"||e==="srcset")||n==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const n=new DOMParser().parseFromString(t,"text/html"),r=n.createDocumentFragment(),o=n.body.childNodes;for(;o.length>0;)r.appendChild(o[0]);const s=n.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),l=[];let c;for(;c=s.nextNode();)l.push(c);for(const h of l){for(const b of h.getAttributeNames())this.setDomElementAttribute(h,b,h.getAttribute(b));const g=h.tagName.toLowerCase();this._shouldRenameElement(g)&&(Bw(g),h.replaceWith(this._createReplacementDomElement(g,h)))}for(;e.firstChild;)e.firstChild.remove();e.append(r)}viewToDom(e,t={}){if(e.is("$text")){const n=this._processDataFromViewText(e);return this._domDocument.createTextNode(n)}else{const n=e;if(this.mapViewToDom(n))if(n.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(n);else return this.mapViewToDom(n);let r;if(n.is("documentFragment"))r=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(r,n);else{if(n.is("uiElement"))return n.name==="$comment"?r=this._domDocument.createComment(n.getCustomProperty("$rawContent")):r=n.render(this._domDocument,this),t.bind&&this.bindElements(r,n),r;this._shouldRenameElement(n.name)?(Bw(n.name),r=this._createReplacementDomElement(n.name)):n.hasAttribute("xmlns")?r=this._domDocument.createElementNS(n.getAttribute("xmlns"),n.name):r=this._domDocument.createElement(n.name),n.is("rawElement")&&n.render(r,this),t.bind&&this.bindElements(r,n);for(const o of n.getAttributeKeys())this.setDomElementAttribute(r,o,n.getAttribute(o),n)}if(t.withChildren!==!1)for(const o of this.viewChildrenToDom(n,t))r instanceof HTMLTemplateElement?r.content.appendChild(o):r.appendChild(o);return r}}setDomElementAttribute(e,t,n,r){const o=this.shouldRenderAttribute(t,n,e.tagName.toLowerCase())||r&&r.shouldRenderUnsafeAttribute(t);if(o||vn("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:n}),!Qk(t)){vn("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:n});return}e.hasAttribute(t)&&!o?e.removeAttribute(t):e.hasAttribute(Pm+t)&&o&&e.removeAttribute(Pm+t),e.setAttribute(o?t:Pm+t,n)}removeDomElementAttribute(e,t){t!=Mw&&(e.removeAttribute(t),e.removeAttribute(Pm+t))}*viewChildrenToDom(e,t={}){const n=e.getFillerOffset&&e.getFillerOffset();let r=0;for(const o of e.getChildren()){n===r&&(yield this._getBlockFiller());const s=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!Wi(o.getAttributes());if(s&&this.renderingMode=="data")if(o.is("rawElement")){const l=this._domDocument.createElement(o.name);o.render(l,this),yield*[...l.childNodes]}else yield*this.viewChildrenToDom(o,t);else s&&vn("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,t);r++}n===r&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),n=this.viewPositionToDom(e.end),r=this._domDocument.createRange();return r.setStart(t.parent,t.offset),r.setEnd(n.parent,n.offset),r}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const n=this.findCorrespondingDomText(t);if(!n)return null;let r=e.offset;return qo(n)&&(r+=qs),{parent:n,offset:r}}else{let n,r,o;if(e.offset===0){if(n=this.mapViewToDom(t),!n)return null;o=n.childNodes[0]}else{const l=e.nodeBefore;if(r=l.is("$text")?this.findCorrespondingDomText(l):this.mapViewToDom(l),!r)return null;n=r.parentNode,o=r.nextSibling}if(Pi(o)&&qo(o))return{parent:o,offset:qs};const s=r?rf(r)+1:0;return{parent:n,offset:s}}}domToView(e,t={}){const n=[],r=this._domToView(e,t,n),o=r.next().value;return!o||(r.next(),this._processDomInlineNodes(null,n,t),o.is("$text")&&o.data.length==0)?null:o}*domChildrenToView(e,t={},n=[]){let r=[];e instanceof HTMLTemplateElement?r=[...e.content.childNodes]:r=[...e.childNodes];for(let o=0;o<r.length;o++){const s=r[o],l=this._domToView(s,t,n),c=l.next().value;c!==null&&(this._isBlockViewElement(c)&&this._processDomInlineNodes(e,n,t),yield c,l.next())}this._processDomInlineNodes(e,n,t)}domSelectionToView(e){if(LR(e))return new pl([]);if(e.rangeCount===1){let r=e.getRangeAt(0).startContainer;Pi(r)&&(r=r.parentNode);const o=this.fakeSelectionToView(r);if(o)return o}const t=this.isDomSelectionBackward(e),n=[];for(let r=0;r<e.rangeCount;r++){const o=e.getRangeAt(r),s=this.domRangeToView(o);s&&n.push(s)}return new pl(n,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),n=this.domPositionToView(e.endContainer,e.endOffset);return t&&n?new un(t,n):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,rf(e));const n=this.mapDomToView(e);if(n&&(n.is("uiElement")||n.is("rawElement")))return gt._createBefore(n);if(Pi(e)){if(Fd(e))return this.domPositionToView(e.parentNode,rf(e));const r=this.findCorrespondingViewText(e);let o=t;return r?(qo(e)&&(o-=qs,o=o<0?0:o),new gt(r,o)):null}else{if(t===0){const r=this.mapDomToView(e);if(r)return new gt(r,0)}else{const r=e.childNodes[t-1];if(Pi(r)&&Fd(r)||r&&this.isBlockFiller(r))return this.domPositionToView(r.parentNode,rf(r));const o=Pi(r)?this.findCorrespondingViewText(r):this.mapDomToView(r);if(o&&o.parent)return new gt(o.parent,o.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(Fd(e))return null;const t=this.getHostViewElement(e);if(t)return t;const n=e.previousSibling;if(n){if(!this.isElement(n))return null;const r=this.mapDomToView(n);if(r){const o=r.nextSibling;return o instanceof ui?o:null}}else{const r=this.mapDomToView(e.parentNode);if(r){const o=r.getChild(0);return o instanceof ui?o:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:n,scrollY:r}=_t.window,o=[];Lw(t,s=>{const{scrollLeft:l,scrollTop:c}=s;o.push([l,c])}),t.focus(),Lw(t,s=>{const[l,c]=o.shift();s.scrollLeft=l,s.scrollTop=c}),_t.window.scrollTo(n,r)}}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(t);n&&n.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(DR):e.tagName==="BR"&&TC(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(OR)||MR(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const n=t.collapsed;return t.detach(),n}getHostViewElement(e){const t=nD(e);for(t.pop();t.length;){const n=t.pop(),r=this._domToViewMapping.get(n);if(r&&(r.is("uiElement")||r.is("rawElement")))return r}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return CC(this._domDocument);case"markedNbsp":return xC(this._domDocument);case"br":return EC(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(Pi(e)&&qo(e)&&t<qs||this.isElement(e)&&qo(e.childNodes[t]))return!1;const n=this.mapDomToView(e);return!(n&&(n.is("uiElement")||n.is("rawElement")))}*_domToView(e,t,n){if(this.isBlockFiller(e))return null;const r=this.getHostViewElement(e);if(r)return r;if(cf(e)&&t.skipComments)return null;if(Pi(e)){if(Fd(e))return null;{const o=e.data;if(o==="")return null;const s=new ui(this.document,o);return n.push(s),s}}else{let o=this.mapDomToView(e);if(o)return this._isInlineObjectElement(o)&&n.push(o),o;if(this.isDocumentFragment(e))o=new du(this.document),t.bind&&this.bindDocumentFragments(e,o);else{o=this._createViewElement(e,t),t.bind&&this.bindElements(e,o);const l=e.attributes;if(l)for(let c=l.length,h=0;h<c;h++)o._setAttribute(l[h].name,l[h].value);if(this._isViewElementWithRawContent(o,t))return o._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(o)||n.push(o),o;if(cf(e))return o._setCustomProperty("$rawContent",e.data),o}yield o;const s=[];if(t.withChildren!==!1)for(const l of this.domChildrenToView(e,t,s))o._appendChild(l);if(this._isInlineObjectElement(o))n.push(o);else for(const l of s)n.push(l)}}_processDomInlineNodes(e,t,n){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let r=!1;for(let o=0;o<t.length;o++){const s=t[o];if(!s.is("$text")){r=!1;continue}let l,c=!1;if(this._isPreFormatted(s))l=Ow(s.data);else{l=s.data.replace(/[ \n\t\r]{1,}/g," "),c=/[^\S\u00A0]/.test(l.charAt(l.length-1));const h=o>0?t[o-1]:null,g=o+1<t.length?t[o+1]:null,b=!h||h.is("element")&&h.name=="br"||r,y=g?!1:!qo(s.data);n.withChildren!==!1&&(b&&(l=l.replace(/^ /,"")),y&&(l=l.replace(/ $/,""))),l=Ow(l),l=l.replace(/ \u00A0/g,"  ");const k=g&&g.is("element")&&g.name!="br",x=g&&g.is("$text")&&g.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(l)||!g||k||x)&&(l=l.replace(/\u00A0$/," ")),(b||h&&h.is("element")&&h.name!="br")&&(l=l.replace(/^\u00A0/," "))}l.length==0&&s.parent?(s._remove(),t.splice(o,1),o--):(s._data=l,r=c)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){const n=this._getTouchingInlineViewNode(e,!1);(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n)||!n)&&(t=" "+t.substr(1))}if(t.charAt(t.length-1)==" "){const n=this._getTouchingInlineViewNode(e,!0),r=n&&n.is("$textProxy")&&n.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!n||r)&&(t=t.substr(0,t.length-1)+" ")}return t.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(FR(e,this.preElements))return!0;for(const t of e.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){const n=new lu({startPosition:t?gt._createAfter(e):gt._createBefore(e),direction:t?"forward":"backward"});for(const{item:r}of n){if(r.is("$textProxy"))return r;if(r.is("element")&&r.getCustomProperty("dataPipeline:transparentRendering"))continue;if(r.is("element","br"))return null;if(this._isInlineObjectElement(r))return r;if(r.is("containerElement"))return null}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(cf(e))return new Xp(this.document,"$comment");const n=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Ks(this.document,n)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const n=this._domDocument.createElement("span");if(n.setAttribute(Mw,e),t){for(;t.firstChild;)n.appendChild(t.firstChild);for(const r of t.getAttributeNames())n.setAttribute(r,t.getAttribute(r))}return n}}function FR(i,e){return i.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function Lw(i,e){let t=i;for(;t;)e(t),t=t.parentElement}function MR(i,e){return i.isEqualNode(RR)&&TC(i,e)&&i.parentNode.childNodes.length===1}function TC(i,e){const t=i.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function Bw(i){i==="script"&&vn("domconverter-unsafe-script-element-detected"),i==="style"&&vn("domconverter-unsafe-style-element-detected")}function LR(i){if(!Yt.isGecko||!i.rangeCount)return!1;const e=i.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Aa extends Bo(){constructor(e){super(),this._isEnabled=!1,this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ud{constructor(e,t,n){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,hk(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kc extends Aa{constructor(){super(...arguments),this.useCapture=!1,this.usePassive=!1}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(n=>{this.listenTo(e,n,(r,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,t,n){this.isEnabled&&this.document.fire(e,new Ud(this.view,t,n))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BR extends kc{constructor(){super(...arguments),this.domEventType=["keydown","keyup"]}onDomEvent(e){const t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return zd(this)}};this.fire(e.type,e,t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NR extends Aa{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=bl(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const e=this.document;e.on("arrowKey",(t,n)=>{e.selection.isFake&&this.isEnabled&&n.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,n)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,n=new pl(t.getRanges(),{backward:t.isBackward,fake:!1});(e==Cn.arrowleft||e==Cn.arrowup)&&n.setTo(n.getFirstPosition()),(e==Cn.arrowright||e==Cn.arrowdown)&&n.setTo(n.getLastPosition());const r={oldSelection:t,newSelection:n,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let AC=class extends Aa{constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,n=new Set,r=new Set;for(const s of e){const l=t.mapDomToView(s.target);l&&(l.is("uiElement")||l.is("rawElement")||s.type==="childList"&&!this._isBogusBrMutation(s)&&r.add(l))}for(const s of e){const l=t.mapDomToView(s.target);if(!(l&&(l.is("uiElement")||l.is("rawElement")))&&s.type==="characterData"){const c=t.findCorrespondingViewText(s.target);c&&!r.has(c.parent)?n.add(c):!c&&qo(s.target)&&r.add(t.mapDomToView(s.target.parentNode))}}const o=[];for(const s of n)o.push({type:"text",node:s});for(const s of r){const l=t.mapViewToDom(s),c=Array.from(s.getChildren()),h=Array.from(t.domChildrenToView(l,{withChildren:!1}));VI(c,h,VR)||o.push({type:"children",node:s})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function VR(i,e){if(!Array.isArray(i))return i===e?!0:i.is("$text")&&e.is("$text")?i.data===e.data:!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cp extends kc{constructor(e){super(e),this._renderTimeoutId=null,this._isFocusChanging=!1,this.domEventType=["focus","blur"],this.useCapture=!0;const t=this.document;t.on("focus",()=>this._handleFocus()),t.on("blur",(n,r)=>this._handleBlur(r)),t.on("beforeinput",()=>{t.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const t=this.document.selection.editableElement;(t===null||t===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zR extends Aa{constructor(e){super(e),this.mutationObserver=e.getObserver(AC),this.focusObserver=e.getObserver(Cp),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=bl(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=bl(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument,n=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},r=()=>{this.document.isSelecting&&(this._handleSelectionChange(t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",n,{priority:"highest"}),this.listenTo(e,"keydown",r,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",r,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",r,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",()=>{this.document.isComposing&&!Yt.isAndroid||(this._handleSelectionChange(t),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(t)},{priority:"lowest"}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const t=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(t.anchorNode))return;this.mutationObserver.flush();const n=this.domConverter.domSelectionToView(t);if(n.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(n)&&this.domConverter.isDomSelectionCorrect(t))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(n))this.view.forceRender();else{const r={oldSelection:this.selection,newSelection:n,domSelection:t};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HR extends kc{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PC{constructor(e,t={}){this._files=t.cacheFiles?Nw(e):null,this._native=e}get files(){return this._files||(this._files=Nw(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,n){this._native.setDragImage(e,t,n)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function Nw(i){const e=Array.from(i.files||[]),t=Array.from(i.items||[]);return e.length?e:t.filter(n=>n.kind==="file").map(n=>n.getAsFile())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UR extends kc{constructor(){super(...arguments),this.domEventType="beforeinput"}onDomEvent(e){const t=e.getTargetRanges(),n=this.view,r=n.document;let o=null,s=null,l=[];if(e.dataTransfer&&(o=new PC(e.dataTransfer)),e.data!==null?s=e.data:o&&(s=o.getData("text/plain")),r.selection.isFake)l=Array.from(r.selection.getRanges());else if(t.length)l=t.map(c=>{const h=n.domConverter.domPositionToView(c.startContainer,c.startOffset),g=n.domConverter.domPositionToView(c.endContainer,c.endOffset);if(h)return n.createRange(h,g);if(g)return n.createRange(g)}).filter(c=>!!c);else if(Yt.isAndroid){const c=e.target.ownerDocument.defaultView.getSelection();l=Array.from(n.domConverter.domSelectionToView(c).getRanges())}if(Yt.isAndroid&&e.inputType=="insertCompositionText"&&s&&s.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[n.createRange(l[0].end)]});return}if(e.inputType=="insertText"&&s&&s.includes(`
`)){const c=s.split(/\n{1,2}/g);let h=l;for(let g=0;g<c.length;g++){const b=c[g];b!=""&&(this.fire(e.type,e,{data:b,dataTransfer:o,targetRanges:h,inputType:e.inputType,isComposing:e.isComposing}),h=[r.selection.getFirstRange()]),g+1<c.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:h}),h=[r.selection.getFirstRange()])}return}this.fire(e.type,e,{data:s,dataTransfer:o,targetRanges:l,inputType:e.inputType,isComposing:e.isComposing})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WR extends Aa{constructor(e){super(e),this.document.on("keydown",(t,n)=>{if(this.isEnabled&&pD(n.keyCode)){const r=new Jd(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(r,n),r.stop.called&&t.stop()}})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jR extends Aa{constructor(e){super(e);const t=this.document;t.on("keydown",(n,r)=>{if(!this.isEnabled||r.keyCode!=Cn.tab||r.ctrlKey)return;const o=new Jd(t,"tab",t.selection.getFirstRange());t.fire(o,r),o.stop.called&&n.stop()})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $R extends Vn(){constructor(e){super(),this.domRoots=new Map,this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this.document=new wC(e),this.domConverter=new SC(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new CR(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new _C(this.document),this.addObserver(AC),this.addObserver(Cp),this.addObserver(zR),this.addObserver(BR),this.addObserver(NR),this.addObserver(HR),this.addObserver(WR),this.addObserver(UR),this.addObserver(jR),_R(this),fR(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Yt.isiOS&&this.listenTo(this.document,"blur",(t,n)=>{this.domConverter.mapDomToView(n.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(t,{mutations:n})=>{n.forEach(r=>this._renderer.markToSync(r.type,r.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,t="main"){const n=this.document.getRoot(t);n._name=e.tagName.toLowerCase();const r={};for(const{name:s,value:l}of Array.from(e.attributes))r[s]=l,s==="class"?this._writer.addClass(l.split(" "),n):n.hasAttribute(s)||this._writer.setAttribute(s,l,n);this._initialDomRootAttributes.set(e,r);const o=()=>{this._writer.setAttribute("contenteditable",(!n.isReadOnly).toString(),n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(e.ownerDocument),n.on("change:children",(s,l)=>this._renderer.markToSync("children",l)),n.on("change:attributes",(s,l)=>this._renderer.markToSync("attributes",l)),n.on("change:text",(s,l)=>this._renderer.markToSync("text",l)),n.on("change:isReadOnly",()=>this.change(o)),n.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const s of this._observers.values())s.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:r})=>t.removeAttribute(r));const n=this._initialDomRootAttributes.get(t);for(const r in n)t.setAttribute(r,n[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(const r of this._observers.values())r.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[n,r]of this.domRoots)t.observe(r,n);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:n=20,ancestorOffset:r=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const s=Ss({alignToTop:e,forceScroll:t,viewportOffset:n,ancestorOffset:r});typeof n=="number"&&(n={top:n,bottom:n,left:n,right:n});const l={target:this.domConverter.viewRangeToDom(o),viewportOffset:n,ancestorOffset:r,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",l,s),lD(l)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new be("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){/* istanbul ignore next -- @preserve */be.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Cp).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return gt._createAt(e,t)}createPositionAfter(e){return gt._createAfter(e)}createPositionBefore(e){return gt._createBefore(e)}createRange(e,t){return new un(e,t)}createRangeOn(e){return un._createOn(e)}createRangeIn(e){return un._createIn(e)}createSelection(...e){return new pl(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cc{is(){throw new Error("is() method is abstract")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Tu=class extends Cc{constructor(e){super(),this.parent=null,this._attrs=Ta(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new be("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new be("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){const n=this.getAncestors(t),r=e.getAncestors(t);let o=0;for(;n[o]==r[o]&&n[o];)o++;return o===0?null:n[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),n=e.getPath(),r=io(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,n)=>(t[n[0]]=n[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=Ta(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Tu.prototype.is=function(i){return i==="node"||i==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let uf=class{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return t==-1?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);if(t===null)return null;let n=0;for(let r=0;r<t;r++)n+=this._nodes[r].offsetSize;return n}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new be("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const n of this._nodes){if(e>=t&&e<t+n.offsetSize)return this.getNodeIndex(n);t+=n.offsetSize}if(t!=e)throw new be("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const n of t)if(!(n instanceof Tu))throw new be("model-nodelist-insertnodes-not-node",this);this._nodes=PD(this._nodes,Array.from(t),e,0)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kn extends Tu{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new Kn(this.data,this.getAttributes())}static fromJSON(e){return new Kn(e.data,e.attributes)}}Kn.prototype.is=function(i){return i==="$text"||i==="model:$text"||i==="text"||i==="model:text"||i==="node"||i==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gs extends Cc{constructor(e,t,n){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new be("model-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.offsetSize)throw new be("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Gs.prototype.is=function(i){return i==="$textProxy"||i==="model:$textProxy"||i==="textProxy"||i==="model:textProxy"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ci=class np extends Tu{constructor(e,t,n){super(t),this._children=new uf,this.name=e,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const n of e)t=t.getChild(t.offsetToIndex(n));return t}findAncestor(e,t={}){let n=t.includeSelf?this:this.parent;for(;n;){if(n.name===e)return n;n=n.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map(n=>n._clone(!0)):void 0;return new np(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const n=qR(t);for(const r of n)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){const n=this._children._removeNodes(e,t);for(const r of n)r.parent=null;return n}static fromJSON(e){let t;if(e.children){t=[];for(const n of e.children)n.name?t.push(np.fromJSON(n)):t.push(Kn.fromJSON(n))}return new np(e.name,e.attributes,t)}};ci.prototype.is=function(i,e){return e?e===this.name&&(i==="element"||i==="model:element"):i==="element"||i==="model:element"||i==="node"||i==="model:node"};function qR(i){return typeof i=="string"?[new Kn(i)]:(es(i)||(i=[i]),Array.from(i).map(e=>typeof e=="string"?new Kn(e):e instanceof Gs?new Kn(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ml{constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new be("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new be("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=Xe._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,n,r,o;do r=this.position,o=this._visitedParent,{done:t,value:n}=this.next();while(!t&&e(n));t||(this._position=r,this._visitedParent=o)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),n=this._visitedParent;if(n.parent===null&&t.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const r=df(t,n),o=r||IC(t,n,r);if(o instanceof ci){if(!this.shallow)t.path.push(0),this._visitedParent=o;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,ou("elementStart",o,e,t,1)}if(o instanceof Kn){let s;if(this.singleCharacters)s=1;else{let h=o.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<h&&(h=this.boundaries.end.offset),s=h-t.offset}const l=t.offset-o.startOffset,c=new Gs(o,l,s);return t.offset+=s,this._position=t,ou("text",c,e,t,s)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():ou("elementEnd",n,e,t)}_previous(){const e=this.position,t=this.position.clone(),n=this._visitedParent;if(n.parent===null&&t.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const r=t.parent,o=df(t,r),s=o||DC(t,r,o);if(s instanceof ci)return t.offset--,this.shallow?(this._position=t,ou("elementStart",s,e,t,1)):(t.path.push(s.maxOffset),this._position=t,this._visitedParent=s,this.ignoreElementEnd?this._previous():ou("elementEnd",s,e,t));if(s instanceof Kn){let l;if(this.singleCharacters)l=1;else{let g=s.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>g&&(g=this.boundaries.start.offset),l=t.offset-g}const c=t.offset-s.startOffset,h=new Gs(s,c-l,l);return t.offset-=l,this._position=t,ou("text",h,e,t,l)}return t.path.pop(),this._position=t,this._visitedParent=n.parent,ou("elementStart",n,e,t,1)}}function ou(i,e,t,n,r){return{done:!1,value:{type:i,item:e,previousPosition:t,nextPosition:n,length:r}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xe extends Cc{constructor(e,t,n="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new be("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new be("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new be("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new be("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return df(this,this.parent)}get nodeAfter(){const e=this.parent;return IC(this,e,df(this,e))}get nodeBefore(){const e=this.parent;return DC(this,e,df(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=io(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const n=new ml(t);return n.skip(e),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=io(this.path,e.path),n=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,n)}getCommonAncestor(e){const t=this.getAncestors(),n=e.getAncestors();let r=0;for(;t[r]==n[r]&&t[r];)r++;return r===0?null:t[r-1]}getShiftedBy(e){const t=this.clone(),n=t.offset+e;return t.offset=n<0?0:n,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const t=Math.min(this.path.length,e.path.length);for(let n=0;n<t;n++){const r=this.path[n]-e.path[n];if(r<-1||r>1)return!1;if(r===1)return Vw(e,this,n);if(r===-1)return Vw(this,e,n)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?qb(this.path,t):qb(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;const t=this.getParentPath(),n=e.getParentPath();return io(t,n)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=Xe._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange,n=t.containsPosition(this)||t.start.isEqual(this);let r;return n?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=Xe._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,t){const n=Xe._createAt(this);if(this.root!=e.root)return n;if(io(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;n.offset-=t}}else if(io(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+t>this.path[r])return null;n.path[r]-=t}}return n}_getTransformedByInsertion(e,t){const n=Xe._createAt(this);if(this.root!=e.root)return n;if(io(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(n.offset+=t);else if(io(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;e.offset<=this.path[r]&&(n.path[r]+=t)}return n}_getTransformedByMove(e,t,n){if(t=t._getTransformedByDeletion(e,n),e.isEqual(t))return Xe._createAt(this);const r=this._getTransformedByDeletion(e,n);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(n).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):r._getTransformedByInsertion(t,n)}_getCombined(e,t){const n=e.path.length-1,r=Xe._createAt(t);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[n]-e.offset,r.path=[...r.path,...this.path.slice(n+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,n="toNone"){if(e instanceof Xe)return new Xe(e.root,e.path,e.stickiness);{const r=e;if(t=="end")t=r.maxOffset;else{if(t=="before")return this._createBefore(r,n);if(t=="after")return this._createAfter(r,n);if(t!==0&&!t)throw new be("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new be("model-position-parent-incorrect",[this,e]);const o=r.getPath();return o.push(t),new this(r.root,o,n)}}static _createAfter(e,t){if(!e.parent)throw new be("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new be("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const n=new Xe(t.graveyard,e.path);return n.stickiness=e.stickiness,n}if(!t.getRoot(e.root))throw new be("model-position-fromjson-no-root",t,{rootName:e.root});return new Xe(t.getRoot(e.root),e.path,e.stickiness)}}Xe.prototype.is=function(i){return i==="position"||i==="model:position"};function df(i,e){const t=e.getChild(e.offsetToIndex(i.offset));return t&&t.is("$text")&&t.startOffset<i.offset?t:null}function IC(i,e,t){return t!==null?null:e.getChild(e.offsetToIndex(i.offset))}function DC(i,e,t){return t!==null?null:e.getChild(e.offsetToIndex(i.offset)-1)}function Vw(i,e,t){return!(t+1===i.path.length||!qb(e.path,t+1)||!GR(i,t+1))}function qb(i,e){for(;e<i.length;){if(i[e]!==0)return!1;e++}return!0}function GR(i,e){let t=i.parent,n=i.path.length-1,r=0;for(;n>=e;){if(i.path[n]+r!==t.maxOffset)return!1;r=1,n--,t=t.parent}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ze extends Cc{constructor(e,t){super(),this.start=Xe._createAt(e),this.end=t?Xe._createAt(t):Xe._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new ml({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),t=this.end.getParentPath();return io(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}containsItem(e){const t=Xe._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new ze(this.start,e.start)),this.containsPosition(e.end)&&t.push(new ze(e.end,this.end))):t.push(new ze(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new ze(t,n)}return null}getJoined(e,t=!1){let n=this.isIntersecting(e);if(n||(this.start.isBefore(e.start)?n=t?this.end.isTouching(e.start):this.end.isEqual(e.start):n=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!n)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new ze(r,o)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,n=Xe._createAt(this.start);let r=n.parent;for(;n.path.length>t+1;){const o=r.maxOffset-n.offset;o!==0&&e.push(new ze(n,n.getShiftedBy(o))),n.path=n.path.slice(0,-1),n.offset++,r=r.parent}for(;n.path.length<=this.end.path.length;){const o=this.end.path[n.path.length-1],s=o-n.offset;s!==0&&e.push(new ze(n,n.getShiftedBy(s))),n.offset=o,n.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new ml(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new ml(e);for(const n of t)yield n.item}*getPositions(e={}){e.boundaries=this;const t=new ml(e);yield t.position;for(const n of t)yield n.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new ze(this.start,this.end)]}getTransformedByOperations(e){const t=[new ze(this.start,this.end)];for(const n of e)for(let r=0;r<t.length;r++){const o=t[r].getTransformedByOperation(n);t.splice(r,1,...o),r+=o.length-1}for(let n=0;n<t.length;n++){const r=t[n];for(let o=n+1;o<t.length;o++){const s=t[o];(r.containsRange(s)||s.containsRange(r)||r.isEqual(s))&&t.splice(o,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const n=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(n,o,r,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let n=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(n=this.end.getShiftedBy(1)),t.root!=n.root&&(n=this.end.getShiftedBy(-1)),new ze(t,n)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new ze(this.start);let t=this.start._getTransformedByMergeOperation(e),n=this.end._getTransformedByMergeOperation(e);return t.root!=n.root&&(n=this.end.getShiftedBy(-1)),t.isAfter(n)?(e.sourcePosition.isBefore(e.targetPosition)?(t=Xe._createAt(n),t.offset=0):(e.deletionPosition.isEqual(t)||(n=e.deletionPosition),t=e.targetPosition),new ze(t,n)):new ze(t,n)}_getTransformedByInsertion(e,t,n=!1){if(n&&this.containsPosition(e))return[new ze(this.start,e),new ze(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const r=new ze(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,t),r.end=r.end._getTransformedByInsertion(e,t),[r]}}_getTransformedByMove(e,t,n,r=!1){if(this.isCollapsed){const b=this.start._getTransformedByMove(e,t,n);return[new ze(b)]}const o=ze._createFromPositionAndShift(e,n),s=t._getTransformedByDeletion(e,n);if(this.containsPosition(t)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const b=this.start._getTransformedByMove(e,t,n),y=this.end._getTransformedByMove(e,t,n);return[new ze(b,y)]}let l;const c=this.getDifference(o);let h=null;const g=this.getIntersection(o);if(c.length==1?h=new ze(c[0].start._getTransformedByDeletion(e,n),c[0].end._getTransformedByDeletion(e,n)):c.length==2&&(h=new ze(this.start,this.end._getTransformedByDeletion(e,n))),h?l=h._getTransformedByInsertion(s,n,g!==null||r):l=[],g){const b=new ze(g.start._getCombined(o.start,s),g.end._getCombined(o.start,s));l.length==2?l.splice(1,0,b):l.push(b)}return l}_getTransformedByDeletion(e,t){let n=this.start._getTransformedByDeletion(e,t),r=this.end._getTransformedByDeletion(e,t);return n==null&&r==null?null:(n==null&&(n=e),r==null&&(r=e),new ze(n,r))}static _createFromPositionAndShift(e,t){const n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}static _createIn(e){return new this(Xe._createAt(e,0),Xe._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(Xe._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new be("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((o,s)=>o.start.isAfter(s.start)?1:-1);const n=e.indexOf(t),r=new this(t.start,t.end);for(let o=n-1;o>=0&&e[o].end.isEqual(r.start);o--)r.start=Xe._createAt(e[o].start);for(let o=n+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=Xe._createAt(e[o].end);return r}static fromJSON(e,t){return new this(Xe.fromJSON(e.start,t),Xe.fromJSON(e.end,t))}}ze.prototype.is=function(i){return i==="range"||i==="model:range"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RC extends Yn(){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const n=this._modelToViewMapping.get(t.modelPosition.parent);if(!n)throw new be("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(n,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const n=this.findMappedViewAncestor(t.viewPosition),r=this._viewToModelMapping.get(n),o=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,n);t.modelPosition=Xe._createAt(r,o)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){const n=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const r of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(r);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(n)==e&&this._modelToViewMapping.delete(n))}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const n=this._markerNameToElements.get(t)||new Set;n.add(e);const r=this._elementToMarkerNames.get(e)||new Set;r.add(t),this._markerNameToElements.set(t,n),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,t){const n=this._markerNameToElements.get(t);n&&(n.delete(e),n.size==0&&this._markerNameToElements.delete(t));const r=this._elementToMarkerNames.get(e);r&&(r.delete(t),r.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new ze(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new un(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){const n={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const n=new Set;for(const r of t)if(r.is("attributeElement"))for(const o of r.getElementsWithSameId())n.add(o);else n.add(r);return n}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,n){if(n!=e){const o=this._toModelOffset(e.parent,e.index,n),s=this._toModelOffset(e,t,e);return o+s}if(e.is("$text"))return t;let r=0;for(let o=0;o<t;o++)r+=this.getModelLength(e.getChild(o));return r}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const n of e.getChildren())t+=this.getModelLength(n);return t}}findPositionIn(e,t){let n,r=0,o=0,s=0;if(e.is("$text"))return new gt(e,t);for(;o<t;)n=e.getChild(s),r=this.getModelLength(n),o+=r,s++;return o==t?this._moveViewPositionToTextNode(new gt(e,s)):this.findPositionIn(n,t-(o-r))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,n=e.nodeAfter;return t instanceof ui?new gt(t,t.data.length):n instanceof ui?new gt(n,0):e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KR{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=Im(t),e instanceof Gs&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=Im(t),e instanceof Gs&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=Im(t),e instanceof Gs&&(e=this._getSymbolForTextProxy(e));const n=this._consumable.get(e);if(n===void 0)return null;const r=n.get(t);return r===void 0?null:r}revert(e,t){t=Im(t),e instanceof Gs&&(e=this._getSymbolForTextProxy(e));const n=this.test(e,t);return n===!1?(this._consumable.get(e).set(t,!0),!0):n===!0?!1:null}verifyAllConsumed(e){const t=[];for(const[n,r]of this._consumable)for(const[o,s]of r){const l=o.split(":")[0];s&&e==l&&t.push({event:o,item:n.name||n.description})}if(t.length)throw new be("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const n=this._textProxyRegistry.get(e.startOffset);if(n){const r=n.get(e.endOffset);r&&(t=r.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,n=e.endOffset,r=e.parent,o=Symbol("$textProxy:"+e.data);let s,l;return s=this._textProxyRegistry.get(t),s||(s=new Map,this._textProxyRegistry.set(t,s)),l=s.get(n),l||(l=new Map,s.set(n,l)),l.set(r,o),o}}function Im(i){const e=i.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?i:e.length>1?e[0]+":"+e[1]:e[0]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OC extends Yn(){constructor(e){super(),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,t,n){const r=this._createConversionApi(n,e.getRefreshedItems());for(const s of e.getMarkersToRemove())this._convertMarkerRemove(s.name,s.range,r);const o=this._reduceChanges(e.getChanges());for(const s of o)s.type==="insert"?this._convertInsert(ze._createFromPositionAndShift(s.position,s.length),r):s.type==="reinsert"?this._convertReinsert(ze._createFromPositionAndShift(s.position,s.length),r):s.type==="remove"?this._convertRemove(s.position,s.length,s.name,r):this._convertAttribute(s.range,s.attributeKey,s.attributeOldValue,s.attributeNewValue,r);r.mapper.flushDeferredBindings();for(const s of r.mapper.flushUnboundMarkerNames()){const l=t.get(s).getRange();this._convertMarkerRemove(s,l,r),this._convertMarkerAdd(s,l,r)}for(const s of e.getMarkersToAdd())this._convertMarkerAdd(s.name,s.range,r);r.consumable.verifyAllConsumed("insert")}convert(e,t,n,r={}){const o=this._createConversionApi(n,void 0,r);this._convertInsert(e,o);for(const[s,l]of t)this._convertMarkerAdd(s,l,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,t,n){const r=this._createConversionApi(n);this.fire("cleanSelection",{selection:e},r);const o=e.getFirstPosition().root;if(!r.mapper.toViewElement(o))return;const s=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(r.consumable,e,s),this.fire("selection",{selection:e},r),!!e.isCollapsed){for(const l of s)if(r.consumable.test(e,"addMarker:"+l.name)){const c=l.getRange();if(!ZR(e.getFirstPosition(),l,r.mapper))continue;const h={item:e,markerName:l.name,markerRange:c};this.fire(`addMarker:${l.name}`,h,r)}for(const l of e.getAttributeKeys())if(r.consumable.test(e,"attribute:"+l)){const c={item:e,range:e.getFirstRange(),attributeKey:l,attributeOldValue:null,attributeNewValue:e.getAttribute(l)};this.fire(`attribute:${l}:$text`,c,r)}}}_convertInsert(e,t,n={}){n.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(const r of Array.from(e.getWalker({shallow:!0})).map(zw))this._testAndFire("insert",r,t)}_convertRemove(e,t,n,r){this.fire(`remove:${n}`,{position:e,length:t},r)}_convertAttribute(e,t,n,r,o){this._addConsumablesForRange(o.consumable,e,`attribute:${t}`);for(const s of e){const l={item:s.item,range:ze._createFromPositionAndShift(s.previousPosition,s.length),attributeKey:t,attributeOldValue:n,attributeNewValue:r};this._testAndFire(`attribute:${t}`,l,o)}}_convertReinsert(e,t){const n=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,n);for(const r of n.map(zw))this._testAndFire("insert",{...r,reconversion:!0},t)}_convertMarkerAdd(e,t,n){if(t.root.rootName=="$graveyard")return;const r=`addMarker:${e}`;if(n.consumable.add(t,r),this.fire(r,{markerName:e,markerRange:t},n),!!n.consumable.consume(t,r)){this._addConsumablesForRange(n.consumable,t,r);for(const o of t.getItems()){if(!n.consumable.test(o,r))continue;const s={item:o,range:ze._createOn(o),markerName:e,markerRange:t};this.fire(r,s,n)}}}_convertMarkerRemove(e,t,n){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},n)}_reduceChanges(e){const t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(const n of t){const r=n.item;if(e.test(r,"insert")===null){e.add(r,"insert");for(const o of r.getAttributeKeys())e.add(r,"attribute:"+o)}}return e}_addConsumablesForRange(e,t,n){for(const r of t.getItems())e.add(r,n);return e}_addConsumablesForSelection(e,t,n){e.add(t,"selection");for(const r of n)e.add(t,"addMarker:"+r.name);for(const r of t.getAttributeKeys())e.add(t,"attribute:"+r);return e}_testAndFire(e,t,n){const r=YR(e,t),o=t.item.is("$textProxy")?n.consumable._getSymbolForTextProxy(t.item):t.item,s=this._firedEventsMap.get(n),l=s.get(o);if(!l)s.set(o,new Set([r]));else if(!l.has(r))l.add(r);else return;this.fire(r,t,n)}_testAndFireAddAttributes(e,t){const n={item:e,range:ze._createOn(e)};for(const r of n.item.getAttributeKeys())n.attributeKey=r,n.attributeOldValue=null,n.attributeNewValue=n.item.getAttribute(r),this._testAndFire(`attribute:${r}`,n,t)}_createConversionApi(e,t=new Set,n={}){const r={...this._conversionApi,consumable:new KR,writer:e,options:n,convertItem:o=>this._convertInsert(ze._createOn(o),r),convertChildren:o=>this._convertInsert(ze._createIn(o),r,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,r),canReuseView:o=>!t.has(r.mapper.toModelElement(o))};return this._firedEventsMap.set(r,new Map),r}}function ZR(i,e,t){const n=e.getRange(),r=Array.from(i.getAncestors());return r.shift(),r.reverse(),!r.some(s=>{if(n.containsItem(s))return!!t.toViewElement(s).getCustomProperty("addHighlight")})}function YR(i,e){const t=e.item.is("element")?e.item.name:"$text";return`${i}:${t}`}function zw(i){const e=i.item,t=ze._createFromPositionAndShift(i.previousPosition,i.length);return{item:e,range:t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ko extends Yn(Cc){constructor(...e){super(),this._lastRangeBackward=!1,this._attrs=new Map,this._ranges=[],e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let n=!1;for(const r of e._ranges)if(t.isEqual(r)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new ze(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new ze(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new ze(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,n,r]=e;if(typeof n=="object"&&(r=n,n=void 0),t===null)this._setRanges([]);else if(t instanceof Ko)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof ze)this._setRanges([t],!!r&&!!r.backward);else if(t instanceof Xe)this._setRanges([new ze(t)]);else if(t instanceof Tu){const o=!!r&&!!r.backward;let s;if(n=="in")s=ze._createIn(t);else if(n=="on")s=ze._createOn(t);else if(n!==void 0)s=new ze(Xe._createAt(t,n));else throw new be("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([s],o)}else if(es(t))this._setRanges(t,r&&!!r.backward);else throw new be("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){const n=Array.from(e),r=n.some(o=>{if(!(o instanceof ze))throw new be("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(s=>!s.isEqual(o))});n.length===this._ranges.length&&!r||(this._replaceAllRanges(n),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new be("model-selection-setfocus-no-ranges",[this,e]);const n=Xe._createAt(e,t);if(n.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),n.compareWith(r)=="before"?(this._pushRange(new ze(n,r)),this._lastRangeBackward=!0):(this._pushRange(new ze(r,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const n=Hw(t.start,e);XR(n,t)&&(yield n);for(const o of t.getWalker()){const s=o.item;o.type=="elementEnd"&&JR(s,e,t)&&(yield s)}const r=Hw(t.end,e);QR(r,t)&&(yield r)}}containsEntireContent(e=this.anchor.root){const t=Xe._createAt(e,0),n=Xe._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new ze(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new be("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Ko.prototype.is=function(i){return i==="selection"||i==="model:selection"};function FC(i,e){return e.has(i)?!1:(e.add(i),i.root.document.model.schema.isBlock(i)&&!!i.parent)}function JR(i,e,t){return FC(i,e)&&j0(i,t)}function Hw(i,e){const n=i.parent.root.document.model.schema,r=i.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const s=r.find(l=>o?!1:(o=n.isLimit(l),!o&&FC(l,e)));return r.forEach(l=>e.add(l)),s}function j0(i,e){const t=eO(i);return t?!e.containsRange(ze._createOn(t),!0):!0}function XR(i,e){return i?e.isCollapsed||i.isEmpty?!0:e.start.isTouching(Xe._createAt(i,i.maxOffset))?!1:j0(i,e):!1}function QR(i,e){return i?e.isCollapsed||i.isEmpty?!0:e.end.isTouching(Xe._createAt(i,0))?!1:j0(i,e):!1}function eO(i){const e=i.root.document.model.schema;let t=i.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ro extends Yn(ze){constructor(e,t){super(e,t),tO.call(this)}detach(){this.stopListening()}toRange(){return new ze(this.start,this.end)}static fromRange(e){return new Ro(e.start,e.end)}}Ro.prototype.is=function(i){return i==="liveRange"||i==="model:liveRange"||i=="range"||i==="model:range"};function tO(){this.listenTo(this.root.document.model,"applyOperation",(i,e)=>{const t=e[0];t.isDocumentOperation&&nO.call(this,t)},{priority:"low"})}function nO(i){const e=this.getTransformedByOperation(i),t=ze._createFromRanges(e),n=!t.isEqual(this),r=iO(this,i);let o=null;if(n){t.root.rootName=="$graveyard"&&(i.type=="remove"?o=i.sourcePosition:o=i.deletionPosition);const s=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",s,{deletionPosition:o})}else r&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function iO(i,e){switch(e.type){case"insert":return i.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return i.containsPosition(e.sourcePosition)||i.start.isEqual(e.sourcePosition)||i.containsPosition(e.targetPosition);case"split":return i.containsPosition(e.splitPosition)||i.containsPosition(e.insertionPosition)}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const kf="selection:";class Zs extends Yn(Cc){constructor(e){super(),this._selection=new rO(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return kf+e}static _isStoreAttributeKey(e){return e.startsWith(kf)}}Zs.prototype.is=function(i){return i==="selection"||i=="model:selection"||i=="documentSelection"||i=="model:documentSelection"};class rO extends Ko{constructor(e){super(),this.markers=new Or({idProperty:"name"}),this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,n)=>{const r=n[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,n,r,o)=>{this._updateMarker(n,o)}),this.listenTo(this._document,"change",(t,n)=>{oO(this._model,n)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=xs();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new be("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new be("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Ro.fromRange(e);return t.on("change:range",(n,r,o)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const s=this._ranges.indexOf(t);this._ranges.splice(s,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const s=r.getRange();for(const l of this.getRanges())s.containsRange(l,!l.isCollapsed)&&e.push(r)}const n=Array.from(this.markers);for(const r of e)this.markers.has(r)||(this.markers.add(r),t=!0);for(const r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),t=!0);t&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(e,t){const n=e.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let r=!1;const o=Array.from(this.markers),s=this.markers.has(e);if(!t)s&&(this.markers.remove(e),r=!0);else{let l=!1;for(const c of this.getRanges())if(t.containsRange(c,!c.isCollapsed)){l=!0;break}l&&!s?(this.markers.add(e),r=!0):!l&&s&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const t=Ta(this._getSurroundingAttributes()),n=Ta(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,s]of this._attributePriority)s=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(t);const r=[];for(const[o,s]of this.getAttributes())(!n.has(o)||n.get(o)!==s)&&r.push(o);for(const[o]of n)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,t,n=!0){const r=n?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,r),!0)}_removeAttribute(e,t=!0){const n=t?"normal":"low";return n=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,n),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const t=new Set;for(const[n,r]of this.getAttributes())e.get(n)!==r&&this._removeAttribute(n,!1);for(const[n,r]of e)this._setAttribute(n,r,!1)&&t.add(n);return t}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(kf)&&(yield[t.substr(kf.length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let n=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=Yh(r,t)),n||(n=Yh(o,t)),!this.isGravityOverridden&&!n){let s=r;for(;s&&!n;)s=s.previousSibling,n=Yh(s,t)}if(!n){let s=o;for(;s&&!n;)s=s.nextSibling,n=Yh(s,t)}n||(n=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&t.isObject(o.item)){n=Yh(o.item,t);break}if(o.type=="text"){n=o.item.getAttributes();break}}}return n}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function Yh(i,e){if(!i)return null;if(i instanceof Gs||i instanceof Kn)return i.getAttributes();if(!e.isInline(i))return null;if(!e.isObject(i))return[];const t=[];for(const[n,r]of i.getAttributes())e.checkAttribute("$text",n)&&e.getAttributeProperties(n).copyFromObject!==!1&&t.push([n,r]);return t}function oO(i,e){const t=i.document.differ;for(const n of t.getChanges()){if(n.type!="insert")continue;const r=n.position.parent;n.length===r.maxOffset&&i.enqueueChange(e,s=>{const l=Array.from(r.getAttributeKeys()).filter(c=>c.startsWith(kf));for(const c of l)s.removeAttribute(c,r)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MC{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sO extends MC{elementToElement(e){return this.add(xO(e))}elementToStructure(e){return this.add(EO(e))}attributeToElement(e){return this.add(SO(e))}attributeToAttribute(e){return this.add(TO(e))}markerToElement(e){return this.add(AO(e))}markerToHighlight(e){return this.add(IO(e))}markerToData(e){return this.add(PO(e))}}function LC(){return(i,e,t)=>{if(!t.consumable.consume(e.item,i.name))return;const n=t.writer,r=t.mapper.toViewPosition(e.range.start),o=n.createText(e.item.data);n.insert(r,o)}}function BC(){return(i,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function aO(){return(i,e,t)=>{const n=t.mapper.toViewPosition(e.position),r=e.position.getShiftedBy(e.length),o=t.mapper.toViewPosition(r,{isPhantom:!0}),s=t.writer.createRange(n,o),l=t.writer.remove(s.getTrimmed());for(const c of t.writer.createRangeIn(l).getItems())t.mapper.unbindViewElement(c,{defer:!0})}}function NC(i,e){const t=i.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function lO(){return(i,e,t)=>{const n=e.selection;if(n.isCollapsed||!t.consumable.consume(n,"selection"))return;const r=[];for(const o of n.getRanges())r.push(t.mapper.toViewRange(o));t.writer.setSelection(r,{backward:n.isBackward})}}function cO(){return(i,e,t)=>{const n=e.selection;if(!n.isCollapsed||!t.consumable.consume(n,"selection"))return;const r=t.writer,o=n.getFirstPosition(),s=t.mapper.toViewPosition(o),l=r.breakAttributes(s);r.setSelection(l)}}function uO(){return(i,e,t)=>{const n=t.writer,r=n.document.selection;for(const o of r.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&t.writer.mergeAttributes(o.start);n.setSelection(null)}}function dO(i){return(e,t,n)=>{if(!n.consumable.test(t.item,e.name))return;const r=i(t.attributeOldValue,n,t),o=i(t.attributeNewValue,n,t);if(!r&&!o)return;n.consumable.consume(t.item,e.name);const s=n.writer,l=s.document.selection;if(t.item instanceof Ko||t.item instanceof Zs)s.wrap(l.getFirstRange(),o);else{let c=n.mapper.toViewRange(t.range);t.attributeOldValue!==null&&r&&(c=s.unwrap(c,r)),t.attributeNewValue!==null&&o&&s.wrap(c,o)}}}function hO(i,e=BO){return(t,n,r)=>{if(!e(n.item,r.consumable,{preflight:!0}))return;const o=i(n.item,r,n);if(!o)return;e(n.item,r.consumable);const s=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(n.item,o),r.writer.insert(s,o),r.convertAttributes(n.item),WC(o,n.item.getChildren(),r,{reconversion:n.reconversion})}}function fO(i,e){return(t,n,r)=>{if(!e(n.item,r.consumable,{preflight:!0}))return;const o=new Map;r.writer._registerSlotFactory(OO(n.item,o,r));const s=i(n.item,r,n);if(r.writer._clearSlotFactory(),!s)return;FO(n.item,o,r),e(n.item,r.consumable);const l=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(n.item,s),r.writer.insert(l,s),r.convertAttributes(n.item),MO(s,o,r,{reconversion:n.reconversion})}}function mO(i){return(e,t,n)=>{t.isOpening=!0;const r=i(t,n);t.isOpening=!1;const o=i(t,n);if(!r||!o)return;const s=t.markerRange;if(s.isCollapsed&&!n.consumable.consume(s,e.name))return;for(const h of s)if(!n.consumable.consume(h.item,e.name))return;const l=n.mapper,c=n.writer;c.insert(l.toViewPosition(s.start),r),n.mapper.bindElementToMarker(r,t.markerName),s.isCollapsed||(c.insert(l.toViewPosition(s.end),o),n.mapper.bindElementToMarker(o,t.markerName)),e.stop()}}function pO(){return(i,e,t)=>{const n=t.mapper.markerNameToElements(e.markerName);if(n){for(const r of n)t.mapper.unbindElementFromMarkerName(r,e.markerName),t.writer.clear(t.writer.createRangeOn(r),r);t.writer.clearClonedElementsGroup(e.markerName),i.stop()}}}function gO(i){return(e,t,n)=>{const r=i(t.markerName,n);if(!r)return;const o=t.markerRange;n.consumable.consume(o,e.name)&&(Uw(o,!1,n,t,r),Uw(o,!0,n,t,r),e.stop())}}function Uw(i,e,t,n,r){const o=e?i.start:i.end,s=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,l=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(s||l){let h,g;e&&s||!e&&!l?(h=s,g=!0):(h=l,g=!1);const b=t.mapper.toViewElement(h);if(b){bO(b,e,g,t,n,r);return}}const c=t.mapper.toViewPosition(o);vO(c,e,t,n,r)}function bO(i,e,t,n,r,o){const s=`data-${o.group}-${e?"start":"end"}-${t?"before":"after"}`,l=i.hasAttribute(s)?i.getAttribute(s).split(","):[];l.unshift(o.name),n.writer.setAttribute(s,l.join(","),i),n.mapper.bindElementToMarker(i,r.markerName)}function vO(i,e,t,n,r){const o=`${r.group}-${e?"start":"end"}`,s=r.name?{name:r.name}:null,l=t.writer.createUIElement(o,s);t.writer.insert(i,l),t.mapper.bindElementToMarker(l,n.markerName)}function wO(i){return(e,t,n)=>{const r=i(t.markerName,n);if(!r)return;const o=n.mapper.markerNameToElements(t.markerName);if(!o)return;for(const l of o)n.mapper.unbindElementFromMarkerName(l,t.markerName),l.is("containerElement")?(s(`data-${r.group}-start-before`,l),s(`data-${r.group}-start-after`,l),s(`data-${r.group}-end-before`,l),s(`data-${r.group}-end-after`,l)):n.writer.clear(n.writer.createRangeOn(l),l);n.writer.clearClonedElementsGroup(t.markerName),e.stop();function s(l,c){if(c.hasAttribute(l)){const h=new Set(c.getAttribute(l).split(","));h.delete(r.name),h.size==0?n.writer.removeAttribute(l,c):n.writer.setAttribute(l,Array.from(h).join(","),c)}}}}function yO(i){return(e,t,n)=>{if(!n.consumable.test(t.item,e.name))return;const r=i(t.attributeOldValue,n,t),o=i(t.attributeNewValue,n,t);if(!r&&!o)return;n.consumable.consume(t.item,e.name);const s=n.mapper.toViewElement(t.item),l=n.writer;if(!s)throw new be("conversion-attribute-to-attribute-on-text",n.dispatcher,t);if(t.attributeOldValue!==null&&r)if(r.key=="class"){const c=typeof r.value=="string"?r.value.split(/\s+/):r.value;for(const h of c)l.removeClass(h,s)}else if(r.key=="style")if(typeof r.value=="string"){const c=new kp(l.document.stylesProcessor);c.setTo(r.value);for(const[h]of c.getStylesEntries())l.removeStyle(h,s)}else{const c=Object.keys(r.value);for(const h of c)l.removeStyle(h,s)}else l.removeAttribute(r.key,s);if(t.attributeNewValue!==null&&o)if(o.key=="class"){const c=typeof o.value=="string"?o.value.split(/\s+/):o.value;for(const h of c)l.addClass(h,s)}else if(o.key=="style")if(typeof o.value=="string"){const c=new kp(l.document.stylesProcessor);c.setTo(o.value);for(const[h,g]of c.getStylesEntries())l.setStyle(h,g,s)}else{const c=Object.keys(o.value);for(const h of c)l.setStyle(h,o.value[h],s)}else l.setAttribute(o.key,o.value,s)}}function _O(i){return(e,t,n)=>{if(!t.item||!(t.item instanceof Ko||t.item instanceof Zs)&&!t.item.is("$textProxy"))return;const r=$0(i,t,n);if(!r||!n.consumable.consume(t.item,e.name))return;const o=n.writer,s=NC(o,r),l=o.document.selection;if(t.item instanceof Ko||t.item instanceof Zs)o.wrap(l.getFirstRange(),s);else{const c=n.mapper.toViewRange(t.range),h=o.wrap(c,s);for(const g of h.getItems())if(g.is("attributeElement")&&g.isSimilar(s)){n.mapper.bindElementToMarker(g,t.markerName);break}}}}function kO(i){return(e,t,n)=>{if(!t.item||!(t.item instanceof ci))return;const r=$0(i,t,n);if(!r||!n.consumable.test(t.item,e.name))return;const o=n.mapper.toViewElement(t.item);if(o&&o.getCustomProperty("addHighlight")){n.consumable.consume(t.item,e.name);for(const l of ze._createIn(t.item))n.consumable.consume(l.item,e.name);o.getCustomProperty("addHighlight")(o,r,n.writer),n.mapper.bindElementToMarker(o,t.markerName)}}}function CO(i){return(e,t,n)=>{if(t.markerRange.isCollapsed)return;const r=$0(i,t,n);if(!r)return;const o=NC(n.writer,r),s=n.mapper.markerNameToElements(t.markerName);if(s){for(const l of s)n.mapper.unbindElementFromMarkerName(l,t.markerName),l.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(l),o):l.getCustomProperty("removeHighlight")(l,r.id,n.writer);n.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function xO(i){const e=VC(i.model),t=Cf(i.view,"container");return e.attributes.length&&(e.children=!0),n=>{n.on(`insert:${e.name}`,hO(t,UC(e)),{priority:i.converterPriority||"normal"}),(e.children||e.attributes.length)&&n.on("reduceChanges",HC(e),{priority:"low"})}}function EO(i){const e=VC(i.model),t=Cf(i.view,"container");return e.children=!0,n=>{if(n._conversionApi.schema.checkChild(e.name,"$text"))throw new be("conversion-element-to-structure-disallowed-text",n,{elementName:e.name});n.on(`insert:${e.name}`,fO(t,UC(e)),{priority:i.converterPriority||"normal"}),n.on("reduceChanges",HC(e),{priority:"low"})}}function SO(i){i=Ss(i);let e=i.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const r of e.values)i.view[r]=Cf(i.view[r],"attribute");else i.view=Cf(i.view,"attribute");const n=zC(i);return r=>{r.on(t,dO(n),{priority:i.converterPriority||"normal"})}}function TO(i){i=Ss(i);let e=i.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const r of e.values)i.view[r]=Ww(i.view[r]);else i.view=Ww(i.view);const n=zC(i);return r=>{r.on(t,yO(n),{priority:i.converterPriority||"normal"})}}function AO(i){const e=Cf(i.view,"ui");return t=>{t.on(`addMarker:${i.model}`,mO(e),{priority:i.converterPriority||"normal"}),t.on(`removeMarker:${i.model}`,pO(),{priority:i.converterPriority||"normal"})}}function PO(i){i=Ss(i);const e=i.model;let t=i.view;return t||(t=n=>({group:e,name:n.substr(i.model.length+1)})),n=>{n.on(`addMarker:${e}`,gO(t),{priority:i.converterPriority||"normal"}),n.on(`removeMarker:${e}`,wO(t),{priority:i.converterPriority||"normal"})}}function IO(i){return e=>{e.on(`addMarker:${i.model}`,_O(i.view),{priority:i.converterPriority||"normal"}),e.on(`addMarker:${i.model}`,kO(i.view),{priority:i.converterPriority||"normal"}),e.on(`removeMarker:${i.model}`,CO(i.view),{priority:i.converterPriority||"normal"})}}function VC(i){return typeof i=="string"&&(i={name:i}),{name:i.name,attributes:i.attributes?An(i.attributes):[],children:!!i.children}}function Cf(i,e){return typeof i=="function"?i:(t,n)=>DO(i,n,e)}function DO(i,e,t){typeof i=="string"&&(i={name:i});let n;const r=e.writer,o=Object.assign({},i.attributes);if(t=="container")n=r.createContainerElement(i.name,o);else if(t=="attribute"){const s={priority:i.priority||uu.DEFAULT_PRIORITY};n=r.createAttributeElement(i.name,o,s)}else n=r.createUIElement(i.name,o);if(i.styles){const s=Object.keys(i.styles);for(const l of s)r.setStyle(l,i.styles[l],n)}if(i.classes){const s=i.classes;if(typeof s=="string")r.addClass(s,n);else for(const l of s)r.addClass(l,n)}return n}function zC(i){return i.model.values?(e,t,n)=>{const r=i.view[e];return r?r(e,t,n):null}:i.view}function Ww(i){return typeof i=="string"?e=>({key:i,value:e}):typeof i=="object"?i.value?()=>i:e=>({key:i.key,value:e}):i}function $0(i,e,t){const n=typeof i=="function"?i(e,t):i;return n?(n.priority||(n.priority=10),n.id||(n.id=e.markerName),n):null}function RO(i){return(e,t)=>{if(!e.is("element",i.name))return!1;if(t.type=="attribute"){if(i.attributes.includes(t.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(i.children)return!0}return!1}}function HC(i){const e=RO(i);return(t,n)=>{const r=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(const o of n.changes){const s=o.type=="attribute"?o.range.start.nodeAfter:o.position.parent;if(!s||!e(s,o)){r.push(o);continue}if(!n.reconvertedElements.has(s)){n.reconvertedElements.add(s);const l=Xe._createBefore(s);let c=r.length;for(let h=r.length-1;h>=0;h--){const g=r[h],y=(g.type=="attribute"?g.range.start:g.position).compareWith(l);if(y=="before"||g.type=="remove"&&y=="same")break;c=h}r.splice(c,0,{type:"remove",name:s.name,position:l,length:1},{type:"reinsert",name:s.name,position:l,length:1})}}n.changes=r}}function UC(i){return(e,t,n={})=>{const r=["insert"];for(const o of i.attributes)e.hasAttribute(o)&&r.push(`attribute:${o}`);return r.every(o=>t.test(e,o))?(n.preflight||r.forEach(o=>t.consume(e,o)),!0):!1}}function OO(i,e,t){return(n,r)=>{const o=n.createContainerElement("$slot");let s=null;if(r==="children")s=Array.from(i.getChildren());else if(typeof r=="function")s=Array.from(i.getChildren()).filter(l=>r(l));else throw new be("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:r});return e.set(o,s),o}}function FO(i,e,t){const n=Array.from(e.values()).flat(),r=new Set(n);if(r.size!=n.length)throw new be("conversion-slot-filter-overlap",t.dispatcher,{element:i});if(r.size!=i.childCount)throw new be("conversion-slot-filter-incomplete",t.dispatcher,{element:i})}function MO(i,e,t,n){t.mapper.on("modelToViewPosition",s,{priority:"highest"});let r=null,o=null;for([r,o]of e)WC(i,o,t,n),t.writer.move(t.writer.createRangeIn(r),t.writer.createPositionBefore(r)),t.writer.remove(r);t.mapper.off("modelToViewPosition",s);function s(l,c){const h=c.modelPosition.nodeAfter,g=o.indexOf(h);g<0||(c.viewPosition=c.mapper.findPositionIn(r,g))}}function WC(i,e,t,n){for(const r of e)LO(i.root,r,t,n)||t.convertItem(r)}function LO(i,e,t,n){const{writer:r,mapper:o}=t;if(!n.reconversion)return!1;const s=o.toViewElement(e);return!s||s.root==i||!t.canReuseView(s)?!1:(r.move(r.createRangeOn(s),o.toViewPosition(Xe._createBefore(e))),!0)}function BO(i,e,{preflight:t}={}){return t?e.test(i,"insert"):e.consume(i,"insert")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jC(i){const{schema:e,document:t}=i.model;for(const n of t.getRoots())if(n.isEmpty&&!e.checkChild(n,"$text")&&e.checkChild(n,"paragraph"))return i.insertElement("paragraph",n),!0;return!1}function $C(i,e,t){const n=t.createContext(i);return!(!t.checkChild(n,"paragraph")||!t.checkChild(n.push("paragraph"),e))}function qC(i,e){const t=e.createElement("paragraph");return e.insert(t,i),e.createPositionAt(t,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NO extends MC{elementToElement(e){return this.add(GC(e))}elementToAttribute(e){return this.add(HO(e))}attributeToAttribute(e){return this.add(UO(e))}elementToMarker(e){return this.add(WO(e))}dataToMarker(e){return this.add(jO(e))}}function jw(){return(i,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:n,modelCursor:r}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=n,e.modelCursor=r}}}function VO(){return(i,e,{schema:t,consumable:n,writer:r})=>{let o=e.modelCursor;if(!n.test(e.viewItem))return;if(!t.checkChild(o,"$text")){if(!$C(o,"$text",t)||e.viewItem.data.trim().length==0)return;o=qC(o,r)}n.consume(e.viewItem);const s=r.createText(e.viewItem.data);r.insert(s,o),e.modelRange=r.createRange(o,o.getShiftedBy(s.offsetSize)),e.modelCursor=e.modelRange.end}}function zO(i,e){return(t,n)=>{const r=n.newSelection,o=[];for(const l of r.getRanges())o.push(e.toModelRange(l));const s=i.createSelection(o,{backward:r.isBackward});s.isEqual(i.document.selection)||i.change(l=>{l.setSelection(s)})}}function GC(i){i=Ss(i);const e=Gb(i),t=q0(i.view),n=t?`element:${t}`:"element";return r=>{r.on(n,e,{priority:i.converterPriority||"normal"})}}function HO(i){i=Ss(i),KC(i);const e=ZC(i,!1),t=q0(i.view),n=t?`element:${t}`:"element";return r=>{r.on(n,e,{priority:i.converterPriority||"low"})}}function UO(i){i=Ss(i);let e=null;(typeof i.view=="string"||i.view.key)&&(e=GO(i)),KC(i,e);const t=ZC(i,!0);return n=>{n.on("element",t,{priority:i.converterPriority||"low"})}}function WO(i){const e=YO(i.model);return GC({...i,model:e})}function jO(i){i=Ss(i),i.model||(i.model=r=>r?i.view+":"+r:i.view);const e={view:i.view,model:i.model},t=Gb($w(e,"start")),n=Gb($w(e,"end"));return r=>{r.on(`element:${i.view}-start`,t,{priority:i.converterPriority||"normal"}),r.on(`element:${i.view}-end`,n,{priority:i.converterPriority||"normal"});const o=Zo.low,s=Zo.highest,l=Zo.get(i.converterPriority)/s;r.on("element",$O(e),{priority:o+l})}}function $O(i){return(e,t,n)=>{const r=`data-${i.view}`;if(!n.consumable.test(t.viewItem,{attributes:r+"-end-after"})&&!n.consumable.test(t.viewItem,{attributes:r+"-start-after"})&&!n.consumable.test(t.viewItem,{attributes:r+"-end-before"})&&!n.consumable.test(t.viewItem,{attributes:r+"-start-before"}))return;t.modelRange||Object.assign(t,n.convertChildren(t.viewItem,t.modelCursor)),n.consumable.consume(t.viewItem,{attributes:r+"-end-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(r+"-end-after").split(",")),n.consumable.consume(t.viewItem,{attributes:r+"-start-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(r+"-start-after").split(",")),n.consumable.consume(t.viewItem,{attributes:r+"-end-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(r+"-end-before").split(",")),n.consumable.consume(t.viewItem,{attributes:r+"-start-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(r+"-start-before").split(","));function o(s,l){for(const c of l){const h=i.model(c,n),g=n.writer.createElement("$marker",{"data-name":h});n.writer.insert(g,s),t.modelCursor.isEqual(s)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(s,1),t.modelRange=t.modelRange._getTransformedByInsertion(s,1)[0]}}}}function q0(i){return typeof i=="string"?i:typeof i=="object"&&typeof i.name=="string"?i.name:null}function Gb(i){const e=new wc(i.view);return(t,n,r)=>{const o=e.match(n.viewItem);if(!o)return;const s=o.match;if(s.name=!0,!r.consumable.test(n.viewItem,s))return;const l=qO(i.model,n.viewItem,r);l&&r.safeInsert(l,n.modelCursor)&&(r.consumable.consume(n.viewItem,s),r.convertChildren(n.viewItem,l),r.updateConversionResult(l,n))}}function qO(i,e,t){return i instanceof Function?i(e,t):t.writer.createElement(i)}function GO(i){typeof i.view=="string"&&(i.view={key:i.view});const e=i.view.key,t=typeof i.view.value>"u"?/[\s\S]*/:i.view.value;let n;return e=="class"||e=="style"?n={[e=="class"?"classes":"styles"]:t}:n={attributes:{[e]:t}},i.view.name&&(n.name=i.view.name),i.view=n,e}function KC(i,e=null){const t=e===null?!0:o=>o.getAttribute(e),n=typeof i.model!="object"?i.model:i.model.key,r=typeof i.model!="object"||typeof i.model.value>"u"?t:i.model.value;i.model={key:n,value:r}}function ZC(i,e){const t=new wc(i.view);return(n,r,o)=>{if(!r.modelRange&&e)return;const s=t.match(r.viewItem);if(!s||(KO(i.view,r.viewItem)?s.match.name=!0:delete s.match.name,!o.consumable.test(r.viewItem,s.match)))return;const l=i.model.key,c=typeof i.model.value=="function"?i.model.value(r.viewItem,o):i.model.value;if(c===null)return;r.modelRange||Object.assign(r,o.convertChildren(r.viewItem,r.modelCursor)),ZO(r.modelRange,{key:l,value:c},e,o)&&(o.consumable.test(r.viewItem,{name:!0})&&(s.match.name=!0),o.consumable.consume(r.viewItem,s.match))}}function KO(i,e){const t=typeof i=="function"?i(e):i;return typeof t=="object"&&!q0(t)?!1:!t.classes&&!t.attributes&&!t.styles}function ZO(i,e,t,n){let r=!1;for(const o of Array.from(i.getItems({shallow:t})))n.schema.checkAttribute(o,e.key)&&(r=!0,!o.hasAttribute(e.key)&&n.writer.setAttribute(e.key,e.value,o));return r}function YO(i){return(e,t)=>{const n=typeof i=="string"?i:i(e,t);return t.writer.createElement("$marker",{"data-name":n})}}function $w(i,e){const t=(n,r)=>{const o=n.getAttribute("name"),s=i.model(o,r);return r.writer.createElement("$marker",{"data-name":s})};return{view:`${i.view}-${e}`,model:t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function JO(i){i.document.registerPostFixer(e=>XO(e,i))}function XO(i,e){const t=e.document.selection,n=e.schema,r=[];let o=!1;for(const s of t.getRanges()){const l=YC(s,n);l&&!l.isEqual(s)?(r.push(l),o=!0):r.push(s)}return o&&i.setSelection(nF(r),{backward:t.isBackward}),!1}function YC(i,e){return i.isCollapsed?QO(i,e):eF(i,e)}function QO(i,e){const t=i.start,n=e.getNearestSelectionRange(t);if(!n){const o=t.getAncestors().reverse().find(s=>e.isObject(s));return o?ze._createOn(o):null}if(!n.isCollapsed)return n;const r=n.start;return t.isEqual(r)?null:new ze(r)}function eF(i,e){const{start:t,end:n}=i,r=e.checkChild(t,"$text"),o=e.checkChild(n,"$text"),s=e.getLimitElement(t),l=e.getLimitElement(n);if(s===l){if(r&&o)return null;if(tF(t,n,e)){const b=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),k=n.nodeBefore&&e.isSelectable(n.nodeBefore)?null:e.getNearestSelectionRange(n,"backward"),x=b?b.start:t,D=k?k.end:n;return new ze(x,D)}}const c=s&&!s.is("rootElement"),h=l&&!l.is("rootElement");if(c||h){const g=t.nodeAfter&&n.nodeBefore&&t.nodeAfter.parent===n.nodeBefore.parent,b=c&&(!g||!Gw(t.nodeAfter,e)),y=h&&(!g||!Gw(n.nodeBefore,e));let k=t,x=n;return b&&(k=Xe._createBefore(qw(s,e))),y&&(x=Xe._createAfter(qw(l,e))),new ze(k,x)}return null}function qw(i,e){let t=i,n=t;for(;e.isLimit(n)&&n.parent;)t=n,n=n.parent;return t}function tF(i,e,t){const n=i.nodeAfter&&!t.isLimit(i.nodeAfter)||t.checkChild(i,"$text"),r=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return n||r}function nF(i){const e=[...i],t=new Set;let n=1;for(;n<e.length;){const o=e[n],s=e.slice(0,n);for(const[l,c]of s.entries())if(!t.has(l)){if(o.isEqual(c))t.add(l);else if(o.isIntersecting(c)){t.add(l),t.add(n);const h=o.getJoined(c);e.push(h)}}n++}return e.filter((o,s)=>!t.has(s))}function Gw(i,e){return i&&e.isSelectable(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iF extends Vn(){constructor(e,t){super(),this.model=e,this.view=new $R(t),this.mapper=new RC,this.downcastDispatcher=new OC({mapper:this.mapper,schema:e.schema});const n=this.model.document,r=n.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(n,"change",()=>{this.view.change(s=>{this.downcastDispatcher.convertChanges(n.differ,o,s),this.downcastDispatcher.convertSelection(r,o,s)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",zO(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",rF(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",LC(),{priority:"lowest"}),this.downcastDispatcher.on("insert",BC(),{priority:"lowest"}),this.downcastDispatcher.on("remove",aO(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",uO()),this.downcastDispatcher.on("selection",lO(),{priority:"low"}),this.downcastDispatcher.on("selection",cO(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(s=>{if(s.rootName=="$graveyard")return null;const l=new gC(this.view.document,s.name);return l.rootName=s.rootName,this.mapper.bindElements(s,l),l})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t=typeof e=="string"?e:e.name,n=this.model.markers.get(t);if(!n)throw new be("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(n)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function rF(i,e,t){return(n,r)=>{if(!(t.document.isComposing&&!Yt.isAndroid))for(let o=0;o<r.targetRanges.length;o++){const s=r.targetRanges[o],l=i.toModelRange(s),c=YC(l,e);!c||c.isEqual(l)||(r.targetRanges[o]=i.toViewRange(c))}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hf{constructor(){this._consumables=new Map}add(e,t){let n;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?n=this._consumables.get(e):(n=new oF(e),this._consumables.set(e,n)),n.add(t)}test(e,t){const n=this._consumables.get(e);return n===void 0?null:e.is("$text")||e.is("documentFragment")?n:n.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){const n=this._consumables.get(e);n!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):n.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},n=e.getAttributeKeys();for(const s of n)s=="style"||s=="class"||t.attributes.push(s);const r=e.getClassNames();for(const s of r)t.classes.push(s);const o=e.getStyleNames();for(const s of o)t.styles.push(s);return t}static createFrom(e,t){if(t||(t=new hf),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,hf.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const n of e.getChildren())t=hf.createFrom(n,t);return t}}const Dm=["attributes","classes","styles"];class oF{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of Dm)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t of Dm)if(t in e){const n=this._test(t,e[t]);if(n!==!0)return n}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of Dm)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of Dm)t in e&&this._revert(t,e[t])}_add(e,t){const n=An(t),r=this._consumables[e];for(const o of n){if(e==="attributes"&&(o==="class"||o==="style"))throw new be("viewconsumable-invalid-attribute",this);if(r.set(o,!0),e==="styles")for(const s of this.element.document.stylesProcessor.getRelatedStyles(o))r.set(s,!0)}}_test(e,t){const n=An(t),r=this._consumables[e];for(const o of n)if(e==="attributes"&&(o==="class"||o==="style")){const s=o=="class"?"classes":"styles",l=this._test(s,[...this._consumables[s].keys()]);if(l!==!0)return l}else{const s=r.get(o);if(s===void 0)return null;if(!s)return!1}return!0}_consume(e,t){const n=An(t),r=this._consumables[e];for(const o of n)if(e==="attributes"&&(o==="class"||o==="style")){const s=o=="class"?"classes":"styles";this._consume(s,[...this._consumables[s].keys()])}else if(r.set(o,!1),e=="styles")for(const s of this.element.document.stylesProcessor.getRelatedStyles(o))r.set(s,!1)}_revert(e,t){const n=An(t),r=this._consumables[e];for(const o of n)if(e==="attributes"&&(o==="class"||o==="style")){const s=o=="class"?"classes":"styles";this._revert(s,[...this._consumables[s].keys()])}else r.get(o)===!1&&r.set(o,!0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sF extends Vn(){constructor(){super(),this._sourceDefinitions={},this._attributeProperties=Object.create(null),this._customChildChecks=new Map,this._customAttributeChecks=new Map,this._genericCheckSymbol=Symbol("$generic"),this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new bc(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new bc(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new be("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new be("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){const t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){const t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){const t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){const t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){const t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(e,t):!1}checkAttribute(e,t){const n=this.getDefinition(e.last);if(!n)return!1;const r=this._evaluateAttributeChecks(e,t);return r!==void 0?r:n.allowAttributes.includes(t)}checkMerge(e,t){if(e instanceof Xe){const n=e.nodeBefore,r=e.nodeAfter;if(!(n instanceof ci))throw new be("schema-check-merge-no-element-before",this);if(!(r instanceof ci))throw new be("schema-check-merge-no-element-after",this);return this.checkMerge(n,r)}if(this.isLimit(e)||this.isLimit(t))return!1;for(const n of t.getChildren())if(!this.checkChild(e,n))return!1;return!0}addChildCheck(e,t){const n=t!==void 0?t:this._genericCheckSymbol,r=this._customChildChecks.get(n)||[];r.push(e),this._customChildChecks.set(n,r)}addAttributeCheck(e,t){const n=t!==void 0?t:this._genericCheckSymbol,r=this._customAttributeChecks.get(n)||[];r.push(e),this._customAttributeChecks.set(n,r)}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let t;for(e instanceof Xe?t=e.parent:t=(e instanceof ze?[e]:Array.from(e.getRanges())).reduce((r,o)=>{const s=o.getCommonAncestor();return r?r.getCommonAncestor(s,{includeSelf:!0}):s},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const r=[...e.getFirstPosition().getAncestors(),new Kn("",e.getAttributes())];return this.checkAttribute(r,t)}else{const n=e.getRanges();for(const r of n)for(const o of r)if(this.checkAttribute(o.item,t))return!0}return!1}*getValidRanges(e,t){e=kF(e);for(const n of e)yield*this._getValidRangesForRange(n,t)}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new ze(e);let n,r;const o=e.getAncestors().reverse().find(s=>this.isLimit(s))||e.root;(t=="both"||t=="backward")&&(n=new ml({boundaries:ze._createIn(o),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(r=new ml({boundaries:ze._createIn(o),startPosition:e}));for(const s of _F(n,r)){const l=s.walker==n?"elementEnd":"elementStart",c=s.value;if(c.type==l&&this.isObject(c.item))return ze._createOn(c.item);if(this.checkChild(c.nextPosition,"$text"))return new ze(c.nextPosition)}return null}findAllowedParent(e,t){let n=e.parent;for(;n;){if(this.checkChild(n,t))return n;if(this.isLimit(n))return null;n=n.parent}return null}setAllowedAttributes(e,t,n){const r=n.model;for(const[o,s]of Object.entries(t))r.schema.checkAttribute(e,o)&&n.setAttribute(o,s,e)}removeDisallowedAttributes(e,t){for(const n of e)if(n.is("$text"))Kw(this,n,t);else{const o=ze._createIn(n).getPositions();for(const s of o){const l=s.nodeBefore||s.parent;Kw(this,l,t)}}}getAttributesWithProperty(e,t,n){const r={};for(const[o,s]of e.getAttributes()){const l=this.getAttributeProperties(o);l[t]!==void 0&&(n===void 0||n===l[t])&&(r[o]=s)}return r}createContext(e){return new bc(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,n=Object.keys(t);for(const o of n)e[o]=aF(t[o],o);const r=Object.values(e);for(const o of r)lF(e,o),cF(e,o),uF(e,o),dF(e,o);for(const o of r)hF(e,o);for(const o of r)fF(e,o);for(const o of r)mF(e,o);for(const o of r)gF(e,o);for(const o of r)bF(e,o);this._compiledDefinitions=pF(e)}_checkContextMatch(e,t){const n=e.last;let r=this._evaluateChildChecks(e,t);if(r=r!==void 0?r:t.allowIn.includes(n.name),!r)return!1;const o=this.getDefinition(n),s=e.trimLast();return o?s.length==0?!0:this._checkContextMatch(s,o):!1}_evaluateChildChecks(e,t){const n=this._customChildChecks.get(this._genericCheckSymbol)||[],r=this._customChildChecks.get(t.name)||[];for(const o of[...n,...r]){const s=o(e,t);if(s!==void 0)return s}}_evaluateAttributeChecks(e,t){const n=this._customAttributeChecks.get(this._genericCheckSymbol)||[],r=this._customAttributeChecks.get(t)||[];for(const o of[...n,...r]){const s=o(e,t);if(s!==void 0)return s}}*_getValidRangesForRange(e,t){let n=e.start,r=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(ze._createIn(o),t)),this.checkAttribute(o,t)||(n.isEqual(r)||(yield new ze(n,r)),n=Xe._createAfter(o)),r=Xe._createAfter(o);n.isEqual(r)||(yield new ze(n,r))}findOptimalInsertionRange(e,t){const n=e.getSelectedElement();if(n&&this.isObject(n)&&!this.isInline(n))return t=="before"||t=="after"?new ze(Xe._createAt(n,t)):ze._createOn(n);const r=Wi(e.getSelectedBlocks());if(!r)return new ze(e.focus);if(r.isEmpty)return new ze(Xe._createAt(r,0));const o=Xe._createAfter(r);return e.focus.isTouching(o)?new ze(o):new ze(Xe._createBefore(r))}}class bc{constructor(e){if(e instanceof bc)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(yF)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new bc([e]);return t._items=[...this._items,...t._items],t}trimLast(){const e=new bc([]);return e._items=this._items.slice(0,-1),e}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function aF(i,e){const t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return vF(i,t),_a(i,t,"allowIn"),_a(i,t,"allowChildren"),_a(i,t,"disallowIn"),_a(i,t,"disallowChildren"),_a(i,t,"allowContentOf"),_a(i,t,"allowWhere"),_a(i,t,"allowAttributes"),_a(i,t,"disallowAttributes"),_a(i,t,"allowAttributesOf"),_a(i,t,"inheritTypesFrom"),wF(i,t),t}function lF(i,e){for(const t of e.allowIn){const n=i[t];n?n.allowChildren.add(e.name):e.allowIn.delete(t)}}function cF(i,e){for(const t of e.allowChildren){const n=i[t];n?n.allowIn.add(e.name):e.allowChildren.delete(t)}}function uF(i,e){for(const t of e.disallowIn){const n=i[t];n?n.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function dF(i,e){for(const t of e.disallowChildren){const n=i[t];n?n.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function hF(i,e){for(const t of e.disallowChildren)e.allowChildren.delete(t);for(const t of e.disallowIn)e.allowIn.delete(t);for(const t of e.disallowAttributes)e.allowAttributes.delete(t)}function fF(i,e){for(const t of e.allowContentOf){const n=i[t];n&&(n.disallowChildren.forEach(r=>{e.allowChildren.has(r)||(e.disallowChildren.add(r),i[r].disallowIn.add(e.name))}),n.allowChildren.forEach(r=>{e.disallowChildren.has(r)||(e.allowChildren.add(r),i[r].allowIn.add(e.name))}))}}function mF(i,e){for(const t of e.allowWhere){const n=i[t];n&&(n.disallowIn.forEach(r=>{e.allowIn.has(r)||(e.disallowIn.add(r),i[r].disallowChildren.add(e.name))}),n.allowIn.forEach(r=>{e.disallowIn.has(r)||(e.allowIn.add(r),i[r].allowChildren.add(e.name))}))}}function pF(i){const e={};for(const t of Object.values(i))e[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(n=>!!i[n]),allowChildren:Array.from(t.allowChildren).filter(n=>!!i[n]),allowAttributes:Array.from(t.allowAttributes)};return e}function gF(i,e){for(const t of e.allowAttributesOf){const n=i[t];if(!n)return;n.allowAttributes.forEach(r=>{e.disallowAttributes.has(r)||e.allowAttributes.add(r)})}}function bF(i,e){for(const t of e.inheritTypesFrom){const n=i[t];if(n){const r=Object.keys(n).filter(o=>o.startsWith("is"));for(const o of r)o in e||(e[o]=n[o])}}}function vF(i,e){for(const t of i){const n=Object.keys(t).filter(r=>r.startsWith("is"));for(const r of n)e[r]=!!t[r]}}function _a(i,e,t){for(const n of i){let r=n[t];typeof r=="string"&&(r=[r]),Array.isArray(r)&&r.forEach(o=>e[t].add(o))}}function wF(i,e){for(const t of i){const n=t.inheritAllFrom;n&&(e.allowContentOf.add(n),e.allowWhere.add(n),e.allowAttributesOf.add(n),e.inheritTypesFrom.add(n))}}function yF(i){return typeof i=="string"||i.is("documentFragment")?{name:typeof i=="string"?i:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:i.is("element")?i.name:"$text",*getAttributeKeys(){yield*i.getAttributeKeys()},getAttribute(e){return i.getAttribute(e)}}}function*_F(i,e){let t=!1;for(;!t;){if(t=!0,i){const n=i.next();n.done||(t=!1,yield{walker:i,value:n.value})}if(e){const n=e.next();n.done||(t=!1,yield{walker:e,value:n.value})}}}function*kF(i){for(const e of i)yield*e.getMinimalFlatRanges()}function Kw(i,e,t){for(const n of e.getAttributeKeys())i.checkAttribute(e,n)||t.removeAttribute(n,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CF extends Yn(){constructor(e){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(t,n)=>this._convertItem(t,n),convertChildren:(t,n)=>this._convertChildren(t,n),safeInsert:(t,n)=>this._safeInsert(t,n),updateConversionResult:(t,n)=>this._updateConversionResult(t,n),splitToAllowedParent:(t,n)=>this._splitToAllowedParent(t,n),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(e,t,n=["$root"]){this.fire("viewCleanup",e),this._modelCursor=EF(n,t),this.conversionApi.writer=t,this.conversionApi.consumable=hf.createFrom(e),this.conversionApi.store={};const{modelRange:r}=this._convertItem(e,this._modelCursor),o=t.createDocumentFragment();if(r){this._removeEmptyElements();for(const s of Array.from(this._modelCursor.parent.getChildren()))t.append(s,o);o.markers=xF(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,t){const n={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,n,this.conversionApi):e.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof ze))throw new be("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(e,t){let n=t.is("position")?t:Xe._createAt(t,0);const r=new ze(n);for(const o of Array.from(e.getChildren())){const s=this._convertItem(o,n);s.modelRange instanceof ze&&(r.end=s.modelRange.end,n=s.modelCursor)}return{modelRange:r,modelCursor:n}}_safeInsert(e,t){const n=this._splitToAllowedParent(e,t);return n?(this.conversionApi.writer.insert(e,n.position),!0):!1}_updateConversionResult(e,t){const n=this._getSplitParts(e),r=this.conversionApi.writer;t.modelRange||(t.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(n[n.length-1])));const o=this._cursorParents.get(e);o?t.modelCursor=r.createPositionAt(o,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){const{schema:n,writer:r}=this.conversionApi;let o=n.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return $C(t,e,n)?{position:qC(t,r)}:null;const s=this.conversionApi.writer.split(t,o),l=[];for(const h of s.range.getWalker())if(h.type=="elementEnd")l.push(h.item);else{const g=l.pop(),b=h.item;this._registerSplitPair(g,b)}const c=s.range.end.parent;return this._cursorParents.set(e,c),{position:s.position,cursorParent:c}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const n=this._splitParts.get(e);this._splitParts.set(t,n),n.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}function xF(i,e){const t=new Set,n=new Map,r=ze._createIn(i).getItems();for(const o of r)o.is("element","$marker")&&t.add(o);for(const o of t){const s=o.getAttribute("data-name"),l=e.createPositionBefore(o);n.has(s)?n.get(s).end=l.clone():n.set(s,new ze(l.clone())),e.remove(o)}return n}function EF(i,e){let t;for(const n of new bc(i)){const r={};for(const s of n.getAttributeKeys())r[s]=n.getAttribute(s);const o=e.createElement(n.name,r);t&&e.insert(o,t),t=Xe._createAt(o,0)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SF{getHtml(e){const n=_t.document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(e),n.innerHTML}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TF{constructor(e){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new SC(e,{renderingMode:"data"}),this.htmlWriter=new SF}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4))||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),n=t.createDocumentFragment(),r=t.body.childNodes;for(;r.length>0;)n.appendChild(r[0]);return n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AF extends Yn(){constructor(e,t){super(),this.model=e,this.mapper=new RC,this.downcastDispatcher=new OC({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",LC(),{priority:"lowest"}),this.downcastDispatcher.on("insert",BC(),{priority:"lowest"}),this.upcastDispatcher=new CF({schema:e.schema}),this.viewDocument=new wC(t),this.stylesProcessor=t,this.htmlProcessor=new TF(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new _C(this.viewDocument),this.upcastDispatcher.on("text",VO(),{priority:"lowest"}),this.upcastDispatcher.on("element",jw(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",jw(),{priority:"lowest"}),Vn().prototype.decorate.call(this,"init"),Vn().prototype.decorate.call(this,"set"),Vn().prototype.decorate.call(this,"get"),Vn().prototype.decorate.call(this,"toView"),Vn().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},jC)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:n="empty"}=e;if(!this._checkIfRootsExists([t]))throw new be("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(t);return r.isAttached()||vn("datacontroller-get-detached-root",this),n==="empty"&&!this.model.hasContent(r,{ignoreWhitespaces:!0})?"":this.stringify(r,e)}stringify(e,t={}){const n=this.toView(e,t);return this.processor.toData(n)}toView(e,t={}){const n=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const o=ze._createIn(e),s=new du(n);this.mapper.bindElements(e,s);const l=e.is("documentFragment")?e.markers:PF(e);return this.downcastDispatcher.convert(o,l,r,t),s}init(e){if(this.model.document.version)throw new be("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new be("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},n=>{for(const r of Object.keys(t)){const o=this.model.document.getRoot(r);n.insert(this.parse(t[r],o),o,0)}}),Promise.resolve()}set(e,t={}){let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new be("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},r=>{r.setSelection(null),r.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(n)){const s=this.model.document.getRoot(o);r.remove(r.createRangeIn(s)),r.insert(this.parse(n[o],s),s,0)}})}parse(e,t="$root"){const n=this.processor.toView(e);return this.toModel(n,t)}toModel(e,t="$root"){return this.model.change(n=>this.upcastDispatcher.convert(e,n,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRoot(t))return!1;return!0}}function PF(i){const e=[],t=i.root.document;if(!t)return new Map;const n=ze._createIn(i);for(const r of t.model.markers){const o=r.getRange(),s=o.isCollapsed,l=o.start.isEqual(n.start)||o.end.isEqual(n.end);if(s&&l)e.push([r.name,o]);else{const c=n.getIntersection(o);c&&e.push([r.name,c])}}return e.sort(([r,o],[s,l])=>{if(o.end.compareWith(l.start)!=="after")return 1;if(o.start.compareWith(l.end)!=="before")return-1;switch(o.start.compareWith(l.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(l.end)){case"before":return 1;case"after":return-1;default:return s.localeCompare(r)}}}),new Map(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IF{constructor(e,t){this._helpers=new Map,this._downcast=An(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=An(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const n=this._downcast.includes(t);if(!this._upcast.includes(t)&&!n)throw new be("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:n})}for(e){if(!this._helpers.has(e))throw new be("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:n}of Qg(e))this.for("upcast").elementToElement({model:t,view:n,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:n}of Qg(e))this.for("upcast").elementToAttribute({view:n,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:n}of Qg(e))this.for("upcast").attributeToAttribute({view:n,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:n}){if(this._helpers.has(e))throw new be("conversion-group-exists",this);const r=n?new sO(t):new NO(t);this._helpers.set(e,r)}}function*Qg(i){if(i.model.values)for(const e of i.model.values){const t={key:i.model.key,value:e},n=i.view[e],r=i.upcastAlso?i.upcastAlso[e]:void 0;yield*Zw(t,n,r)}else yield*Zw(i.model,i.view,i.upcastAlso)}function*Zw(i,e,t){if(yield{model:i,view:e},t)for(const n of An(t))yield{model:i,view:n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ts{constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function G0(i,e){const t=XC(e),n=t.reduce((s,l)=>s+l.offsetSize,0),r=i.parent;Sf(i);const o=i.index;return r._insertChild(o,t),Ef(r,o+t.length),Ef(r,o),new ze(i,i.getShiftedBy(n))}function JC(i){if(!i.isFlat)throw new be("operation-utils-remove-range-not-flat",this);const e=i.start.parent;Sf(i.start),Sf(i.end);const t=e._removeChildren(i.start.index,i.end.index-i.start.index);return Ef(e,i.start.index),t}function xf(i,e){if(!i.isFlat)throw new be("operation-utils-move-range-not-flat",this);const t=JC(i);return e=e._getTransformedByDeletion(i.start,i.end.offset-i.start.offset),G0(e,t)}function DF(i,e,t){Sf(i.start),Sf(i.end);for(const n of i.getItems({shallow:!0})){const r=n.is("$textProxy")?n.textNode:n;t!==null?r._setAttribute(e,t):r._removeAttribute(e),Ef(r.parent,r.index)}Ef(i.end.parent,i.end.index)}function XC(i){const e=[];function t(n){if(typeof n=="string")e.push(new Kn(n));else if(n instanceof Gs)e.push(new Kn(n.data,n.getAttributes()));else if(n instanceof Tu)e.push(n);else if(es(n))for(const r of n)t(r)}t(i);for(let n=1;n<e.length;n++){const r=e[n],o=e[n-1];r instanceof Kn&&o instanceof Kn&&QC(r,o)&&(e.splice(n-1,2,new Kn(o.data+r.data,o.getAttributes())),n--)}return e}function Ef(i,e){const t=i.getChild(e-1),n=i.getChild(e);if(t&&n&&t.is("$text")&&n.is("$text")&&QC(t,n)){const r=new Kn(t.data+n.data,t.getAttributes());i._removeChildren(e-1,2),i._insertChild(e-1,r)}}function Sf(i){const e=i.textNode,t=i.parent;if(e){const n=i.offset-e.startOffset,r=e.index;t._removeChildren(r,1);const o=new Kn(e.data.substr(0,n),e.getAttributes()),s=new Kn(e.data.substr(n),e.getAttributes());t._insertChild(r,[o,s])}}function QC(i,e){const t=i.getAttributes(),n=e.getAttributes();for(const r of t){if(r[1]!==e.getAttribute(r[0]))return!1;n.next()}return n.next().done}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pn extends ts{constructor(e,t,n,r){super(r),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[ze._createFromPositionAndShift(this.sourcePosition,this.howMany),ze._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new Pn(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Pn(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,n=this.sourcePosition.offset,r=this.targetPosition.offset;if(n+this.howMany>e.maxOffset)throw new be("move-operation-nodes-do-not-exist",this);if(e===t&&n<r&&r<n+this.howMany)throw new be("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&io(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=n&&this.targetPosition.path[o]<n+this.howMany)throw new be("move-operation-node-into-itself",this)}}_execute(){xf(ze._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const n=Xe.fromJSON(e.sourcePosition,t),r=Xe.fromJSON(e.targetPosition,t);return new this(n,e.howMany,r,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rr extends ts{constructor(e,t,n){super(n),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new uf(XC(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new uf([...this.nodes].map(n=>n._clone(!0))),t=new Rr(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new Xe(e,[0]);return new Pn(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new be("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new uf([...e].map(t=>t._clone(!0))),G0(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const n=[];for(const o of e.nodes)o.name?n.push(ci.fromJSON(o)):n.push(Kn.fromJSON(o));const r=new Rr(Xe.fromJSON(e.position,t),n,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zn extends ts{constructor(e,t,n,r,o){super(o),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=n,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new Xe(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new ze(this.splitPosition,e)}get affectedSelectable(){const e=[ze._createFromPositionAndShift(this.splitPosition,0),ze._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(ze._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new Zn(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new Xe(e,[0]);return new Ui(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new be("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new be("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new be("split-operation-graveyard-position-invalid",this)}else throw new be("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)xf(ze._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const n=e._clone();G0(this.insertionPosition,n)}const t=new ze(Xe._createAt(e,this.splitPosition.offset),Xe._createAt(e,e.maxOffset));xf(t,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new Xe(e.root,t,"toPrevious")}static fromJSON(e,t){const n=Xe.fromJSON(e.splitPosition,t),r=Xe.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?Xe.fromJSON(e.graveyardPosition,t):null;return new this(n,e.howMany,r,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ui extends ts{constructor(e,t,n,r,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new Xe(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new ze(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[ze._createOn(e),ze._createFromPositionAndShift(this.targetPosition,0),ze._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Ui(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),n=new Xe(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Zn(e,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new be("merge-operation-how-many-invalid",this)}else throw new be("merge-operation-target-position-invalid",this);else throw new be("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,t=ze._createIn(e);xf(t,this.targetPosition),xf(ze._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const n=Xe.fromJSON(e.sourcePosition,t),r=Xe.fromJSON(e.targetPosition,t),o=Xe.fromJSON(e.graveyardPosition,t);return new this(n,e.howMany,r,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class go extends ts{constructor(e,t,n,r,o,s){super(s),this.name=e,this.oldRange=t?t.clone():null,this.newRange=n?n.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new go(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new go(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new go(e.name,e.oldRange?ze.fromJSON(e.oldRange,t):null,e.newRange?ze.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xi extends ts{constructor(e,t,n,r,o){super(o),this.range=e.clone(),this.key=t,this.oldValue=n===void 0?null:n,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Xi(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Xi(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new be("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!Vd(e.getAttribute(this.key),this.oldValue))throw new be("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new be("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){Vd(this.oldValue,this.newValue)||DF(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new Xi(ze.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mr extends ts{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new mr(this.baseVersion)}getReversed(){return new mr(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lo extends ts{constructor(e,t,n,r){super(r),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=n}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Lo(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Lo(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof ci){if(e.name!==this.oldName)throw new be("rename-operation-wrong-name",this)}else throw new be("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new Lo(Xe.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gl extends ts{constructor(e,t,n,r,o){super(o),this.root=e,this.key=t,this.oldValue=n===void 0?null:n,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new gl(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new gl(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new be("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new be("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new be("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new be("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new gl(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ea extends ts{constructor(e,t,n,r,o){if(super(o),this.rootName=e,this.elementName=t,this.isAdd=n,this._document=r,!this._document.getRoot(this.rootName)){const s=this._document.createRoot(this.elementName,this.rootName);s._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Ea(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Ea(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new Ea(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ts={};Ts[Xi.className]=Xi;Ts[Rr.className]=Rr;Ts[go.className]=go;Ts[Pn.className]=Pn;Ts[mr.className]=mr;Ts[ts.className]=ts;Ts[Lo.className]=Lo;Ts[gl.className]=gl;Ts[Ea.className]=Ea;Ts[Zn.className]=Zn;Ts[Ui.className]=Ui;class RF{static fromJSON(e,t){return Ts[e.__className].fromJSON(e,t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Kb=new Map;function xn(i,e,t){let n=Kb.get(i);n||(n=new Map,Kb.set(i,n)),n.set(e,t)}function OF(i,e){const t=Kb.get(i);return t&&t.has(e)?t.get(e):FF}function FF(i){return[i]}function Yw(i,e,t={}){const n=OF(i.constructor,e.constructor);try{return i=i.clone(),n(i,e,t)}catch(r){throw r}}function MF(i,e,t){i=i.slice(),e=e.slice();const n=new LF(t.document,t.useRelations,t.forceWeakRemove);n.setOriginalOperations(i),n.setOriginalOperations(e);const r=n.originalOperations;if(i.length==0||e.length==0)return{operationsA:i,operationsB:e,originalOperations:r};const o=new WeakMap;for(const c of i)o.set(c,0);const s={nextBaseVersionA:i[i.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:i.length,originalOperationsBCount:e.length};let l=0;for(;l<i.length;){const c=i[l],h=o.get(c);if(h==e.length){l++;continue}const g=e[h],b=Yw(c,g,n.getContext(c,g,!0)),y=Yw(g,c,n.getContext(g,c,!1));n.updateRelation(c,g),n.setOriginalOperations(b,c),n.setOriginalOperations(y,g);for(const k of b)o.set(k,h+y.length);i.splice(l,1,...b),e.splice(h,1,...y)}return Xw(i),Xw(e),Jw(i,s.nextBaseVersionB),Jw(e,s.nextBaseVersionA),{operationsA:i,operationsB:e,originalOperations:r}}class LF{constructor(e,t,n=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(e,t=null){const n=t?this.originalOperations.get(t):null;for(const r of e)this.originalOperations.set(r,n||r)}updateRelation(e,t){if(e instanceof Pn)t instanceof Ui?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof Pn&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof Zn){if(t instanceof Ui)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof Pn)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const n=ze._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)){const r=n.end.offset-e.splitPosition.offset,o=e.splitPosition.offset-n.start.offset;this._setRelation(e,t,{howMany:r,offset:o})}}}else if(e instanceof Ui)t instanceof Ui?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof Zn?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof Pn&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof go){const n=e.newRange;if(!n)return;if(t instanceof Ui){const r=n.start.isEqual(t.targetPosition),o=n.start.isEqual(t.deletionPosition),s=n.end.isEqual(t.deletionPosition),l=n.end.isEqual(t.sourcePosition);(r||o||s||l)&&this._setRelation(e,t,{wasInLeftElement:r,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:s,wasInRightElement:l})}}}getContext(e,t,n){return{aIsStrong:n,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const n=this.originalOperations.get(t),r=this._history.getUndoneOperation(n);if(!r)return null;const o=this.originalOperations.get(e),s=this._relations.get(o);return s&&s.get(r)||null}_setRelation(e,t,n){const r=this.originalOperations.get(e),o=this.originalOperations.get(t);let s=this._relations.get(r);s||(s=new Map,this._relations.set(r,s)),s.set(o,n)}}function Jw(i,e){for(const t of i)t.baseVersion=e++}function Xw(i){const e=new Map;for(let t=0;t<i.length;t++){const n=i[t];n instanceof go&&(n.baseVersion!==-1?e.set(n.name,{op:n,ranges:n.newRange?[n.newRange]:[]}):(n.newRange&&e.get(n.name).ranges.push(n.newRange),i.splice(t,1),t--))}for(const{op:t,ranges:n}of e.values())n.length?t.newRange=ze._createFromRanges(n):t.newRange=null}xn(Xi,Xi,(i,e,t)=>{if(i.key===e.key&&i.range.start.hasSameParentAs(e.range.start)){const n=i.range.getDifference(e.range).map(o=>new Xi(o,i.key,i.oldValue,i.newValue,0)),r=i.range.getIntersection(e.range);return r&&t.aIsStrong&&n.push(new Xi(r,e.key,e.newValue,i.newValue,0)),n.length==0?[new mr(0)]:n}else return[i]});xn(Xi,Rr,(i,e)=>{if(i.range.start.hasSameParentAs(e.position)&&i.range.containsPosition(e.position)){const n=i.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(r=>new Xi(r,i.key,i.oldValue,i.newValue,i.baseVersion));if(e.shouldReceiveAttributes){const r=ex(e,i.key,i.oldValue);r&&n.unshift(r)}return n}return i.range=i.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[i]});function ex(i,e,t){const r=i.nodes.getNode(0).getAttribute(e);if(r==t)return null;const o=new ze(i.position,i.position.getShiftedBy(i.howMany));return new Xi(o,e,r,t,0)}xn(Xi,Ui,(i,e)=>{const t=[];i.range.start.hasSameParentAs(e.deletionPosition)&&(i.range.containsPosition(e.deletionPosition)||i.range.start.isEqual(e.deletionPosition))&&t.push(ze._createFromPositionAndShift(e.graveyardPosition,1));const n=i.range._getTransformedByMergeOperation(e);return n.isCollapsed||t.push(n),t.map(r=>new Xi(r,i.key,i.oldValue,i.newValue,i.baseVersion))});xn(Xi,Pn,(i,e)=>BF(i.range,e).map(n=>new Xi(n,i.key,i.oldValue,i.newValue,i.baseVersion)));function BF(i,e){const t=ze._createFromPositionAndShift(e.sourcePosition,e.howMany);let n=null,r=[];t.containsRange(i,!0)?n=i:i.start.hasSameParentAs(t.start)?(r=i.getDifference(t),n=i.getIntersection(t)):r=[i];const o=[];for(let s of r){s=s._getTransformedByDeletion(e.sourcePosition,e.howMany);const l=e.getMovedRangeStart(),c=s.start.hasSameParentAs(l),h=s._getTransformedByInsertion(l,e.howMany,c);o.push(...h)}return n&&o.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),o}xn(Xi,Zn,(i,e)=>{if(i.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||i.range.end.offset++,[i];if(i.range.start.hasSameParentAs(e.splitPosition)&&i.range.containsPosition(e.splitPosition)){const t=i.clone();return t.range=new ze(e.moveTargetPosition.clone(),i.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),i.range.end=e.splitPosition.clone(),i.range.end.stickiness="toPrevious",[i,t]}return i.range=i.range._getTransformedBySplitOperation(e),[i]});xn(Rr,Xi,(i,e)=>{const t=[i];if(i.shouldReceiveAttributes&&i.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(i.position)){const n=ex(i,e.key,e.newValue);n&&t.push(n)}return t});xn(Rr,Rr,(i,e,t)=>i.position.isEqual(e.position)&&t.aIsStrong?[i]:(i.position=i.position._getTransformedByInsertOperation(e),[i]));xn(Rr,Pn,(i,e)=>(i.position=i.position._getTransformedByMoveOperation(e),[i]));xn(Rr,Zn,(i,e)=>(i.position=i.position._getTransformedBySplitOperation(e),[i]));xn(Rr,Ui,(i,e)=>(i.position=i.position._getTransformedByMergeOperation(e),[i]));xn(go,Rr,(i,e)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByInsertOperation(e)[0]),i.newRange&&(i.newRange=i.newRange._getTransformedByInsertOperation(e)[0]),[i]));xn(go,go,(i,e,t)=>{if(i.name==e.name)if(t.aIsStrong)i.oldRange=e.newRange?e.newRange.clone():null;else return[new mr(0)];return[i]});xn(go,Ui,(i,e)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByMergeOperation(e)),i.newRange&&(i.newRange=i.newRange._getTransformedByMergeOperation(e)),[i]));xn(go,Pn,(i,e)=>{const t=[i];if(i.oldRange&&(i.oldRange=ze._createFromRanges(i.oldRange._getTransformedByMoveOperation(e))),i.newRange){const n=i.newRange._getTransformedByMoveOperation(e);i.newRange=n[0];for(let r=1;r<n.length;r++){const o=i.clone();o.oldRange=null,o.newRange=n[r],o.baseVersion=-1,t.push(o)}}return t});xn(go,Zn,(i,e,t)=>{if(i.oldRange&&(i.oldRange=i.oldRange._getTransformedBySplitOperation(e)),i.newRange){if(t.abRelation){const n=i.newRange._getTransformedBySplitOperation(e);return i.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?i.newRange.start=Xe._createAt(e.insertionPosition):i.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement?i.newRange.start=Xe._createAt(e.moveTargetPosition):i.newRange.start=n.start,i.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?i.newRange.end=Xe._createAt(e.moveTargetPosition):i.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?i.newRange.end=Xe._createAt(e.insertionPosition):i.newRange.end=n.end,[i]}i.newRange=i.newRange._getTransformedBySplitOperation(e)}return[i]});xn(Ui,Rr,(i,e)=>(i.sourcePosition.hasSameParentAs(e.position)&&(i.howMany+=e.howMany),i.sourcePosition=i.sourcePosition._getTransformedByInsertOperation(e),i.targetPosition=i.targetPosition._getTransformedByInsertOperation(e),[i]));xn(Ui,Ui,(i,e,t)=>{if(i.sourcePosition.isEqual(e.sourcePosition)&&i.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const n=e.graveyardPosition.path.slice();return n.push(0),i.sourcePosition=new Xe(e.graveyardPosition.root,n),i.howMany=0,[i]}else return[new mr(0)];if(i.sourcePosition.isEqual(e.sourcePosition)&&!i.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const n=i.targetPosition.root.rootName=="$graveyard",r=e.targetPosition.root.rootName=="$graveyard";if(r&&!n||!(n&&!r)&&t.aIsStrong){const c=e.targetPosition._getTransformedByMergeOperation(e),h=i.targetPosition._getTransformedByMergeOperation(e);return[new Pn(c,i.howMany,h,0)]}else return[new mr(0)]}return i.sourcePosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.sourcePosition=i.sourcePosition._getTransformedByMergeOperation(e),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),(!i.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(e)),[i]});xn(Ui,Pn,(i,e,t)=>{const n=ze._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&i.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(i.sourcePosition)?[new mr(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(i.sourcePosition)?i.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(i.sourcePosition)&&t.abRelation=="mergeSourceAffected"?i.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(i.targetPosition)?(i.targetPosition.stickiness="toNone",i.howMany-=e.howMany):e.targetPosition.isEqual(i.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(i.targetPosition.stickiness="toPrevious",i.howMany+=e.howMany):(i.sourcePosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.sourcePosition.hasSameParentAs(e.sourcePosition)&&(i.howMany-=e.howMany)),i.sourcePosition=i.sourcePosition._getTransformedByMoveOperation(e),i.targetPosition=i.targetPosition._getTransformedByMoveOperation(e),i.sourcePosition.stickiness="toPrevious",i.targetPosition.stickiness="toNext",i.graveyardPosition.isEqual(e.targetPosition)||(i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(e)),[i])});xn(Ui,Zn,(i,e,t)=>{if(e.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),i.deletionPosition.isEqual(e.graveyardPosition)&&(i.howMany=e.howMany)),i.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&i.deletionPosition.isEqual(e.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(e),[i];if(i.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return i.howMany=0,i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i];if(t.abRelation=="mergeSameElement"||i.sourcePosition.offset>0)return i.sourcePosition=e.moveTargetPosition.clone(),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i]}return i.sourcePosition.hasSameParentAs(e.splitPosition)&&(i.howMany=e.splitPosition.offset),i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(e),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i]});xn(Pn,Rr,(i,e)=>{const n=ze._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByInsertOperation(e,!1)[0];return i.sourcePosition=n.start,i.howMany=n.end.offset-n.start.offset,i.targetPosition.isEqual(e.position)||(i.targetPosition=i.targetPosition._getTransformedByInsertOperation(e)),[i]});xn(Pn,Pn,(i,e,t)=>{const n=ze._createFromPositionAndShift(i.sourcePosition,i.howMany),r=ze._createFromPositionAndShift(e.sourcePosition,e.howMany);let o=t.aIsStrong,s=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?s=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(s=!1);let l;if(i.targetPosition.isEqual(e.targetPosition)&&s?l=i.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):l=i.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Qw(i,e)&&Qw(e,i))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(r,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Md([n],l);if(r.containsPosition(i.targetPosition)&&r.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),Md([n],l);const g=io(i.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(g=="prefix"||g=="extension")return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Md([n],l);i.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?o=!0:i.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(o=!1);const b=[],y=n.getDifference(r);for(const x of y){x.start=x.start._getTransformedByDeletion(e.sourcePosition,e.howMany),x.end=x.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const D=io(x.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",L=x._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,D);b.push(...L)}const k=n.getIntersection(r);return k!==null&&o&&(k.start=k.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),k.end=k.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),b.length===0?b.push(k):b.length==1?r.start.isBefore(n.start)||r.start.isEqual(n.start)?b.unshift(k):b.push(k):b.splice(1,0,k)),b.length===0?[new mr(i.baseVersion)]:Md(b,l)});xn(Pn,Zn,(i,e,t)=>{let n=i.targetPosition.clone();(!i.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(n=i.targetPosition._getTransformedBySplitOperation(e));const r=ze._createFromPositionAndShift(i.sourcePosition,i.howMany);if(r.end.isEqual(e.insertionPosition))return e.graveyardPosition||i.howMany++,i.targetPosition=n,[i];if(r.start.hasSameParentAs(e.splitPosition)&&r.containsPosition(e.splitPosition)){let l=new ze(e.splitPosition,r.end);l=l._getTransformedBySplitOperation(e);const c=[new ze(r.start,e.splitPosition),l];return Md(c,n)}i.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(n=e.moveTargetPosition),i.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(n=i.targetPosition);const s=[r._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const l=r.start.isEqual(e.graveyardPosition)||r.containsPosition(e.graveyardPosition);i.howMany>1&&l&&!t.aWasUndone&&s.push(ze._createFromPositionAndShift(e.insertionPosition,1))}return Md(s,n)});xn(Pn,Ui,(i,e,t)=>{const n=ze._createFromPositionAndShift(i.sourcePosition,i.howMany);if(e.deletionPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(e.sourcePosition)){if(i.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const s=[];let l=e.graveyardPosition.clone(),c=e.targetPosition._getTransformedByMergeOperation(e);const h=i.targetPosition.getTransformedByOperation(e);i.howMany>1&&(s.push(new Pn(i.sourcePosition,i.howMany-1,h,0)),l=l._getTransformedByMove(i.sourcePosition,h,i.howMany-1),c=c._getTransformedByMove(i.sourcePosition,h,i.howMany-1));const g=e.deletionPosition._getCombined(i.sourcePosition,h),b=new Pn(l,1,g,0),y=b.getMovedRangeStart().path.slice();y.push(0);const k=new Xe(b.targetPosition.root,y);c=c._getTransformedByMove(l,g,1);const x=new Pn(c,e.howMany,k,0);return s.push(b),s.push(x),s}}else if(i.howMany==1)return t.bWasUndone?(i.sourcePosition=e.graveyardPosition.clone(),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),[i]):[new mr(0)]}const o=ze._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByMergeOperation(e);return i.sourcePosition=o.start,i.howMany=o.end.offset-o.start.offset,i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),[i]});xn(Lo,Rr,(i,e)=>(i.position=i.position._getTransformedByInsertOperation(e),[i]));xn(Lo,Ui,(i,e)=>i.position.isEqual(e.deletionPosition)?(i.position=e.graveyardPosition.clone(),i.position.stickiness="toNext",[i]):(i.position=i.position._getTransformedByMergeOperation(e),[i]));xn(Lo,Pn,(i,e)=>(i.position=i.position._getTransformedByMoveOperation(e),[i]));xn(Lo,Lo,(i,e,t)=>{if(i.position.isEqual(e.position))if(t.aIsStrong)i.oldName=e.newName;else return[new mr(0)];return[i]});xn(Lo,Zn,(i,e)=>{const t=i.position.path,n=e.splitPosition.getParentPath();if(io(t,n)=="same"&&!e.graveyardPosition){const r=new Lo(i.position.getShiftedBy(1),i.oldName,i.newName,0);return[i,r]}return i.position=i.position._getTransformedBySplitOperation(e),[i]});xn(gl,gl,(i,e,t)=>{if(i.root===e.root&&i.key===e.key){if(!t.aIsStrong||i.newValue===e.newValue)return[new mr(0)];i.oldValue=e.newValue}return[i]});xn(Ea,Ea,(i,e)=>i.rootName===e.rootName&&i.isAdd===e.isAdd?[new mr(0)]:[i]);xn(Zn,Rr,(i,e)=>(i.splitPosition.hasSameParentAs(e.position)&&i.splitPosition.offset<e.position.offset&&(i.howMany+=e.howMany),i.splitPosition=i.splitPosition._getTransformedByInsertOperation(e),i.insertionPosition=i.insertionPosition._getTransformedByInsertOperation(e),[i]));xn(Zn,Ui,(i,e,t)=>{if(!i.graveyardPosition&&!t.bWasUndone&&i.splitPosition.hasSameParentAs(e.sourcePosition)){const n=e.graveyardPosition.path.slice();n.push(0);const r=new Xe(e.graveyardPosition.root,n),o=Zn.getInsertionPosition(new Xe(e.graveyardPosition.root,n)),s=new Zn(r,0,o,null,0);return i.splitPosition=i.splitPosition._getTransformedByMergeOperation(e),i.insertionPosition=Zn.getInsertionPosition(i.splitPosition),i.graveyardPosition=s.insertionPosition.clone(),i.graveyardPosition.stickiness="toNext",[s,i]}return i.splitPosition.hasSameParentAs(e.deletionPosition)&&!i.splitPosition.isAfter(e.deletionPosition)&&i.howMany--,i.splitPosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.splitPosition=i.splitPosition._getTransformedByMergeOperation(e),i.insertionPosition=Zn.getInsertionPosition(i.splitPosition),i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(e)),[i]});xn(Zn,Pn,(i,e,t)=>{const n=ze._createFromPositionAndShift(e.sourcePosition,e.howMany);if(i.graveyardPosition){const o=n.start.isEqual(i.graveyardPosition)||n.containsPosition(i.graveyardPosition);if(!t.bWasUndone&&o){const s=i.splitPosition._getTransformedByMoveOperation(e),l=i.graveyardPosition._getTransformedByMoveOperation(e),c=l.path.slice();c.push(0);const h=new Xe(l.root,c);return[new Pn(s,i.howMany,h,0)]}i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(e)}const r=i.splitPosition.isEqual(e.targetPosition);if(r&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return i.howMany+=e.howMany,i.splitPosition=i.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),i.insertionPosition=Zn.getInsertionPosition(i.splitPosition),[i];if(r&&t.abRelation&&t.abRelation.howMany){const{howMany:o,offset:s}=t.abRelation;return i.howMany+=o,i.splitPosition=i.splitPosition.getShiftedBy(s),[i]}if(i.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(i.splitPosition)){const o=e.howMany-(i.splitPosition.offset-e.sourcePosition.offset);return i.howMany-=o,i.splitPosition.hasSameParentAs(e.targetPosition)&&i.splitPosition.offset<e.targetPosition.offset&&(i.howMany+=e.howMany),i.splitPosition=e.sourcePosition.clone(),i.insertionPosition=Zn.getInsertionPosition(i.splitPosition),[i]}return e.sourcePosition.isEqual(e.targetPosition)||(i.splitPosition.hasSameParentAs(e.sourcePosition)&&i.splitPosition.offset<=e.sourcePosition.offset&&(i.howMany-=e.howMany),i.splitPosition.hasSameParentAs(e.targetPosition)&&i.splitPosition.offset<e.targetPosition.offset&&(i.howMany+=e.howMany)),i.splitPosition.stickiness="toNone",i.splitPosition=i.splitPosition._getTransformedByMoveOperation(e),i.splitPosition.stickiness="toNext",i.graveyardPosition?i.insertionPosition=i.insertionPosition._getTransformedByMoveOperation(e):i.insertionPosition=Zn.getInsertionPosition(i.splitPosition),[i]});xn(Zn,Zn,(i,e,t)=>{if(i.splitPosition.isEqual(e.splitPosition)){if(!i.graveyardPosition&&!e.graveyardPosition)return[new mr(0)];if(i.graveyardPosition&&e.graveyardPosition&&i.graveyardPosition.isEqual(e.graveyardPosition))return[new mr(0)];if(t.abRelation=="splitBefore")return i.howMany=0,i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(e),[i]}if(i.graveyardPosition&&e.graveyardPosition&&i.graveyardPosition.isEqual(e.graveyardPosition)){const n=i.splitPosition.root.rootName=="$graveyard",r=e.splitPosition.root.rootName=="$graveyard";if(r&&!n||!(n&&!r)&&t.aIsStrong){const c=[];return e.howMany&&c.push(new Pn(e.moveTargetPosition,e.howMany,e.splitPosition,0)),i.howMany&&c.push(new Pn(i.splitPosition,i.howMany,i.moveTargetPosition,0)),c}else return[new mr(0)]}if(i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(e)),i.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return i.howMany++,[i];if(e.splitPosition.isEqual(i.insertionPosition)&&t.baRelation=="splitBefore"){const n=e.insertionPosition.path.slice();n.push(0);const r=new Xe(e.insertionPosition.root,n),o=new Pn(i.insertionPosition,1,r,0);return[i,o]}return i.splitPosition.hasSameParentAs(e.splitPosition)&&i.splitPosition.offset<e.splitPosition.offset&&(i.howMany-=e.howMany),i.splitPosition=i.splitPosition._getTransformedBySplitOperation(e),i.insertionPosition=Zn.getInsertionPosition(i.splitPosition),[i]});function Qw(i,e){return i.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function Md(i,e){const t=[];for(let n=0;n<i.length;n++){const r=i[n],o=new Pn(r.start,r.end.offset-r.start.offset,e,0);t.push(o);for(let s=n+1;s<i.length;s++)i[s]=i[s]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hr extends Yn(Xe){constructor(e,t,n="toNone"){if(super(e,t,n),!this.root.is("rootElement"))throw new be("model-liveposition-root-not-rootelement",e);NF.call(this)}detach(){this.stopListening()}toPosition(){return new Xe(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}Hr.prototype.is=function(i){return i==="livePosition"||i==="model:livePosition"||i=="position"||i==="model:position"};function NF(){this.listenTo(this.root.document.model,"applyOperation",(i,e)=>{const t=e[0];t.isDocumentOperation&&VF.call(this,t)},{priority:"low"})}function VF(i){const e=this.getTransformedByOperation(i);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gd{constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},vn("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:n=!0,isUndo:r=!1,isTyping:o=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=n,this.isUndo=r,this.isTyping=o}get type(){return vn("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tf{constructor(e){this._changesInElement=new Map,this._elementsSnapshots=new Map,this._elementChildrenSnapshots=new Map,this._elementState=new Map,this._changedMarkers=new Map,this._changedRoots=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const n of t.range.getItems({shallow:!0}))this._isInInsertedElement(n.parent)||this._markAttribute(n);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const n=this._isInInsertedElement(t.sourcePosition.parent),r=this._isInInsertedElement(t.targetPosition.parent);n||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),r||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);const o=ze._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const s of o.getItems({shallow:!0}))this._setElementState(s,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const n=ze._createFromPositionAndShift(t.position,1);for(const r of this._markerCollection.getMarkersIntersectingRange(n)){const o=r.getData();this.bufferMarkerChange(r.name,o,o)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{const n=t.splitPosition.parent;if(!this._isInInsertedElement(n)){this._markRemove(n,t.splitPosition.offset,t.howMany);const r=ze._createFromPositionAndShift(t.splitPosition,t.howMany);for(const o of r.getItems({shallow:!0}))this._setElementState(o,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{const n=t.sourcePosition.parent;this._isInInsertedElement(n.parent)||this._markRemove(n.parent,n.startOffset,1);const r=t.graveyardPosition.parent;this._markInsert(r,t.graveyardPosition.offset,1),this._setElementState(n,"move");const o=t.targetPosition.parent;if(!this._isInInsertedElement(o)){this._markInsert(o,t.targetPosition.offset,n.maxOffset);const s=ze._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const l of s.getItems({shallow:!0}))this._setElementState(l,"move")}break}case"detachRoot":case"addRoot":{const n=t.affectedSelectable;if(!n._isLoaded||n.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const n=t.root.rootName;this._bufferRootAttributeChange(n,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,n){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let r=this._changedMarkers.get(e);r?r.newMarkerData=n:(r={newMarkerData:n,oldMarkerData:t},this._changedMarkers.set(e,r)),r.oldMarkerData.range==null&&n.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,n]of this._changedMarkers)n.oldMarkerData.range!=null&&e.push({name:t,range:n.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,n]of this._changedMarkers)n.newMarkerData.range!=null&&e.push({name:t,range:n.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const n=e.range&&!t.range,r=!e.range&&t.range,o=e.range&&t.range&&!e.range.isEqual(t.range);if(n||r||o)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const n of this._changesInElement.keys()){const r=this._changesInElement.get(n).sort((g,b)=>g.offset===b.offset?g.type!=b.type?g.type=="remove"?-1:1:0:g.offset<b.offset?-1:1),o=this._elementChildrenSnapshots.get(n),s=t1(n.getChildren()),l=zF(o.length,r);let c=0,h=0;for(const g of l)if(g==="i"){const b=this._getDiffActionForNode(s[c].node,"insert"),y=this._elementsSnapshots.get(s[c].node),k=this._getInsertDiff(n,c,b,s[c],y);t.push(k),c++}else if(g==="r"){const b=this._getDiffActionForNode(o[h].node,"remove"),y=this._getRemoveDiff(n,c,b,o[h]);t.push(y),h++}else if(g==="a"){const b=o[h].attributes,y=s[c].attributes;let k;if(s[c].name=="$text")k=new ze(Xe._createAt(n,c),Xe._createAt(n,c+1));else{const D=n.offsetToIndex(c);k=new ze(Xe._createAt(n,c),Xe._createAt(n.getChild(D),0))}const x=this._getAttributesDiff(k,b,y);t.push(...x),c++,h++}else c++,h++}t.sort((n,r)=>n.position.root!=r.position.root?n.position.root.rootName<r.position.root.rootName?-1:1:n.position.isEqual(r.position)?n.changeCount-r.changeCount:n.position.isBefore(r.position)?-1:1);for(let n=1,r=0;n<t.length;n++){const o=t[r],s=t[n],l=o.type=="remove"&&s.type=="remove"&&o.name=="$text"&&s.name=="$text"&&o.position.isEqual(s.position),c=o.type=="insert"&&s.type=="insert"&&o.name=="$text"&&s.name=="$text"&&o.position.parent==s.position.parent&&o.position.offset+o.length==s.position.offset,h=o.type=="attribute"&&s.type=="attribute"&&o.position.parent==s.position.parent&&o.range.isFlat&&s.range.isFlat&&o.position.offset+o.length==s.position.offset&&o.attributeKey==s.attributeKey&&o.attributeOldValue==s.attributeOldValue&&o.attributeNewValue==s.attributeNewValue;l||c||h?(o.length++,h&&(o.range.end=o.range.end.getShiftedBy(1)),t[n]=null):r=n}t=t.filter(n=>n);for(const n of t)delete n.changeCount,n.type=="attribute"&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(HF),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t={...e};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");const t=ze._createOn(e);for(const n of this._markerCollection.getMarkersIntersectingRange(t)){const r=n.getData();this.bufferMarkerChange(n.name,r,r)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const n=t.getData();this.bufferMarkerChange(t.name,{...n,range:null},n)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}const n=this._changedRoots.get(e);n.state!==void 0?(delete n.state,n.attributes===void 0&&this._changedRoots.delete(e)):n.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,n,r){const o=this._changedRoots.get(e)||{name:e},s=o.attributes||{};if(s[t]){const l=s[t];r===l.oldValue?delete s[t]:l.newValue=r}else s[t]={oldValue:n,newValue:r};Object.entries(s).length===0?(delete o.attributes,o.state===void 0&&this._changedRoots.delete(e)):(o.attributes=s,this._changedRoots.set(e,o))}_markInsert(e,t,n){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const r={type:"insert",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r)}_markRemove(e,t,n){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const r={type:"remove",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r),this._removeAllNestedChanges(e,t,n)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);const n=this._getChangesForElement(e);this._handleChange(t,n),n.push(t);for(let r=0;r<n.length;r++)n[r].howMany<1&&(n.splice(r,1),r--)}_setElementState(e,t){if(!e.is("element"))return;const n=Tf._statesPriority.indexOf(this._elementState.get(e));Tf._statesPriority.indexOf(t)>n&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;const n=this._elementState.get(e);return!n||n=="move"?t:n}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;const t=t1(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(const n of t)this._elementsSnapshots.set(n.node,n)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const n of t){const r=e.offset+e.howMany,o=n.offset+n.howMany;if(e.type=="insert"&&(n.type=="insert"&&(e.offset<=n.offset?n.offset+=e.howMany:e.offset<o&&(n.howMany+=e.nodesToHandle,e.nodesToHandle=0)),n.type=="remove"&&e.offset<n.offset&&(n.offset+=e.howMany),n.type=="attribute")){if(e.offset<=n.offset)n.offset+=e.howMany;else if(e.offset<o){const s=n.howMany;n.howMany=e.offset-n.offset,t.unshift({type:"attribute",offset:r,howMany:s-n.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(n.type=="insert"){if(r<=n.offset)n.offset-=e.howMany;else if(r<=o)if(e.offset<n.offset){const s=r-n.offset;n.offset=e.offset,n.howMany-=s,e.nodesToHandle-=s}else n.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=n.offset)e.nodesToHandle-=n.howMany,n.howMany=0;else if(e.offset<o){const s=o-e.offset;n.howMany-=s,e.nodesToHandle-=s}}if(n.type=="remove"&&(r<=n.offset?n.offset-=e.howMany:e.offset<n.offset&&(e.nodesToHandle+=n.howMany,n.howMany=0)),n.type=="attribute"){if(r<=n.offset)n.offset-=e.howMany;else if(e.offset<n.offset){const s=r-n.offset;n.offset=e.offset,n.howMany-=s}else if(e.offset<o)if(r<=o){const s=n.howMany;n.howMany=e.offset-n.offset;const l=s-n.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:l,count:this._changeCount++})}else n.howMany-=o-e.offset}}if(e.type=="attribute"){if(n.type=="insert")if(e.offset<n.offset&&r>n.offset){if(r>o){const s={type:"attribute",offset:o,howMany:r-o,count:this._changeCount++};this._handleChange(s,t),t.push(s)}e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=n.offset&&e.offset<o&&(r>o?(e.nodesToHandle=r-o,e.offset=o):e.nodesToHandle=0);if(n.type=="remove"&&e.offset<n.offset&&r>n.offset){const s={type:"attribute",offset:n.offset,howMany:r-n.offset,count:this._changeCount++};this._handleChange(s,t),t.push(s),e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}n.type=="attribute"&&(e.offset>=n.offset&&r<=o?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=n.offset&&r>=o&&(n.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,n,r,o){const s={type:"insert",position:Xe._createAt(e,t),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,action:n};return n!="insert"&&o&&(s.before={name:o.name,attributes:new Map(o.attributes)}),s}_getRemoveDiff(e,t,n,r){return{type:"remove",action:n,position:Xe._createAt(e,t),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,n){const r=[];n=new Map(n);for(const[o,s]of t){const l=n.has(o)?n.get(o):null;l!==s&&r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:s,attributeNewValue:l,changeCount:this._changeCount++}),n.delete(o)}for(const[o,s]of n)r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:s,changeCount:this._changeCount++});return r}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const n=this._changesInElement.get(t),r=e.startOffset;if(n){for(const o of n)if(o.type=="insert"&&r>=o.offset&&r<o.offset+o.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,n){const r=new ze(Xe._createAt(e,t),Xe._createAt(e,t+n));for(const o of r.getItems({shallow:!0}))o.is("element")&&(this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}}Tf._statesPriority=[void 0,"refresh","rename","move"];function e1(i){return{node:i,name:i.is("$text")?"$text":i.name,attributes:new Map(i.getAttributes())}}function t1(i){const e=[];for(const t of i)if(t.is("$text"))for(let n=0;n<t.data.length;++n)e.push(e1(t));else e.push(e1(t));return e}function zF(i,e){const t=[];let n=0,r=0;for(const o of e){if(o.offset>n){for(let s=0;s<o.offset-n;s++)t.push("e");r+=o.offset-n}if(o.type=="insert"){for(let s=0;s<o.howMany;s++)t.push("i");n=o.offset+o.howMany}else if(o.type=="remove"){for(let s=0;s<o.howMany;s++)t.push("r");n=o.offset,r+=o.howMany}else{if(o.howMany>1500)for(let s=0;s<o.howMany;s++)t.push("a");else t.push(..."a".repeat(o.howMany).split(""));n=o.offset+o.howMany,r+=o.howMany}}if(r<i)for(let o=0;o<i-r-n;o++)t.push("e");return t}function HF(i){const e="position"in i&&i.position.root.rootName=="$graveyard",t="range"in i&&i.range.root.rootName=="$graveyard";return!e&&!t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UF{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new be("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const n=this._operations[0];e===void 0&&(e=n.baseVersion);let r=t-1;for(const[l,c]of this._gaps)e>l&&e<c&&(e=c),r>l&&r<c&&(r=l-1);if(r<n.baseVersion||e>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(e);o===void 0&&(o=0);let s=this._baseVersionToOperationIndex.get(r);return s===void 0&&(s=this._operations.length-1),this._operations.slice(o,s+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xp extends ci{constructor(e,t,n="main"){super(t),this._isAttached=!0,this._isLoaded=!0,this._document=e,this.rootName=n}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}xp.prototype.is=function(i,e){return e?e===this.name&&(i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"):i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"||i==="node"||i==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const n1="$graveyard";class WF extends Yn(){constructor(e){super(),this.model=e,this.history=new UF,this.selection=new Zs(this),this.roots=new Or({idProperty:"rootName"}),this.differ=new Tf(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",n1),this.listenTo(e,"applyOperation",(t,n)=>{const r=n[0];r.isDocumentOperation&&this.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,n)=>{const r=n[0];r.isDocumentOperation&&this.history.addOperation(r)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,n,r,o,s)=>{const l={...n.getData(),range:o};this.differ.bufferMarkerChange(n.name,s,l),r===null&&n.on("change",(c,h)=>{const g=n.getData();this.differ.bufferMarkerChange(n.name,{...g,range:h},g)})}),this.registerPostFixer(t=>{let n=!1;for(const r of this.roots)!r.isAttached()&&!r.isEmpty&&(t.remove(t.createRangeIn(r)),n=!0);for(const r of this.model.markers)r.getRange().root.isAttached()||(t.removeMarker(r),n=!0);return n})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(n1)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new be("model-document-createroot-name-exists",this,{name:t});const n=new xp(this,e,t);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=Vk(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,n=t.schema,r=t.createPositionFromPath(e,[0]);return n.getNearestSelectionRange(r)||t.createRange(r)}_validateSelectionRange(e){return i1(e.start)&&i1(e.end)}_callPostFixers(e){let t=!1;do for(const n of this._postFixers)if(this.selection.refresh(),t=n(e),t)break;while(t)}}function i1(i){const e=i.textNode;if(e){const t=e.data,n=i.offset-e.startOffset;return!M0(t,n)&&!L0(t,n)}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jF extends Yn(){constructor(){super(...arguments),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof Pd?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,n=!1,r=!1){const o=e instanceof Pd?e.name:e;if(o.includes(","))throw new be("markercollection-incorrect-marker-name",this);const s=this._markers.get(o);if(s){const h=s.getData(),g=s.getRange();let b=!1;return g.isEqual(t)||(s._attachLiveRange(Ro.fromRange(t)),b=!0),n!=s.managedUsingOperations&&(s._managedUsingOperations=n,b=!0),typeof r=="boolean"&&r!=s.affectsData&&(s._affectsData=r,b=!0),b&&this.fire(`update:${o}`,s,g,t,h),s}const l=Ro.fromRange(t),c=new Pd(o,l,n,r);return this._markers.set(o,c),this.fire(`update:${o}`,c,null,t,{...c.getData(),range:null}),c}_remove(e){const t=e instanceof Pd?e.name:e,n=this._markers.get(t);return n?(this._markers.delete(t),this.fire(`update:${t}`,n,n.getRange(),null,n.getData()),this._destroyMarker(n),!0):!1}_refresh(e){const t=e instanceof Pd?e.name:e,n=this._markers.get(t);if(!n)throw new be("markercollection-refresh-marker-not-exists",this);const r=n.getRange();this.fire(`update:${t}`,n,r,r,n.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class Pd extends Yn(Cc){constructor(e,t,n,r){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=n,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new be("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new be("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new be("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new be("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new be("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Pd.prototype.is=function(i){return i==="marker"||i==="model:marker"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $F extends ts{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new be("detach-operation-on-document-node",this)}_execute(){JC(ze._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hl extends Cc{constructor(e){super(),this.markers=new Map,this._children=new uf,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const n of e)t=t.getChild(t.offsetToIndex(n));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const n of e)n.name?t.push(ci.fromJSON(n)):t.push(Kn.fromJSON(n));return new hl(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const n=qF(t);for(const r of n)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){const n=this._children._removeNodes(e,t);for(const r of n)r.parent=null;return n}}hl.prototype.is=function(i){return i==="documentFragment"||i==="model:documentFragment"};function qF(i){return typeof i=="string"?[new Kn(i)]:(es(i)||(i=[i]),Array.from(i).map(e=>typeof e=="string"?new Kn(e):e instanceof Gs?new Kn(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GF{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new Kn(e,t)}createElement(e,t){return new ci(e,t)}createDocumentFragment(){return new hl}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,n=0){if(this._assertWriterUsedCorrectly(),e instanceof Kn&&e.data=="")return;const r=Xe._createAt(t,n);if(e.parent)if(s1(e.root,r.root)){this.move(ze._createOn(e),r);return}else{if(e.root.document)throw new be("model-writer-insert-forbidden-move",this);this.remove(e)}const o=r.root.document?r.root.document.version:null,s=new Rr(r,e,o);if(e instanceof Kn&&(s.shouldReceiveAttributes=!0),this.batch.addOperation(s),this.model.applyOperation(s),e instanceof hl)for(const[l,c]of e.markers){const h=Xe._createAt(c.root,0),b={range:new ze(c.start._getCombined(h,r),c.end._getCombined(h,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(l)?this.updateMarker(l,b):this.addMarker(l,b)}}insertText(e,t,n,r){t instanceof hl||t instanceof ci||t instanceof Xe?this.insert(this.createText(e),t,n):this.insert(this.createText(e,t),n,r)}insertElement(e,t,n,r){t instanceof hl||t instanceof ci||t instanceof Xe?this.insert(this.createElement(e),t,n):this.insert(this.createElement(e,t),n,r)}append(e,t){this.insert(e,t,"end")}appendText(e,t,n){t instanceof hl||t instanceof ci?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),n,"end")}appendElement(e,t,n){t instanceof hl||t instanceof ci?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),n,"end")}setAttribute(e,t,n){if(this._assertWriterUsedCorrectly(),n instanceof ze){const r=n.getMinimalFlatRanges();for(const o of r)r1(this,e,t,o)}else o1(this,e,t,n)}setAttributes(e,t){for(const[n,r]of Ta(e))this.setAttribute(n,r,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof ze){const n=t.getMinimalFlatRanges();for(const r of n)r1(this,e,null,r)}else o1(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=n=>{for(const r of n.getAttributeKeys())this.removeAttribute(r,n)};if(!(e instanceof ze))t(e);else for(const n of e.getItems())t(n)}move(e,t,n){if(this._assertWriterUsedCorrectly(),!(e instanceof ze))throw new be("writer-move-invalid-range",this);if(!e.isFlat)throw new be("writer-move-range-not-flat",this);const r=Xe._createAt(t,n);if(r.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!s1(e.root,r.root))throw new be("writer-move-different-document",this);const o=e.root.document?e.root.document.version:null,s=new Pn(e.start,e.end.offset-e.start.offset,r,o);this.batch.addOperation(s),this.model.applyOperation(s)}remove(e){this._assertWriterUsedCorrectly();const n=(e instanceof ze?e:ze._createOn(e)).getMinimalFlatRanges().reverse();for(const r of n)this._addOperationForAffectedMarkers("move",r),KF(r.start,r.end.offset-r.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,n=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof ci))throw new be("writer-merge-no-element-before",this);if(!(n instanceof ci))throw new be("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,n){return this.model.createPositionFromPath(e,t,n)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,n=e.nodeAfter;this.move(ze._createIn(n),Xe._createAt(t,"end")),this.remove(n)}_merge(e){const t=Xe._createAt(e.nodeBefore,"end"),n=Xe._createAt(e.nodeAfter,0),r=e.root.document.graveyard,o=new Xe(r,[0]),s=e.root.document.version,l=new Ui(n,e.nodeAfter.maxOffset,t,o,s);this.batch.addOperation(l),this.model.applyOperation(l)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof ci))throw new be("writer-rename-not-element-instance",this);const n=e.root.document?e.root.document.version:null,r=new Lo(Xe._createBefore(e),e.name,t,n);this.batch.addOperation(r),this.model.applyOperation(r)}split(e,t){this._assertWriterUsedCorrectly();let n=e.parent;if(!n.parent)throw new be("writer-split-element-no-parent",this);if(t||(t=n.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new be("writer-split-invalid-limit-element",this);let r,o;do{const s=n.root.document?n.root.document.version:null,l=n.maxOffset-e.offset,c=Zn.getInsertionPosition(e),h=new Zn(e,l,c,null,s);this.batch.addOperation(h),this.model.applyOperation(h),!r&&!o&&(r=n,o=e.parent.nextSibling),e=this.createPositionAfter(e.parent),n=e.parent}while(n!==t);return{position:e,range:new ze(Xe._createAt(r,"end"),Xe._createAt(o,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new be("writer-wrap-range-not-flat",this);const n=t instanceof ci?t:new ci(t);if(n.childCount>0)throw new be("writer-wrap-element-not-empty",this);if(n.parent!==null)throw new be("writer-wrap-element-attached",this);this.insert(n,e.start);const r=new ze(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(r,Xe._createAt(n,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new be("writer-unwrap-element-no-parent",this);this.move(ze._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new be("writer-addmarker-no-usingoperation",this);const n=t.usingOperation,r=t.range,o=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new be("writer-addmarker-marker-exists",this);if(!r)throw new be("writer-addmarker-no-range",this);return n?(Jh(this,e,null,r,o),this.model.markers.get(e)):this.model.markers._set(e,r,n,o)}updateMarker(e,t){this._assertWriterUsedCorrectly();const n=typeof e=="string"?e:e.name,r=this.model.markers.get(n);if(!r)throw new be("writer-updatemarker-marker-not-exists",this);if(!t){vn("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),this.model.markers._refresh(r);return}const o=typeof t.usingOperation=="boolean",s=typeof t.affectsData=="boolean",l=s?t.affectsData:r.affectsData;if(!o&&!t.range&&!s)throw new be("writer-updatemarker-wrong-options",this);const c=r.getRange(),h=t.range?t.range:c;if(o&&t.usingOperation!==r.managedUsingOperations){t.usingOperation?Jh(this,n,null,h,l):(Jh(this,n,c,null,l),this.model.markers._set(n,h,void 0,l));return}r.managedUsingOperations?Jh(this,n,c,h,l):this.model.markers._set(n,h,void 0,l)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new be("writer-removemarker-no-marker",this);const n=this.model.markers.get(t);if(!n.managedUsingOperations){this.model.markers._remove(t);return}const r=n.getRange();Jh(this,t,r,null,n.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const n=this.model.document.getRoot(e);if(n&&n.isAttached())throw new be("writer-addroot-root-exists",this);const r=this.model.document,o=new Ea(e,t,!0,r,r.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new be("writer-detachroot-no-root",this);for(const o of this.model.markers)o.getRange().root===t&&this.removeMarker(o);for(const o of t.getAttributeKeys())this.removeAttribute(o,t);this.remove(this.createRangeIn(t));const n=this.model.document,r=new Ea(t.rootName,t.name,!1,n,n.version);this.batch.addOperation(r),this.model.applyOperation(r)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[n,r]of Ta(e))this._setSelectionAttribute(n,r)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const r=Zs._getStoreAttributeKey(e);this.setAttribute(r,t,n.anchor.parent)}n._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const n=Zs._getStoreAttributeKey(e);this.removeAttribute(n,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new be("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const r=n.getRange();let o=!1;if(e==="move"){const s=t;o=s.containsPosition(r.start)||s.start.isEqual(r.start)||s.containsPosition(r.end)||s.end.isEqual(r.end)}else{const s=t,l=s.nodeBefore,c=s.nodeAfter,h=r.start.parent==l&&r.start.isAtEnd,g=r.end.parent==c&&r.end.offset==0,b=r.end.nodeAfter==c,y=r.start.nodeAfter==c;o=h||g||b||y}o&&this.updateMarker(n.name,{range:r})}}}function r1(i,e,t,n){const r=i.model,o=r.document;let s=n.start,l,c,h;for(const b of n.getWalker({shallow:!0}))h=b.item.getAttribute(e),l&&c!=h&&(c!=t&&g(),s=l),l=b.nextPosition,c=h;l instanceof Xe&&l!=s&&c!=t&&g();function g(){const b=new ze(s,l),y=b.root.document?o.version:null,k=new Xi(b,e,c,t,y);i.batch.addOperation(k),r.applyOperation(k)}}function o1(i,e,t,n){const r=i.model,o=r.document,s=n.getAttribute(e);let l,c;if(s!=t){if(n.root===n){const g=n.document?o.version:null;c=new gl(n,e,s,t,g)}else{l=new ze(Xe._createBefore(n),i.createPositionAfter(n));const g=l.root.document?o.version:null;c=new Xi(l,e,s,t,g)}i.batch.addOperation(c),r.applyOperation(c)}}function Jh(i,e,t,n,r){const o=i.model,s=o.document,l=new go(e,t,n,o.markers,!!r,s.version);i.batch.addOperation(l),o.applyOperation(l)}function KF(i,e,t,n){let r;if(i.root.document){const o=n.document,s=new Xe(o.graveyard,[0]);r=new Pn(i,e,s,o.version)}else r=new $F(i,e);t.addOperation(r),n.applyOperation(r)}function s1(i,e){return i===e||i instanceof xp&&e instanceof xp}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ZF(i,e,t={}){if(e.isCollapsed)return;const n=e.getFirstRange();if(n.root.rootName=="$graveyard")return;const r=i.schema;i.change(o=>{if(!t.doNotResetEntireContent&&rM(r,e)){iM(o,e);return}const s={};if(!t.doNotAutoparagraph){const h=e.getSelectedElement();h&&Object.assign(s,r.getAttributesWithProperty(h,"copyOnReplace",!0))}const[l,c]=YF(n);l.isTouching(c)||o.remove(o.createRange(l,c)),t.leaveUnmerged||(XF(o,l,c),r.removeDisallowedAttributes(l.parent.getChildren(),o)),rx(o,e,l),!t.doNotAutoparagraph&&tM(r,l)&&ix(o,l,e,s),l.detach(),c.detach()})}function YF(i){const e=i.root.document.model,t=i.start;let n=i.end;if(e.hasContent(i,{ignoreMarkers:!0})){const r=JF(n);if(r&&n.isTouching(e.createPositionAt(r,0))){const o=e.createSelection(i);e.modifySelection(o,{direction:"backward"});const s=o.getLastPosition(),l=e.createRange(s,n);e.hasContent(l,{ignoreMarkers:!0})||(n=s)}}return[Hr.fromPosition(t,"toPrevious"),Hr.fromPosition(n,"toNext")]}function JF(i){const e=i.parent,t=e.root.document.model.schema,n=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const r of n){if(t.isLimit(r))return null;if(t.isBlock(r))return r}}function XF(i,e,t){const n=i.model;if(!K0(i.model.schema,e,t))return;const[r,o]=eM(e,t);!r||!o||(!n.hasContent(r,{ignoreMarkers:!0})&&n.hasContent(o,{ignoreMarkers:!0})?nx(i,e,t,r.parent):tx(i,e,t,r.parent))}function tx(i,e,t,n){const r=e.parent,o=t.parent;if(!(r==n||o==n)){for(e=i.createPositionAfter(r),t=i.createPositionBefore(o),t.isEqual(e)||i.insert(o,e),i.merge(e);t.parent.isEmpty;){const s=t.parent;t=i.createPositionBefore(s),i.remove(s)}K0(i.model.schema,e,t)&&tx(i,e,t,n)}}function nx(i,e,t,n){const r=e.parent,o=t.parent;if(!(r==n||o==n)){for(e=i.createPositionAfter(r),t=i.createPositionBefore(o),t.isEqual(e)||i.insert(r,t);e.parent.isEmpty;){const s=e.parent;e=i.createPositionBefore(s),i.remove(s)}t=i.createPositionBefore(o),QF(i,t),K0(i.model.schema,e,t)&&nx(i,e,t,n)}}function QF(i,e){const t=e.nodeBefore,n=e.nodeAfter;t.name!=n.name&&i.rename(t,n.name),i.clearAttributes(t),i.setAttributes(Object.fromEntries(n.getAttributes()),t),i.merge(e)}function K0(i,e,t){const n=e.parent,r=t.parent;return n==r||i.isLimit(n)||i.isLimit(r)?!1:nM(e,t,i)}function eM(i,e){const t=i.getAncestors(),n=e.getAncestors();let r=0;for(;t[r]&&t[r]==n[r];)r++;return[t[r],n[r]]}function tM(i,e){const t=i.checkChild(e,"$text"),n=i.checkChild(e,"paragraph");return!t&&n}function nM(i,e,t){const n=new ze(i,e);for(const r of n.getWalker())if(t.isLimit(r.item))return!1;return!0}function ix(i,e,t,n={}){const r=i.createElement("paragraph");i.model.schema.setAllowedAttributes(r,n,i),i.insert(r,e),rx(i,t,i.createPositionAt(r,0))}function iM(i,e){const t=i.model.schema.getLimitElement(e);i.remove(i.createRangeIn(t)),ix(i,i.createPositionAt(t,0),e)}function rM(i,e){const t=i.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const n=e.getFirstRange();return n.start.parent==n.end.parent?!1:i.checkChild(t,"paragraph")}function rx(i,e,t){e instanceof Zs?i.setSelection(t):e.setTo(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function oM(i,e){return i.change(t=>{const n=t.createDocumentFragment(),r=e.getFirstRange();if(!r||r.isCollapsed)return n;const o=r.start.root,s=r.start.getCommonPath(r.end),l=o.getNodeByPath(s);let c;r.start.parent==r.end.parent?c=r:c=t.createRange(t.createPositionAt(l,r.start.path[s.length]),t.createPositionAt(l,r.end.path[s.length]+1));const h=c.end.offset-c.start.offset;for(const g of c.getItems({shallow:!0}))g.is("$textProxy")?t.appendText(g.data,g.getAttributes(),n):t.append(t.cloneElement(g,!0),n);if(c!=r){const g=r._getTransformedByMove(c.start,t.createPositionAt(n,0),h)[0],b=t.createRange(t.createPositionAt(n,0),g.start),y=t.createRange(g.end,t.createPositionAt(n,"end"));a1(y,t),a1(b,t)}return n})}function a1(i,e){const t=[];Array.from(i.getItems({direction:"backward"})).map(n=>e.createRangeOn(n)).filter(n=>(n.start.isAfter(i.start)||n.start.isEqual(i.start))&&(n.end.isBefore(i.end)||n.end.isEqual(i.end))).forEach(n=>{t.push(n.start.parent),e.remove(n)}),t.forEach(n=>{let r=n;for(;r.parent&&r.isEmpty;){const o=e.createRangeOn(r);r=r.parent,e.remove(o)}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sM(i,e,t){return i.change(n=>{const r=t||i.document.selection;r.isCollapsed||i.deleteContent(r,{doNotAutoparagraph:!0});const o=new aM(i,n,r.anchor),s=[];let l;if(e.is("documentFragment")){if(e.markers.size){const g=[];for(const[b,y]of e.markers){const{start:k,end:x}=y,D=k.isEqual(x);g.push({position:k,name:b,isCollapsed:D},{position:x,name:b,isCollapsed:D})}g.sort(({position:b},{position:y})=>b.isBefore(y)?1:-1);for(const{position:b,name:y,isCollapsed:k}of g){let x=null,D=null;const L=b.parent===e&&b.isAtStart,M=b.parent===e&&b.isAtEnd;!L&&!M?(x=n.createElement("$marker"),n.insert(x,b)):k&&(D=L?"start":"end"),s.push({name:y,element:x,collapsed:D})}}l=e.getChildren()}else l=[e];o.handleNodes(l);let c=o.getSelectionRange();if(e.is("documentFragment")&&s.length){const g=c?Ro.fromRange(c):null,b={};for(let y=s.length-1;y>=0;y--){const{name:k,element:x,collapsed:D}=s[y],L=!b[k];if(L&&(b[k]=[]),x){const M=n.createPositionAt(x,"before");b[k].push(M),n.remove(x)}else{const M=o.getAffectedRange();if(!M){D&&b[k].push(o.position);continue}D?b[k].push(M[D]):b[k].push(L?M.start:M.end)}}for(const[y,[k,x]]of Object.entries(b))k&&x&&k.root===x.root&&k.root.document&&!n.model.markers.has(y)&&n.addMarker(y,{usingOperation:!0,affectsData:!0,range:new ze(k,x)});g&&(c=g.toRange(),g.detach())}/* istanbul ignore else -- @preserve */c&&(r instanceof Zs?n.setSelection(c):r.setTo(c));const h=o.getAffectedRange()||i.createRange(r.anchor);return o.destroy(),h})}class aM{constructor(e,t,n){this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null,this._nodeToSelect=null,this.model=e,this.writer=t,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(e);if(n.isAfter(t)){this._lastNode=e;/* istanbul ignore if -- @preserve */if(this.position.parent!=e||!this.position.isAtEnd)throw new be("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?ze._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new ze(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(!this._checkAndSplitToAllowedPosition(e)){this.schema.isObject(e)||this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=Hr.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleDisallowedNode(e){e.is("element")&&this.handleNodes(e.getChildren())}_appendToFragment(e){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,e))throw new be("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Hr.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Hr.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof ci)||!this._canMergeLeft(e))return;const t=Hr._createBefore(e);t.stickiness="toNext";const n=Hr.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Hr._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Hr._createAt(t.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof ci)||!this._canMergeRight(e))return;const t=Hr._createAfter(e);t.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(t))throw new be("insertcontent-invalid-insertion-position",this);this.position=Xe._createAt(t.nodeBefore,"end");const n=Hr.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Hr._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Hr._createAt(t.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof ci&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof ci&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_insertAutoParagraph(){this._insertPartialFragment();const e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===t&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const n=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=n,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,e)||this._insertAutoParagraph(),!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)||this.schema.checkChild(e,"paragraph")&&this.schema.checkChild("paragraph",t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lM(i,e,t,n={}){if(!i.schema.isObject(e))throw new be("insertobject-element-not-an-object",i,{object:e});const r=t||i.document.selection;let o=r;n.findOptimalPosition&&i.schema.isBlock(e)&&(o=i.createSelection(i.schema.findOptimalInsertionRange(r,n.findOptimalPosition)));const s=Wi(r.getSelectedBlocks()),l={};return s&&Object.assign(l,i.schema.getAttributesWithProperty(s,"copyOnReplace",!0)),i.change(c=>{o.isCollapsed||i.deleteContent(o,{doNotAutoparagraph:!0});let h=e;const g=o.anchor.parent;!i.schema.checkChild(g,e)&&i.schema.checkChild(g,"paragraph")&&i.schema.checkChild("paragraph",e)&&(h=c.createElement("paragraph"),c.insert(e,h)),i.schema.setAllowedAttributes(h,l,c);const b=i.insertContent(h,o);return b.isCollapsed||n.setSelection&&cM(c,e,n.setSelection,l),b})}function cM(i,e,t,n){const r=i.model;if(t=="on"){i.setSelection(e,"on");return}if(t!="after")throw new be("insertobject-invalid-place-parameter-value",r);let o=e.nextSibling;if(r.schema.isInline(e)){i.setSelection(e,"after");return}!(o&&r.schema.checkChild(o,"$text"))&&r.schema.checkChild(e.parent,"paragraph")&&(o=i.createElement("paragraph"),r.schema.setAllowedAttributes(o,n,i),r.insertContent(o,i.createPositionAfter(e))),o&&i.setSelection(o,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const uM=' ,.?!:;"-()';function dM(i,e,t={}){const n=i.schema,r=t.direction!="backward",o=t.unit?t.unit:"character",s=!!t.treatEmojiAsSingleUnit,l=e.focus,c=new ml({boundaries:pM(l,r),singleCharacters:!0,direction:r?"forward":"backward"}),h={walker:c,schema:n,isForward:r,unit:o,treatEmojiAsSingleUnit:s};let g;for(;g=c.next();){if(g.done)return;const b=hM(h,g.value);if(b){e instanceof Zs?i.change(y=>{y.setSelectionFocus(b)}):e.setFocus(b);return}}}function hM(i,e){const{isForward:t,walker:n,unit:r,schema:o,treatEmojiAsSingleUnit:s}=i,{type:l,item:c,nextPosition:h}=e;if(l=="text")return i.unit==="word"?mM(n,t):fM(n,r,s);if(l==(t?"elementStart":"elementEnd")){if(o.isSelectable(c))return Xe._createAt(c,t?"after":"before");if(o.checkChild(h,"$text"))return h}else{if(o.isLimit(c)){n.skip(()=>!0);return}if(o.checkChild(h,"$text"))return h}}function fM(i,e,t){const n=i.position.textNode;if(n){const r=n.data;let o=i.position.offset-n.startOffset;for(;M0(r,o)||e=="character"&&L0(r,o)||t&&oC(r,o);)i.next(),o=i.position.offset-n.startOffset}return i.position}function mM(i,e){let t=i.position.textNode;for(t||(t=e?i.position.nodeAfter:i.position.nodeBefore);t&&t.is("$text");){const n=i.position.offset-t.startOffset;if(bM(t,n,e))t=e?i.position.nodeAfter:i.position.nodeBefore;else{if(gM(t.data,n,e))break;i.next()}}return i.position}function pM(i,e){const t=i.root,n=Xe._createAt(t,e?"end":0);return e?new ze(i,n):new ze(n,i)}function gM(i,e,t){const n=e+(t?0:-1);return uM.includes(i.charAt(n))}function bM(i,e,t){return e===(t?i.offsetSize:0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let vM=class extends Vn(){constructor(){super(),this.markers=new jF,this.document=new WF(this),this.schema=new sF,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),JO(this),this.document.registerPostFixer(jC),this.on("insertContent",(e,[t,n])=>{e.return=sM(this,t,n)}),this.on("insertObject",(e,[t,n,r])=>{e.return=lM(this,t,n,r)}),this.on("canEditAt",e=>{const t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new gd,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){/* istanbul ignore next -- @preserve */be.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new gd):e instanceof gd||(e=new gd(e)):e=new gd,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(n){/* istanbul ignore next -- @preserve */be.rethrowUnexpectedError(n,this)}}applyOperation(e){e._execute()}insertContent(e,t,n,...r){const o=eb(t,n);return this.fire("insertContent",[e,o,n,...r])}insertObject(e,t,n,r,...o){const s=eb(t,n);return this.fire("insertObject",[e,s,r,r,...o])}deleteContent(e,t){ZF(this,e,t)}modifySelection(e,t){dM(this,e,t)}getSelectedContent(e){return oM(this,e)}hasContent(e,t={}){const n=e instanceof ze?e:ze._createIn(e);if(n.isCollapsed)return!1;const{ignoreWhitespaces:r=!1,ignoreMarkers:o=!1}=t;if(!o){for(const s of this.markers.getMarkersIntersectingRange(n))if(s.affectsData)return!0}for(const s of n.getItems())if(this.schema.isContent(s))if(s.is("$textProxy"))if(r){if(s.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const t=eb(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,n){return new Xe(e,t,n)}createPositionAt(e,t){return Xe._createAt(e,t)}createPositionAfter(e){return Xe._createAfter(e)}createPositionBefore(e){return Xe._createBefore(e)}createRange(e,t){return new ze(e,t)}createRangeIn(e){return ze._createIn(e)}createRangeOn(e){return ze._createOn(e)}createSelection(...e){return new Ko(...e)}createBatch(e){return new gd(e)}createOperationFromJSON(e){return RF.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new GF(this,t);const n=this._pendingChanges[0].callback(this._currentWriter);e.push(n),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function eb(i,e){if(i)return i instanceof Ko||i instanceof Zs?i:i instanceof Tu?e||e===0?new Ko(i,e):i.is("rootElement")?new Ko(i,"in"):new Ko(i,"on"):new Ko(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wM extends kc{constructor(){super(...arguments),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qp extends kc{constructor(){super(...arguments),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eg{constructor(e){this.document=e}createDocumentFragment(e){return new du(this.document,e)}createElement(e,t,n){return new Ks(this.document,e,t,n)}createText(e){return new ui(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,n){return n._insertChild(e,t)}removeChildren(e,t,n){return n._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const n=e.parent;if(n){const r=n.getChildIndex(e);return this.removeChildren(r,1,n),this.insertChild(r,t,n),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const n=t.getChildIndex(e);this.remove(e),this.insertChild(n,e.getChildren(),t)}}rename(e,t){const n=new Ks(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,n)?n:null}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){Go(e)&&n===void 0?t._setStyle(e):n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return gt._createAt(e,t)}createPositionAfter(e){return gt._createAfter(e)}createPositionBefore(e){return gt._createBefore(e)}createRange(e,t){return new un(e,t)}createRangeOn(e){return un._createOn(e)}createRangeIn(e){return un._createIn(e)}createSelection(...e){return new pl(...e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yM=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,_M=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,kM=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,CM=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,xM=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,EM=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,SM=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function ox(i){return i.startsWith("#")?yM.test(i):i.startsWith("rgb")?_M.test(i)||kM.test(i):i.startsWith("hsl")?CM.test(i)||xM.test(i):SM.has(i.toLowerCase())}const TM=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function AM(i){return TM.includes(i)}const PM=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function tg(i){return PM.test(i)}const IM=/^[+-]?[0-9]*([.][0-9]+)?%$/;function sx(i){return IM.test(i)}const DM=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function RM(i){return DM.includes(i)}const OM=["center","top","bottom","left","right"];function FM(i){return OM.includes(i)}const MM=["fixed","scroll","local"];function LM(i){return MM.includes(i)}const BM=/^url\(/;function NM(i){return BM.test(i)}function ff(i=""){if(i==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=Z0(i),t=e[0],n=e[2]||t,r=e[1]||t,o=e[3]||r;return{top:t,bottom:n,right:r,left:o}}function mf(i){return e=>{const{top:t,right:n,bottom:r,left:o}=e,s=[];return[t,n,o,r].every(l=>!!l)?s.push([i,VM(e)]):(t&&s.push([i+"-top",t]),n&&s.push([i+"-right",n]),r&&s.push([i+"-bottom",r]),o&&s.push([i+"-left",o])),s}}function VM({top:i,right:e,bottom:t,left:n}){const r=[];return n!==e?r.push(i,e,t,n):t!==i?r.push(i,e,t):e!==i?r.push(i,e):r.push(i),r.join(" ")}function ax(i){return e=>({path:i,value:ff(e)})}function Z0(i){const e=i.trim().slice(0,1500).matchAll(EM);return Array.from(e).map(t=>t[0])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Y0(i){i.setNormalizer("background",zM()),i.setNormalizer("background-color",HM()),i.setReducer("background",UM()),i.setStyleRelation("background",["background-color"])}function zM(){return i=>{const e={},t=Z0(i);for(const n of t)RM(n)?(e.repeat=e.repeat||[],e.repeat.push(n)):FM(n)?(e.position=e.position||[],e.position.push(n)):LM(n)?e.attachment=n:ox(n)?e.color=n:NM(n)&&(e.image=n);return{path:"background",value:e}}}function HM(){return i=>({path:"background.color",value:i})}function UM(){return i=>{const e=[];return e.push(["background-color",i.color]),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lx(i){i.setNormalizer("border",WM()),i.setNormalizer("border-top",Rm("top")),i.setNormalizer("border-right",Rm("right")),i.setNormalizer("border-bottom",Rm("bottom")),i.setNormalizer("border-left",Rm("left")),i.setNormalizer("border-color",tb("color")),i.setNormalizer("border-width",tb("width")),i.setNormalizer("border-style",tb("style")),i.setNormalizer("border-top-color",_s("color","top")),i.setNormalizer("border-top-style",_s("style","top")),i.setNormalizer("border-top-width",_s("width","top")),i.setNormalizer("border-right-color",_s("color","right")),i.setNormalizer("border-right-style",_s("style","right")),i.setNormalizer("border-right-width",_s("width","right")),i.setNormalizer("border-bottom-color",_s("color","bottom")),i.setNormalizer("border-bottom-style",_s("style","bottom")),i.setNormalizer("border-bottom-width",_s("width","bottom")),i.setNormalizer("border-left-color",_s("color","left")),i.setNormalizer("border-left-style",_s("style","left")),i.setNormalizer("border-left-width",_s("width","left")),i.setExtractor("border-top",Om("top")),i.setExtractor("border-right",Om("right")),i.setExtractor("border-bottom",Om("bottom")),i.setExtractor("border-left",Om("left")),i.setExtractor("border-top-color","border.color.top"),i.setExtractor("border-right-color","border.color.right"),i.setExtractor("border-bottom-color","border.color.bottom"),i.setExtractor("border-left-color","border.color.left"),i.setExtractor("border-top-width","border.width.top"),i.setExtractor("border-right-width","border.width.right"),i.setExtractor("border-bottom-width","border.width.bottom"),i.setExtractor("border-left-width","border.width.left"),i.setExtractor("border-top-style","border.style.top"),i.setExtractor("border-right-style","border.style.right"),i.setExtractor("border-bottom-style","border.style.bottom"),i.setExtractor("border-left-style","border.style.left"),i.setReducer("border-color",mf("border-color")),i.setReducer("border-style",mf("border-style")),i.setReducer("border-width",mf("border-width")),i.setReducer("border-top",Fm("top")),i.setReducer("border-right",Fm("right")),i.setReducer("border-bottom",Fm("bottom")),i.setReducer("border-left",Fm("left")),i.setReducer("border",$M()),i.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),i.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),i.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),i.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),i.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),i.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function WM(){return i=>{const{color:e,style:t,width:n}=cx(i);return{path:"border",value:{color:ff(e),style:ff(t),width:ff(n)}}}}function Rm(i){return e=>{const{color:t,style:n,width:r}=cx(e),o={};return t!==void 0&&(o.color={[i]:t}),n!==void 0&&(o.style={[i]:n}),r!==void 0&&(o.width={[i]:r}),{path:"border",value:o}}}function tb(i){return e=>({path:"border",value:jM(e,i)})}function jM(i,e){return{[e]:ff(i)}}function _s(i,e){return t=>({path:"border",value:{[i]:{[e]:t}}})}function Om(i){return(e,t)=>{if(t.border)return of(t.border,i)}}function of(i,e){const t={};return i.width&&i.width[e]&&(t.width=i.width[e]),i.style&&i.style[e]&&(t.style=i.style[e]),i.color&&i.color[e]&&(t.color=i.color[e]),t}function cx(i){const e={},t=Z0(i);for(const n of t)tg(n)||/thin|medium|thick/.test(n)?e.width=n:AM(n)?e.style=n:e.color=n;return e}function $M(){return e=>{const t=of(e,"top"),n=of(e,"right"),r=of(e,"bottom"),o=of(e,"left"),s=[t,n,r,o],l={width:i(s,"width"),style:i(s,"style"),color:i(s,"color")},c=Id(l,"all");return c.length?c:[...Object.entries(l).reduce((g,[b,y])=>(y&&(g.push([`border-${b}`,y]),s.forEach(k=>delete k[b])),g),[]),...Id(t,"top"),...Id(n,"right"),...Id(r,"bottom"),...Id(o,"left")]};function i(e,t){return e.map(n=>n[t]).reduce((n,r)=>n==r?n:null)}}function Fm(i){return e=>Id(e,i)}function Id(i,e){const t=[];if(i&&i.width&&t.push("width"),i&&i.style&&t.push("style"),i&&i.color&&t.push("color"),t.length==3){const n=t.map(r=>i[r]).join(" ");return[e=="all"?["border",n]:[`border-${e}`,n]]}return e=="all"?[]:t.map(n=>[`border-${e}-${n}`,i[n]])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qM(i){i.setNormalizer("margin",ax("margin")),i.setNormalizer("margin-top",e=>({path:"margin.top",value:e})),i.setNormalizer("margin-right",e=>({path:"margin.right",value:e})),i.setNormalizer("margin-bottom",e=>({path:"margin.bottom",value:e})),i.setNormalizer("margin-left",e=>({path:"margin.left",value:e})),i.setReducer("margin",mf("margin")),i.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function GM(i){i.setNormalizer("padding",ax("padding")),i.setNormalizer("padding-top",e=>({path:"padding.top",value:e})),i.setNormalizer("padding-right",e=>({path:"padding.right",value:e})),i.setNormalizer("padding-bottom",e=>({path:"padding.bottom",value:e})),i.setNormalizer("padding-left",e=>({path:"padding.left",value:e})),i.setReducer("padding",mf("padding")),i.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ux{constructor(e){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const n="error"in t?t.error:t.reason;n instanceof Error&&this._handleError(n,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(n=>n!==t)}_fire(e,...t){const n=this._listeners[e]||[];for(const r of n)r.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zb(i,e=new Set){const t=[i],n=new Set;let r=0;for(;t.length>r;){const o=t[r++];if(!(n.has(o)||!KM(o)||e.has(o)))if(n.add(o),Symbol.iterator in o)try{for(const s of o)t.push(s)}catch{}else for(const s in o)s!=="defaultValue"&&t.push(o[s])}return n}function KM(i){const e=Object.prototype.toString.call(i),t=typeof i;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||i===void 0||i===null||i._watchdogExcluded||i instanceof EventTarget||i instanceof Event)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function dx(i,e,t=new Set){if(i===e&&ZM(i))return!0;const n=Zb(i,t),r=Zb(e,t);for(const o of n)if(r.has(o))return!0;return!1}function ZM(i){return typeof i=="object"&&i!==null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hx extends ux{constructor(e,t={}){super(t),this._editor=null,this._lifecyclePromise=null,this._initUsingData=!0,this._editables={},this._throttledSave=Nd(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(n,r)=>e.create(n,r)),this._destructor=n=>n.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},t=[],n=this._config.rootsAttributes||{},r={};for(const[s,l]of Object.entries(this._data.roots))l.isLoaded?(e[s]="",r[s]=n[s]||{}):t.push(s);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:r,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(YM),this._initUsingData?this.create(e,o,o.context):gu(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,n){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=n,this._creator(e,this._config))).then(r=>{this._editor=r,r.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=r.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,t=e.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:n}=e,r=n.has("CommentsRepository")&&n.get("CommentsRepository"),o=n.has("TrackChanges")&&n.get("TrackChanges"),s={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(l=>{s.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(const l of e.model.markers)l._affectsData&&(s.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return r&&(s.commentThreads=JSON.stringify(r.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(s.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),s}_getEditables(){const e={};for(const t of this.editor.model.document.getRootNames()){const n=this.editor.ui.getEditableElement(t);n&&(e[t]=n)}return e}_isErrorComingFromThisItem(e){return dx(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return I0(e,(t,n)=>{if(gu(t)||n==="context")return t})}}class YM{constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const n=e.createElement(t.name,t.attributes);if(t.children)for(const r of t.children)n._appendChild(this._createNode(e,r));return n}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([n,{content:r,attributes:o}])=>{const s=JSON.parse(r),l=JSON.parse(o),c=t.model.document.getRoot(n);for(const[h,g]of l)e.setAttribute(h,g,c);for(const h of s){const g=this._createNode(e,h);e.insert(g,c,"end")}}),Object.entries(this._data.markers).forEach(([n,r])=>{const{document:o}=t.model,{rangeJSON:{start:s,end:l},...c}=r,h=o.getRoot(s.root),g=e.createPositionFromPath(h,s.path,s.stickiness),b=e.createPositionFromPath(h,l.path,l.stickiness),y=e.createRange(g,b);e.addMarker(n,{range:y,...c})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(n=>{const r=this.editor.config.get("collaboration.channelId"),o=this.editor.plugins.get("CommentsRepository");o.hasCommentThread(n.threadId)&&o.getCommentThread(n.threadId).remove(),o.addCommentThread({channelId:r,...n})}),t.forEach(n=>{const r=this.editor.plugins.get("TrackChangesEditing");if(r.hasSuggestion(n.id)){const o=r.getSuggestion(n.id);o.attributes=n.attributes}else r.addSuggestionData(n)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const pf=Symbol("MainQueueId");class JM extends ux{constructor(e,t={}){super(t),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new XM,this._watchdogConfig=t,this._creator=n=>e.create(n),this._destructor=n=>n.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(pf,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const t=l1(e);return Promise.all(t.map(n=>this._actionQueues.enqueue(n.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let r;if(this._watchdogs.has(n.id))throw new Error(`Item with the given id is already added: '${n.id}'.`);if(n.type==="editor")return r=new hx(null,this._watchdogConfig),r.setCreator(n.creator),r._setExcludedProperties(this._contextProps),n.destructor&&r.setDestructor(n.destructor),this._watchdogs.set(n.id,r),r.on("error",(o,{error:s,causesRestart:l})=>{this._fire("itemError",{itemId:n.id,error:s}),l&&this._actionQueues.enqueue(n.id,()=>new Promise(c=>{const h=()=>{r.off("restart",h),this._fire("itemRestart",{itemId:n.id}),c()};r.on("restart",h)}))}),r.create(n.sourceElementOrData,n.config,this._context);throw new Error(`Not supported item type: '${n.type}'.`)})))}remove(e){const t=l1(e);return Promise.all(t.map(n=>this._actionQueues.enqueue(n,()=>{const r=this._getWatchdog(n);return this._watchdogs.delete(n),r.destroy()})))}destroy(){return this._actionQueues.enqueue(pf,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(pf,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=Zb(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(const t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return dx(this._context,e.context)}}class XM{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const n=e===pf;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const o=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(pf),this._queues.get(e)])).then(t),s=o.catch(()=>{});return this._queues.set(e,s),o.finally(()=>{this._activeActions--,this._queues.get(e)===s&&this._activeActions===0&&this._onEmptyCallbacks.forEach(l=>l())})}}function l1(i){return Array.isArray(i)?i:[i]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QM{constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const n=this.get(e);if(!n)throw new be("commandcollection-command-not-found",this,{commandName:e});return n.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class e7 extends di{constructor(e){super(),this.editor=e}set(e,t,n={}){if(typeof t=="string"){const r=t;t=(o,s)=>{this.editor.execute(r),s()}}super.set(e,t,n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const nb="contentEditing",c1="common";class t7{constructor(e){this.keystrokeInfos=new Map,this._editor=e;const t=e.config.get("menuBar.isVisible"),n=e.locale.t;this.addKeystrokeInfoCategory({id:nb,label:n("Content editing keystrokes"),description:n("These keyboard shortcuts allow for quick access to content editing features.")});const r=[{label:n("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:n("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:n("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:n("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:n("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:n("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&r.push({label:n("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:n("User interface and content navigation keystrokes"),description:n("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:r}]})}addKeystrokeInfoCategory({id:e,label:t,description:n,groups:r}){this.keystrokeInfos.set(e,{id:e,label:t,description:n,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:c1}),r&&r.forEach(o=>{this.addKeystrokeInfoGroup({categoryId:e,...o})})}addKeystrokeInfoGroup({categoryId:e=nb,id:t,label:n,keystrokes:r}){const o=this.keystrokeInfos.get(e);if(!o)throw new be("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});o.groups.set(t,{id:t,label:n,keystrokes:r||[]})}addKeystrokeInfos({categoryId:e=nb,groupId:t=c1,keystrokes:n}){if(!this.keystrokeInfos.has(e))throw new be("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:n});const r=this.keystrokeInfos.get(e);if(!r.groups.has(t))throw new be("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:n});r.groups.get(t).keystrokes.push(...n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ng extends Vn(){constructor(e={}){if(super(),"sanitizeHtml"in e)throw new be("editor-config-sanitizehtml-not-supported");const t=this.constructor,{translations:n,...r}=t.defaultConfig||{},{translations:o=n,...s}=e,l=e.language||r.language;this._context=e.context||new hC({language:l,translations:o}),this._context._addEditor(this,!e.context);const c=Array.from(t.builtinPlugins||[]);this.config=new $k(s,r),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),this.plugins=new dC(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new QM,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new vM,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const h=new oR;this.data=new AF(this.model,h),this.editing=new iF(this.model,h),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new IF([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new e7(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new t7(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new be("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new be("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new be("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,t=e.get("plugins"),n=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(r),n,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(n){/* istanbul ignore next -- @preserve */be.rethrowUnexpectedError(n,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}}ng.Context=hC;ng.EditorWatchdog=hx;ng.ContextWatchdog=JM;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function n7(i){if(!fp(i.updateSourceElement))throw new be("attachtoform-missing-elementapi-interface",i);const e=i.sourceElement;if(i7(e)&&e.form){let t;const n=e.form,r=()=>i.updateSourceElement();fp(n.submit)&&(t=n.submit,n.submit=()=>{r(),t.apply(n)}),n.addEventListener("submit",r),i.on("destroy",()=>{n.removeEventListener("submit",r),t&&(n.submit=t)})}}function i7(i){return!!i&&i.tagName.toLowerCase()==="textarea"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yb(i){class e extends i{updateSourceElement(n){if(!this.sourceElement)throw new be("editor-missing-sourceelement",this);const r=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!r&&!o){cw(this.sourceElement,"");return}const s=typeof n=="string"?n:this.data.get();cw(this.sourceElement,s)}}return e}Yb.updateSourceElement=Yb(Object).prototype.updateSourceElement;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ep extends fC{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new Or({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new be("pendingactions-add-invalid-message",this);const t=new(Vn());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const r7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',o7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',s7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',a7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',l7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',c7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',u7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',d7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',h7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',f7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',m7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',p7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',g7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',b7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',v7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',w7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',y7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',_7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',k7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',C7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',x7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',E7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',S7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',T7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',A7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',P7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',I7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',D7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',R7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',O7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',F7='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',M7='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',L7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',B7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',N7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',V7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',z7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',H7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',U7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',W7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',j7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',$7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',q7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',G7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',K7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',Z7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',Y7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',J7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',X7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Q7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',eL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',tL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',nL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',iL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',rL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',oL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',sL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',aL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',lL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',cL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',uL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',dL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',hL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const it={bold:j7,cancel:r7,caption:o7,check:s7,cog:a7,colorPalette:l7,eraser:c7,history:u7,image:g7,imageUpload:b7,imageAssetManager:v7,imageUrl:w7,lowVision:d7,textAlternative:h7,loupe:f7,previousArrow:m7,nextArrow:p7,importExport:K7,paragraph:$7,plus:q7,text:G7,alignBottom:y7,alignMiddle:_7,alignTop:k7,alignLeft:C7,alignCenter:x7,alignRight:E7,alignJustify:S7,objectLeft:R7,objectCenter:A7,objectRight:O7,objectFullWidth:I7,objectInline:D7,objectBlockLeft:T7,objectBlockRight:P7,objectSizeCustom:M7,objectSizeFull:F7,objectSizeLarge:L7,objectSizeSmall:B7,objectSizeMedium:N7,pencil:V7,pilcrow:z7,quote:H7,threeVerticalDots:U7,dragIndicator:W7,redo:Z7,undo:Y7,bulletedList:J7,numberedList:X7,todoList:Q7,codeBlock:eL,browseFiles:tL,heading1:nL,heading2:iL,heading3:rL,heading4:oL,heading5:sL,heading6:aL,horizontalLine:lL,html:cL,indent:uL,outdent:dL,table:hL};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ns extends mt{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),n=t.getAttribute("viewBox");n&&(this.viewBox=n);for(const{name:r,value:o}of Array.from(t.attributes))ns.presentationalAttributeNames.includes(r)&&this.element.setAttribute(r,o);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}ns.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fx extends mt{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ht extends mt{constructor(e,t=new fx){super(e),this._focusDelayed=null;const n=this.bindTemplate,r=xs();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${r}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new ns,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",n.to("class"),n.if("isEnabled","ck-disabled",s=>!s),n.if("isVisible","ck-hidden",s=>!s),n.to("isOn",s=>s?"ck-on":"ck-off"),n.if("withText","ck-button_with-text"),n.if("withKeystroke","ck-button_with-keystroke")],role:n.to("role"),type:n.to("type",s=>s||"button"),tabindex:n.to("tabindex"),"aria-checked":n.to("_ariaChecked"),"aria-pressed":n.to("_ariaPressed"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy"),"aria-disabled":n.if("isEnabled",!0,s=>!s),"data-cke-tooltip-text":n.to("_tooltipString"),"data-cke-tooltip-position":n.to("tooltipPosition")},children:this.children,on:{click:n.to(s=>{this.isEnabled?this.fire("execute"):s.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(s,l,c)=>!l||u1(c)?!1:String(!!s)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(s,l,c)=>!l||!u1(c)?!1:String(!!s)),Yt.isSafari&&(this._focusDelayed||(this._focusDelayed=F0(()=>this.focus(),0)),o.on.mousedown=n.to(()=>{this._focusDelayed()}),o.on.mouseup=n.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new mt;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>yp(t))}]}),e}_getTooltipString(e,t,n){return e?typeof e=="string"?e:(n&&(n=yp(n)),e instanceof Function?e(t,n):`${t}${n?` (${n})`:""}`):""}}function u1(i){switch(i){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class J0 extends mt{constructor(e,t={}){super(e);const n=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",n.to("class")]},children:this.children}),t.icon&&(this.iconView=new ns,this.iconView.content=t.icon,this.children.add(this.iconView));const r=new mt(e);r.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:n.to("label")}]}),this.children.add(r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jr extends Yn(){constructor(e){if(super(),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const t in e.actions){let n=e.actions[t];typeof n=="string"&&(n=[n]);for(const r of n)e.keystrokeHandler.set(r,(o,s)=>{this[t](),s()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(ib)||null}get last(){return this.focusables.filter(ib).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,n)=>{const r=t.element===this.focusTracker.focusedElement;return r&&(e=n),r}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const t=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",n=>{const r=t();this.focusNext(),r!==t()&&n.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",n=>{const r=t();this.focusPrevious(),r!==t()&&n.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,t){e&&this.focusTracker.focusedElement!==e.element&&e.focus(t)}_getDomFocusableItem(e){const t=this.focusables.length;if(!t)return null;const n=this.current;if(n===null)return this[e===1?"first":"last"];let r=this.focusables.get(n),o=(n+t+e)%t;do{const s=this.focusables.get(o);if(ib(s)){r=s;break}o=(o+t+e)%t}while(o!==n);return r}}function ib(i){return $f(i)&&wl(i.element)}function $f(i){return"focus"in i&&typeof i.focus=="function"}function fL(i){return $f(i)&&"focusCycler"in i&&i.focusCycler instanceof jr}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function mL(i){class e extends i{constructor(...n){super(...n),this._onDragBound=this._onDrag.bind(this),this._onDragEndBound=this._onDragEnd.bind(this),this._lastDraggingCoordinates={x:0,y:0},this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(_t.document,"mouseup",this._onDragEndBound),this.listenTo(_t.document,"touchend",this._onDragEndBound),this.listenTo(_t.document,"mousemove",this._onDragBound),this.listenTo(_t.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(_t.document,"mouseup",this._onDragEndBound),this.stopListening(_t.document,"touchend",this._onDragEndBound),this.stopListening(_t.document,"mousemove",this._onDragBound),this.stopListening(_t.document,"touchmove",this._onDragBound)}_onDragStart(n,r){if(!this._isHandleElementPressed(r))return;this._attachDragListeners();let o=0,s=0;r instanceof MouseEvent?(o=r.clientX,s=r.clientY):(o=r.touches[0].clientX,s=r.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:s},this.isDragging=!0}_onDrag(n,r){if(!this.isDragging){this._detachDragListeners();return}let o=0,s=0;r instanceof MouseEvent?(o=r.clientX,s=r.clientY):(o=r.touches[0].clientX,s=r.touches[0].clientY),r.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(s-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:s}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(n){return this.dragHandleElement?this.dragHandleElement===n.target||n.target instanceof HTMLElement&&this.dragHandleElement.contains(n.target):!1}}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pL extends mt{constructor(e){super(e),this.children=this.createCollection(),this.keystrokes=new di,this._focusTracker=new Jn,this._focusables=new Wr,this.focusCycler=new jr({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const t of e){const n=new Ht(this.locale);let r;n.on("execute",()=>t.onExecute()),t.onCreate&&t.onCreate(n);for(r in t)r!="onExecute"&&r!="onCreate"&&n.set(r,t[r]);this.children.add(n)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gL extends mt{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ws={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},d1=Yd("px");class Wd extends mL(mt){constructor(e,{getCurrentDomRoot:t,getViewportOffset:n}){super(e),this.wasMoved=!1;const r=this.bindTemplate,o=e.t;this.set("className",""),this.set("ariaLabel",o("Editor dialog")),this.set("isModal",!1),this.set("position",Ws.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=t,this._getViewportOffset=n,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new di,this.focusTracker=new Jn,this._focusables=new Wr,this._focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",r.if("isModal","ck-dialog-overlay__transparent",s=>!s),r.if("_isVisible","ck-hidden",s=>!s)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",r.to("className")],role:"dialog","aria-label":r.to("ariaLabel"),style:{top:r.to("_top",s=>d1(s)),left:r.to("_left",s=>d1(s)),visibility:r.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,t)=>{this.fire("close",{source:"escKeyPress"}),t()}),this.on("drag",(e,{deltaX:t,deltaY:n})=>{this.wasMoved=!0,this.moveBy(t,n)}),this.listenTo(_t.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(_t.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,t,n)=>{n&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView?this.headerView.element:null}setupParts({icon:e,title:t,hasCloseButton:n=!0,content:r,actionButtons:o}){t&&(this.headerView=new J0(this.locale,{icon:e}),n&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=t,this.ariaLabel=t,this.parts.add(this.headerView,0)),r&&(r instanceof mt&&(r=[r]),this.contentView=new gL(this.locale),this.contentView.children.addMany(r),this.parts.add(this.contentView)),o&&(this.actionsView=new pL(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,t){const n=this._getViewportRect(),r=this._getDialogRect();e+r.width>n.right&&(e=n.right-r.width),e<n.left&&(e=n.left),t<n.top&&(t=n.top),this._moveTo(e,t)}_moveTo(e,t){this._left=e,this._top=t}moveBy(e,t){this.moveTo(this._left+e,this._top+t)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let t=this.position,n;this._getCurrentDomRoot()?n=this._getVisibleDomRootRect(e):t=Ws.SCREEN_CENTER;const r=Wd.defaultOffset,o=this._getDialogRect();switch(t){case Ws.EDITOR_TOP_SIDE:{if(n){const s=this.locale.contentLanguageDirection==="ltr"?n.right-o.width-r:n.left+r;this.moveTo(s,n.top+r)}else this._moveOffScreen();break}case Ws.EDITOR_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-o.width/2),Math.round(n.top+n.height/2-o.height/2)):this._moveOffScreen();break}case Ws.SCREEN_CENTER:{this.moveTo(Math.round((e.width-o.width)/2),Math.round((e.height-o.height)/2));break}case Ws.EDITOR_TOP_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-o.width/2),n.top+r):this._moveOffScreen();break}case Ws.EDITOR_BOTTOM_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-o.width/2),n.bottom-o.height-r):this._moveOffScreen();break}case Ws.EDITOR_ABOVE_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-o.width/2),n.top-o.height-r):this._moveOffScreen();break}case Ws.EDITOR_BELOW_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-o.width/2),n.bottom+r):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let t=new Jt(this._getCurrentDomRoot()).getVisible();if(t){if(t=e.getIntersection(t),!t)return null}else return null;return t}_getDialogRect(){return new Jt(this.element.firstElementChild)}_getViewportRect(){return bL(this._getViewportOffset())}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const t of this.contentView.children)$f(t)&&e.push(t);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element),fL(t)&&this._focusCycler.chain(t.focusCycler)})}_createCloseButton(){const e=new Ht(this.locale),t=this.locale.t;return e.set({label:t("Close"),tooltip:!0,icon:it.cancel}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}}Wd.defaultOffset=15;function bL(i){i=Object.assign({top:0,bottom:0,left:0,right:0},i);const e=new Jt(_t.window);return e.top+=i.top,e.height-=i.top,e.bottom-=i.bottom,e.height-=i.bottom,e.left+=i.left,e.right-=i.right,e.width-=i.left+i.right,e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class js extends Fe{static get pluginName(){return"Dialog"}constructor(e){super(e);const t=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:t("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}_initShowHideListeners(){this.on("show",(e,t)=>{this._show(t)}),this.on("show",(e,t)=>{t.onShow&&t.onShow(this)},{priority:"low"}),this.on("hide",()=>{js._visibleDialogPlugin&&js._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(t,n)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),n())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const t=e.document.differ.getChangedRoots();for(const n of t)n.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:t,title:n,hasCloseButton:r=!0,content:o,actionButtons:s,className:l,isModal:c,position:h,onHide:g}){const b=this.editor;this.view=new Wd(b.locale,{getCurrentDomRoot:()=>b.editing.view.getDomRoot(b.model.document.selection.anchor.root.rootName),getViewportOffset:()=>b.ui.viewportOffset});const y=this.view;y.on("close",()=>{this.hide()}),b.ui.view.body.add(y),b.keystrokes.listenTo(y.element),h||(h=c?Ws.SCREEN_CENTER:Ws.EDITOR_CENTER),y.set({position:h,_isVisible:!0,className:l,isModal:c}),y.setupParts({icon:t,title:n,hasCloseButton:r,content:o,actionButtons:s}),this.id=e,g&&(this._onHide=g),this.isOpen=!0,js._visibleDialogPlugin=this}hide(){js._visibleDialogPlugin&&js._visibleDialogPlugin.fire(`hide:${js._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,t=this.view;t.contentView&&t.contentView.reset(),e.ui.view.body.remove(t),e.ui.focusTracker.remove(t.element),e.keystrokes.stopListening(t.element),t.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,js._visibleDialogPlugin=null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bu extends Ht{constructor(e,t=new fx){super(e,t),this._checkIconHolderView=new vL,this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",n.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(r,o)=>r||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,t,n)=>{const{children:r,_checkIconHolderView:o}=this;n?r.add(o,0):r.remove(o)})}}class vL extends mt{constructor(){super(),this._checkIconView=this._createCheckIconView();const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",t=>t?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,t,n)=>{const{children:r,_checkIconView:o}=this;n&&!r.has(o)?r.add(o):!n&&r.has(o)&&r.remove(o)})}_createCheckIconView(){const e=new ns;return e.content=it.check,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ii extends bu{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yo extends mt{constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${xs()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wL extends mt{constructor(e,t){super(e);const n=e.t,r=new Yo;r.text=n("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":r.id,role:"document",tabindex:-1},children:[Pr(document,"p",{},n("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),r]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{const n=[Pr(document,"h3",{},t.label),...Array.from(t.groups.values()).map(r=>this._createGroup(r)).flat()];return t.description&&n.splice(1,0,Pr(document,"p",{},t.description)),Pr(document,"section",{},n)})}_createGroup(e){const t=e.keystrokes.sort((r,o)=>r.label.localeCompare(o.label)).map(r=>this._createGroupRow(r)).flat(),n=[Pr(document,"dl",{},t)];return e.label&&n.unshift(Pr(document,"h4",{},e.label)),n}_createGroupRow(e){const t=this.locale.t,n=Pr(document,"dt"),r=Pr(document,"dd"),o=_L(e.keystroke),s=[];for(const l of o)s.push(l.map(yL).join(""));return n.innerHTML=e.label,r.innerHTML=s.join(", ")+(e.mayRequireFn&&Yt.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[n,r]}}function yL(i){return yp(i).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function _L(i){return typeof i=="string"?[[i]]:typeof i[0]=="string"?[i]:i}const h1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kL extends Fe{constructor(){super(...arguments),this.contentView=null}static get requires(){return[js]}static get pluginName(){return"AccessibilityHelp"}init(){const e=this.editor,t=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const n=this._createButton(Ht);return n.set({tooltip:!0,withText:!1,label:t("Accessibility help")}),n}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const n=this._createButton(Ii);return n.label=t("Accessibility"),n}),e.keystrokes.set("Alt+0",(n,r)=>{this._toggleDialog(),r()}),this._setupRootLabels()}_createButton(e){const t=this.editor,n=t.plugins.get("Dialog"),r=t.locale,o=new e(r);return o.set({keystroke:"Alt+0",icon:h1,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(n,"id",s=>s==="accessibilityHelp"),o}_setupRootLabels(){const e=this.editor,t=e.editing.view,n=e.t;e.ui.on("ready",()=>{t.change(o=>{for(const s of t.document.roots)r(o,s)}),e.on("addRoot",(o,s)=>{const l=e.editing.view.document.getRoot(s.rootName);t.change(c=>r(c,l))},{priority:"low"})});function r(o,s){const c=[s.getAttribute("aria-label"),n("Press %0 for help.",[yp("Alt+0")])].filter(h=>h).join(". ");o.setAttribute("aria-label",c,s)}}_toggleDialog(){const e=this.editor,t=e.plugins.get("Dialog"),n=e.locale.t;this.contentView||(this.contentView=new wL(e.locale,e.accessibility.keystrokeInfos)),t.id==="accessibilityHelp"?t.hide():t.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:n("Accessibility help"),icon:h1,hasCloseButton:!0,content:this.contentView})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CL extends Wr{constructor(e,t=[]){super(t),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Mo({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=Pr(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ig extends Ht{constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new mt;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class f1 extends mx(Ht){}class xL extends mx(bu){}function mx(i){class e extends i{constructor(...n){super(...n),this.buttonView=this,this._fileInputView=new EL(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return e}class EL extends mt{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}const qf='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SL extends mt{constructor(e,t){super(e);const n=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),t&&this.children.addMany(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",n.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:n.if("isCollapsed","hidden"),"aria-labelledby":n.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new Ht(this.locale),t=e.bindTemplate;return e.set({withText:!0,icon:qf}),e.extendTemplate({attributes:{"aria-expanded":t.to("isOn",n=>String(n))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",n=>!n),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Af(i,e){const t=i.t,n={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return e.map(r=>{const o=n[r.label];return o&&o!=r.label&&(r.label=o),r})}function Pf(i){return i.map(TL).filter(e=>!!e)}function TL(i){return typeof i=="string"?{model:i,label:i,hasBorder:!1,view:{name:"span",styles:{color:i}}}:{model:i.color,label:i.label||i.color,hasBorder:i.hasBorder===void 0?!1:i.hasBorder,view:{name:"span",styles:{color:`${i.color}`}}}}const AL='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class px extends Ht{constructor(e){super(e);const t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=AL,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color",n=>Yt.isMediaForcedColors?null:n)},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class m1 extends mt{constructor(e,t){super(e);const n=t&&t.colorDefinitions?t.colorDefinitions:[];this.columns=t&&t.columns?t.columns:5;const r={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Jn,this.keystrokes=new di,this.items.on("add",(o,s)=>{s.isOn=s.color===this.selectedColor}),n.forEach(o=>{const s=new px;s.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),s.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(s)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:r}}),this.on("change:selectedColor",(o,s,l)=>{for(const c of this.items)c.isOn=c.color===l})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),V0({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}var gx={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const p1=Hp(gx);var g1={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function b1(i){var e,t=[],n=1,r;if(typeof i=="string")if(p1[i])t=p1[i].slice(),r="rgb";else if(i==="transparent")n=0,r="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var o=i.slice(1),s=o.length,l=s<=4;n=1,l?(t=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],s===4&&(n=parseInt(o[3]+o[3],16)/255)):(t=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],s===8&&(n=parseInt(o[6]+o[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),r="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var c=e[1],h=c==="rgb",o=c.replace(/a$/,"");r=o;var s=o==="cmyk"?4:o==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(y,k){if(/%$/.test(y))return k===s?parseFloat(y)/100:o==="rgb"?parseFloat(y)*255/100:parseFloat(y);if(o[k]==="h"){if(/deg$/.test(y))return parseFloat(y);if(g1[y]!==void 0)return g1[y]}return parseFloat(y)}),c===o&&t.push(1),n=h||t[s]===void 0?1:t[s],t=t.slice(0,s)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(t=i.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),r=i.match(/([a-z])/ig).join("").toLowerCase());else isNaN(i)?Array.isArray(i)||i.length?(t=[i[0],i[1],i[2]],r="rgb",n=i.length===4?i[3]:1):i instanceof Object&&(i.r!=null||i.red!=null||i.R!=null?(r="rgb",t=[i.r||i.red||i.R||0,i.g||i.green||i.G||0,i.b||i.blue||i.B||0]):(r="hsl",t=[i.h||i.hue||i.H||0,i.s||i.saturation||i.S||0,i.l||i.lightness||i.L||i.b||i.brightness]),n=i.a||i.alpha||i.opacity||1,i.opacity!=null&&(n/=100)):(r="rgb",t=[i>>>16,(i&65280)>>>8,i&255]);return{space:r,values:t,alpha:n}}const If=gx,bx={};for(const i of Object.keys(If))bx[If[i]]=i;const Lt={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var vx=Lt;for(const i of Object.keys(Lt)){if(!("channels"in Lt[i]))throw new Error("missing channels property: "+i);if(!("labels"in Lt[i]))throw new Error("missing channel labels property: "+i);if(Lt[i].labels.length!==Lt[i].channels)throw new Error("channel and label counts mismatch: "+i);const{channels:e,labels:t}=Lt[i];delete Lt[i].channels,delete Lt[i].labels,Object.defineProperty(Lt[i],"channels",{value:e}),Object.defineProperty(Lt[i],"labels",{value:t})}Lt.rgb.hsl=function(i){const e=i[0]/255,t=i[1]/255,n=i[2]/255,r=Math.min(e,t,n),o=Math.max(e,t,n),s=o-r;let l,c;o===r?l=0:e===o?l=(t-n)/s:t===o?l=2+(n-e)/s:n===o&&(l=4+(e-t)/s),l=Math.min(l*60,360),l<0&&(l+=360);const h=(r+o)/2;return o===r?c=0:h<=.5?c=s/(o+r):c=s/(2-o-r),[l,c*100,h*100]};Lt.rgb.hsv=function(i){let e,t,n,r,o;const s=i[0]/255,l=i[1]/255,c=i[2]/255,h=Math.max(s,l,c),g=h-Math.min(s,l,c),b=function(y){return(h-y)/6/g+1/2};return g===0?(r=0,o=0):(o=g/h,e=b(s),t=b(l),n=b(c),s===h?r=n-t:l===h?r=1/3+e-n:c===h&&(r=2/3+t-e),r<0?r+=1:r>1&&(r-=1)),[r*360,o*100,h*100]};Lt.rgb.hwb=function(i){const e=i[0],t=i[1];let n=i[2];const r=Lt.rgb.hsl(i)[0],o=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[r,o*100,n*100]};Lt.rgb.cmyk=function(i){const e=i[0]/255,t=i[1]/255,n=i[2]/255,r=Math.min(1-e,1-t,1-n),o=(1-e-r)/(1-r)||0,s=(1-t-r)/(1-r)||0,l=(1-n-r)/(1-r)||0;return[o*100,s*100,l*100,r*100]};function PL(i,e){return(i[0]-e[0])**2+(i[1]-e[1])**2+(i[2]-e[2])**2}Lt.rgb.keyword=function(i){const e=bx[i];if(e)return e;let t=1/0,n;for(const r of Object.keys(If)){const o=If[r],s=PL(i,o);s<t&&(t=s,n=r)}return n};Lt.keyword.rgb=function(i){return If[i]};Lt.rgb.xyz=function(i){let e=i[0]/255,t=i[1]/255,n=i[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const r=e*.4124+t*.3576+n*.1805,o=e*.2126+t*.7152+n*.0722,s=e*.0193+t*.1192+n*.9505;return[r*100,o*100,s*100]};Lt.rgb.lab=function(i){const e=Lt.rgb.xyz(i);let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const o=116*n-16,s=500*(t-n),l=200*(n-r);return[o,s,l]};Lt.hsl.rgb=function(i){const e=i[0]/360,t=i[1]/100,n=i[2]/100;let r,o,s;if(t===0)return s=n*255,[s,s,s];n<.5?r=n*(1+t):r=n+t-n*t;const l=2*n-r,c=[0,0,0];for(let h=0;h<3;h++)o=e+1/3*-(h-1),o<0&&o++,o>1&&o--,6*o<1?s=l+(r-l)*6*o:2*o<1?s=r:3*o<2?s=l+(r-l)*(2/3-o)*6:s=l,c[h]=s*255;return c};Lt.hsl.hsv=function(i){const e=i[0];let t=i[1]/100,n=i[2]/100,r=t;const o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,r*=o<=1?o:2-o;const s=(n+t)/2,l=n===0?2*r/(o+r):2*t/(n+t);return[e,l*100,s*100]};Lt.hsv.rgb=function(i){const e=i[0]/60,t=i[1]/100;let n=i[2]/100;const r=Math.floor(e)%6,o=e-Math.floor(e),s=255*n*(1-t),l=255*n*(1-t*o),c=255*n*(1-t*(1-o));switch(n*=255,r){case 0:return[n,c,s];case 1:return[l,n,s];case 2:return[s,n,c];case 3:return[s,l,n];case 4:return[c,s,n];case 5:return[n,s,l]}};Lt.hsv.hsl=function(i){const e=i[0],t=i[1]/100,n=i[2]/100,r=Math.max(n,.01);let o,s;s=(2-t)*n;const l=(2-t)*r;return o=t*r,o/=l<=1?l:2-l,o=o||0,s/=2,[e,o*100,s*100]};Lt.hwb.rgb=function(i){const e=i[0]/360;let t=i[1]/100,n=i[2]/100;const r=t+n;let o;r>1&&(t/=r,n/=r);const s=Math.floor(6*e),l=1-n;o=6*e-s,s&1&&(o=1-o);const c=t+o*(l-t);let h,g,b;switch(s){default:case 6:case 0:h=l,g=c,b=t;break;case 1:h=c,g=l,b=t;break;case 2:h=t,g=l,b=c;break;case 3:h=t,g=c,b=l;break;case 4:h=c,g=t,b=l;break;case 5:h=l,g=t,b=c;break}return[h*255,g*255,b*255]};Lt.cmyk.rgb=function(i){const e=i[0]/100,t=i[1]/100,n=i[2]/100,r=i[3]/100,o=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,t*(1-r)+r),l=1-Math.min(1,n*(1-r)+r);return[o*255,s*255,l*255]};Lt.xyz.rgb=function(i){const e=i[0]/100,t=i[1]/100,n=i[2]/100;let r,o,s;return r=e*3.2406+t*-1.5372+n*-.4986,o=e*-.9689+t*1.8758+n*.0415,s=e*.0557+t*-.204+n*1.057,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[r*255,o*255,s*255]};Lt.xyz.lab=function(i){let e=i[0],t=i[1],n=i[2];e/=95.047,t/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const r=116*t-16,o=500*(e-t),s=200*(t-n);return[r,o,s]};Lt.lab.xyz=function(i){const e=i[0],t=i[1],n=i[2];let r,o,s;o=(e+16)/116,r=t/500+o,s=o-n/200;const l=o**3,c=r**3,h=s**3;return o=l>.008856?l:(o-16/116)/7.787,r=c>.008856?c:(r-16/116)/7.787,s=h>.008856?h:(s-16/116)/7.787,r*=95.047,o*=100,s*=108.883,[r,o,s]};Lt.lab.lch=function(i){const e=i[0],t=i[1],n=i[2];let r;r=Math.atan2(n,t)*360/2/Math.PI,r<0&&(r+=360);const s=Math.sqrt(t*t+n*n);return[e,s,r]};Lt.lch.lab=function(i){const e=i[0],t=i[1],r=i[2]/360*2*Math.PI,o=t*Math.cos(r),s=t*Math.sin(r);return[e,o,s]};Lt.rgb.ansi16=function(i,e=null){const[t,n,r]=i;let o=e===null?Lt.rgb.hsv(i)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};Lt.hsv.ansi16=function(i){return Lt.rgb.ansi16(Lt.hsv.rgb(i),i[2])};Lt.rgb.ansi256=function(i){const e=i[0],t=i[1],n=i[2];return e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)};Lt.ansi16.rgb=function(i){let e=i%10;if(e===0||e===7)return i>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(~~(i>50)+1)*.5,n=(e&1)*t*255,r=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[n,r,o]};Lt.ansi256.rgb=function(i){if(i>=232){const o=(i-232)*10+8;return[o,o,o]}i-=16;let e;const t=Math.floor(i/36)/5*255,n=Math.floor((e=i%36)/6)/5*255,r=e%6/5*255;return[t,n,r]};Lt.rgb.hex=function(i){const t=(((Math.round(i[0])&255)<<16)+((Math.round(i[1])&255)<<8)+(Math.round(i[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};Lt.hex.rgb=function(i){const e=i.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(l=>l+l).join(""));const n=parseInt(t,16),r=n>>16&255,o=n>>8&255,s=n&255;return[r,o,s]};Lt.rgb.hcg=function(i){const e=i[0]/255,t=i[1]/255,n=i[2]/255,r=Math.max(Math.max(e,t),n),o=Math.min(Math.min(e,t),n),s=r-o;let l,c;return s<1?l=o/(1-s):l=0,s<=0?c=0:r===e?c=(t-n)/s%6:r===t?c=2+(n-e)/s:c=4+(e-t)/s,c/=6,c%=1,[c*360,s*100,l*100]};Lt.hsl.hcg=function(i){const e=i[1]/100,t=i[2]/100,n=t<.5?2*e*t:2*e*(1-t);let r=0;return n<1&&(r=(t-.5*n)/(1-n)),[i[0],n*100,r*100]};Lt.hsv.hcg=function(i){const e=i[1]/100,t=i[2]/100,n=e*t;let r=0;return n<1&&(r=(t-n)/(1-n)),[i[0],n*100,r*100]};Lt.hcg.rgb=function(i){const e=i[0]/360,t=i[1]/100,n=i[2]/100;if(t===0)return[n*255,n*255,n*255];const r=[0,0,0],o=e%1*6,s=o%1,l=1-s;let c=0;switch(Math.floor(o)){case 0:r[0]=1,r[1]=s,r[2]=0;break;case 1:r[0]=l,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=s;break;case 3:r[0]=0,r[1]=l,r[2]=1;break;case 4:r[0]=s,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=l}return c=(1-t)*n,[(t*r[0]+c)*255,(t*r[1]+c)*255,(t*r[2]+c)*255]};Lt.hcg.hsv=function(i){const e=i[1]/100,t=i[2]/100,n=e+t*(1-e);let r=0;return n>0&&(r=e/n),[i[0],r*100,n*100]};Lt.hcg.hsl=function(i){const e=i[1]/100,n=i[2]/100*(1-e)+.5*e;let r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[i[0],r*100,n*100]};Lt.hcg.hwb=function(i){const e=i[1]/100,t=i[2]/100,n=e+t*(1-e);return[i[0],(n-e)*100,(1-n)*100]};Lt.hwb.hcg=function(i){const e=i[1]/100,n=1-i[2]/100,r=n-e;let o=0;return r<1&&(o=(n-r)/(1-r)),[i[0],r*100,o*100]};Lt.apple.rgb=function(i){return[i[0]/65535*255,i[1]/65535*255,i[2]/65535*255]};Lt.rgb.apple=function(i){return[i[0]/255*65535,i[1]/255*65535,i[2]/255*65535]};Lt.gray.rgb=function(i){return[i[0]/100*255,i[0]/100*255,i[0]/100*255]};Lt.gray.hsl=function(i){return[0,0,i[0]]};Lt.gray.hsv=Lt.gray.hsl;Lt.gray.hwb=function(i){return[0,100,i[0]]};Lt.gray.cmyk=function(i){return[0,0,0,i[0]]};Lt.gray.lab=function(i){return[i[0],0,0]};Lt.gray.hex=function(i){const e=Math.round(i[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};Lt.rgb.gray=function(i){return[(i[0]+i[1]+i[2])/3/255*100]};const Sp=vx;function IL(){const i={},e=Object.keys(Sp);for(let t=e.length,n=0;n<t;n++)i[e[n]]={distance:-1,parent:null};return i}function DL(i){const e=IL(),t=[i];for(e[i].distance=0;t.length;){const n=t.pop(),r=Object.keys(Sp[n]);for(let o=r.length,s=0;s<o;s++){const l=r[s],c=e[l];c.distance===-1&&(c.distance=e[n].distance+1,c.parent=n,t.unshift(l))}}return e}function RL(i,e){return function(t){return e(i(t))}}function OL(i,e){const t=[e[i].parent,i];let n=Sp[e[i].parent][i],r=e[i].parent;for(;e[r].parent;)t.unshift(e[r].parent),n=RL(Sp[e[r].parent][r],n),r=e[r].parent;return n.conversion=t,n}var FL=function(i){const e=DL(i),t={},n=Object.keys(e);for(let r=n.length,o=0;o<r;o++){const s=n[o];e[s].parent!==null&&(t[s]=OL(s,e))}return t};const Jb=vx,ML=FL,Dd={},LL=Object.keys(Jb);function BL(i){const e=function(...t){const n=t[0];return n==null?n:(n.length>1&&(t=n),i(t))};return"conversion"in i&&(e.conversion=i.conversion),e}function NL(i){const e=function(...t){const n=t[0];if(n==null)return n;n.length>1&&(t=n);const r=i(t);if(typeof r=="object")for(let o=r.length,s=0;s<o;s++)r[s]=Math.round(r[s]);return r};return"conversion"in i&&(e.conversion=i.conversion),e}LL.forEach(i=>{Dd[i]={},Object.defineProperty(Dd[i],"channels",{value:Jb[i].channels}),Object.defineProperty(Dd[i],"labels",{value:Jb[i].labels});const e=ML(i);Object.keys(e).forEach(n=>{const r=e[n];Dd[i][n]=NL(r),Dd[i][n].raw=BL(r)})});var wx=Dd;const VL=Hp(wx),yx=rT({__proto__:null,default:VL},[wx]);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _x(i,e){if(!i)return"";const t=kx(i);if(!t)return"";if(t.space===e)return i;if(!WL(t))return"";const r=yx[t.space][e];if(!r)return"";const o=r(t.space==="hex"?t.hexValue:t.values);return UL(o,e)}function zL(i){if(!i)return"";const e=kx(i);return e?e.space==="hex"?e.hexValue:_x(i,"hex"):"#000"}function HL(i,e){customElements.get(i)===void 0&&customElements.define(i,e)}function UL(i,e){switch(e){case"hex":return`#${i}`;case"rgb":return`rgb( ${i[0]}, ${i[1]}, ${i[2]} )`;case"hsl":return`hsl( ${i[0]}, ${i[1]}%, ${i[2]}% )`;case"hwb":return`hwb( ${i[0]}, ${i[1]}, ${i[2]} )`;case"lab":return`lab( ${i[0]}% ${i[1]} ${i[2]} )`;case"lch":return`lch( ${i[0]}% ${i[1]} ${i[2]} )`;default:return""}}function kx(i){if(i.startsWith("#")){const t=b1(i);return{space:"hex",values:t.values,hexValue:i,alpha:t.alpha}}const e=b1(i);return e.space?e:null}function WL(i){return Object.keys(yx).includes(i.space)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lr extends mt{constructor(e,t){super(e);const n=`ck-labeled-field-view-${xs()}`,r=`ck-labeled-field-view-status-${xs()}`;this.fieldView=t(this,n,r),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(n),this.statusView=this._createStatusView(r),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(s,l)=>s||l);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",s=>!s),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const t=new Yo(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new mt(this.locale),n=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",r=>!r)],id:e,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jL extends mt{constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Jn,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),tabindex:t.to("tabIndex"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById"),"aria-label":t.to("ariaLabel")},on:{input:t.to((...n)=>{this.fire("input",...n),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,n)=>{this._setDomElementValue(n),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=$L(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function $L(i){return!i.value}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cx extends jL{constructor(e){super(e),this.set("inputMode","text");const t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xx extends Cx{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qL extends Cx{constructor(e,{min:t,max:n,step:r}={}){super(e);const o=this.bindTemplate;this.set("min",t),this.set("max",n),this.set("step",r),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GL extends mt{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",n=>`ck-dropdown__panel_${n}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(n=>{n.target.tagName.toLocaleLowerCase()!=="input"&&n.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():vn("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jd extends mt{constructor(e,t,n){super(e);const r=this.bindTemplate;this.buttonView=t,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new di,this.focusTracker=new Jn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[t,n]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":r.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(t,n,r)=>{if(r)if(this.panelPosition==="auto"){const o=jd._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(t,n)=>{this.isOpen&&(this.isOpen=!1,n())};this.keystrokes.set("arrowdown",(t,n)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,n())}),this.keystrokes.set("arrowright",(t,n)=>{this.isOpen&&n()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:n,southWest:r,northEast:o,northWest:s,southMiddleEast:l,southMiddleWest:c,northMiddleEast:h,northMiddleWest:g}=jd.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[n,r,l,c,e,o,s,h,g,t]:[r,n,c,l,e,s,o,g,h,t]}}jd.defaultPanelPositions={south:(i,e)=>({top:i.bottom,left:i.left-(e.width-i.width)/2,name:"s"}),southEast:i=>({top:i.bottom,left:i.left,name:"se"}),southWest:(i,e)=>({top:i.bottom,left:i.left-e.width+i.width,name:"sw"}),southMiddleEast:(i,e)=>({top:i.bottom,left:i.left-(e.width-i.width)/4,name:"sme"}),southMiddleWest:(i,e)=>({top:i.bottom,left:i.left-(e.width-i.width)*3/4,name:"smw"}),north:(i,e)=>({top:i.top-e.height,left:i.left-(e.width-i.width)/2,name:"n"}),northEast:(i,e)=>({top:i.top-e.height,left:i.left,name:"ne"}),northWest:(i,e)=>({top:i.top-e.height,left:i.left-e.width+i.width,name:"nw"}),northMiddleEast:(i,e)=>({top:i.top-e.height,left:i.left-(e.width-i.width)/4,name:"nme"}),northMiddleWest:(i,e)=>({top:i.top-e.height,left:i.left-(e.width-i.width)*3/4,name:"nmw"})};jd._getOptimalPosition=Zp;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ex extends Ht{constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new ns;return e.content=qf,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KL extends bu{constructor(e){super(e);const t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-dropdown-menu-list__nested-menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",n=>String(n)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new ns;return e.content=qf,e.extendTemplate({attributes:{class:"ck-dropdown-menu-list__nested-menu__button__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yc extends mt{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",n=>!n)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class X0 extends mt{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ip extends mt{constructor(e,t=new Yo){super(e);const n=this.bindTemplate,r=new rg(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,r]),r.set({role:"group",ariaLabelledBy:t.id}),r.focusTracker.destroy(),r.keystrokes.destroy(),this.items=r.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",n.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const e=this.items.find(t=>!(t instanceof X0));e&&e.focus()}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rg extends mt{constructor(e){super(e),this._listItemGroupToChangeListeners=new WeakMap;const t=this.bindTemplate;this.focusables=new Wr,this.items=this.createCollection(),this.focusTracker=new Jn,this.keystrokes=new di,this._focusCycler=new jr({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof ip?this._registerFocusableItemsGroup(e):e instanceof yc&&this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(const n of t.removed)n instanceof ip?this._deregisterFocusableItemsGroup(n):n instanceof yc&&this._deregisterFocusableListItem(n);for(const n of Array.from(t.added).reverse())n instanceof ip?this._registerFocusableItemsGroup(n,t.index):this._registerFocusableListItem(n,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,n)=>{for(const r of n.removed)this._deregisterFocusableListItem(r);for(const r of Array.from(n.added).reverse())this._registerFocusableListItem(r,this.items.getIndex(e)+n.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((r,o)=>{const s=typeof t<"u"?t+o:void 0;this._registerFocusableListItem(r,s)});const n=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,n),e.items.on("change",n)}_deregisterFocusableItemsGroup(e){for(const t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZL extends rg{constructor(e){super(e);const t=this.bindTemplate;this.role="menu",this.set("isVisible",!0),this.extendTemplate({attributes:{class:["ck-dropdown-menu-list",t.if("isVisible","ck-hidden",n=>!n)]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Mm=5,YL={eastSouth:i=>({top:i.top,left:i.right-Mm,name:"es"}),eastNorth:(i,e)=>({top:i.top-e.height+i.height,left:i.right-Mm,name:"en"}),westSouth:(i,e)=>({top:i.top,left:i.left-e.width+Mm,name:"ws"}),westNorth:(i,e)=>({top:i.top-e.height+i.height,left:i.left-e.width+Mm,name:"wn"})};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const bd={openOnArrowRightKey(i){const e=i.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";i.keystrokes.set(e,(t,n)=>{i.focusTracker.focusedElement!==i.buttonView.element||!i.isEnabled||(i.isOpen||(i.isOpen=!0),i.panelView.focus(),n())})},openOnButtonClick(i){i.buttonView.on("execute",()=>{i.isEnabled&&(i.isOpen=!0)})},openAndFocusOnEnterKeyPress(i){i.keystrokes.set("enter",(e,t)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen=!0,i.panelView.focus(),t())})},closeOnArrowLeftKey(i){const e=i.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";i.keystrokes.set(e,(t,n)=>{i.isOpen&&(i.focus(),i.isOpen=!1,n())})},closeOnEscKey(i){i.keystrokes.set("esc",(e,t)=>{i.isOpen&&(i.focus(),i.isOpen=!1,t())})},closeOnParentClose(i,e){e.on("change:isOpen",(t,n,r)=>{!r&&t.source===e&&(i.isOpen=!1)})}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const v1=Yd("px"),JL={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}};class ti extends mt{constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",n=>`ck-balloon-panel_${n}`),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",v1),left:t.to("left",v1)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const t=rp(e.target);if(t&&!wl(t))return!1;this.show();const n=ti.defaultPositions,r=Object.assign({},{element:this.element,positions:[n.southArrowNorth,n.southArrowNorthMiddleWest,n.southArrowNorthMiddleEast,n.southArrowNorthWest,n.southArrowNorthEast,n.northArrowSouth,n.northArrowSouthMiddleWest,n.northArrowSouthMiddleEast,n.northArrowSouthWest,n.northArrowSouthEast,n.viewportStickyNorth],limiter:_t.document.body,fitInViewport:!0},e),o=ti._getOptimalPosition(r)||JL,s=parseInt(o.left),l=parseInt(o.top),c=o.name,h=o.config||{},{withArrow:g=!0}=h;return this.top=l,this.left=s,this.position=c,this.withArrow=g,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let t=rp(e.target);const n=e.limiter?rp(e.limiter):_t.document.body;if(this.listenTo(_t.document,"scroll",(r,o)=>{const s=o.target,l=t&&s.contains(t),c=n&&s.contains(n);(l||c||!t||!n)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(_t.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(t&&Pi(t)&&(t=t.parentElement),t)){const r=()=>{wl(t)||this.unpin()};this._resizeObserver=new ei(t,r)}return!0}_stopPinning(){this.stopListening(_t.document,"scroll"),this.stopListening(_t.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:t=ti.arrowSideOffset,heightOffset:n=ti.arrowHeightOffset,stickyVerticalOffset:r=ti.stickyVerticalOffset,config:o}=e;return{northWestArrowSouthWest:(c,h)=>({top:s(c,h),left:c.left-t,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(c,h)=>({top:s(c,h),left:c.left-h.width*.25-t,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(c,h)=>({top:s(c,h),left:c.left-h.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(c,h)=>({top:s(c,h),left:c.left-h.width*.75+t,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(c,h)=>({top:s(c,h),left:c.left-h.width+t,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(c,h)=>({top:s(c,h),left:c.left+c.width/2-t,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(c,h)=>({top:s(c,h),left:c.left+c.width/2-h.width*.25-t,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(c,h)=>({top:s(c,h),left:c.left+c.width/2-h.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(c,h)=>({top:s(c,h),left:c.left+c.width/2-h.width*.75+t,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(c,h)=>({top:s(c,h),left:c.left+c.width/2-h.width+t,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(c,h)=>({top:s(c,h),left:c.right-t,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(c,h)=>({top:s(c,h),left:c.right-h.width*.25-t,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(c,h)=>({top:s(c,h),left:c.right-h.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(c,h)=>({top:s(c,h),left:c.right-h.width*.75+t,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(c,h)=>({top:s(c,h),left:c.right-h.width+t,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:c=>({top:l(c),left:c.left-t,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(c,h)=>({top:l(c),left:c.left-h.width*.25-t,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(c,h)=>({top:l(c),left:c.left-h.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(c,h)=>({top:l(c),left:c.left-h.width*.75+t,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(c,h)=>({top:l(c),left:c.left-h.width+t,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:c=>({top:l(c),left:c.left+c.width/2-t,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(c,h)=>({top:l(c),left:c.left+c.width/2-h.width*.25-t,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(c,h)=>({top:l(c),left:c.left+c.width/2-h.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(c,h)=>({top:l(c),left:c.left+c.width/2-h.width*.75+t,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(c,h)=>({top:l(c),left:c.left+c.width/2-h.width+t,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:c=>({top:l(c),left:c.right-t,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(c,h)=>({top:l(c),left:c.right-h.width*.25-t,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(c,h)=>({top:l(c),left:c.right-h.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(c,h)=>({top:l(c),left:c.right-h.width*.75+t,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(c,h)=>({top:l(c),left:c.right-h.width+t,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(c,h)=>({top:c.top+c.height/2-h.height/2,left:c.left-h.width-n,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(c,h)=>({top:c.top+c.height/2-h.height/2,left:c.right+n,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(c,h,g,b)=>{const y=b||g;return!c.getIntersection(y)||y.height-c.height>r?null:{top:y.top+r,left:c.left+c.width/2-h.width/2,name:"arrowless",config:{withArrow:!1,...o}}}};function s(c,h){return c.top-h.height-n}function l(c){return c.bottom+n}}}ti.arrowSideOffset=25;ti.arrowHeightOffset=10;ti.stickyVerticalOffset=20;ti._getOptimalPosition=Zp;ti.defaultPositions=ti.generatePositions();function rp(i){return gu(i)?i:Kp(i)?i.commonAncestorContainer:typeof i=="function"?rp(i()):null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XL extends ti{constructor(e){super(e);const t=this.bindTemplate;this.set({isVisible:!1,position:"se",class:null,top:0,left:0}),this.extendTemplate({tag:"div",attributes:{class:["ck-reset","ck-dropdown-menu__nested-menu__panel"],tabindex:"-1"},on:{selectstart:t.to(n=>{n.target.tagName.toLocaleLowerCase()!=="input"&&n.preventDefault()})}})}focus(e=1){const{content:t}=this;t.length&&(e===1?t.first.focus():t.last.focus())}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Q0 extends mt{constructor(e,t,n,r,o){super(e),this._bodyCollection=t,this.id=n,this.set({isOpen:!1,isEnabled:!0,panelPosition:"w",class:void 0,parentMenuView:null}),this.keystrokes=new di,this.focusTracker=new Jn,this.buttonView=new KL(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.buttonView.label=r,this.panelView=new XL(e),this.panelView.isVisible=!0,this.listView=new ZL(e),this.listView.bind("ariaLabel").to(this.buttonView,"label"),this.panelView.content.add(this.listView);const s=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown-menu-list__nested-menu",s.to("class"),s.if("isEnabled","ck-disabled",l=>!l)],role:"presentation"},children:[this.buttonView]}),this.parentMenuView=o,this.parentMenuView&&this._handleParentMenuView(),this._attachBehaviors()}get _panelPositions(){const{westSouth:e,eastSouth:t,westNorth:n,eastNorth:r}=YL;return this.locale.uiLanguageDirection==="ltr"?[t,r,e,n]:[e,n,t,r]}render(){super.render(),this.panelView.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),this._mountPanelOnOpen()}destroy(){this._removePanelFromBody(),this.panelView.destroy(),super.destroy()}focus(){this.buttonView.focus()}_handleParentMenuView(){this.delegate(...Q0.DELEGATED_EVENTS).to(this.parentMenuView),bd.closeOnParentClose(this,this.parentMenuView)}_attachBehaviors(){bd.openOnButtonClick(this),bd.openAndFocusOnEnterKeyPress(this),bd.openOnArrowRightKey(this),bd.closeOnEscKey(this),bd.closeOnArrowLeftKey(this)}_mountPanelOnOpen(){const{panelView:e}=this;this.on("change:isOpen",(t,n,r)=>{if(t.source===this){if(!r&&this._bodyCollection.has(e)){this._removePanelFromBody();return}r&&!this._bodyCollection.has(e)&&this._addPanelToBody()}})}_removePanelFromBody(){const{panelView:e,keystrokes:t}=this;this._bodyCollection.has(e)&&(this._bodyCollection.remove(e),t.stopListening(e.element))}_addPanelToBody(){const{panelView:e,buttonView:t,keystrokes:n}=this;this._bodyCollection.has(e)||(this._bodyCollection.add(e),n.listenTo(e.element),e.pin({positions:this._panelPositions,limiter:_t.document.body,element:e.element,target:t.element,fitInViewport:!0}))}}Q0.DELEGATED_EVENTS=["mouseenter","execute","change:isOpen"];/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sx extends mt{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QL extends mt{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function e4(i){return i.bindTemplate.to(e=>{e.target===i.element&&e.preventDefault()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Tx(i){if(Array.isArray(i))return{items:i,removeItems:[]};const e={items:[],removeItems:[]};return i?{...e,...i}:e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const t4={alignLeft:it.alignLeft,bold:it.bold,importExport:it.importExport,paragraph:it.paragraph,plus:it.plus,text:it.text,threeVerticalDots:it.threeVerticalDots,pilcrow:it.pilcrow,dragIndicator:it.dragIndicator};class $d extends mt{constructor(e,t){super(e);const n=this.bindTemplate,r=this.t;this.options=t||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Jn,this.keystrokes=new di,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new n4(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new jr({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const s=["ck","ck-toolbar",n.to("class"),n.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&s.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:s,role:"toolbar","aria-label":n.to("ariaLabel"),style:{maxWidth:n.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:e4(this)}}),this._behavior=this.options.shouldGroupWhenFull?new r4(this):new i4(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,n){this.items.addMany(this._buildItemsFromConfig(e,t,n))}_buildItemsFromConfig(e,t,n){const r=Tx(e),o=n||r.removeItems;return this._cleanItemsConfiguration(r.items,t,o).map(l=>ro(l)?this._createNestedToolbarDropdown(l,t,o):l==="|"?new Sx:l==="-"?new QL:t.create(l)).filter(l=>!!l)}_cleanItemsConfiguration(e,t,n){const r=e.filter((o,s,l)=>o==="|"?!0:n.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(vn("toolbarview-line-break-ignored-when-grouping-items",l),!1):!0:!ro(o)&&!t.has(o)?(vn("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(r)}_cleanSeparatorsAndLineBreaks(e){const t=s=>s!=="-"&&s!=="|",n=e.length,r=e.findIndex(t);if(r===-1)return[];const o=n-e.slice().reverse().findIndex(t);return e.slice(r,o).filter((s,l,c)=>t(s)?!0:!(l>0&&c[l-1]===s))}_createNestedToolbarDropdown(e,t,n){let{label:r,icon:o,items:s,tooltip:l=!0,withText:c=!1}=e;if(s=this._cleanItemsConfiguration(s,t,n),!s.length)return null;const h=this.locale,g=Dr(h);return r||vn("toolbarview-nested-toolbar-dropdown-missing-label",e),g.class="ck-toolbar__nested-toolbar-dropdown",g.buttonView.set({label:r,tooltip:l,withText:!!c}),o!==!1?g.buttonView.icon=t4[o]||o||it.threeVerticalDots:g.buttonView.withText=!0,sg(g,()=>g.toolbarView._buildItemsFromConfig(s,t,n)),g}}class n4 extends mt{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class i4{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(n=>n),e.focusables.bindTo(e.items).using(n=>$f(n)?n:null),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class r4{constructor(e){this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,n)=>{const r=n.index,o=Array.from(n.added);for(const s of n.removed)r>=this.ungroupedItems.length?this.groupedItems.remove(s):this.ungroupedItems.remove(s);for(let s=r;s<r+o.length;s++){const l=o[s-r];s>this.ungroupedItems.length?this.groupedItems.add(l,s-this.ungroupedItems.length):this.ungroupedItems.add(l,s)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!wl(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,n=new Jt(e.lastChild),r=new Jt(e);if(!this.cachedPadding){const o=_t.window.getComputedStyle(e),s=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[s])}return t==="ltr"?n.right>r.right-this.cachedPadding:n.left<r.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new ei(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Sx),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,n=Dr(e);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",sg(n,this.groupedItems),n.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:it.threeVerticalDots}),n}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{$f(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class og extends mt{constructor(e,t){super(e);const n=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(t),this.arrowView=this._createArrowView(),this.keystrokes=new di,this.focusTracker=new Jn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",n.to("class"),n.if("isVisible","ck-hidden",r=>!r),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const t=e||new Ht;return e||t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){const e=new Ht,t=e.bindTemplate;return e.icon=qf,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",n=>String(n))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Dr(i,e=Ex){const t=typeof e=="function"?new e(i):e,n=new GL(i),r=new jd(i,t,n);return t.bind("isEnabled").to(r),t instanceof og?t.arrowView.bind("isOn").to(r,"isOpen"):t.bind("isOn").to(r,"isOpen"),o4(r),r}function sg(i,e,t={}){i.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),i.isOpen?w1(i,e,t):i.once("change:isOpen",()=>w1(i,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&ev(i,()=>i.toolbarView.items.find(n=>n.isOn))}function w1(i,e,t){const n=i.locale,r=n.t,o=i.toolbarView=new $d(n),s=typeof e=="function"?e():e;o.ariaLabel=t.ariaLabel||r("Dropdown toolbar"),t.maxWidth&&(o.maxWidth=t.maxWidth),t.class&&(o.class=t.class),t.isCompact&&(o.isCompact=t.isCompact),t.isVertical&&(o.isVertical=!0),s instanceof Wr?o.items.bindTo(s).using(l=>l):o.items.addMany(s),i.panelView.children.add(o),o.items.delegate("execute").to(i)}function xl(i,e,t={}){i.isOpen?y1(i,e,t):i.once("change:isOpen",()=>y1(i,e,t),{priority:"highest"}),ev(i,()=>i.listView.items.find(n=>n instanceof yc?n.children.first.isOn:!1))}function y1(i,e,t){const n=i.locale,r=i.listView=new rg(n),o=typeof e=="function"?e():e;r.ariaLabel=t.ariaLabel,r.role=t.role,Ax(i,r.items,o,n),i.panelView.children.add(r),r.items.delegate("execute").to(i)}function ev(i,e){i.on("change:isOpen",()=>{if(!i.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():vn("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:Zo.low-10})}function o4(i){s4(i),a4(i),l4(i),c4(i),u4(i),d4(i)}function s4(i){Cu({emitter:i,activator:()=>i.isRendered&&i.isOpen,callback:()=>{i.isOpen=!1},contextElements:()=>[i.element,...i.focusTracker.elements]})}function a4(i){i.on("execute",e=>{e.source instanceof ig||(i.isOpen=!1)})}function l4(i){i.focusTracker.on("change:isFocused",(e,t,n)=>{n||!i.isOpen||(i.isOpen=!1)})}function c4(i){i.keystrokes.set("arrowdown",(e,t)=>{i.isOpen&&(i.panelView.focus(),t())}),i.keystrokes.set("arrowup",(e,t)=>{i.isOpen&&(i.panelView.focusLast(),t())})}function u4(i){i.on("change:isOpen",(e,t,n)=>{if(n)return;i.focusTracker.elements.some(o=>o.contains(_t.document.activeElement))&&i.buttonView.focus()})}function d4(i){i.on("change:isOpen",(e,t,n)=>{n&&i.panelView.focus()},{priority:"low"})}function Ax(i,e,t,n){e.on("change",()=>{const r=[...e].reduce((s,l)=>(l instanceof yc&&l.children.first instanceof bu&&s.push(l.children.first),s),[]),o=r.some(s=>s.isToggleable);r.forEach(s=>{s.hasCheckSpace=o})}),e.bindTo(t).using(r=>{if(r.type==="separator")return new X0(n);if(r.type==="group"){const o=new ip(n);return o.set({label:r.label}),Ax(i,o.items,r.items,n),o.items.delegate("execute").to(i),o}else if(r.type==="button"||r.type==="switchbutton"){const o=r.model.role==="menuitemcheckbox"||r.model.role==="menuitemradio",s=new yc(n);let l;return r.type==="button"?(l=new bu(n),l.set({isToggleable:o})):l=new ig(n),l.bind(...Object.keys(r.model)).to(r.model),l.delegate("execute").to(s),s.children.add(l),s}return null})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Jo=(i,e,t)=>{const n=new xx(i.locale);return n.set({id:e,ariaDescribedById:t}),n.bind("isReadOnly").to(i,"isEnabled",r=>!r),n.bind("hasError").to(i,"errorText",r=>!!r),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},h4=(i,e,t)=>{const n=new qL(i.locale);return n.set({id:e,ariaDescribedById:t,inputMode:"numeric"}),n.bind("isReadOnly").to(i,"isEnabled",r=>!r),n.bind("hasError").to(i,"errorText",r=>!!r),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},Px=(i,e,t)=>{const n=Dr(i.locale);return n.set({id:e,ariaDescribedById:t}),n.bind("isEnabled").to(i),n},Df=(i,e=0,t=1)=>i>t?t:i<e?e:i,Ur=(i,e=0,t=Math.pow(10,e))=>Math.round(t*i)/t,f4=i=>v4(Xb(i)),Xb=i=>(i[0]==="#"&&(i=i.substring(1)),i.length<6?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Ur(parseInt(i[3]+i[3],16)/255,2):1}:{r:parseInt(i.substring(0,2),16),g:parseInt(i.substring(2,4),16),b:parseInt(i.substring(4,6),16),a:i.length===8?Ur(parseInt(i.substring(6,8),16)/255,2):1}),m4=i=>b4(g4(i)),p4=({h:i,s:e,v:t,a:n})=>{const r=(200-e)*t/100;return{h:Ur(i),s:Ur(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:Ur(r/2),a:Ur(n,2)}},Qb=i=>{const{h:e,s:t,l:n}=p4(i);return`hsl(${e}, ${t}%, ${n}%)`},g4=({h:i,s:e,v:t,a:n})=>{i=i/360*6,e=e/100,t=t/100;const r=Math.floor(i),o=t*(1-e),s=t*(1-(i-r)*e),l=t*(1-(1-i+r)*e),c=r%6;return{r:Ur([t,s,o,o,l,t][c]*255),g:Ur([l,t,t,s,o,o][c]*255),b:Ur([o,o,l,t,t,s][c]*255),a:Ur(n,2)}},Lm=i=>{const e=i.toString(16);return e.length<2?"0"+e:e},b4=({r:i,g:e,b:t,a:n})=>{const r=n<1?Lm(Ur(n*255)):"";return"#"+Lm(i)+Lm(e)+Lm(t)+r},v4=({r:i,g:e,b:t,a:n})=>{const r=Math.max(i,e,t),o=r-Math.min(i,e,t),s=o?r===i?(e-t)/o:r===e?2+(t-i)/o:4+(i-e)/o:0;return{h:Ur(60*(s<0?s+6:s)),s:Ur(r?o/r*100:0),v:Ur(r/255*100),a:n}},Ix=(i,e)=>{if(i===e)return!0;for(const t in i)if(i[t]!==e[t])return!1;return!0},w4=(i,e)=>i.toLowerCase()===e.toLowerCase()?!0:Ix(Xb(i),Xb(e)),_1={},Dx=i=>{let e=_1[i];return e||(e=document.createElement("template"),e.innerHTML=i,_1[i]=e),e},tv=(i,e,t)=>{i.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))};let Bd=!1;const e0=i=>"touches"in i,y4=i=>Bd&&!e0(i)?!1:(Bd||(Bd=e0(i)),!0),k1=(i,e)=>{const t=e0(e)?e.touches[0]:e,n=i.el.getBoundingClientRect();tv(i.el,"move",i.getMove({x:Df((t.pageX-(n.left+window.pageXOffset))/n.width),y:Df((t.pageY-(n.top+window.pageYOffset))/n.height)}))},_4=(i,e)=>{const t=e.keyCode;t>40||i.xy&&t<37||t<33||(e.preventDefault(),tv(i.el,"move",i.getMove({x:t===39?.01:t===37?-.01:t===34?.05:t===33?-.05:t===35?1:t===36?-1:0,y:t===40?.01:t===38?-.01:0},!0)))};class Rx{constructor(e,t,n,r){const o=Dx(`<div role="slider" tabindex="0" part="${t}" ${n}><div part="${t}-pointer"></div></div>`);e.appendChild(o.content.cloneNode(!0));const s=e.querySelector(`[part=${t}]`);s.addEventListener("mousedown",this),s.addEventListener("touchstart",this),s.addEventListener("keydown",this),this.el=s,this.xy=r,this.nodes=[s.firstChild,s]}set dragging(e){const t=e?document.addEventListener:document.removeEventListener;t(Bd?"touchmove":"mousemove",this),t(Bd?"touchend":"mouseup",this)}handleEvent(e){switch(e.type){case"mousedown":case"touchstart":if(e.preventDefault(),!y4(e)||!Bd&&e.button!=0)return;this.el.focus(),k1(this,e),this.dragging=!0;break;case"mousemove":case"touchmove":e.preventDefault(),k1(this,e);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":_4(this,e);break}}style(e){e.forEach((t,n)=>{for(const r in t)this.nodes[n].style.setProperty(r,t[r])})}}class k4 extends Rx{constructor(e){super(e,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:e}){this.h=e,this.style([{left:`${e/360*100}%`,color:Qb({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${Ur(e)}`)}getMove(e,t){return{h:t?Df(this.h+e.x*360,0,360):360*e.x}}}class C4 extends Rx{constructor(e){super(e,"saturation",'aria-label="Color"',!0)}update(e){this.hsva=e,this.style([{top:`${100-e.v}%`,left:`${e.s}%`,color:Qb(e)},{"background-color":Qb({h:e.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${Ur(e.s)}%, Brightness ${Ur(e.v)}%`)}getMove(e,t){return{s:t?Df(this.hsva.s+e.x*100,0,100):e.x*100,v:t?Df(this.hsva.v-e.y*100,0,100):Math.round(100-e.y*100)}}}const x4=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',E4="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",S4="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",Bm=Symbol("same"),rb=Symbol("color"),C1=Symbol("hsva"),ob=Symbol("update"),x1=Symbol("parts"),E1=Symbol("css"),S1=Symbol("sliders");class T4 extends HTMLElement{static get observedAttributes(){return["color"]}get[E1](){return[x4,E4,S4]}get[S1](){return[C4,k4]}get color(){return this[rb]}set color(e){if(!this[Bm](e)){const t=this.colorModel.toHsva(e);this[ob](t),this[rb]=e}}constructor(){super();const e=Dx(`<style>${this[E1].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(e.content.cloneNode(!0)),t.addEventListener("move",this),this[x1]=this[S1].map(n=>new n(t))}connectedCallback(){if(this.hasOwnProperty("color")){const e=this.color;delete this.color,this.color=e}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(e,t,n){const r=this.colorModel.fromAttr(n);this[Bm](r)||(this.color=r)}handleEvent(e){const t=this[C1],n={...t,...e.detail};this[ob](n);let r;!Ix(n,t)&&!this[Bm](r=this.colorModel.fromHsva(n))&&(this[rb]=r,tv(this,"color-changed",{value:r}))}[Bm](e){return this.color&&this.colorModel.equal(e,this.color)}[ob](e){this[C1]=e,this[x1].forEach(t=>t.update(e))}}const A4={defaultColor:"#000",toHsva:f4,fromHsva:({h:i,s:e,v:t})=>m4({h:i,s:e,v:t,a:1}),equal:w4,fromAttr:i=>i};class P4 extends T4{get colorModel(){return A4}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const I4=150;class D4 extends mt{constructor(e,t={}){super(e),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const n=this.createCollection();t.hideInput||n.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:n}),this._config=t,this._debounceColorPickerEvent=bl(r=>{this.set("color",r),this.fire("colorSelected",{color:this.color})},I4,{leading:!0}),this.on("set:color",(r,o,s)=>{r.return=_x(s,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=sb(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),sb(this.color)!=sb(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),HL("hex-color-picker",P4),this.picker=_t.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const t=e.detail.value;this._debounceColorPickerEvent(t)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(Yt.isGecko||Yt.isiOS||Yt.isSafari)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const n=[...this.picker.shadowRoot.children].filter(r=>r.getAttribute("role")==="slider").map(r=>new R4(r));this.slidersView=this.createCollection(),n.forEach(r=>{this.slidersView.add(r)})}_createInputRow(){const e=this._createColorInput();return new F4(this.locale,e)}_createColorInput(){const e=new lr(this.locale,Jo),{t}=this.locale;return e.set({label:t("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",n=>e.isFocused?e.fieldView.value:n.startsWith("#")?n.substring(1):n),e.fieldView.on("input",()=>{const n=e.fieldView.element.value;if(n){const r=Ox(n);r&&this._debounceColorPickerEvent(r)}}),e}isValid(){const{t:e}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function sb(i){let e=zL(i);return e||(e="#000"),e.length===4&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}class R4 extends mt{constructor(e){super(),this.element=e}focus(){this.element.focus()}}class O4 extends mt{constructor(e){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class F4 extends mt{constructor(e,t){super(e),this.inputView=t,this.children=this.createCollection([new O4,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return Ox(this.inputView.fieldView.element.value)}}function Ox(i){if(!i)return null;const e=i.trim().replace(/^#/,"");return![3,4,6,8].includes(e.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(e)?null:`#${e}`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M4 extends Vn(Or){constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(e,t){return this.find(n=>n.color===e.color)?this:super.add(e,t)}hasColor(e){return!!this.find(t=>t.color===e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L4 extends mt{constructor(e,{colors:t,columns:n,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:s,colorPickerLabel:l,focusTracker:c,focusables:h}){super(e);const g=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=c,this.items=this.createCollection(),this.colorDefinitions=t,this.columns=n,this.documentColors=new M4,this.documentColorsCount=s,this._focusables=h,this._removeButtonLabel=r,this._colorPickerLabel=l,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",g.if("isVisible","ck-hidden",b=>!b)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,t){const n=e.document,r=this.documentColorsCount;this.documentColors.clear();for(const o of n.getRoots()){const s=e.createRangeIn(o);for(const l of s.getItems())if(l.is("$textProxy")&&l.hasAttribute(t)&&(this._addColorToDocumentColors(l.getAttribute(t)),this.documentColors.length>=r))return}}updateSelectedColors(){const e=this.documentColorsGrid,t=this.staticColorsGrid,n=this.selectedColor;t.selectedColor=n,e&&(e.selectedColor=n)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Mo.bind(this.documentColors,this.documentColors),t=new mt(this.locale);t.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new Ht,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:it.colorPalette,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new Ht;return e.set({withText:!0,icon:it.eraser,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new m1(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(t,n)=>{this.fire("execute",{value:n.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Mo.bind(this.documentColors,this.documentColors),t=new m1(this.locale,{columns:this.columns});return t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using(n=>{const r=new px;return r.set({color:n.color,hasBorder:n.options&&n.options.hasBorder}),n.label&&r.set({label:n.label,tooltip:!0}),r.on("execute",()=>{this.fire("execute",{value:n.color,source:"documentColorsGrid"})}),r}),this.documentColors.on("change:isEmpty",(n,r,o)=>{o&&(t.selectedColor=null)}),t}_addColorToDocumentColors(e){const t=this.colorDefinitions.find(n=>n.color===e);t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B4 extends mt{constructor(e,{focusTracker:t,focusables:n,keystrokes:r,colorPickerViewConfig:o}){super(e),this.items=this.createCollection(),this.focusTracker=t,this.keystrokes=r,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=n,this._colorPickerViewConfig=o;const s=this.bindTemplate,{saveButtonView:l,cancelButtonView:c}=this._createActionButtons();this.saveButtonView=l,this.cancelButtonView=c,this.actionBarView=this._createActionBarView({saveButtonView:l,cancelButtonView:c}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",s.if("isVisible","ck-hidden",h=>!h)]},children:this.items})}render(){super.render();const e=new D4(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(t,n,r)=>{e.color=r}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const t of this.colorPickerView.slidersView)this.focusTracker.add(t.element),this._focusables.add(t);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:t}){const n=new mt,r=this.createCollection();return r.add(e),r.add(t),n.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:r}),n}_createActionButtons(){const e=this.locale,t=e.t,n=new Ht(e),r=new Ht(e);return n.set({icon:it.check,class:"ck-button-save",type:"button",withText:!1,label:t("Accept")}),r.set({icon:it.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:t("Cancel")}),n.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),r.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:n,cancelButtonView:r}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,t)=>{this.fire("execute",{value:t.color,source:"colorPicker"}),this.set("selectedColor",t.color)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nv extends mt{constructor(e,{colors:t,columns:n,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:s,colorPickerLabel:l,colorPickerViewConfig:c}){super(e),this.items=this.createCollection(),this.focusTracker=new Jn,this.keystrokes=new di,this._focusables=new Wr,this._colorPickerViewConfig=c,this._focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new L4(e,{colors:t,columns:n,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:s,colorPickerLabel:l,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new B4(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:c}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(h,g,b)=>{this.colorGridsFragmentView.set("selectedColor",b),this.colorPickerFragmentView.set("selectedColor",b)}),this.colorGridsFragmentView.on("change:selectedColor",(h,g,b)=>{this.set("selectedColor",b)}),this.colorPickerFragmentView.on("change:selectedColor",(h,g,b)=>{this.set("selectedColor",b)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,t){this.colorGridsFragmentView.updateDocumentColors(e,t)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N4{constructor(e){this._components=new Map,this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(ab(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new be("componentfactory-item-missing",this,{name:e});return this._components.get(ab(e)).callback(this.editor.locale)}has(e){return this._components.has(ab(e))}}function ab(i){return String(i).toLowerCase()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const T1="ck-tooltip";class Ar extends Bo(){constructor(e){if(super(),this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._mutationObserver=null,Ar._editors.add(e),Ar._instance)return Ar._instance;Ar._instance=this,this.tooltipTextView=new mt(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new ti(e.locale),this.balloonPanelView.class=T1,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=V4(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=bl(this._pinTooltip,600),this._unpinTooltipDebounced=bl(this._unpinTooltip,400),this.listenTo(_t.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(_t.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(_t.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(_t.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(_t.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(_t.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const t=e.ui.view&&e.ui.view.body;Ar._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),Ar._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Ar._instance=null)}static getPositioningFunctions(e){const t=Ar.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onKeyDown(e,t){t.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),t.stopPropagation())}_onEnterOrFocus(e,{target:t}){const n=lb(t);if(!n){e.name==="focus"&&this._unpinTooltip();return}n!==this._currentElementWithTooltip&&(this._unpinTooltip(),e.name==="focus"&&!n.matches(":hover")?this._pinTooltip(n,cb(n)):this._pinTooltipDebounced(n,cb(n)))}_onLeaveOrBlur(e,{target:t,relatedTarget:n}){if(e.name==="mouseleave"){if(!gu(t))return;const r=this.balloonPanelView.element,o=r&&(r===n||r.contains(n)),s=!o&&t===r;if(o){this._unpinTooltipDebounced.cancel();return}if(!s&&this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;const l=lb(t),c=lb(n);(s||l&&l!==c)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:n,cssClass:r}){this._unpinTooltip();const o=Wi(Ar._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.class=[T1,r].filter(s=>s).join(" "),this.balloonPanelView.pin({target:e,positions:Ar.getPositioningFunctions(n)}),this._mutationObserver.attach(e);for(const s of Ar._editors)this.listenTo(s.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=n}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Ar._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=cb(this._currentElementWithTooltip);if(!wl(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Ar.getPositioningFunctions(e.position)})}}Ar.defaultBalloonPositions=ti.generatePositions({heightOffset:5,sideOffset:13});Ar._editors=new Set;Ar._instance=null;function lb(i){return gu(i)?i.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function cb(i){return{text:i.dataset.ckeTooltipText,position:i.dataset.ckeTooltipPosition||"s",cssClass:i.dataset.ckeTooltipClass||""}}function V4(i){const e=new MutationObserver(()=>{i()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}const z4=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const H4=53,U4=10,W4=50,j4=350,$4="Powered by";class q4 extends Bo(){constructor(e){super(),this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=Nd(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor,t=!!e.config.get("ui.poweredBy.forceVisible");/* istanbul ignore next -- @preserve */!t&&ID(e.config.get("licenseKey"))==="VALID"||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(n,r,o)=>{this._updateLastFocusedEditableElement(),o?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(n,r,o)=>{this._updateLastFocusedEditableElement(),o&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){const e=this.editor,t=this._balloonView=new ti,n=Mx(e),r=new G4(e.locale,n.label);t.content.add(r),t.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(t),this._balloonView=t}_showBalloon(){if(!this._lastFocusedEditableElement)return;const e=K4(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const e=this.editor,t=e.ui.focusTracker.isFocused,n=e.ui.focusTracker.focusedElement;if(!t||!n){this._lastFocusedEditableElement=null;return}const r=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));r.includes(n)?this._lastFocusedEditableElement=n:this._lastFocusedEditableElement=r[0]}}class G4 extends mt{constructor(e,t){super(e);const n=new ns,r=this.bindTemplate;n.set({content:z4,isColorInherited:!1}),n.extendTemplate({attributes:{style:{width:H4+"px",height:U4+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],n],on:{dragstart:r.to(o=>o.preventDefault())}}]})}}function K4(i,e){const t=Mx(i),n=t.side==="right"?Z4(e,t):Y4(e,t);return{target:e,positions:[n]}}function Z4(i,e){return Fx(i,e,(t,n)=>t.left+t.width-n.width-e.horizontalOffset)}function Y4(i,e){return Fx(i,e,t=>t.left+e.horizontalOffset)}function Fx(i,e,t){return(n,r)=>{const o=new Jt(i);if(o.width<j4||o.height<W4)return null;let s;e.position==="inside"?s=o.bottom-r.height:s=o.bottom-r.height/2,s-=e.verticalOffset;const l=t(o,r),h=n.clone().moveTo(l,s).getIntersection(r.clone().moveTo(l,s)).getVisible();return!h||h.getArea()<r.getArea()?null:{top:s,left:l,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function Mx(i){const e=i.config.get("ui.poweredBy"),t=e&&e.position||"border";return{position:t,label:$4,verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:i.locale.contentLanguageDirection==="ltr"?"right":"left",...e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const A1={POLITE:"polite",ASSERTIVE:"assertive"};class J4{constructor(e){this.editor=e,e.once("ready",()=>{for(const t of Object.values(A1))this.announce("",t)})}announce(e,t=A1.POLITE){const n=this.editor;if(!n.ui.view)return;this.view||(this.view=new X4(n.locale),n.ui.view.body.add(this.view));const{politeness:r,isUnsafeHTML:o}=typeof t=="string"?{politeness:t}:t;let s=this.view.regionViews.find(l=>l.politeness===r);s||(s=new Q4(n,r),this.view.regionViews.add(s)),s.announce({announcement:e,isUnsafeHTML:o})}}class X4 extends mt{constructor(e){super(e),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class Q4 extends mt{constructor(e,t){super(e.locale),this.setTemplate({tag:"div",attributes:{"aria-live":t,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=t,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:t}){if(!e.trim().length)return;const n=document.createElement("li");t?this._domConverter.setContentOf(n,e):n.innerText=e,this._listElement.appendChild(n)}get _listElement(){return this.element.querySelector("ul")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Au extends yc{constructor(e,t){super(e);const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:n.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Nm=5,vd={toggleMenusAndFocusItemsOnHover(i){i.on("menu:mouseenter",e=>{if(!(!i.isFocusBorderEnabled&&!i.isOpen)){if(i.isOpen)for(const t of i.menus){const n=e.path[0],r=n instanceof Au&&n.children.first===t;t.isOpen=(e.path.includes(t)||r)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(i){const e=i.locale.uiLanguageDirection==="rtl";i.on("menu:arrowright",n=>{t(n.source,e?-1:1)}),i.on("menu:arrowleft",n=>{t(n.source,e?1:-1)});function t(n,r){const o=i.children.getIndex(n),s=n.isOpen,l=i.children.length,c=i.children.get((o+l+r)%l);n.isOpen=!1,s&&(c.isOpen=!0),c.buttonView.focus()}},closeMenusWhenTheBarCloses(i){i.on("change:isOpen",()=>{i.isOpen||i.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(i){i.on("menu:change:isOpen",(e,t,n)=>{n&&i.menus.filter(r=>e.source.parentMenuView===r.parentMenuView&&e.source!==r&&r.isOpen).forEach(r=>{r.isOpen=!1})})},closeOnClickOutside(i){Cu({emitter:i,activator:()=>i.isOpen,callback:()=>i.close(),contextElements:()=>i.children.map(e=>e.element)})},enableFocusHighlightOnInteraction(i){let e=!1;i.on("change:isOpen",(t,n,r)=>{r||(e||(i.isFocusBorderEnabled=!1),e=!1)}),i.listenTo(i.element,"keydown",()=>{e=!0},{useCapture:!0}),i.listenTo(i.element,"keyup",()=>{e=!1},{useCapture:!0}),i.listenTo(i.element,"focus",()=>{e&&(i.isFocusBorderEnabled=!0)},{useCapture:!0})}},hc={openAndFocusPanelOnArrowDownKey(i){i.keystrokes.set("arrowdown",(e,t)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen||(i.isOpen=!0),i.panelView.focus(),t())})},openOnArrowRightKey(i){const e=i.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";i.keystrokes.set(e,(t,n)=>{i.focusTracker.focusedElement!==i.buttonView.element||!i.isEnabled||(i.isOpen||(i.isOpen=!0),i.panelView.focus(),n())})},openOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!0})},toggleOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!i.isOpen})},openAndFocusOnEnterKeyPress(i){i.keystrokes.set("enter",(e,t)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen=!0,i.panelView.focus(),t())})},closeOnArrowLeftKey(i){const e=i.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";i.keystrokes.set(e,(t,n)=>{i.isOpen&&(i.isOpen=!1,i.focus(),n())})},closeOnEscKey(i){i.keystrokes.set("esc",(e,t)=>{i.isOpen&&(i.isOpen=!1,i.focus(),t())})},closeOnParentClose(i){i.parentMenuView.on("change:isOpen",(e,t,n)=>{!n&&e.source===i.parentMenuView&&(i.isOpen=!1)})}},eB={southEast:i=>({top:i.bottom,left:i.left,name:"se"}),southWest:(i,e)=>({top:i.bottom,left:i.left-e.width+i.width,name:"sw"}),northEast:(i,e)=>({top:i.top-e.height,left:i.left,name:"ne"}),northWest:(i,e)=>({top:i.top-e.height,left:i.left-e.width+i.width,name:"nw"}),eastSouth:i=>({top:i.top,left:i.right-Nm,name:"es"}),eastNorth:(i,e)=>({top:i.top-e.height,left:i.right-Nm,name:"en"}),westSouth:(i,e)=>({top:i.top,left:i.left-e.width+Nm,name:"ws"}),westNorth:(i,e)=>({top:i.top-e.height,left:i.left-e.width+Nm,name:"wn"})},tB=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment","menuBar:insertMergeField"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function nB(i){let e;return!("items"in i)||!i.items?e={items:Ss(tB),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...i}:e={items:i.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...i},e}function iB({normalizedConfig:i,locale:e,componentFactory:t,extraItems:n}){const r=Ss(i);return P1(i,r,n),rB(i,r),P1(i,r,r.addItems),oB(i,r,t),Lx(i,r),sB(r,e),r}function rB(i,e){const t=e.removeItems,n=[];e.items=e.items.filter(({menuId:r})=>t.includes(r)?(n.push(r),!1):!0),Xd(e.items,r=>{r.groups=r.groups.filter(({groupId:o})=>t.includes(o)?(n.push(o),!1):!0);for(const o of r.groups)o.items=o.items.filter(s=>{const l=Bx(s);return t.includes(l)?(n.push(l),!1):!0})});for(const r of t)n.includes(r)||vn("menu-bar-item-could-not-be-removed",{menuBarConfig:i,itemName:r})}function P1(i,e,t){const n=[];if(t.length!=0){for(const r of t){const o=cB(r.position),s=uB(r.position);if(aB(r))if(!s)o==="start"?(e.items.unshift(r.menu),n.push(r)):o==="end"&&(e.items.push(r.menu),n.push(r));else{const l=e.items.findIndex(c=>c.menuId===s);l!=-1?o==="before"?(e.items.splice(l,0,r.menu),n.push(r)):o==="after"&&(e.items.splice(l+1,0,r.menu),n.push(r)):I1(e,r.menu,s,o)&&n.push(r)}else lB(r)?Xd(e.items,l=>{if(l.menuId===s)o==="start"?(l.groups.unshift(r.group),n.push(r)):o==="end"&&(l.groups.push(r.group),n.push(r));else{const c=l.groups.findIndex(h=>h.groupId===s);c!==-1&&(o==="before"?(l.groups.splice(c,0,r.group),n.push(r)):o==="after"&&(l.groups.splice(c+1,0,r.group),n.push(r)))}}):I1(e,r.item,s,o)&&n.push(r)}for(const r of t)n.includes(r)||vn("menu-bar-item-could-not-be-added",{menuBarConfig:i,addedItemConfig:r})}}function I1(i,e,t,n){let r=!1;return Xd(i.items,o=>{for(const{groupId:s,items:l}of o.groups){if(r)return;if(s===t)n==="start"?(l.unshift(e),r=!0):n==="end"&&(l.push(e),r=!0);else{const c=l.findIndex(h=>Bx(h)===t);c!==-1&&(n==="before"?(l.splice(c,0,e),r=!0):n==="after"&&(l.splice(c+1,0,e),r=!0))}}}),r}function oB(i,e,t){Xd(e.items,n=>{for(const r of n.groups)r.items=r.items.filter(o=>{const s=typeof o=="string"&&!t.has(o);return s&&!e.isUsingDefaultConfig&&vn("menu-bar-item-unavailable",{menuBarConfig:i,parentMenuConfig:Ss(n),componentName:o}),!s})})}function Lx(i,e){const t=e.isUsingDefaultConfig;let n=!1;if(e.items=e.items.filter(r=>r.groups.length?!0:(ub(i,r,t),!1)),!e.items.length){ub(i,i,t);return}Xd(e.items,r=>{r.groups=r.groups.filter(o=>o.items.length?!0:(n=!0,!1));for(const o of r.groups)o.items=o.items.filter(s=>Nx(s)&&!s.groups.length?(ub(i,s,t),n=!0,!1):!0)}),n&&Lx(i,e)}function ub(i,e,t){t||vn("menu-bar-menu-empty",{menuBarConfig:i,emptyMenuConfig:e})}function sB(i,e){const t=e.t,n={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};Xd(i.items,r=>{r.label in n&&(r.label=n[r.label])})}function Xd(i,e){if(Array.isArray(i))for(const n of i)t(n);function t(n){e(n);for(const r of n.groups)for(const o of r.items)Nx(o)&&t(o)}}function aB(i){return typeof i=="object"&&"menu"in i}function lB(i){return typeof i=="object"&&"group"in i}function cB(i){return i.startsWith("start")?"start":i.startsWith("end")?"end":i.startsWith("after")?"after":"before"}function uB(i){const e=i.match(/^[^:]+:(.+)/);return e?e[1]:null}function Bx(i){return typeof i=="string"?i:i.menuId}function Nx(i){return typeof i=="object"&&"menuId"in i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dB extends Vn(){constructor(e){super(),this.isReady=!1,this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this._extraMenuBarElements=[],this._lastFocusedForeignElement=null;const t=e.editing.view;this.editor=e,this.componentFactory=new N4(e),this.focusTracker=new Jn,this.tooltipManager=new Ar(e),this.poweredBy=new q4(e),this.ariaLiveAnnouncer=new J4(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);const n=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?n():this.once("ready",n)}removeEditableElement(e){const t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(e){const t=e.element;this.focusTracker.add(t),this.editor.keystrokes.listenTo(t);const n=nB(this.editor.config.get("menuBar")||{});e.fillFromConfig(n,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(r,o)=>{t.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(r,o)=>{t.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),o())})}_readViewportOffsetFromConfig(){const e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;const n=e.config.get("toolbar.viewportTopOffset");return n?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:n}):{top:0}}_initFocusTracking(){const e=this.editor;let t;e.keystrokes.set("Alt+F10",(n,r)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();(!o||!t)&&(t=this._getFocusableCandidateToolbarDefinitions());for(let s=0;s<t.length;s++){const l=t.shift();if(t.push(l),l!==o&&this._focusFocusableCandidateToolbar(l)){o&&o.options.afterBlur&&o.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(n,r)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),r())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const t of this._focusableToolbarDefinitions){const{toolbarView:n,options:r}=t;(wl(n.element)||r.beforeFocus)&&e.push(t)}return e.sort((t,n)=>D1(t)-D1(n)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:t,options:{beforeFocus:n}}=e;return n&&n(),wl(t.element)?(t.focus(),!0):!1}_handleScrollToTheSelection(e,t){const n={top:0,bottom:0,left:0,right:0,...this.viewportOffset};t.viewportOffset.top+=n.top,t.viewportOffset.bottom+=n.bottom,t.viewportOffset.left+=n.left,t.viewportOffset.right+=n.right}_bindBodyCollectionWithFocusTracker(){const e=this.view.body;for(const t of e)this.focusTracker.add(t.element);e.on("add",(t,n)=>{this.focusTracker.add(n.element)}),e.on("remove",(t,n)=>{this.focusTracker.remove(n.element)})}}function D1(i){const{toolbarView:e,options:t}=i;let n=10;return wl(e.element)&&n--,t.isContextual&&n--,n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hB extends mt{constructor(e){super(e),this.body=new CL(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fB extends hB{constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,t=new Yo;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mB extends mt{constructor(e,t,n){super(e),this.name=null,this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?n(this):t(this);function t(r){e.change(o=>{const s=e.document.getRoot(r.name);o.addClass(r.isFocused?"ck-focused":"ck-blurred",s),o.removeClass(r.isFocused?"ck-blurred":"ck-focused",s)})}function n(r){e.once("change:isRenderingInProgress",(o,s,l)=>{l?n(r):t(r)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pB extends mB{constructor(e,t,n,r={}){super(e,t,n),this._options=r,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView;e.change(t=>{const n=e.document.getRoot(this.name);t.setAttribute("aria-label",this.getEditableAriaLabel(),n)})}getEditableAriaLabel(){const e=this.locale.t,t=this._options.label,n=this._editableElement,r=this.name;if(typeof t=="string")return t;if(typeof t=="object")return t[r];if(typeof t=="function")return t(this);if(n){const o=n.getAttribute("aria-label");if(o)return o}return e("Rich Text Editor. Editing area: %0",r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R1 extends fC{static get pluginName(){return"Notification"}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yl extends Vn(){constructor(e,t){super(),t&&hk(this,t),e&&this.set(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Vm=Yd("px");class _l extends Fe{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this._viewToStack=new Map,this._idToStack=new Map,this._view=null,this._rotatorView=null,this._fakePanelsView=null,this.positionLimiter=()=>{const t=this.editor.editing.view,r=t.document.selection.editableElement;return r?t.domConverter.mapViewToDom(r.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new be("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}const n=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),n.set(e.view,e),this._viewToStack.set(e.view,n),n===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new be("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new be("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new ti(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(n=>n[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new gB(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(n,r)=>!r&&n>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(n,r)=>{if(r<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[o,r])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new bB(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,n)=>!n&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:n=!0,singleViewMode:r=!1}){this.view.class=t,this.view.withArrow=n,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}}class gB extends mt{constructor(e){super(e);const t=e.t,n=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Jn,this.buttonPrevView=this._createButtonView(t("Previous"),it.previousArrow),this.buttonNextView=this._createButtonView(t("Next"),it.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",n.to("isNavigationVisible",r=>r?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const n=new Ht(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n}}class bB extends mt{constructor(e,t){super(e);const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",n.to("numberOfPanels",r=>r?"":"ck-hidden")],style:{top:n.to("top",Vm),left:n.to("left",Vm),width:n.to("width",Vm),height:n.to("height",Vm)}},children:this.content}),this.on("change:numberOfPanels",(r,o,s,l)=>{s>l?this._addPanels(s-l):this._removePanels(l-s),this.updatePosition()})}_addPanels(e){for(;e--;){const t=new mt;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:n,height:r}=new Jt(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:n,height:r})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const wd=Yd("px");class vB extends mt{constructor(e){super(e);const t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Mo({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",n=>n?"block":"none"),height:t.to("isSticky",n=>n?wd(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Mo({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",n=>n?wd(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_stickyTopOffset",n=>n&&wd(n)),bottom:t.to("_stickyBottomOffset",n=>n&&wd(n)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(_t.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new Jt(this.limiterElement);let t=e.getVisible();if(t){const n=new Jt(_t.window);n.top+=this.viewportTopOffset,n.height-=this.viewportTopOffset,t=t.getIntersection(n)}if(t&&e.top<t.top){const n=t.top;if(n+this._contentPanelRect.height+this.limiterBottomOffset>t.bottom){const r=Math.max(e.bottom-t.bottom,0)+this.limiterBottomOffset;e.bottom-r>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(r):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(n):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=wd(-_t.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=wd(-_t.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Jt(this.contentPanelElement)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wB extends lr{constructor(e,t){const n=e.t,r=Object.assign({},{showResetButton:!0,showIcon:!0,creator:Jo},t);super(e,r.creator),this.label=t.label,this._viewConfig=r,this._viewConfig.showIcon&&(this.iconView=new ns,this.iconView.content=it.loupe,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new Ht(e),this.resetButtonView.set({label:n("Clear"),icon:it.cancel,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",o=>!o),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yB extends mt{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",e.if("isVisible","ck-hidden",t=>!t)],tabindex:-1},children:[{tag:"span",children:[{text:[e.to("primaryText")]}]},{tag:"span",children:[{text:[e.to("secondaryText")]}]}]})}focus(){this.element.focus()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _B extends mt{constructor(e){super(e),this.children=this.createCollection(),this.focusTracker=new Jn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new jr({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kB extends mt{constructor(e,t){super(e),this._config=t,this.filteredView=t.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new Jn,this.keystrokes=new di,this.resultsView=new _B(e),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),t.infoView&&t.infoView.instance?this.infoView=t.infoView.instance:(this.infoView=new yB,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new jr({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(n,{resultsCount:r,totalItemsCount:o})=>{this.resultsCount=r,this.totalItemsCount=o}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",t.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);const e=t=>t.stopPropagation();for(const t of this.focusableChildren)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search(""),this.filteredView.element.scrollTo(0,0)}search(e){const t=e?new RegExp(Hk(e),"ig"):null,n=this.filteredView.filter(t);this.fire("search",{query:e,...n})}_createSearchTextQueryView(){const e=new wB(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",()=>{this.search(e.fieldView.element.value)}),e.on("reset",()=>this.reset()),e.bind("isEnabled").to(this),e}_enableDefaultInfoViewBehavior(){const e=this.locale.t,t=this.infoView;this.on("search",(r,o)=>{if(o.resultsCount)t.set({isVisible:!1});else{const s=this._config.infoView&&this._config.infoView.text;let l,c;o.totalItemsCount?s&&s.notFound?(l=s.notFound.primary,c=s.notFound.secondary):(l=e("No results found"),c=""):s&&s.noSearchableItems?(l=s.noSearchableItems.primary,c=s.noSearchableItems.secondary):(l=e("No searchable items"),c=""),t.set({primaryText:n(l,o),secondaryText:n(c,o),isVisible:!0})}});function n(r,{query:o,resultsCount:s,totalItemsCount:l}){return typeof r=="function"?r(o,s,l):r}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rf extends kB{constructor(e,t){super(e,t),this._config=t;const n=Yd("px");this.extendTemplate({attributes:{class:["ck-autocomplete"]}});const r=this.resultsView.bindTemplate;this.resultsView.set("isVisible",!1),this.resultsView.set("_position","s"),this.resultsView.set("_width",0),this.resultsView.extendTemplate({attributes:{class:[r.if("isVisible","ck-hidden",o=>!o),r.to("_position",o=>`ck-search__results_${o}`)],style:{width:r.to("_width",n)}}}),this.focusTracker.on("change:isFocused",(o,s,l)=>{this._updateResultsVisibility(),l?this.resultsView.element.scrollTop=0:t.resetOnBlur&&this.queryView.reset()}),this.on("search",()=>{this._updateResultsVisibility(),this._updateResultsViewWidthAndPosition()}),this.keystrokes.set("esc",(o,s)=>{this.resultsView.isVisible&&(this.queryView.focus(),this.resultsView.isVisible=!1,s())}),this.listenTo(_t.document,"scroll",()=>{this._updateResultsViewWidthAndPosition()}),this.on("change:isEnabled",()=>{this._updateResultsVisibility()}),this.filteredView.on("execute",(o,{value:s})=>{this.focus(),this.reset(),this.queryView.fieldView.value=this.queryView.fieldView.element.value=s,this.resultsView.isVisible=!1}),this.resultsView.on("change:isVisible",()=>{this._updateResultsViewWidthAndPosition()})}_updateResultsViewWidthAndPosition(){if(!this.resultsView.isVisible)return;this.resultsView._width=new Jt(this.queryView.fieldView.element).width;const e=Rf._getOptimalPosition({element:this.resultsView.element,target:this.queryView.element,fitInViewport:!0,positions:Rf.defaultResultsPositions});this.resultsView._position=e?e.name:"s"}_updateResultsVisibility(){const e=typeof this._config.queryMinChars>"u"?0:this._config.queryMinChars,t=this.queryView.fieldView.element.value.length;this.resultsView.isVisible=this.focusTracker.isFocused&&this.isEnabled&&t>=e}}Rf.defaultResultsPositions=[i=>({top:i.bottom,left:i.left,name:"s"}),(i,e)=>({top:i.top-e.height,left:i.left,name:"n"})];Rf._getOptimalPosition=Zp;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CB extends bu{constructor(e){super(e);const t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",n=>String(n)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new ns;return e.content=qf,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xB extends mt{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",t.to("position",n=>`ck-menu-bar__menu__panel_position_${n}`),t.if("isVisible","ck-hidden",n=>!n)],tabindex:"-1"},children:this.children,on:{selectstart:t.to(n=>{n.target.tagName.toLocaleLowerCase()!=="input"&&n.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qo extends mt{constructor(e){super(e);const t=this.bindTemplate;this.buttonView=new CB(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new xB(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new di,this.focusTracker=new Jn,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",t.to("class"),t.if("isEnabled","ck-disabled",n=>!n),t.if("parentMenuView","ck-menu-bar__menu_top-level",n=>!n)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),hc.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(hc.openOnButtonClick(this),hc.openOnArrowRightKey(this),hc.closeOnArrowLeftKey(this),hc.openAndFocusOnEnterKeyPress(this),hc.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),hc.openAndFocusPanelOnArrowDownKey(this),hc.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,t)=>{this.fire("arrowright"),t()}),this.keystrokes.set("arrowleft",(e,t)=>{this.fire("arrowleft"),t()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,t,n)=>{if(!n)return;const r=Qo._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:t,northEast:n,northWest:r,westSouth:o,eastSouth:s,westNorth:l,eastNorth:c}=eB;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[s,c,o,l]:[e,t,n,r]:this.parentMenuView?[o,l,s,c]:[t,e,r,n]}}Qo._getOptimalPosition=Zp;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vu extends rg{constructor(e){super(e),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const e=Array.from(this.items).some(t=>{const n=O1(t);return n&&n.isToggleable});this.items.forEach(t=>{const n=O1(t);n&&(n.hasCheckSpace=e)})}}function O1(i){return i instanceof yc?i.children.map(e=>EB(e)?e.buttonView:e).find(e=>e instanceof bu):null}function EB(i){return typeof i=="object"&&"buttonView"in i&&i.buttonView instanceof Ht}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vx extends xL{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const F1=["mouseenter","arrowleft","arrowright","change:isOpen"];class SB extends mt{constructor(e){super(e),this.menus=[];const t=e.t,n=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",n.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":t("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,t,n=[]){const r=this.locale,s=iB({normalizedConfig:e,locale:r,componentFactory:t,extraItems:n}).items.map(l=>this._createMenu({componentFactory:t,menuDefinition:l}));this.children.addMany(s)}render(){super.render(),vd.toggleMenusAndFocusItemsOnHover(this),vd.closeMenusWhenTheBarCloses(this),vd.closeMenuWhenAnotherOnTheSameLevelOpens(this),vd.focusCycleMenusOnArrows(this),vd.closeOnClickOutside(this),vd.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}registerMenu(e,t=null){t?(e.delegate(...F1).to(t),e.parentMenuView=t):e.delegate(...F1).to(this,n=>"menu:"+n),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:t,parentMenuView:n}){const r=this.locale,o=new Qo(r);return this.registerMenu(o,n),o.buttonView.set({label:t.label}),o.once("change:isOpen",()=>{const s=new vu(r);s.ariaLabel=t.label,o.panelView.children.add(s),s.items.addMany(this._createMenuItems({menuDefinition:t,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:t,componentFactory:n}){const r=this.locale,o=[];for(const s of e.groups){for(const l of s.items){const c=new Au(r,t);if(ro(l))c.children.add(this._createMenu({componentFactory:n,menuDefinition:l,parentMenuView:t}));else{const h=this._createMenuItemContentFromFactory({componentName:l,componentFactory:n,parentMenuView:t});if(!h)continue;c.children.add(h)}o.push(c)}s!==e.groups[e.groups.length-1]&&o.push(new X0(r))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:t,componentFactory:n}){const r=n.create(e);return r instanceof Qo||r instanceof Ii||r instanceof Vx?(this._registerMenuTree(r,t),r.on("execute",()=>{this.close()}),r):(vn("menu-bar-component-unsupported",{componentName:e,componentView:r}),null)}_registerMenuTree(e,t){if(!(e instanceof Qo)){e.delegate("mouseenter").to(t);return}this.registerMenu(e,t);const n=e.panelView.children.filter(o=>o instanceof vu)[0];if(!n){e.delegate("mouseenter").to(t);return}const r=n.items.filter(o=>o instanceof yc);for(const o of r)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(t,n,r)=>{clearTimeout(e),r?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TB extends dB{constructor(e,t){super(e),this.view=t,this._toolbarConfig=Tx(e.config.get("toolbar")),this._elementReplacer=new jk,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const t=this.editor,n=this.view,r=t.editing.view,o=n.editable,s=r.document.getRoot();o.name=s.rootName,n.render();const l=o.element;this.setEditableElement(o.name,l),n.editable.bind("isFocused").to(this.focusTracker),r.attachDomRoot(l),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),n.menuBarView&&this._initMenuBar(n.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.getDomRoot(e.editable.name)&&t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,t=e.editing.view,n=t.document.getRoot(),r=e.sourceElement;let o;const s=e.config.get("placeholder");s&&(o=typeof s=="string"?s:s[this.view.editable.name]),!o&&r&&r.tagName.toLowerCase()==="textarea"&&(o=r.getAttribute("placeholder")),o&&(n.placeholder=o),mC({view:t,element:n,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:e}=this.view,t=this.editor.plugins.get("ContextualBalloon");t.on("getPositionOptions",r=>{const o=r.return;if(!o||!e.isSticky||!e.element)return;const s=new Jt(e.element).height,l=typeof o.target=="function"?o.target():o.target,c=typeof o.limiter=="function"?o.limiter():o.limiter;if(l&&c&&new Jt(l).height>=new Jt(c).height-s)return;const h={...o.viewportOffsetConfig},g=(h.top||0)+s;r.return={...o,viewportOffsetConfig:{...h,top:g}}},{priority:"low"});const n=()=>{t.visibleView&&t.updatePosition()};this.listenTo(e,"change:isSticky",n),this.listenTo(this.editor.ui,"change:viewportOffset",n)}_handleScrollToTheSelectionWithStickyPanel(e,t,n){const r=this.view.stickyPanel;if(r.isSticky){const o=new Jt(r.element).height;t.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(n)};this.listenTo(r,"change:isSticky",o),setTimeout(()=>{this.stopListening(r,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,t=this.editor.plugins.get("Dialog");t.on("show",()=>{const n=t.view;n.on("moveTo",(r,o)=>{if(!e.isSticky||n.wasMoved)return;const s=new Jt(e.contentPanelElement);o[1]<s.bottom+Wd.defaultOffset&&(o[1]=s.bottom+Wd.defaultOffset)},{priority:"high"})},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AB extends fB{constructor(e,t,n={}){super(e),this.stickyPanel=new vB(e),this.toolbar=new $d(e,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),n.useMenuBar&&(this.menuBarView=new SB(e)),this.editable=new pB(e,t,void 0,{label:n.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let PB=class extends Yb(ng){constructor(e,t={}){if(!op(e)&&t.initialData!==void 0)throw new be("editor-create-initial-data",null);super(t),this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",IB(e)),op(e)&&(this.sourceElement=e),this.model.document.createRoot();const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=this.config.get("menuBar"),o=new AB(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:n,useMenuBar:r.isVisible,label:this.config.get("label")});this.ui=new TB(this,o),n7(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(n=>{const r=new this(e,t);n(r.initPlugins().then(()=>r.ui.init(op(e)?e:null)).then(()=>r.data.init(r.config.get("initialData"))).then(()=>r.fire("ready")).then(()=>r))})}};function IB(i){return op(i)?iD(i):i}function op(i){return gu(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Of extends kc{constructor(e){super(e),this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];const t=this.document;this.listenTo(t,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",n("dragging"),{priority:"low"});function n(r){return(o,s)=>{s.preventDefault();const l=s.dropRange?[s.dropRange]:null,c=new vl(t,r);t.fire(c,{dataTransfer:s.dataTransfer,method:o.name,targetRanges:l,target:s.target,domEvent:s.domEvent}),c.stop.called&&s.stopPropagation()}}}onDomEvent(e){const t="clipboardData"in e?e.clipboardData:e.dataTransfer,n=e.type=="drop"||e.type=="paste",r={dataTransfer:new PC(t,{cacheFiles:n})};if(e.type=="drop"||e.type=="dragover"){const o=Zk(e);r.dropRange=o&&this.view.domConverter.domRangeToView(o)}this.fire(e.type,e,r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function DB(i){return i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(i.includes("</p><p>")||i.includes("<br>"))&&(i=`<p>${i}</p>`),i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function RB(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const M1=["figcaption","li"],L1=["ol","ul"];function zx(i){if(i.is("$text")||i.is("$textProxy"))return i.data;if(i.is("element","img")&&i.hasAttribute("alt"))return i.getAttribute("alt");if(i.is("element","br"))return`
`;let e="",t=null;for(const n of i.getChildren())e+=OB(n,t)+zx(n),t=n;return e}function OB(i,e){return e?i.is("element","li")&&!i.isEmpty&&i.getChild(0).is("containerElement")||L1.includes(i.name)&&L1.includes(e.name)?`

`:!i.is("containerElement")&&!e.is("containerElement")?"":M1.includes(i.name)||M1.includes(e.name)?`
`:i.is("element")&&i.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gf extends Fe{constructor(){super(...arguments),this._markersToCopy=new Map}static get pluginName(){return"ClipboardMarkersUtils"}_registerMarkerToCopy(e,t){this._markersToCopy.set(e,t)}_copySelectedFragmentWithMarkers(e,t,n=r=>r.model.getSelectedContent(r.model.document.selection)){return this.editor.model.change(r=>{const o=r.model.document.selection;r.setSelection(t);const s=this._insertFakeMarkersIntoSelection(r,r.model.document.selection,e),l=n(r),c=this._removeFakeMarkersInsideElement(r,l);for(const[h,g]of Object.entries(s)){c[h]||(c[h]=r.createRangeIn(l));for(const b of g)r.remove(b)}l.markers.clear();for(const[h,g]of Object.entries(c))l.markers.set(h,g);return r.setSelection(o),l})}_pasteMarkersIntoTransformedElement(e,t){const n=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(r=>{const o=this._insertFakeMarkersElements(r,n),s=t(r),l=this._removeFakeMarkersInsideElement(r,s);for(const c of Object.values(o).flat())r.remove(c);for(const[c,h]of Object.entries(l))r.model.markers.has(c)||r.addMarker(c,{usingOperation:!0,affectsData:!0,range:h});return s})}_pasteFragmentWithMarkers(e){const t=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const n of t)e.markers.set(n.name,n.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,t,n={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const r=this._markersToCopy.get(e);this._markersToCopy.set(e,n),t(),r?this._markersToCopy.set(e,r):this._markersToCopy.delete(e)}_isMarkerCopyable(e,t){const n=this._getMarkerClipboardConfig(e);if(!n)return!1;if(!t)return!0;const{allowedActions:r}=n;return r==="all"||r.includes(t)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[t]=e.split(":");return this._markersToCopy.get(t)||null}_insertFakeMarkersIntoSelection(e,t,n){const r=this._getCopyableMarkersFromSelection(e,t,n);return this._insertFakeMarkersElements(e,r)}_getCopyableMarkersFromSelection(e,t,n){const r=Array.from(t.getRanges()),o=new Set(r.flatMap(l=>Array.from(e.model.markers.getMarkersIntersectingRange(l)))),s=l=>{if(!this._isMarkerCopyable(l.name,n))return!1;const{copyPartiallySelected:h}=this._getMarkerClipboardConfig(l.name);if(!h){const g=l.getRange();return r.some(b=>b.containsRange(g,!0))}return!0};return Array.from(o).filter(s).map(l=>({name:n==="dragstart"?this._getUniqueMarkerName(l.name):l.name,range:l.getRange()}))}_getPasteMarkersFromRangeMap(e,t=null){const{model:n}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([o,s])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:s}];if(this._isMarkerCopyable(o,t)){const l=this._getMarkerClipboardConfig(o),c=n.markers.has(o)&&n.markers.get(o).getRange().root.rootName==="$graveyard";return(l.duplicateOnPaste||c)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:s}]}return[]})}_insertFakeMarkersElements(e,t){const n={},r=t.flatMap(o=>{const{start:s,end:l}=o.range;return[{position:s,marker:o,type:"start"},{position:l,marker:o,type:"end"}]}).sort(({position:o},{position:s})=>o.isBefore(s)?1:-1);for(const{position:o,marker:s,type:l}of r){const c=e.createElement("$marker",{"data-name":s.name,"data-type":l});n[s.name]||(n[s.name]=[]),n[s.name].push(c),e.insert(c,o)}return n}_removeFakeMarkersInsideElement(e,t){const r=this._getAllFakeMarkersFromElement(e,t).reduce((o,s)=>{const l=s.markerElement&&e.createPositionBefore(s.markerElement);let c=o[s.name],h=!1;return c&&c.start&&c.end&&(this._getMarkerClipboardConfig(s.name).duplicateOnPaste?o[this._getUniqueMarkerName(s.name)]=o[s.name]:h=!0,c=null),h||(o[s.name]={...c,[s.type]:l}),s.markerElement&&e.remove(s.markerElement),o},{});return zI(r,o=>new ze(o.start||e.createPositionFromPath(t,[0]),o.end||e.createPositionAt(t,"end")))}_getAllFakeMarkersFromElement(e,t){const n=Array.from(e.createRangeIn(t)).flatMap(({item:s})=>{if(!s.is("element","$marker"))return[];const l=s.getAttribute("data-name"),c=s.getAttribute("data-type");return[{markerElement:s,name:l,type:c}]}),r=[],o=[];for(const s of n)s.type==="end"&&(n.some(c=>c.name===s.name&&c.type==="start")||r.push({markerElement:null,name:s.name,type:"start"})),s.type==="start"&&(n.some(c=>c.name===s.name&&c.type==="end")||o.unshift({markerElement:null,name:s.name,type:"end"}));return[...r,...n,...o]}_getUniqueMarkerName(e){const t=e.split(":"),n=xs().substring(1,6);return t.length===3?`${t.slice(0,2).join(":")}:${n}`:`${t.join(":")}:${n}`}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ys extends Fe{static get pluginName(){return"ClipboardPipeline"}static get requires(){return[gf]}init(){this.editor.editing.view.addObserver(Of),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,n){const r=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:n==="cut"},()=>{const o=r._copySelectedFragmentWithMarkers(n,t);this.fire("outputTransformation",{dataTransfer:e,content:o,method:n})})}_setupPasteDrop(){const e=this.editor,t=e.model,n=e.editing.view,r=n.document,o=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(r,"clipboardInput",(s,l)=>{l.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&s.stop()},{priority:"highest"}),this.listenTo(r,"clipboardInput",(s,l)=>{const c=l.dataTransfer;let h;if(l.content)h=l.content;else{let b="";c.getData("text/html")?b=RB(c.getData("text/html")):c.getData("text/plain")&&(b=DB(c.getData("text/plain"))),h=this.editor.data.htmlProcessor.toView(b)}const g=new vl(this,"inputTransformation");this.fire(g,{content:h,dataTransfer:c,targetRanges:l.targetRanges,method:l.method}),g.stop.called&&s.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(s,l)=>{if(l.content.isEmpty)return;const h=this.editor.data.toModel(l.content,"$clipboardHolder");h.childCount!=0&&(s.stop(),t.change(()=>{this.fire("contentInsertion",{content:h,method:l.method,dataTransfer:l.dataTransfer,targetRanges:l.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(s,l)=>{l.resultRange=o._pasteFragmentWithMarkers(l.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,r=e.editing.view.document,o=(s,l)=>{const c=l.dataTransfer;l.preventDefault(),this._fireOutputTransformationEvent(c,t.selection,s.name)};this.listenTo(r,"copy",o,{priority:"low"}),this.listenTo(r,"cut",(s,l)=>{e.model.canEditAt(e.model.document.selection)?o(s,l):l.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(s,l)=>{const c=e.data.toView(l.content);r.fire("clipboardOutput",{dataTransfer:l.dataTransfer,content:c,method:l.method})},{priority:"low"}),this.listenTo(r,"clipboardOutput",(s,l)=>{l.content.isEmpty||(l.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(l.content)),l.dataTransfer.setData("text/plain",zx(l.content))),l.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hx{constructor(e,t=20){this._batch=null,this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(n,r)=>{r.isLocal&&r.isUndoable&&r!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FB extends Wt{constructor(e,t){super(e),this._buffer=new Hx(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,n=t.document,r=e.text||"",o=r.length;let s=n.selection;if(e.selection?s=e.selection:e.range&&(s=t.createSelection(e.range)),!t.canEditAt(s))return;const l=e.resultRange;t.enqueueChange(this._buffer.batch,c=>{this._buffer.lock();const h=Array.from(n.selection.getAttributes());t.deleteContent(s),r&&t.insertContent(c.createText(r,h),s),l?c.setSelection(l):s.is("documentSelection")||c.setSelection(s),this._buffer.unlock(),this._buffer.input(o)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ux=["insertText","insertReplacementText"],MB=[...Ux,"insertCompositionText"];class LB extends Aa{constructor(e){super(e),this.focusObserver=e.getObserver(Cp);const t=Yt.isAndroid?MB:Ux,n=e.document;n.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;const{data:s,targetRanges:l,inputType:c,domEvent:h}=o;if(!t.includes(c))return;this.focusObserver.flush();const g=new vl(n,"insertText");n.fire(g,new Ud(e,h,{text:s,selection:e.createSelection(l)})),g.stop.called&&r.stop()}),Yt.isAndroid||n.on("compositionend",(r,{data:o,domEvent:s})=>{this.isEnabled&&o&&n.fire("insertText",new Ud(e,s,{text:o}))},{priority:"lowest"})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wx extends Fe{static get pluginName(){return"Input"}init(){const e=this.editor,t=e.model,n=e.editing.view,r=e.editing.mapper,o=t.document.selection;this._compositionQueue=new BB(e),n.addObserver(LB);const s=new FB(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",s),e.commands.add("input",s),this.listenTo(n.document,"insertText",(l,c)=>{n.document.isComposing||c.preventDefault(),Yt.isAndroid&&n.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:h,selection:g}=c;let b;g?b=Array.from(g.getRanges()).map(x=>r.toModelRange(x)):b=Array.from(o.getRanges());let y=h;if(Yt.isAndroid){const x=Array.from(b[0].getItems()).reduce((D,L)=>D+(L.is("$textProxy")?L.data:""),"");if(x&&(x.length<=y.length?y.startsWith(x)&&(y=y.substring(x.length),b[0].start=b[0].start.getShiftedBy(x.length)):x.startsWith(y)&&(b[0].start=b[0].start.getShiftedBy(y.length),y="")),y.length==0&&b[0].isCollapsed)return}const k={text:y,selection:t.createSelection(b)};Yt.isAndroid&&n.document.isComposing?this._compositionQueue.push(k):(e.execute("insertText",k),n.scrollToTheSelection())}),Yt.isAndroid?this.listenTo(n.document,"keydown",(l,c)=>{o.isCollapsed||c.keyCode!=229||!n.document.isComposing||B1(t,s)}):this.listenTo(n.document,"compositionstart",()=>{o.isCollapsed||B1(t,s)}),Yt.isAndroid?(this.listenTo(n.document,"mutations",(l,{mutations:c})=>{if(n.document.isComposing)for(const{node:h}of c){const g=VB(h,r),b=r.toModelElement(g);if(this._compositionQueue.isComposedElement(b)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(n.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(n.document,"compositionend",()=>{const l=[];for(const c of this._compositionQueue.flushComposedElements()){const h=r.toViewElement(c);h&&l.push({type:"children",node:h})}l.length&&n.document.fire("mutations",{mutations:l})},{priority:"lowest"})):this.listenTo(n.document,"compositionend",()=>{n.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class BB{constructor(e){this.flushDebounced=bl(()=>this.flush("timeout"),50),this._queue=[],this._compositionElements=new Set,this.editor=e}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(e){const t={text:e.text};if(e.selection){t.selectionRanges=[];for(const n of e.selection.getRanges())t.selectionRanges.push(Ro.fromRange(n)),this._compositionElements.add(n.start.parent)}this._queue.push(t),this.flushDebounced()}shift(){const e=this._queue.shift(),t={text:e.text};if(e.selectionRanges){const n=e.selectionRanges.map(r=>NB(r)).filter(r=>!!r);n.length&&(t.selection=this.editor.model.createSelection(n))}return t}flush(e){const t=this.editor,n=t.model,r=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const s=t.commands.get("insertText").buffer;n.enqueueChange(s.batch,()=>{for(s.lock();this._queue.length;){const l=this.shift();t.execute("insertText",l)}s.unlock()}),r.scrollToTheSelection()}isComposedElement(e){return this._compositionElements.has(e)}flushComposedElements(){const e=Array.from(this._compositionElements);return this._compositionElements.clear(),e}}function B1(i,e){if(!e.isEnabled)return;const t=e.buffer;t.lock(),i.enqueueChange(t.batch,()=>{i.deleteContent(i.document.selection)}),t.unlock()}function NB(i){const e=i.toRange();return i.detach(),e.root.rootName=="$graveyard"?null:e}function VB(i,e){let t=i.is("$text")?i.parent:i;for(;!e.toModelElement(t);)t=t.parent;return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N1 extends Wt{constructor(e,t){super(e),this.direction=t,this._buffer=new Hx(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,n=t.document;t.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();const o=r.createSelection(e.selection||n.selection);if(!t.canEditAt(o))return;const s=e.sequence||1,l=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(s)){this._replaceEntireContentWithParagraph(r);return}if(this._shouldReplaceFirstBlockWithParagraph(o,s)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let c=0;o.getFirstRange().getMinimalFlatRanges().forEach(h=>{c+=Vb(h.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(o,{doNotResetEntireContent:l,direction:this.direction}),this._buffer.input(c),r.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,r=t.document.selection,o=t.schema.getLimitElement(r);if(!(r.isCollapsed&&r.containsEntireContent(o))||!t.schema.checkChild(o,"paragraph"))return!1;const l=o.getChild(0);return!(l&&l.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const t=this.editor.model,r=t.document.selection,o=t.schema.getLimitElement(r),s=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(s,o),e.setSelection(s,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const n=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;const r=e.getFirstPosition(),o=n.schema.getLimitElement(r),s=o.getChild(0);return!(r.parent!=s||!e.containsEntireContent(s)||!n.schema.checkChild(o,"paragraph")||s.name=="paragraph")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const zB="character",V1="word",HB="codePoint",gc="selection",Rd="backward",sf="forward",jx={deleteContent:{unit:gc,direction:Rd},deleteContentBackward:{unit:HB,direction:Rd},deleteWordBackward:{unit:V1,direction:Rd},deleteHardLineBackward:{unit:gc,direction:Rd},deleteSoftLineBackward:{unit:gc,direction:Rd},deleteContentForward:{unit:zB,direction:sf},deleteWordForward:{unit:V1,direction:sf},deleteHardLineForward:{unit:gc,direction:sf},deleteSoftLineForward:{unit:gc,direction:sf}};class UB extends Aa{constructor(e){super(e);const t=e.document;let n=0;t.on("keydown",()=>{n++}),t.on("keyup",()=>{n=0}),t.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;const{targetRanges:s,domEvent:l,inputType:c}=o,h=jx[c];if(!h)return;const g={direction:h.direction,unit:h.unit,sequence:n};g.unit==gc&&(g.selectionToRemove=e.createSelection(s[0])),c==="deleteContentBackward"&&(Yt.isAndroid&&(g.sequence=1),jB(s)&&(g.unit=gc,g.selectionToRemove=e.createSelection(s)));const b=new Jd(t,"delete",s[0]);t.fire(b,new Ud(e,l,g)),b.stop.called&&r.stop()}),Yt.isBlink&&WB(this)}observe(){}stopObserving(){}}function WB(i){const e=i.view,t=e.document;let n=null,r=!1;t.on("keydown",(l,{keyCode:c})=>{n=c,r=!1}),t.on("keyup",(l,{keyCode:c,domEvent:h})=>{const g=t.selection,b=i.isEnabled&&c==n&&o(c)&&!g.isCollapsed&&!r;if(n=null,b){const y=g.getFirstRange(),k=new Jd(t,"delete",y),x={unit:gc,direction:s(c),selectionToRemove:g};t.fire(k,new Ud(e,h,x))}}),t.on("beforeinput",(l,{inputType:c})=>{const h=jx[c];o(n)&&h&&h.direction==s(n)&&(r=!0)},{priority:"high"}),t.on("beforeinput",(l,{inputType:c,data:h})=>{n==Cn.delete&&c=="insertText"&&h==""&&l.stop()},{priority:"high"});function o(l){return l==Cn.backspace||l==Cn.delete}function s(l){return l==Cn.backspace?Rd:sf}}function jB(i){if(i.length!=1||i[0].isCollapsed)return!1;const e=i[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let t=0;for(const{nextPosition:n,item:r}of e){if(n.parent.is("$text")){const o=n.parent.data,s=n.offset;if(M0(o,s)||L0(o,s)||oC(o,s))continue;t++}else(r.is("containerElement")||r.is("emptyElement"))&&t++;if(t>1)return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kl extends Fe{static get pluginName(){return"Delete"}init(){const e=this.editor,t=e.editing.view,n=t.document,r=e.model.document;t.addObserver(UB),this._undoOnBackspace=!1;const o=new N1(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new N1(e,"backward")),this.listenTo(n,"delete",(s,l)=>{n.isComposing||l.preventDefault();const{direction:c,sequence:h,selectionToRemove:g,unit:b}=l,y=c==="forward"?"deleteForward":"delete",k={sequence:h};if(b=="selection"){const x=Array.from(g.getRanges()).map(D=>e.editing.mapper.toModelRange(D));k.selection=e.model.createSelection(x)}else k.unit=b;e.execute(y,k),t.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(n,"delete",(s,l)=>{this._undoOnBackspace&&l.direction=="backward"&&l.sequence==1&&l.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),l.preventDefault(),s.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $B extends Fe{static get requires(){return[Wx,kl]}static get pluginName(){return"Typing"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $x(i,e){let t=i.start;return{text:Array.from(i.getWalker({ignoreElementEnd:!1})).reduce((r,{item:o})=>o.is("$text")||o.is("$textProxy")?r+o.data:(t=e.createPositionAfter(o),""),""),range:e.createRange(t,i.end)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qx extends Vn(){constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",(n,{directChange:r})=>{if(r){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(n,r)=>{r.isUndo||!r.isLocal||this._evaluateTextBeforeSelection("data",{batch:r})})}_evaluateTextBeforeSelection(e,t={}){const n=this.model,o=n.document.selection,s=n.createRange(n.createPositionAt(o.focus.parent,0),o.focus),{text:l,range:c}=$x(s,n),h=this.testCallback(l);if(!h&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!h,h){const g=Object.assign(t,{text:l,range:c});typeof h=="object"&&Object.assign(g,h),this.fire(`matched:${e}`,g)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class z1 extends Fe{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e),this._isNextGravityRestorationSkipped=!1,this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,n=e.editing.view,r=e.locale,o=t.document.selection;this.listenTo(n.document,"arrowKey",(s,l)=>{if(!o.isCollapsed||l.shiftKey||l.altKey||l.ctrlKey)return;const c=l.keyCode==Cn.arrowright,h=l.keyCode==Cn.arrowleft;if(!c&&!h)return;const g=r.contentLanguageDirection;let b=!1;g==="ltr"&&c||g==="rtl"&&h?b=this._handleForwardMovement(l):b=this._handleBackwardMovement(l),b===!0&&s.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(s,l)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!l.directChange&&ks(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,n=this.editor.model,r=n.document.selection,o=r.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&ll(r,t)?!1:ks(o,t)?(Qh(e),ll(r,t)&&ks(o,t,!0)?Xh(n,t):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const t=this.attributes,n=this.editor.model,r=n.document.selection,o=r.getFirstPosition();return this._isGravityOverridden?(Qh(e),this._restoreGravity(),ks(o,t,!0)?Xh(n,t):zm(n,t,o),!0):o.isAtStart?ll(r,t)?(Qh(e),zm(n,t,o),!0):!1:!ll(r,t)&&ks(o,t,!0)?(Qh(e),zm(n,t,o),!0):H1(o,t)?o.isAtEnd&&!ll(r,t)&&ks(o,t)?(Qh(e),zm(n,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,t=e.model,n=t.document.selection,r=e.editing.view.document;e.editing.view.addObserver(Qp);let o=!1;this.listenTo(r,"mousedown",()=>{o=!0}),this.listenTo(r,"selectionChange",()=>{const s=this.attributes;if(!o||(o=!1,!n.isCollapsed)||!ll(n,s))return;const l=n.getFirstPosition();ks(l,s)&&(l.isAtStart||ks(l,s,!0)?Xh(t,s):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const t=this.editor.model,n=t.document.selection,r=this.attributes;this.listenTo(t,"insertContent",()=>{const o=n.getFirstPosition();ll(n,r)&&ks(o,r)&&Xh(t,r)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,t=e.model,n=t.document.selection,r=e.editing.view;let o=!1,s=!1;this.listenTo(r.document,"delete",(l,c)=>{o=c.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{if(!o)return;const l=n.getFirstPosition();s=ll(n,this.attributes)&&!H1(l,this.attributes)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{o&&(o=!1,!s&&e.model.enqueueChange(()=>{const l=n.getFirstPosition();ll(n,this.attributes)&&ks(l,this.attributes)&&(l.isAtStart||ks(l,this.attributes,!0)?Xh(t,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function ll(i,e){for(const t of e)if(i.hasAttribute(t))return!0;return!1}function zm(i,e,t){const n=t.nodeBefore;i.change(r=>{if(n){const o=[],s=i.schema.isObject(n)&&i.schema.isInline(n);for(const[l,c]of n.getAttributes())i.schema.checkAttribute("$text",l)&&(!s||i.schema.getAttributeProperties(l).copyFromObject!==!1)&&o.push([l,c]);r.setSelectionAttribute(o)}else r.removeSelectionAttribute(e)})}function Xh(i,e){i.change(t=>{t.removeSelectionAttribute(e)})}function Qh(i){i.preventDefault()}function H1(i,e){const t=i.getShiftedBy(-1);return ks(t,e)}function ks(i,e,t=!1){const{nodeBefore:n,nodeAfter:r}=i;for(const o of e){const s=n?n.getAttribute(o):void 0,l=r?r.getAttribute(o):void 0;if(!(t&&(s===void 0||l===void 0))&&l!==s)return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const U1={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:yd('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:yd("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:yd("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:yd('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:yd('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:yd("'"),to:[null,"‚",null,"’"]}},W1={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},qB=["symbols","mathematical","typography","quotes"];class GB extends Fe{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}constructor(e){super(e),e.config.define("typing",{transformations:{include:qB}})}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const e=this.editor,t=e.model,n=e.plugins.get("Delete"),r=JB(e.config.get("typing.transformations")),o=l=>{for(const c of r)if(c.from.test(l))return{normalizedTransformation:c}},s=new qx(e.model,o);s.on("matched:data",(l,c)=>{if(!c.batch.isTyping)return;const{from:h,to:g}=c.normalizedTransformation,b=h.exec(c.text),y=g(b.slice(1)),k=c.range;let x=b.index;t.enqueueChange(D=>{for(let L=1;L<b.length;L++){const M=b[L],V=y[L-1];if(V==null){x+=M.length;continue}const O=k.start.getShiftedBy(x),U=t.createRange(O,O.getShiftedBy(M.length)),K=YB(O);t.insertContent(D.createText(V,K),U),x+=V.length}t.enqueueChange(()=>{n.requestUndoOnBackspace()})})}),s.bind("isEnabled").to(this)}}function KB(i){return typeof i=="string"?new RegExp(`(${Hk(i)})$`):i}function ZB(i){return typeof i=="string"?()=>[i]:i instanceof Array?()=>i:i}function YB(i){return(i.textNode?i.textNode:i.nodeAfter).getAttributes()}function yd(i){return new RegExp(`(^|\\s)(${i})([^${i}]*)(${i})$`)}function JB(i){const e=i.extra||[],t=i.remove||[],n=o=>!t.includes(o),r=i.include.concat(e).filter(n);return XB(r).filter(n).map(o=>typeof o=="string"&&U1[o]?U1[o]:o).filter(o=>typeof o=="object").map(o=>({from:KB(o.from),to:ZB(o.to)}))}function XB(i){const e=new Set;for(const t of i)if(typeof t=="string"&&W1[t])for(const n of W1[t])e.add(n);else e.add(t);return Array.from(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gf(i,e,t,n){return n.createRange(t0(i,e,t,!0,n),t0(i,e,t,!1,n))}function t0(i,e,t,n,r){let o=i.textNode||(n?i.nodeBefore:i.nodeAfter),s=null;for(;o&&o.getAttribute(e)==t;)s=o,o=n?o.previousSibling:o.nextSibling;return s?r.createPositionAt(s,n?"before":"after"):i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function QB(i,e,t,n){const r=i.editing.view,o=new Set;r.document.registerPostFixer(s=>{const l=i.model.document.selection;let c=!1;if(l.hasAttribute(e)){const h=Gf(l.getFirstPosition(),e,l.getAttribute(e),i.model),g=i.editing.mapper.toViewRange(h);for(const b of g.getItems())b.is("element",t)&&!b.hasClass(n)&&(s.addClass(n,b),o.add(b),c=!0)}return c}),i.conversion.for("editingDowncast").add(s=>{s.on("insert",l,{priority:"highest"}),s.on("remove",l,{priority:"highest"}),s.on("attribute",l,{priority:"highest"}),s.on("selection",l,{priority:"highest"});function l(){r.change(c=>{for(const h of o.values())c.removeClass(n,h),o.delete(h)})}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*Gx(i,e){for(const t of e)t&&i.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eN extends Wt{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const t=this.editor.model,n=t.document.selection,r=t.schema,o=n.isCollapsed,s=n.getFirstRange(),l=s.start.parent,c=s.end.parent;if(r.isLimit(l)||r.isLimit(c))return!o&&l==c&&t.deleteContent(n),!1;if(o){const h=Gx(e.model.schema,n.getAttributes());return j1(e,s.start),e.setSelectionAttribute(h),!0}else{const h=!(s.start.isAtStart&&s.end.isAtEnd),g=l==c;if(t.deleteContent(n,{leaveUnmerged:h}),h){if(g)return j1(e,n.focus),!0;e.setSelection(c,0)}}return!1}}function j1(i,e){i.split(e),i.setSelection(e.parent.nextSibling,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tN={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class Kx extends Aa{constructor(e){super(e);const t=this.document;let n=!1;t.on("keydown",(r,o)=>{n=o.shiftKey}),t.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;let s=o.inputType;Yt.isSafari&&n&&s=="insertParagraph"&&(s="insertLineBreak");const l=o.domEvent,c=tN[s];if(!c)return;const h=new Jd(t,"enter",o.targetRanges[0]);t.fire(h,new Ud(e,l,{isSoft:c.isSoft})),h.stop.called&&r.stop()})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kf extends Fe{static get pluginName(){return"Enter"}init(){const e=this.editor,t=e.editing.view,n=t.document,r=this.editor.t;t.addObserver(Kx),e.commands.add("enter",new eN(e)),this.listenTo(n,"enter",(o,s)=>{n.isComposing||s.preventDefault(),!s.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nN extends Wt{execute(){const e=this.editor.model,t=e.document;e.change(n=>{rN(e,n,t.selection),this.fire("afterExecute",{writer:n})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=iN(e.schema,t.selection)}}function iN(i,e){if(e.rangeCount>1)return!1;const t=e.anchor;if(!t||!i.checkChild(t,"softBreak"))return!1;const n=e.getFirstRange(),r=n.start.parent,o=n.end.parent;return!((n0(r,i)||n0(o,i))&&r!==o)}function rN(i,e,t){const n=t.isCollapsed,r=t.getFirstRange(),o=r.start.parent,s=r.end.parent,l=o==s;if(n){const c=Gx(i.schema,t.getAttributes());$1(i,e,r.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(c)}else{const c=!(r.start.isAtStart&&r.end.isAtEnd);i.deleteContent(t,{leaveUnmerged:c}),l?$1(i,e,t.focus):c&&e.setSelection(s,0)}}function $1(i,e,t){const n=e.createElement("softBreak");i.insertContent(n,t),e.setSelection(n,"after")}function n0(i,e){return i.is("rootElement")?!1:e.isLimit(i)||n0(i.parent,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oN extends Fe{static get pluginName(){return"ShiftEnter"}init(){const e=this.editor,t=e.model.schema,n=e.conversion,r=e.editing.view,o=r.document,s=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(l,{writer:c})=>c.createEmptyElement("br")}),r.addObserver(Kx),e.commands.add("shiftEnter",new nN(e)),this.listenTo(o,"enter",(l,c)=>{o.isComposing||c.preventDefault(),c.isSoft&&(e.execute("shiftEnter"),r.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sN extends Yn(){constructor(){super(...arguments),this._stack=[]}add(e,t){const n=this._stack,r=n[0];this._insertDescriptor(e);const o=n[0];r!==o&&!db(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:t})}remove(e,t){const n=this._stack,r=n[0];this._removeDescriptor(e);const o=n[0];r!==o&&!db(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:t})}_insertDescriptor(e){const t=this._stack,n=t.findIndex(o=>o.id===e.id);if(db(e,t[n]))return;n>-1&&t.splice(n,1);let r=0;for(;t[r]&&aN(t[r],e);)r++;t.splice(r,0,e)}_removeDescriptor(e){const t=this._stack,n=t.findIndex(r=>r.id===e);n>-1&&t.splice(n,1)}}function db(i,e){return i&&e&&i.priority==e.priority&&Tp(i.classes)==Tp(e.classes)}function aN(i,e){return i.priority>e.priority?!0:i.priority<e.priority?!1:Tp(i.classes)>Tp(e.classes)}function Tp(i){return Array.isArray(i)?i.sort().join(","):i}const lN='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const cN="ck-widget",q1="ck-widget_selected";function Hi(i){return i.is("element")?!!i.getCustomProperty("widget"):!1}function El(i,e,t={}){if(!i.is("containerElement"))throw new be("widget-to-widget-wrong-element-type",null,{element:i});return e.setAttribute("contenteditable","false",i),e.addClass(cN,i),e.setCustomProperty("widget",!0,i),i.getFillerOffset=pN,e.setCustomProperty("widgetLabel",[],i),t.label&&hN(i,t.label),t.hasSelectionHandle&&gN(i,e),Zx(i,e),i}function uN(i,e,t){if(e.classes&&t.addClass(An(e.classes),i),e.attributes)for(const n in e.attributes)t.setAttribute(n,e.attributes[n],i)}function dN(i,e,t){if(e.classes&&t.removeClass(An(e.classes),i),e.attributes)for(const n in e.attributes)t.removeAttribute(n,i)}function Zx(i,e,t=uN,n=dN){const r=new sN;r.on("change:top",(l,c)=>{c.oldDescriptor&&n(i,c.oldDescriptor,c.writer),c.newDescriptor&&t(i,c.newDescriptor,c.writer)});const o=(l,c,h)=>r.add(c,h),s=(l,c,h)=>r.remove(c,h);e.setCustomProperty("addHighlight",o,i),e.setCustomProperty("removeHighlight",s,i)}function hN(i,e){i.getCustomProperty("widgetLabel").push(e)}function fN(i){return i.getCustomProperty("widgetLabel").reduce((t,n)=>typeof n=="function"?t?t+". "+n():n():t?t+". "+n:n,"")}function Yx(i,e,t={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],i),e.setAttribute("role","textbox",i),e.setAttribute("tabindex","-1",i),t.label&&e.setAttribute("aria-label",t.label,i),e.setAttribute("contenteditable",i.isReadOnly?"false":"true",i),i.on("change:isReadOnly",(n,r,o)=>{e.setAttribute("contenteditable",o?"false":"true",i)}),i.on("change:isFocused",(n,r,o)=>{o?e.addClass("ck-editor__nested-editable_focused",i):e.removeClass("ck-editor__nested-editable_focused",i)}),Zx(i,e),i}function ag(i,e){const t=i.getSelectedElement();if(t){const n=pc(i);if(n)return e.createRange(e.createPositionAt(t,n))}return e.schema.findOptimalInsertionRange(i)}function mN(i,e){return(t,n)=>{const{mapper:r,viewPosition:o}=n,s=r.findMappedViewAncestor(o);if(!e(s))return;const l=r.toModelElement(s);n.modelPosition=i.createPositionAt(l,o.isAtStart?"before":"after")}}function pN(){return null}function gN(i,e){const t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(n){const r=this.toDomElement(n),o=new ns;return o.set("content",lN),o.render(),r.appendChild(o.element),r});e.insert(e.createPositionAt(i,0),t),e.addClass(["ck-widget_with-selection-handle"],i)}function iv(i){const e=l=>{const{width:c,paddingLeft:h,paddingRight:g}=l.ownerDocument.defaultView.getComputedStyle(l);return parseFloat(c)-(parseFloat(h)||0)-(parseFloat(g)||0)},t=i.parentElement;if(!t)return 0;let n=e(t);const r=5;let o=0,s=t;for(;isNaN(n);){if(s=s.parentElement,++o>r)return 0;n=e(s)}return n}function bN(i,e=new Jt(i)){const t=iv(i);return t?e.width/t*100:0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const dl="widget-type-around";function su(i,e,t){return!!i&&Hi(i)&&!t.isInline(e)}function vN(i){return i.closest(".ck-widget__type-around__button")}function wN(i){return i.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function yN(i,e){const t=i.closest(".ck-widget");return e.mapDomToView(t)}function pc(i){return i.getAttribute(dl)}const _N='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Jx=["before","after"],kN=new DOMParser().parseFromString(_N,"image/svg+xml").firstChild,G1="ck-widget__type-around_disabled";class CN extends Fe{constructor(){super(...arguments),this._currentFakeCaretModelElement=null}static get pluginName(){return"WidgetTypeAround"}static get requires(){return[Kf,kl]}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",(n,r,o)=>{t.change(s=>{for(const l of t.document.roots)o?s.removeClass(G1,l):s.addClass(G1,l)}),o||e.model.change(s=>{s.removeSelectionAttribute(dl)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const n=this.editor,r=n.editing.view,o=n.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);n.execute("insertParagraph",{position:n.model.createPositionAt(e,t),attributes:o}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,t,n,r){this.listenTo(e,t,(...o)=>{this.isEnabled&&n(...o)},r)}_insertParagraphAccordingToFakeCaretPosition(){const n=this.editor.model.document.selection,r=pc(n);if(!r)return!1;const o=n.getSelectedElement();return this._insertParagraph(o,r),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,n=e.locale.t,r={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,s,l)=>{const c=l.mapper.toViewElement(s.item);c&&su(c,s.item,t)&&(xN(l.writer,r,c),c.getCustomProperty("widgetLabel").push(()=>this.isEnabled?n("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,n=t.document.selection,r=t.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(l,c)=>{this._handleArrowKeyPress(l,c)},{context:[Hi,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",(l,c)=>{c.directChange&&e.model.change(h=>{h.removeSelectionAttribute(dl)})}),this._listenToIfEnabled(t.document,"change:data",()=>{const l=n.getSelectedElement();if(l){const c=e.editing.mapper.toViewElement(l);if(su(c,l,r))return}e.model.change(c=>{c.removeSelectionAttribute(dl)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(l,c,h)=>{const g=h.writer;if(this._currentFakeCaretModelElement){const x=h.mapper.toViewElement(this._currentFakeCaretModelElement);x&&(g.removeClass(Jx.map(s),x),this._currentFakeCaretModelElement=null)}const b=c.selection.getSelectedElement();if(!b)return;const y=h.mapper.toViewElement(b);if(!su(y,b,r))return;const k=pc(c.selection);k&&(g.addClass(s(k),y),this._currentFakeCaretModelElement=b)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(l,c,h)=>{h||e.model.change(g=>{g.removeSelectionAttribute(dl)})});function s(l){return`ck-widget_type-around_show-fake-caret_${l}`}}_handleArrowKeyPress(e,t){const n=this.editor,r=n.model,o=r.document.selection,s=r.schema,l=n.editing.view,c=t.keyCode,h=bD(c,n.locale.contentLanguageDirection),g=l.document.selection.getSelectedElement(),b=n.editing.mapper.toModelElement(g);let y;su(g,b,s)?y=this._handleArrowKeyPressOnSelectedWidget(h):o.isCollapsed?y=this._handleArrowKeyPressWhenSelectionNextToAWidget(h):t.shiftKey||(y=this._handleArrowKeyPressWhenNonCollapsedSelection(h)),y&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const n=this.editor.model,r=n.document.selection,o=pc(r);return n.change(s=>{if(o){if(!(o===(e?"after":"before")))return s.removeSelectionAttribute(dl),!0}else return s.setSelectionAttribute(dl,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,n=t.model,r=n.schema,o=t.plugins.get("Widget"),s=o._getObjectElementNextToSelection(e),l=t.editing.mapper.toViewElement(s);return su(l,s,r)?(n.change(c=>{o._setSelectionOverElement(s),c.setSelectionAttribute(dl,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const t=this.editor,n=t.model,r=n.schema,o=t.editing.mapper,s=n.document.selection,l=e?s.getLastPosition().nodeBefore:s.getFirstPosition().nodeAfter,c=o.toViewElement(l);return su(c,l,r)?(n.change(h=>{h.setSelection(l,"on"),h.setSelectionAttribute(dl,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(n,r)=>{const o=vN(r.domTarget);if(!o)return;const s=wN(o),l=yN(o,t.domConverter),c=e.editing.mapper.toModelElement(l);this._insertParagraph(c,s),r.preventDefault(),n.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,n=e.editing.view;this._listenToIfEnabled(n.document,"enter",(r,o)=>{if(r.eventPhase!="atTarget")return;const s=t.getSelectedElement(),l=e.editing.mapper.toViewElement(s),c=e.model.schema;let h;this._insertParagraphAccordingToFakeCaretPosition()?h=!0:su(l,s,c)&&(this._insertParagraph(s,o.isSoft?"before":"after"),h=!0),h&&(o.preventDefault(),r.stop())},{context:Hi})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(n,r)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(r.selection=t.selection)},{priority:"high"}),Yt.isAndroid?this._listenToIfEnabled(t,"keydown",(n,r)=>{r.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,n=e.model,r=n.schema;this._listenToIfEnabled(t.document,"delete",(o,s)=>{if(o.eventPhase!="atTarget")return;const l=pc(n.document.selection);if(!l)return;const c=s.direction,h=n.document.selection.getSelectedElement(),g=l==="before",b=c=="forward";if(g===b)e.execute("delete",{selection:n.createSelection(h,"on")});else{const k=r.getNearestSelectionRange(n.createPositionAt(h,l),c);if(k)if(!k.isCollapsed)n.change(x=>{x.setSelection(k),e.execute(b?"deleteForward":"delete")});else{const x=n.createSelection(k.start);if(n.modifySelection(x,{direction:c}),!x.focus.isEqual(k.start))n.change(D=>{D.setSelection(k),e.execute(b?"deleteForward":"delete")});else{const D=TN(r,k.start.parent);n.deleteContent(n.createSelection(D,"on"),{doNotAutoparagraph:!0})}}}s.preventDefault(),o.stop()},{context:Hi})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,n=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(r,[o,s])=>{if(s&&!s.is("documentSelection"))return;const l=pc(n);if(l)return r.stop(),t.change(c=>{const h=n.getSelectedElement(),g=t.createPositionAt(h,l),b=c.createSelection(g),y=t.insertContent(o,b);return c.setSelection(b),y})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,n=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(r,o)=>{const[,s,l={}]=o;if(s&&!s.is("documentSelection"))return;const c=pc(n);c&&(l.findOptimalPosition=c,o[3]=l)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,n=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(r,[o])=>{if(o&&!o.is("documentSelection"))return;pc(n)&&r.stop()},{priority:"high"})}}function xN(i,e,t){const n=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(r){const o=this.toDomElement(r);return EN(o,e),SN(o),o});i.insert(i.createPositionAt(t,"end"),n)}function EN(i,e){for(const t of Jx){const n=new Mo({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[i.ownerDocument.importNode(kN,!0)]});i.appendChild(n.render())}}function SN(i){const e=new Mo({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});i.appendChild(e.render())}function TN(i,e){let t=e;for(const n of e.getAncestors({parentFirst:!0})){if(n.childCount>1||i.isLimit(n))break;t=n}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function AN(i){const e=i.model;return(t,n)=>{const r=n.keyCode==Cn.arrowup,o=n.keyCode==Cn.arrowdown,s=n.shiftKey,l=e.document.selection;if(!r&&!o)return;const c=o;if(s&&DN(l,c))return;const h=PN(i,l,c);if(h){if(h.isCollapsed){if(l.isCollapsed)return;if(s)return}(h.isCollapsed||IN(i,h,c))&&(e.change(g=>{const b=c?h.end:h.start;if(s){const y=e.createSelection(l.anchor);y.setFocus(b),g.setSelection(y)}else g.setSelection(b)}),t.stop(),n.preventDefault(),n.stopPropagation())}}}function PN(i,e,t){const n=i.model;if(t){const r=e.isCollapsed?e.focus:e.getLastPosition(),o=K1(n,r,"forward");if(!o)return null;const s=n.createRange(r,o),l=Z1(n.schema,s,"backward");return l?n.createRange(r,l):null}else{const r=e.isCollapsed?e.focus:e.getFirstPosition(),o=K1(n,r,"backward");if(!o)return null;const s=n.createRange(o,r),l=Z1(n.schema,s,"forward");return l?n.createRange(l,r):null}}function K1(i,e,t){const n=i.schema,r=i.createRangeIn(e.root),o=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:s,item:l,type:c}of r.getWalker({startPosition:e,direction:t})){if(n.isLimit(l)&&!n.isInline(l))return s;if(c==o&&n.isBlock(l))return null}return null}function Z1(i,e,t){const n=t=="backward"?e.end:e.start;if(i.checkChild(n,"$text"))return n;for(const{nextPosition:r}of e.getWalker({direction:t}))if(i.checkChild(r,"$text"))return r;return null}function IN(i,e,t){const n=i.model,r=i.view.domConverter;if(t){const h=n.createSelection(e.start);n.modifySelection(h),!h.focus.isAtEnd&&!e.start.isEqual(h.focus)&&(e=n.createRange(h.focus,e.end))}const o=i.mapper.toViewRange(e),s=r.viewRangeToDom(o),l=Jt.getDomRangeRects(s);let c;for(const h of l){if(c===void 0){c=Math.round(h.bottom);continue}if(Math.round(h.top)>=c)return!1;c=Math.max(c,Math.round(h.bottom))}return!0}function DN(i,e){return!i.isCollapsed&&i.isBackward==e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pa extends Fe{constructor(){super(...arguments),this._previouslySelected=new Set}static get pluginName(){return"Widget"}static get requires(){return[CN,kl]}init(){const e=this.editor,t=e.editing.view,n=t.document,r=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,s,l)=>{const c=l.writer,h=s.selection;if(h.isCollapsed)return;const g=h.getSelectedElement();if(!g)return;const b=e.editing.mapper.toViewElement(g);Hi(b)&&l.consumable.consume(h,"selection")&&c.setSelection(c.createRangeOn(b),{fake:!0,label:fN(b)})}),this.editor.editing.downcastDispatcher.on("selection",(o,s,l)=>{this._clearPreviouslySelectedWidgets(l.writer);const c=l.writer,h=c.document.selection;let g=null;for(const b of h.getRanges())for(const y of b){const k=y.item;Hi(k)&&!FN(k,g)&&(c.addClass(q1,k),this._previouslySelected.add(k),g=k)}},{priority:"low"}),t.addObserver(Qp),this.listenTo(n,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(n,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[Hi,"$text"]}),this.listenTo(n,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(n,"arrowKey",AN(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",(o,s)=>{this._handleDelete(s.direction=="forward")&&(s.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(n,"tab",(o,s)=>{o.eventPhase=="atTarget"&&(s.shiftKey||this._selectFirstNestedEditable()&&(s.preventDefault(),o.stop()))},{context:Hi,priority:"low"}),this.listenTo(n,"tab",(o,s)=>{s.shiftKey&&this._selectAncestorWidget()&&(s.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(n,"keydown",(o,s)=>{s.keystroke==Cn.esc&&this._selectAncestorWidget()&&(s.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:r("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:r("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:r("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:r("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:r("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:r("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,t){const n=this.editor,r=n.editing.view,o=r.document;let s=t.target;if(!s)return;if(t.domEvent.detail>=3){this._selectBlockContent(s)&&t.preventDefault();return}if(!Hi(s)){const c=RN(s);if(!c)return;if(Hi(c))s=c;else{const h=ON(r,t);if(h&&Hi(h))s=h;else return}}Yt.isAndroid&&t.preventDefault(),o.isFocused||r.focus();const l=n.editing.mapper.toModelElement(s);this._setSelectionOverElement(l)}_selectBlockContent(e){const t=this.editor,n=t.model,r=t.editing.mapper,o=n.schema,s=r.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),l=MN(r.toModelElement(s),n.schema);return l?(n.change(c=>{const h=o.isLimit(l)?null:LN(c.createPositionAfter(l),o),g=c.createPositionAt(l,0),b=h?c.createPositionAt(h,0):c.createPositionAt(l,"end");c.setSelection(c.createRange(g,b))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,t){const n=t.keyCode,r=this.editor.model,o=r.schema,s=r.document.selection,l=s.getSelectedElement(),c=O0(n,this.editor.locale.contentLanguageDirection),h=c=="down"||c=="right",g=c=="up"||c=="down";if(l&&o.isObject(l)){const y=h?s.getLastPosition():s.getFirstPosition(),k=o.getNearestSelectionRange(y,h?"forward":"backward");k&&(r.change(x=>{x.setSelection(k)}),t.preventDefault(),e.stop());return}if(!s.isCollapsed&&!t.shiftKey){const y=s.getFirstPosition(),k=s.getLastPosition(),x=y.nodeAfter,D=k.nodeBefore;(x&&o.isObject(x)||D&&o.isObject(D))&&(r.change(L=>{L.setSelection(h?k:y)}),t.preventDefault(),e.stop());return}if(!s.isCollapsed)return;const b=this._getObjectElementNextToSelection(h);if(b&&o.isObject(b)){if(o.isInline(b)&&g)return;this._setSelectionOverElement(b),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){const n=this.editor.model,r=n.schema,o=n.document.selection.getSelectedElement();o&&r.isObject(o)&&(t.preventDefault(),e.stop())}_handleDelete(e){const n=this.editor.model.document.selection;if(!this.editor.model.canEditAt(n)||!n.isCollapsed)return;const r=this._getObjectElementNextToSelection(e);if(r)return this.editor.model.change(o=>{let s=n.anchor.parent;for(;s.isEmpty;){const l=s;s=l.parent,o.remove(l)}this._setSelectionOverElement(r)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){const t=this.editor.model,n=t.schema,r=t.document.selection,o=t.createSelection(r);if(t.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(r))return null;const s=e?o.focus.nodeBefore:o.focus.nodeAfter;return s&&n.isObject(s)?s:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(q1,t);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,n=this.editor.editing.view.document;for(const r of n.selection.getFirstRange().getItems())if(r.is("editableElement")){const o=e.editing.mapper.toModelElement(r);/* istanbul ignore next -- @preserve */if(!o)continue;const s=e.model.createPositionAt(o,0),l=e.model.schema.getNearestSelectionRange(s,"forward");return e.model.change(c=>{c.setSelection(l)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,t=e.editing.mapper,r=e.editing.view.document.selection.getFirstPosition().parent,s=(r.is("$text")?r.parent:r).findAncestor(Hi);if(!s)return!1;const l=t.toModelElement(s);/* istanbul ignore next -- @preserve */return l?(e.model.change(c=>{c.setSelection(l,"on")}),!0):!1}}function RN(i){let e=i;for(;e;){if(e.is("editableElement")||Hi(e))return e;e=e.parent}return null}function ON(i,e){const t=Zk(e.domEvent);let n=null;if(t?n=i.domConverter.domRangeToView(t):n=i.createRange(i.createPositionAt(e.target,0)),!n)return null;const r=n.start;if(!r.parent)return null;let o=r.parent;return r.parent.is("editableElement")&&(r.isAtEnd&&r.nodeBefore?o=r.nodeBefore:r.isAtStart&&r.nodeAfter&&(o=r.nodeAfter)),o.is("$text")?o.parent:o}function FN(i,e){return e?Array.from(i.getAncestors()).includes(e):!1}function MN(i,e){for(const t of i.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function LN(i,e){const t=new ml({startPosition:i});for(const{item:n}of t){if(e.isLimit(n)||!n.is("element"))return null;if(e.checkChild(n,"$text"))return n}return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ap extends Fe{constructor(){super(...arguments),this._toolbarDefinitions=new Map}static get requires(){return[_l]}static get pluginName(){return"WidgetToolbarRepository"}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",n=>{BN(e.editing.view.document.selection)&&n.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:n,getRelatedElement:r,balloonClassName:o="ck-toolbar-container"}){if(!n.length){vn("widget-toolbar-no-items",{toolbarId:e});return}const s=this.editor,l=s.t,c=new $d(s.locale);if(c.ariaLabel=t||l("Widget toolbar"),this._toolbarDefinitions.has(e))throw new be("widget-toolbar-duplicated",this,{toolbarId:e});const h={view:c,getRelatedElement:r,balloonClassName:o,itemsConfig:n,initialized:!1};s.ui.addToolbar(c,{isContextual:!0,beforeFocus:()=>{const g=r(s.editing.view.document.selection);g&&this._showToolbar(h,g)},afterBlur:()=>{this._hideToolbar(h)}}),this._toolbarDefinitions.set(e,h)}_updateToolbarsVisibility(){let e=0,t=null,n=null;for(const r of this._toolbarDefinitions.values()){const o=r.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(r)&&this._hideToolbar(r);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(r)&&this._hideToolbar(r);else{const s=o.getAncestors().length;s>e&&(e=s,t=o,n=r)}}n&&this._showToolbar(n,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?Y1(this.editor,t):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:Xx(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const n of this._toolbarDefinitions.values())if(this._isToolbarVisible(n)){const r=n.getRelatedElement(this.editor.editing.view.document.selection);Y1(this.editor,r)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function Y1(i,e){const t=i.plugins.get("ContextualBalloon"),n=Xx(i,e);t.updatePosition(n)}function Xx(i,e){const t=i.editing.view,n=ti.defaultPositions;return{target:t.domConverter.mapViewToDom(e),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}function BN(i){const e=i.getSelectedElement();return!!(e&&Hi(e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NN extends Vn(){constructor(e){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,t,n){const r=new Jt(t);this.activeHandlePosition=HN(e),this._referenceCoordinates=VN(t,UN(this.activeHandlePosition)),this._originalWidth=r.width,this._originalHeight=r.height,this._aspectRatio=r.width/r.height;const o=n.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=bN(n,r)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function VN(i,e){const t=new Jt(i),n=e.split("-"),r={x:n[1]=="right"?t.right:t.left,y:n[0]=="bottom"?t.bottom:t.top};return r.x+=i.ownerDocument.defaultView.scrollX,r.y+=i.ownerDocument.defaultView.scrollY,r}function zN(i){return`ck-widget__resizer__handle-${i}`}function HN(i){const e=["top-left","top-right","bottom-right","bottom-left"];for(const t of e)if(i.classList.contains(zN(t)))return t}function UN(i){const e=i.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[e[0]]}-${t[e[1]]}`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WN extends mt{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:e.if("_isVisible","none",t=>!t)}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(n,r)=>n!==null&&r!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(n,r,o)=>e.unit==="px"?`${n}×${r}`:`${o}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(n,r,o)=>r<50||o<50?"above-center":n)}_dismiss(){this.unbind(),this._isVisible=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class J1 extends Vn(){constructor(e){super(),this._viewResizerWrapper=null,this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,n)=>t&&n),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(t=>{t.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change(r=>{const o=r.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(s){const l=this.toDomElement(s);return e._appendHandles(l),e._appendSizeUI(l),l});r.insert(r.createPositionAt(t,"end"),o),r.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new NN(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change(h=>{const g=this._options.unit||"%",b=(g==="%"?t.widthPercents:t.width)+g;h.setStyle("width",b,this._options.viewElement)});const r=this._getHandleHost(),o=new Jt(r),s=Math.round(o.width),l=Math.round(o.height),c=new Jt(r);t.width=Math.round(c.width),t.height=Math.round(c.height),this.redraw(o),this.state.update({...t,handleHostWidth:s,handleHostHeight:l})}commit(){const e=this._options.unit||"%",t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!qN(t))return;const n=t.parentElement,r=this._getHandleHost(),o=this._viewResizerWrapper,s=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let l;if(n.isSameNode(r)){const c=e||new Jt(r);l=[c.width+"px",c.height+"px",void 0,void 0]}else l=[r.offsetWidth+"px",r.offsetHeight+"px",r.offsetLeft+"px",r.offsetTop+"px"];io(s,l)!=="same"&&this._options.editor.editing.view.change(c=>{c.setStyle({width:l[0],height:l[1],left:l[2],top:l[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const t=this.state,n=$N(e),r=this._options.isCentered?this._options.isCentered(this):!0,o={x:t._referenceCoordinates.x-(n.x+t.originalWidth),y:n.y-t.originalHeight-t._referenceCoordinates.y};r&&t.activeHandlePosition.endsWith("-right")&&(o.x=n.x-(t._referenceCoordinates.x+t.originalWidth)),r&&(o.x*=2);let s=Math.abs(t.originalWidth+o.x),l=Math.abs(t.originalHeight+o.y);return(s/t.aspectRatio>l?"width":"height")=="width"?l=s/t.aspectRatio:s=l*t.aspectRatio,{width:Math.round(s),height:Math.round(l),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*s*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const n of t)e.appendChild(new Mo({tag:"div",attributes:{class:`ck-widget__resizer__handle ${jN(n)}`}}).render())}_appendSizeUI(e){this._sizeView=new WN,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function jN(i){return`ck-widget__resizer__handle-${i}`}function $N(i){return{x:i.pageX,y:i.pageY}}function qN(i){return i&&i.ownerDocument&&i.ownerDocument.contains(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hb extends Fe{constructor(){super(...arguments),this._resizers=new Map}static get pluginName(){return"WidgetResize"}init(){const e=this.editor.editing,t=_t.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(Qp),this._observer=new(Bo()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=Nd(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[r,o]of this._resizers)r.isAttached()||(this._resizers.delete(r),o.destroy())},{priority:"lowest"}),this._observer.listenTo(_t.window,"resize",this._redrawSelectedResizerThrottled);const n=this.editor.editing.view.document.selection;n.on("change",()=>{const r=n.getSelectedElement(),o=this.getResizerByViewElement(r)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const t=new J1(e),n=this.editor.plugins;if(t.attach(),n.has("WidgetToolbarRepository")){const s=n.get("WidgetToolbarRepository");t.on("begin",()=>{s.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{s.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{s.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==t&&this.select(t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const n=t.domTarget;J1.isResizeHandle(n)&&(this._activeResizer=this._getResizerByHandle(n)||null,this._activeResizer&&(this._activeResizer.begin(n),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore file -- @preserve */const fb=Yd("px");class GN extends mt{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>fb(t)),top:e.to("top",t=>fb(t)),width:e.to("width",t=>fb(t))}}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hm extends Fe{constructor(){super(...arguments),this.removeDropMarkerDelayed=F0(()=>this.removeDropMarker(),40),this._updateDropMarkerThrottled=Nd(e=>this._updateDropMarker(e),40),this._reconvertMarkerThrottled=Nd(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0),this._dropTargetLineView=new GN,this._domEmitter=new(Bo()),this._scrollables=new Map}static get pluginName(){return"DragDropTarget"}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,n,r,o,s){this.removeDropMarkerDelayed.cancel();const l=X1(this.editor,e,t,n,r,o,s);/* istanbul ignore next -- @preserve */if(l){if(s&&s.containsRange(l))return this.removeDropMarker();this._updateDropMarkerThrottled(l)}}getFinalDropRange(e,t,n,r,o,s){const l=X1(this.editor,e,t,n,r,o,s);return this.removeDropMarker(),l}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:n})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(n);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const t=this.editor,n=t.model.markers;t.model.change(r=>{n.has("drop-target")?n.get("drop-target").getRange().isEqual(e)||r.updateMarker("drop-target",{range:e}):r.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){const n=this.toDomElement(t);return n.append("⁠",t.createElement("span"),"⁠"),n})}_updateDropTargetLine(e){const t=this.editor.editing,n=e.start.nodeBefore,r=e.start.nodeAfter,o=e.start.parent,s=n?t.mapper.toViewElement(n):null,l=s?t.view.domConverter.mapViewToDom(s):null,c=r?t.mapper.toViewElement(r):null,h=c?t.view.domConverter.mapViewToDom(c):null,g=t.mapper.toViewElement(o);if(!g)return;const b=t.view.domConverter.mapViewToDom(g),y=this._getScrollableRect(g),{scrollX:k,scrollY:x}=_t.window,D=l?new Jt(l):null,L=h?new Jt(h):null,M=new Jt(b).excludeScrollbarsAndBorders(),V=D?D.bottom:M.top,O=L?L.top:M.bottom,U=_t.window.getComputedStyle(b),K=V<=O?(V+O)/2:O;if(y.top<K&&K<y.bottom){const q=M.left+parseFloat(U.paddingLeft),Q=M.right-parseFloat(U.paddingRight),ne=Math.max(q+k,y.left),X=Math.min(Q+k,y.right);this._dropTargetLineView.set({isVisible:!0,left:ne,top:K+x,width:X-ne})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const t=e.root.rootName;let n;if(this._scrollables.has(t))n=this._scrollables.get(t).domElement;else{const r=this.editor.editing.view.domConverter.mapViewToDom(e);n=ZN(r),this._domEmitter.listenTo(n,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new ei(n,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:n,resizeObserver:o})}return new Jt(n).excludeScrollbarsAndBorders()}}function X1(i,e,t,n,r,o,s){const l=i.model,c=i.editing.mapper;let g=Q1(i,e);for(;g;){if(!o){if(l.schema.checkChild(g,"$text")){if(t){const b=t[0].start,y=c.toModelPosition(b);if(!s||Array.from(s.getItems()).every(x=>l.schema.checkChild(y,x))){if(l.schema.checkChild(y,"$text"))return l.createRange(y);if(b)return Um(i,Q1(i,b.parent),n,r)}}}else if(l.schema.isInline(g))return Um(i,g,n,r)}if(l.schema.isBlock(g))return Um(i,g,n,r);if(l.schema.checkChild(g,"$block")){const b=Array.from(g.getChildren()).filter(x=>x.is("element")&&!KN(i,x));let y=0,k=b.length;if(k==0)return l.createRange(l.createPositionAt(g,"end"));for(;y<k-1;){const x=Math.floor((y+k)/2);Qx(i,b[x],n,r)=="before"?k=x:y=x}return Um(i,b[y],n,r)}g=g.parent}return null}function KN(i,e){const t=i.editing.mapper,n=i.editing.view.domConverter,r=t.toViewElement(e);if(!r)return!0;const o=n.mapViewToDom(r);return _t.window.getComputedStyle(o).float!="none"}function Um(i,e,t,n){const r=i.model;return r.createRange(r.createPositionAt(e,Qx(i,e,t,n)))}function Qx(i,e,t,n){const r=i.editing.mapper,o=i.editing.view.domConverter,s=r.toViewElement(e),l=o.mapViewToDom(s),c=new Jt(l);return i.model.schema.isInline(e)?t<(c.left+c.right)/2?"before":"after":n<(c.top+c.bottom)/2?"before":"after"}function Q1(i,e){const t=i.editing.mapper,n=i.editing.view,r=t.toModelElement(e);if(r)return r;const o=n.createPositionBefore(e),s=t.findMappedViewAncestor(o);return t.toModelElement(s)}function ZN(i){let e=i;do{e=e.parentElement;const t=_t.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YN extends Fe{constructor(){super(...arguments),this._isBlockDragging=!1,this._domEmitter=new(Bo())}static get pluginName(){return"DragDropBlockToolbar"}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,n,r)=>{r?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Yt.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const n=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(n,"dragstart",(r,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(_t.document,"dragover",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(_t.document,"drop",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(_t.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&n.setAttribute("draggable","true"),this.on("change:isEnabled",(r,o,s)=>{n.setAttribute("draggable",s?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const t=this.editor.model,n=t.document.selection,r=this.editor.editing.view,o=Array.from(n.getSelectedBlocks()),s=t.createRange(t.createPositionBefore(o[0]),t.createPositionAfter(o[o.length-1]));t.change(l=>l.setSelection(s)),this._isBlockDragging=!0,r.focus(),r.getObserver(Of).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),n=e.clientY,r=document.elementFromPoint(t,n),o=this.editor.editing.view;!r||!r.closest(".ck-editor__editable")||o.getObserver(Of).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:r,clientX:t,clientY:n,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JN extends Fe{constructor(){super(...arguments),this._clearDraggableAttributesDelayed=F0(()=>this._clearDraggableAttributes(),40),this._blockMode=!1,this._domEmitter=new(Bo())}static get pluginName(){return"DragDrop"}static get requires(){return[Ys,Pa,Hm,YN]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(Of),t.addObserver(Qp),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(n,r,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(n,r,o)=>{o||this._finalizeDragging(!1)}),Yt.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,n=e.editing.view,r=n.document,o=e.plugins.get(Hm);this.listenTo(r,"dragstart",(s,l)=>{if(l.target&&l.target.is("editableElement")){l.preventDefault();return}if(this._prepareDraggedRange(l.target),!this._draggedRange){l.preventDefault();return}this._draggingUid=xs(),l.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",l.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const c=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(l.dataTransfer,c,"dragstart");const{dataTransfer:g,domTarget:b,domEvent:y}=l,{clientX:k}=y;this._updatePreview({dataTransfer:g,domTarget:b,clientX:k}),l.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(r,"dragend",(s,l)=>{this._finalizeDragging(!l.dataTransfer.isCanceled&&l.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(_t.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(r,"dragenter",()=>{this.isEnabled&&n.focus()}),this.listenTo(r,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(r,"dragging",(s,l)=>{if(!this.isEnabled){l.dataTransfer.dropEffect="none";return}const{clientX:c,clientY:h}=l.domEvent;o.updateDropMarker(l.target,l.targetRanges,c,h,this._blockMode,this._draggedRange),this._draggedRange||(l.dataTransfer.dropEffect="copy"),Yt.isGecko||(l.dataTransfer.effectAllowed=="copy"?l.dataTransfer.dropEffect="copy":["all","copyMove"].includes(l.dataTransfer.effectAllowed)&&(l.dataTransfer.dropEffect="move")),s.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,n=e.editing.view.document,r=e.plugins.get(Hm);this.listenTo(n,"clipboardInput",(o,s)=>{if(s.method!="drop")return;const{clientX:l,clientY:c}=s.domEvent,h=r.getFinalDropRange(s.target,s.targetRanges,l,c,this._blockMode,this._draggedRange);if(!h){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=s.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),ey(s.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(h,!0)){this._finalizeDragging(!1),o.stop();return}s.targetRanges=[e.editing.mapper.toViewRange(h)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Ys);e.on("contentInsertion",(t,n)=>{if(!this.isEnabled||n.method!=="drop")return;const r=n.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(r))},{priority:"high"}),e.on("contentInsertion",(t,n)=>{if(!this.isEnabled||n.method!=="drop")return;const r=ey(n.dataTransfer)=="move",o=!n.resultRange||!n.resultRange.isCollapsed;this._finalizeDragging(o&&r)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,n=t.document;this.listenTo(n,"mousedown",(r,o)=>{if(Yt.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let s=ty(o.target);if(Yt.isBlink&&!e.isReadOnly&&!s&&!n.selection.isCollapsed){const l=n.selection.getSelectedElement();(!l||!Hi(l))&&(s=n.selection.editableElement)}s&&(t.change(l=>{l.setAttribute("draggable","true",s)}),this._draggableElement=e.editing.mapper.toModelElement(s))}),this.listenTo(n,"mouseup",()=>{Yt.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const t=this.editor,n=t.model;t.plugins.get(Hm).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&n.change(o=>{const s=n.createSelection(this._draggedRange);n.deleteContent(s,{doNotAutoparagraph:!0});const l=s.getFirstPosition().parent;l.isEmpty&&!n.schema.checkChild(l,"$text")&&n.schema.checkChild(l,"paragraph")&&o.insertElement("paragraph",l,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const t=this.editor,n=t.model,r=n.document.selection,o=e?ty(e):null;if(o){const h=t.editing.mapper.toModelElement(o);this._draggedRange=Ro.fromRange(n.createRangeOn(h)),this._blockMode=n.schema.isBlock(h),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(r.isCollapsed&&!r.getFirstPosition().parent.isEmpty)return;const s=Array.from(r.getSelectedBlocks()),l=r.getFirstRange();if(s.length==0){this._draggedRange=Ro.fromRange(l);return}const c=eE(n,s);if(s.length>1)this._draggedRange=Ro.fromRange(c),this._blockMode=!0;else if(s.length==1){const h=l.start.isTouching(c.start)&&l.end.isTouching(c.end);this._draggedRange=Ro.fromRange(h?c:l),this._blockMode=h}n.change(h=>h.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:n}){const r=this.editor.editing.view,o=r.document.selection.editableElement,s=r.domConverter.mapViewToDom(o),l=_t.window.getComputedStyle(s);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=Pr(_t.document,"div",{style:"position: fixed; left: -999999px;"}),_t.document.body.appendChild(this._previewContainer));const c=new Jt(s);if(s.contains(t))return;const h=parseFloat(l.paddingLeft),g=Pr(_t.document,"div");g.className="ck ck-content",g.style.width=l.width,g.style.paddingLeft=`${c.left-n+h}px`,Yt.isiOS&&(g.style.backgroundColor="white"),r.domConverter.setContentOf(g,e.getData("text/html")),e.setDragImage(g,0,0),this._previewContainer.appendChild(g)}}function ey(i){return Yt.isGecko?i.dropEffect:["all","copyMove"].includes(i.effectAllowed)?"move":"copy"}function ty(i){if(i.is("editableElement"))return null;if(i.hasClass("ck-widget__selection-handle"))return i.findAncestor(Hi);if(Hi(i))return i;const e=i.findAncestor(t=>Hi(t)||t.is("editableElement"));return Hi(e)?e:null}function eE(i,e){const t=e[0],n=e[e.length-1],r=t.getCommonAncestor(n),o=i.createPositionBefore(t),s=i.createPositionAfter(n);if(r&&r.is("element")&&!i.schema.isLimit(r)){const l=i.createRangeOn(r),c=o.isTouching(l.start),h=s.isTouching(l.end);if(c&&h)return eE(i,[r])}return i.createRange(o,s)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XN extends Fe{static get pluginName(){return"PastePlainText"}static get requires(){return[Ys]}init(){const e=this.editor,t=e.model,n=e.editing.view,r=t.document.selection;n.addObserver(Of),e.plugins.get(Ys).on("contentInsertion",(o,s)=>{QN(s.content,t)&&t.change(l=>{const c=Array.from(r.getAttributes()).filter(([g])=>t.schema.getAttributeProperties(g).isFormatting);r.isCollapsed||t.deleteContent(r,{doNotAutoparagraph:!0}),c.push(...r.getAttributes());const h=l.createRangeIn(s.content);for(const g of h.getItems())for(const b of c)t.schema.checkAttribute(g,b[0])&&l.setAttribute(b[0],b[1],g)})})}}function QN(i,e){let t=e.createRangeIn(i);if(i.childCount==1){const n=i.getChild(0);n.is("element")&&e.schema.isBlock(n)&&!e.schema.isObject(n)&&!e.schema.isLimit(n)&&(t=e.createRangeIn(n))}for(const n of t.getItems())if(!e.schema.isInline(n)||Array.from(n.getAttributeKeys()).find(o=>e.schema.getAttributeProperties(o).isFormatting))return!1;return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tE extends Fe{static get pluginName(){return"Clipboard"}static get requires(){return[gf,Ys,JN,XN]}init(){const e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class e6 extends Wt{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let n=e.schema.getLimitElement(t);if(t.containsEntireContent(n)||!ny(e.schema,n))do if(n=n.parent,!n)return;while(!ny(e.schema,n));e.change(r=>{r.setSelection(n,"in")})}}function ny(i,e){return i.isLimit(e)&&(i.checkChild(e,"$text")||i.checkChild(e,"paragraph"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const t6=R0("Ctrl+A");class n6 extends Fe{static get pluginName(){return"SelectAllEditing"}init(){const e=this.editor,t=e.t,r=e.editing.view.document;e.commands.add("selectAll",new e6(e)),this.listenTo(r,"keydown",(o,s)=>{zd(s)===t6&&(e.execute("selectAll"),s.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}}const i6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class r6 extends Fe{static get pluginName(){return"SelectAllUI"}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(Ht);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Ii))}_createButton(e){const t=this.editor,n=t.locale,r=t.commands.get("selectAll"),o=new e(t.locale),s=n.t;return o.set({label:s("Select all"),icon:i6,keystroke:"Ctrl+A"}),o.bind("isEnabled").to(r,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class o6 extends Fe{static get requires(){return[n6,r6]}static get pluginName(){return"SelectAll"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nE extends Wt{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,n)=>{n[1]={...n[1]};const r=n[1];r.batchType||(r.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,n)=>{n[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const t=this.editor.model.document.selection,n={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,n){const r=this.editor.model,o=r.document,s=[],l=e.map(h=>h.getTransformedByOperations(n)),c=l.flat();for(const h of l){const g=h.filter(b=>b.root!=o.graveyard).filter(b=>!a6(b,c));g.length&&(s6(g),s.push(g[0]))}s.length&&r.change(h=>{h.setSelection(s,{backward:t})})}_undo(e,t){const n=this.editor.model,r=n.document;this._createdBatches.add(t);const o=e.operations.slice().filter(s=>s.isDocumentOperation);o.reverse();for(const s of o){const l=s.baseVersion+1,c=Array.from(r.history.getOperations(l)),g=MF([s.getReversed()],c,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let b of g){const y=b.affectedSelectable;y&&!n.canEditAt(y)&&(b=new mr(b.baseVersion)),t.addOperation(b),n.applyOperation(b),r.history.setOperationAsUndone(s,b)}}}}function s6(i){i.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<i.length;e++){const n=i[e-1].getJoined(i[e],!0);n&&(e--,i.splice(e,2,n))}}function a6(i,e){return e.some(t=>t!==i&&t.containsRange(i,!0))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class l6 extends nE{execute(e=null){const t=e?this._stack.findIndex(o=>o.batch==e):this._stack.length-1,n=this._stack.splice(t,1)[0],r=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(r,()=>{this._undo(n.batch,r);const o=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,o)}),this.fire("revert",n.batch,r),this.refresh()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class c6 extends nE{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const r=e.batch.operations[e.batch.operations.length-1].baseVersion+1,o=this.editor.model.document.history.getOperations(r);this._restoreSelection(e.selection.ranges,e.selection.isBackward,o),this._undo(e.batch,t)}),this.refresh()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class u6 extends Fe{constructor(){super(...arguments),this._batchRegistry=new WeakSet}static get pluginName(){return"UndoEditing"}init(){const e=this.editor,t=e.t;this._undoCommand=new l6(e),this._redoCommand=new c6(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(n,r)=>{const o=r[0];if(!o.isDocumentOperation)return;const s=o.batch,l=this._redoCommand.createdBatches.has(s),c=this._undoCommand.createdBatches.has(s);this._batchRegistry.has(s)||(this._batchRegistry.add(s),s.isUndoable&&(l?this._undoCommand.addBatch(s):c||(this._undoCommand.addBatch(s),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(n,r,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class d6 extends Fe{static get pluginName(){return"UndoUI"}init(){const e=this.editor,t=e.locale,n=e.t,r=t.uiLanguageDirection=="ltr"?it.undo:it.redo,o=t.uiLanguageDirection=="ltr"?it.redo:it.undo;this._addButtonsToFactory("undo",n("Undo"),"CTRL+Z",r),this._addButtonsToFactory("redo",n("Redo"),"CTRL+Y",o)}_addButtonsToFactory(e,t,n,r){const o=this.editor;o.ui.componentFactory.add(e,()=>{const s=this._createButton(Ht,e,t,n,r);return s.set({tooltip:!0}),s}),o.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(Ii,e,t,n,r))}_createButton(e,t,n,r,o){const s=this.editor,l=s.locale,c=s.commands.get(t),h=new e(l);return h.set({label:n,icon:o,keystroke:r}),h.bind("isEnabled").to(c,"isEnabled"),this.listenTo(h,"execute",()=>{s.execute(t),s.editing.view.focus()}),h}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iE extends Fe{static get requires(){return[u6,d6]}static get pluginName(){return"Undo"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class h6 extends Fe{static get requires(){return[kL,tE,Kf,o6,oN,$B,iE]}static get pluginName(){return"Essentials"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fc(i,e,t,n){let r,o=null;typeof n=="function"?r=n:(o=i.commands.get(n),r=()=>{i.execute(n)}),i.model.document.on("change:data",(s,l)=>{if(o&&!o.isEnabled||!e.isEnabled)return;const c=Wi(i.model.document.selection.getRanges());if(!c.isCollapsed||l.isUndo||!l.isLocal)return;const h=Array.from(i.model.document.differ.getChanges()),g=h[0];if(h.length!=1||g.type!=="insert"||g.name!="$text"||g.length!=1)return;const b=g.position.parent;if(b.is("element","codeBlock")||b.is("element","listItem")&&typeof n!="function"&&!["numberedList","bulletedList","todoList"].includes(n)||o&&o.value===!0)return;const y=b.getChild(0),k=i.model.createRangeOn(y);if(!k.containsRange(c)&&!c.end.isEqual(k.end))return;const x=t.exec(y.data.substr(0,c.end.offset));x&&i.model.enqueueChange(D=>{const L=D.createPositionAt(b,0),M=D.createPositionAt(b,x[0].length),V=new Ro(L,M);if(r({match:x})!==!1){D.remove(V);const U=i.model.document.selection.getFirstRange(),K=D.createRangeIn(b);b.isEmpty&&!K.isEqual(U)&&!K.containsRange(U,!0)&&D.remove(b)}V.detach(),i.model.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _d(i,e,t,n){let r,o;t instanceof RegExp?r=t:o=t,o=o||(s=>{let l;const c=[],h=[];for(;(l=r.exec(s))!==null&&!(l&&l.length<4);){let{index:g,"1":b,"2":y,"3":k}=l;const x=b+y+k;g+=l[0].length-x.length;const D=[g,g+b.length],L=[g+b.length+y.length,g+b.length+y.length+k.length];c.push(D),c.push(L),h.push([g+b.length,g+b.length+y.length])}return{remove:c,format:h}}),i.model.document.on("change:data",(s,l)=>{if(l.isUndo||!l.isLocal||!e.isEnabled)return;const c=i.model,h=c.document.selection;if(!h.isCollapsed)return;const g=Array.from(c.document.differ.getChanges()),b=g[0];if(g.length!=1||b.type!=="insert"||b.name!="$text"||b.length!=1)return;const y=h.focus,k=y.parent,{text:x,range:D}=f6(c.createRange(c.createPositionAt(k,0),y),c),L=o(x),M=iy(D.start,L.format,c),V=iy(D.start,L.remove,c);M.length&&V.length&&c.enqueueChange(O=>{if(n(O,M)!==!1){for(const K of V.reverse())O.remove(K);c.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})}})})}function iy(i,e,t){return e.filter(n=>n[0]!==void 0&&n[1]!==void 0).map(n=>t.createRange(i.getShiftedBy(n[0]),i.getShiftedBy(n[1])))}function f6(i,e){let t=i.start;return{text:Array.from(i.getItems()).reduce((r,o)=>!(o.is("$text")||o.is("$textProxy"))||o.getAttribute("code")?(t=e.createPositionAfter(o),""):r+o.data,""),range:e.createRange(t,i.end)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class m6 extends Fe{static get requires(){return[kl]}static get pluginName(){return"Autoformat"}afterInit(){const e=this.editor,t=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&fc(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&fc(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&fc(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&fc(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const t=Wm(this.editor,"bold");_d(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),_d(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(e.get("italic")){const t=Wm(this.editor,"italic");_d(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),_d(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(e.get("code")){const t=Wm(this.editor,"code");_d(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(e.get("strikethrough")){const t=Wm(this.editor,"strikethrough");_d(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const e=this.editor.commands.get("heading");e&&e.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(t=>{const n=t[7],r=new RegExp(`^(#{${n}})\\s$`);fc(this.editor,this,r,()=>{if(!e.isEnabled||e.value===t)return!1;this.editor.execute("heading",{value:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&fc(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&fc(e,this,/^```$/,()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&fc(this.editor,this,/^---$/,"horizontalLine")}}function Wm(i,e){return(t,n)=>{if(!i.commands.get(e).isEnabled)return!1;const o=i.model.schema.getValidRanges(n,e);for(const s of o)t.setAttribute(e,!0,s);t.removeSelectionAttribute(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rv extends Wt{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,r=t.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;t.change(s=>{if(r.isCollapsed)o?s.setSelectionAttribute(this.attributeKey,!0):s.removeSelectionAttribute(this.attributeKey);else{const l=t.schema.getValidRanges(r.getRanges(),this.attributeKey);for(const c of l)o?s.setAttribute(this.attributeKey,o,c):s.removeAttribute(this.attributeKey,c)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,n=e.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(const r of n.getRanges())for(const o of r.getItems())if(t.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const kd="bold";class p6 extends Fe{static get pluginName(){return"BoldEditing"}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:kd}),e.model.schema.setAttributeProperties(kd,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:kd,view:"strong",upcastAlso:["b",n=>{const r=n.getStyle("font-weight");return r&&(r=="bold"||Number(r)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(kd,new rv(e,kd)),e.keystrokes.set("CTRL+B",kd),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ov({editor:i,commandName:e,plugin:t,icon:n,label:r,keystroke:o}){return s=>{const l=i.commands.get(e),c=new s(i.locale);return c.set({label:r,icon:n,keystroke:o,isToggleable:!0}),c.bind("isEnabled").to(l,"isEnabled"),c.bind("isOn").to(l,"value"),c instanceof Ii?c.set({role:"menuitemcheckbox"}):c.set({tooltip:!0}),t.listenTo(c,"execute",()=>{i.execute(e),i.editing.view.focus()}),c}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const mb="bold";class g6 extends Fe{static get pluginName(){return"BoldUI"}init(){const e=this.editor,t=e.locale.t,n=ov({editor:e,commandName:mb,plugin:this,icon:it.bold,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(mb,()=>n(Ht)),e.ui.componentFactory.add("menuBar:"+mb,()=>n(Ii))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b6 extends Fe{static get requires(){return[p6,g6]}static get pluginName(){return"Bold"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Cd="italic";class v6 extends Fe{static get pluginName(){return"ItalicEditing"}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Cd}),e.model.schema.setAttributeProperties(Cd,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Cd,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(Cd,new rv(e,Cd)),e.keystrokes.set("CTRL+I",Cd),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}}const w6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const pb="italic";class y6 extends Fe{static get pluginName(){return"ItalicUI"}init(){const e=this.editor,t=e.locale.t,n=ov({editor:e,commandName:pb,plugin:this,icon:w6,keystroke:"CTRL+I",label:t("Italic")});e.ui.componentFactory.add(pb,()=>n(Ht)),e.ui.componentFactory.add("menuBar:"+pb,()=>n(Ii))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _6 extends Fe{static get requires(){return[v6,y6]}static get pluginName(){return"Italic"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ef="underline";class k6 extends Fe{static get pluginName(){return"UnderlineEditing"}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:ef}),e.model.schema.setAttributeProperties(ef,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ef,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(ef,new rv(e,ef)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}}const C6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const gb="underline";class x6 extends Fe{static get pluginName(){return"UnderlineUI"}init(){const e=this.editor,t=e.locale.t,n=ov({editor:e,commandName:gb,plugin:this,icon:C6,label:t("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add(gb,()=>n(Ht)),e.ui.componentFactory.add("menuBar:"+gb,()=>n(Ii))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class E6 extends Fe{static get requires(){return[k6,x6]}static get pluginName(){return"Underline"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class S6 extends Wt{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,n=t.schema,r=t.document.selection,o=Array.from(r.getSelectedBlocks()),s=e.forceValue===void 0?!this.value:e.forceValue;t.change(l=>{if(!s)this._removeQuote(l,o.filter(jm));else{const c=o.filter(h=>jm(h)||oy(n,h));this._applyQuote(l,c)}})}_getValue(){const e=this.editor.model.document.selection,t=Wi(e.getSelectedBlocks());return!!(t&&jm(t))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,n=Wi(e.getSelectedBlocks());return n?oy(t,n):!1}_removeQuote(e,t){ry(e,t).reverse().forEach(n=>{if(n.start.isAtStart&&n.end.isAtEnd){e.unwrap(n.start.parent);return}if(n.start.isAtStart){const o=e.createPositionBefore(n.start.parent);e.move(n,o);return}n.end.isAtEnd||e.split(n.end);const r=e.createPositionAfter(n.end.parent);e.move(n,r)})}_applyQuote(e,t){const n=[];ry(e,t).reverse().forEach(r=>{let o=jm(r.start);o||(o=e.createElement("blockQuote"),e.wrap(r,o)),n.push(o)}),n.reverse().reduce((r,o)=>r.nextSibling==o?(e.merge(e.createPositionAfter(r)),r):o)}}function jm(i){return i.parent.name=="blockQuote"?i.parent:null}function ry(i,e){let t,n=0;const r=[];for(;n<e.length;){const o=e[n],s=e[n+1];t||(t=i.createPositionBefore(o)),(!s||o.nextSibling!=s)&&(r.push(i.createRange(t,i.createPositionAfter(o))),t=null),n++}return r}function oy(i,e){const t=i.checkChild(e.parent,"blockQuote"),n=i.checkChild(["$root","blockQuote"],e);return t&&n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class T6 extends Fe{static get pluginName(){return"BlockQuoteEditing"}static get requires(){return[Kf,kl]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new S6(e)),t.register("blockQuote",{inheritAllFrom:"$container"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(s=>{const l=e.model.document.differ.getChanges();for(const c of l)if(c.type=="insert"){const h=c.position.nodeAfter;if(!h)continue;if(h.is("element","blockQuote")&&h.isEmpty)return s.remove(h),!0;if(h.is("element","blockQuote")&&!t.checkChild(c.position,h))return s.unwrap(h),!0;if(h.is("element")){const g=s.createRangeIn(h);for(const b of g.getItems())if(b.is("element","blockQuote")&&!t.checkChild(s.createPositionBefore(b),b))return s.unwrap(b),!0}}else if(c.type=="remove"){const h=c.position.parent;if(h.is("element","blockQuote")&&h.isEmpty)return s.remove(h),!0}return!1});const n=this.editor.editing.view.document,r=e.model.document.selection,o=e.commands.get("blockQuote");this.listenTo(n,"enter",(s,l)=>{if(!r.isCollapsed||!o.value)return;r.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),l.preventDefault(),s.stop())},{context:"blockquote"}),this.listenTo(n,"delete",(s,l)=>{if(l.direction!="backward"||!r.isCollapsed||!o.value)return;const c=r.getLastPosition().parent;c.isEmpty&&!c.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),l.preventDefault(),s.stop())},{context:"blockquote"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class A6 extends Fe{static get pluginName(){return"BlockQuoteUI"}init(){const e=this.editor;e.ui.componentFactory.add("blockQuote",()=>{const t=this._createButton(Ht);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:blockQuote",()=>{const t=this._createButton(Ii);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){const t=this.editor,n=t.locale,r=t.commands.get("blockQuote"),o=new e(t.locale),s=n.t;return o.set({label:s("Block quote"),icon:it.quote,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value"),this.listenTo(o,"execute",()=>{t.execute("blockQuote"),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P6 extends Fe{static get requires(){return[T6,A6]}static get pluginName(){return"BlockQuote"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I6 extends Wt{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document,n=Wi(t.selection.getSelectedBlocks());this.value=!!n&&n.is("element","paragraph"),this.isEnabled=!!n&&sy(n,e.schema)}execute(e={}){const t=this.editor.model,n=t.document,r=e.selection||n.selection;t.canEditAt(r)&&t.change(o=>{const s=r.getSelectedBlocks();for(const l of s)!l.is("element","paragraph")&&sy(l,t.schema)&&o.rename(l,"paragraph")})}}function sy(i,e){return e.checkChild(i.parent,"paragraph")&&!e.isObject(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class D6 extends Wt{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const t=this.editor.model,n=e.attributes;let r=e.position;t.canEditAt(r)&&t.change(o=>{if(r=this._findPositionToInsertParagraph(r,o),!r)return;const s=o.createElement("paragraph");n&&t.schema.setAllowedAttributes(s,n,o),t.insertContent(s,r),o.setSelection(s,"in")})}_findPositionToInsertParagraph(e,t){const n=this.editor.model;if(n.schema.checkChild(e,"paragraph"))return e;const r=n.schema.findAllowedParent(e,"paragraph");if(!r)return null;const o=e.parent,s=n.schema.checkChild(o,"$text");return o.isEmpty||s&&e.isAtEnd?n.createPositionAfter(o):!o.isEmpty&&s&&e.isAtStart?n.createPositionBefore(o):t.split(e,r).position}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zf extends Fe{static get pluginName(){return"Paragraph"}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new I6(e)),e.commands.add("insertParagraph",new D6(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(n,{writer:r})=>!Zf.paragraphLikeElements.has(n.name)||n.isEmpty?null:r.createElement("paragraph"),view:/.+/,converterPriority:"low"})}}Zf.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R6 extends Wt{constructor(e,t){super(e),this.modelElements=t}refresh(){const e=Wi(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>ay(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,n=t.document,r=e.value;t.change(o=>{const s=Array.from(n.selection.getSelectedBlocks()).filter(l=>ay(l,r,t.schema));for(const l of s)l.is("element",r)||o.rename(l,r)})}}function ay(i,e,t){return t.checkChild(i.parent,e)&&!t.isObject(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ly="paragraph";class O6 extends Fe{static get pluginName(){return"HeadingEditing"}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Zf]}init(){const e=this.editor,t=e.config.get("heading.options"),n=[];for(const r of t)r.model!=="paragraph"&&(e.model.schema.register(r.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(r),n.push(r.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new R6(e,n))}afterInit(){const e=this.editor,t=e.commands.get("enter"),n=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(r,o)=>{const s=e.model.document.selection.getFirstPosition().parent;n.some(c=>s.is("element",c.model))&&!s.is("element",ly)&&s.childCount===0&&o.writer.rename(s,ly)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Zo.low+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function F6(i){const e=i.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return i.config.get("heading.options").map(n=>{const r=t[n.title];return r&&r!=n.title&&(n.title=r),n})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M6 extends Fe{static get pluginName(){return"HeadingUI"}init(){const e=this.editor,t=e.t,n=F6(e),r=t("Choose heading"),o=t("Heading");e.ui.componentFactory.add("heading",s=>{const l={},c=new Or,h=e.commands.get("heading"),g=e.commands.get("paragraph"),b=[h];for(const k of n){const x={type:"button",model:new yl({label:k.title,class:k.class,role:"menuitemradio",withText:!0})};k.model==="paragraph"?(x.model.bind("isOn").to(g,"value"),x.model.set("commandName","paragraph"),b.push(g)):(x.model.bind("isOn").to(h,"value",D=>D===k.model),x.model.set({commandName:"heading",commandValue:k.model})),c.add(x),l[k.model]=k.title}const y=Dr(s);return xl(y,c,{ariaLabel:o,role:"menu"}),y.buttonView.set({ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),y.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),y.bind("isEnabled").toMany(b,"isEnabled",(...k)=>k.some(x=>x)),y.buttonView.bind("label").to(h,"value",g,"value",(k,x)=>{const D=x?"paragraph":k;return typeof D=="boolean"||!l[D]?r:l[D]}),y.buttonView.bind("ariaLabel").to(h,"value",g,"value",(k,x)=>{const D=x?"paragraph":k;return typeof D=="boolean"||!l[D]?o:`${l[D]}, ${o}`}),this.listenTo(y,"execute",k=>{const{commandName:x,commandValue:D}=k.source;e.execute(x,D?{value:D}:void 0),e.editing.view.focus()}),y}),e.ui.componentFactory.add("menuBar:heading",s=>{const l=new Qo(s),c=e.commands.get("heading"),h=e.commands.get("paragraph"),g=[c],b=new vu(s);l.set({class:"ck-heading-dropdown"}),b.set({ariaLabel:t("Heading"),role:"menu"}),l.buttonView.set({label:t("Heading")}),l.panelView.children.add(b);for(const y of n){const k=new Au(s,l),x=new Ii(s);k.children.add(x),b.items.add(k),x.set({isToggleable:!0,label:y.title,role:"menuitemradio",class:y.class}),x.delegate("execute").to(l),x.on("execute",()=>{const D=y.model==="paragraph"?"paragraph":"heading";e.execute(D,{value:y.model}),e.editing.view.focus()}),y.model==="paragraph"?(x.bind("isOn").to(h,"value"),g.push(h)):x.bind("isOn").to(c,"value",D=>D===y.model)}return l.bind("isEnabled").toMany(g,"isEnabled",(...y)=>y.some(k=>k)),l})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L6 extends Fe{static get requires(){return[O6,M6]}static get pluginName(){return"Heading"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B6{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,n,r)=>{if(!r.consumable.test(n.item,"attribute:linkHref")||!(n.item.is("selection")||r.schema.isInline(n.item)))return;const o=r.writer,s=o.document.selection;for(const l of this._definitions){const c=o.createAttributeElement("a",l.attributes,{priority:5});l.classes&&o.addClass(l.classes,c);for(const h in l.styles)o.setStyle(h,l.styles[h],c);o.setCustomProperty("link",!0,c),l.callback(n.attributeNewValue)?n.item.is("selection")?o.wrap(s.getFirstRange(),c):o.wrap(r.mapper.toViewRange(n.range),c):o.unwrap(r.mapper.toViewRange(n.range),c)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,n,{writer:r,mapper:o})=>{const s=o.toViewElement(n.item),l=Array.from(s.getChildren()).find(c=>c.is("element","a"));for(const c of this._definitions){const h=Ta(c.attributes);if(c.callback(n.attributeNewValue)){for(const[g,b]of h)g==="class"?r.addClass(b,l):r.setAttribute(g,b,l);c.classes&&r.addClass(c.classes,l);for(const g in c.styles)r.setStyle(g,c.styles[g],l)}else{for(const[g,b]of h)g==="class"?r.removeClass(b,l):r.removeAttribute(g,l);c.classes&&r.removeClass(c.classes,l);for(const g in c.styles)r.removeStyle(g,l)}}})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const N6=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,V6="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",z6=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,H6=/^((\w+:(\/{2,})?)|(\W))/i,U6=["https?","ftps?","mailto"],af="Ctrl+K";function W6(i){return i.is("attributeElement")&&!!i.getCustomProperty("link")}function cy(i,{writer:e}){const t=e.createAttributeElement("a",{href:i},{priority:5});return e.setCustomProperty("link",!0,t),t}function rE(i,e=U6){const t=String(i),n=e.join("|"),r=new RegExp(`${V6.replace("<protocols>",n)}`,"i");return j6(t,r)?t:"#"}function j6(i,e){return!!i.replace(N6,"").match(e)}function $6(i,e){const t={"Open in a new tab":i("Open in a new tab"),Downloadable:i("Downloadable")};return e.forEach(n=>("label"in n&&t[n.label]&&(n.label=t[n.label]),n)),e}function q6(i){const e=[];if(i)for(const[t,n]of Object.entries(i)){const r=Object.assign({},n,{id:`link${_k(t)}`});e.push(r)}return e}function i0(i,e){return i?e.checkAttribute(i.name,"linkHref"):!1}function G6(i){return z6.test(i)}function sv(i,e){const t=G6(i)?"mailto:":e,n=!!t&&!oE(i);return i&&n?t+i:i}function oE(i){return H6.test(i)}function uy(i){window.open(i,"_blank","noopener")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class K6 extends Wt{constructor(){super(...arguments),this.manualDecorators=new Or,this.automaticDecorators=new B6}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,n=t.getSelectedElement()||Wi(t.getSelectedBlocks());i0(n,e.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(n,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const r of this.manualDecorators)r.value=this._getDecoratorStateFromModel(r.id)}execute(e,t={}){const n=this.editor.model,r=n.document.selection,o=[],s=[];for(const l in t)t[l]?o.push(l):s.push(l);n.change(l=>{if(r.isCollapsed){const c=r.getFirstPosition();if(r.hasAttribute("linkHref")){const h=dy(r);let g=Gf(c,"linkHref",r.getAttribute("linkHref"),n);r.getAttribute("linkHref")===h&&(g=this._updateLinkContent(n,l,g,e)),l.setAttribute("linkHref",e,g),o.forEach(b=>{l.setAttribute(b,!0,g)}),s.forEach(b=>{l.removeAttribute(b,g)}),l.setSelection(l.createPositionAfter(g.end.nodeBefore))}else if(e!==""){const h=Ta(r.getAttributes());h.set("linkHref",e),o.forEach(b=>{h.set(b,!0)});const{end:g}=n.insertContent(l.createText(e,h),c);l.setSelection(g)}["linkHref",...o,...s].forEach(h=>{l.removeSelectionAttribute(h)})}else{const c=n.schema.getValidRanges(r.getRanges(),"linkHref"),h=[];for(const b of r.getSelectedBlocks())n.schema.checkAttribute(b,"linkHref")&&h.push(l.createRangeOn(b));const g=h.slice();for(const b of c)this._isRangeToUpdate(b,h)&&g.push(b);for(const b of g){let y=b;if(g.length===1){const k=dy(r);r.getAttribute("linkHref")===k&&(y=this._updateLinkContent(n,l,b,e),l.setSelection(l.createSelection(y)))}l.setAttribute("linkHref",e,y),o.forEach(k=>{l.setAttribute(k,!0,y)}),s.forEach(k=>{l.removeAttribute(k,y)})}}})}_getDecoratorStateFromModel(e){const t=this.editor.model,n=t.document.selection,r=n.getSelectedElement();return i0(r,t.schema)?r.getAttribute(e):n.getAttribute(e)}_isRangeToUpdate(e,t){for(const n of t)if(n.containsRange(e))return!1;return!0}_updateLinkContent(e,t,n,r){const o=t.createText(r,{linkHref:r});return e.insertContent(o,n)}}function dy(i){if(i.isCollapsed){const e=i.getFirstPosition();return e.textNode&&e.textNode.data}else{const e=Array.from(i.getFirstRange().getItems());if(e.length>1)return null;const t=e[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Z6 extends Wt{refresh(){const e=this.editor.model,t=e.document.selection,n=t.getSelectedElement();i0(n,e.schema)?this.isEnabled=e.schema.checkAttribute(n,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,n=t.document.selection,r=e.commands.get("link");t.change(o=>{const s=n.isCollapsed?[Gf(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),t)]:t.schema.getValidRanges(n.getRanges(),"linkHref");for(const l of s)if(o.removeAttribute("linkHref",l),r)for(const c of r.manualDecorators)o.removeAttribute(c.id,l)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Y6 extends Vn(){constructor({id:e,label:t,attributes:n,classes:r,styles:o,defaultValue:s}){super(),this.id=e,this.set("value",void 0),this.defaultValue=s,this.label=t,this.attributes=n,this.classes=r,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const J6="ck-link_selected",hy="automatic",X6="manual",Q6=/^(https?:)?\/\//;class lg extends Fe{static get pluginName(){return"LinkEditing"}static get requires(){return[z1,Wx,Ys]}constructor(e){super(e),e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const e=this.editor,t=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:cy}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(o,s)=>cy(rE(o,t),s)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:o=>o.getAttribute("href")}}),e.commands.add("link",new K6(e)),e.commands.add("unlink",new Z6(e));const n=$6(e.t,q6(e.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(o=>o.mode===hy)),this._enableManualDecorators(n.filter(o=>o.mode===X6)),e.plugins.get(z1).registerAttribute("linkHref"),QB(e,"linkHref","a",J6),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){const t=this.editor,r=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&r.add({id:"linkIsExternal",mode:hy,callback:o=>!!o&&Q6.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),r.add(e),r.length&&t.conversion.for("downcast").add(r.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,r=t.commands.get("link").manualDecorators;e.forEach(o=>{t.model.schema.extend("$text",{allowAttributes:o.id});const s=new Y6(o);r.add(s),t.conversion.for("downcast").attributeToElement({model:s.id,view:(l,{writer:c,schema:h},{item:g})=>{if((g.is("selection")||h.isInline(g))&&l){const b=c.createAttributeElement("a",s.attributes,{priority:5});s.classes&&c.addClass(s.classes,b);for(const y in s.styles)c.setStyle(y,s.styles[y],b);return c.setCustomProperty("link",!0,b),b}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...s._createPattern()},model:{key:s.id}})})}_enableLinkOpen(){const e=this.editor,n=e.editing.view.document;this.listenTo(n,"click",(r,o)=>{if(!(Yt.isMac?o.domEvent.metaKey:o.domEvent.ctrlKey))return;let l=o.domTarget;if(l.tagName.toLowerCase()!="a"&&(l=l.closest("a")),!l)return;const c=l.getAttribute("href");c&&(r.stop(),o.preventDefault(),uy(c))},{context:"$capture"}),this.listenTo(n,"keydown",(r,o)=>{const l=e.commands.get("link").value;l&&o.keyCode===Cn.enter&&o.altKey&&(r.stop(),uy(l))})}_enableSelectionAttributesFixer(){const t=this.editor.model,n=t.document.selection;this.listenTo(n,"change:attribute",(r,{attributeKeys:o})=>{!o.includes("linkHref")||n.hasAttribute("linkHref")||t.change(s=>{e8(s,t8(t.schema))})})}_enableClipboardIntegration(){const e=this.editor,t=e.model,n=this.editor.config.get("link.defaultProtocol");n&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(r,o)=>{t.change(s=>{const l=s.createRangeIn(o.content);for(const c of l.getItems())if(c.hasAttribute("linkHref")){const h=sv(c.getAttribute("linkHref"),n);s.setAttribute("linkHref",h,c)}})})}}function e8(i,e){i.removeSelectionAttribute("linkHref");for(const t of e)i.removeSelectionAttribute(t)}function t8(i){return i.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class n8 extends mt{constructor(e,t,n){super(e),this.focusTracker=new Jn,this.keystrokes=new di,this._focusables=new Wr;const r=e.t;this._validators=n,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(r("Save"),it.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),it.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const o=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&o.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:o,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),xu({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const e=this.locale.t,t=new lr(this.locale,Jo);return t.fieldView.inputMode="url",t.label=e("Link URL"),t}_createButton(e,t,n,r){const o=new Ht(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),r&&o.delegate("execute").to(this,r),o}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const n of e.manualDecorators){const r=new ig(this.locale);r.set({name:n.id,label:n.label,withText:!0}),r.bind("isOn").toMany([n,e],"value",(o,s)=>s===void 0&&o===void 0?!!n.defaultValue:!!o),r.on("execute",()=>{n.set("value",!r.isOn)}),t.add(r)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const n=new mt;n.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(r=>({tag:"li",children:[r],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(n)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}const i8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class r8 extends mt{constructor(e,t={}){super(e),this.focusTracker=new Jn,this.keystrokes=new di,this._focusables=new Wr;const n=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(n("Unlink"),i8,"unlink"),this.editButtonView=this._createButton(n("Edit link"),it.pencil,"edit"),this.set("href",void 0),this._linkConfig=t,this._focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,n){const r=new Ht(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.delegate("execute").to(this,n),r}_createPreviewButton(){const e=new Ht(this.locale),t=this.bindTemplate,n=this.t;return e.set({withText:!0,tooltip:n("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",r=>r&&rE(r,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",r=>r||n("This link has no URL")),e.bind("isEnabled").to(this,"href",r=>!!r),e.template.tag="a",e.template.eventListeners={},e}}const sE='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ka="link-ui";class aE extends Fe{constructor(){super(...arguments),this.actionsView=null,this.formView=null}static get requires(){return[_l]}static get pluginName(){return"LinkUI"}init(){const e=this.editor,t=this.editor.t;e.editing.view.addObserver(wM),this._balloon=e.plugins.get(_l),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:ka,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:ka,view:(n,{writer:r})=>{if(!n.markerRange.isCollapsed)return null;const o=r.createUIElement("span");return r.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:af},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,t=new r8(e.locale,e.config.get("link")),n=e.commands.get("link"),r=e.commands.get("unlink");return t.bind("href").to(n,"value"),t.editButtonView.bind("isEnabled").to(n),t.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(o,s)=>{this._hideUI(),s()}),t.keystrokes.set(af,(o,s)=>{this._addFormView(),s()}),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),n=e.config.get("link.defaultProtocol"),r=new(Yp(n8))(e.locale,t,o8(e));return r.urlInputView.fieldView.bind("value").to(t,"value"),r.urlInputView.bind("isEnabled").to(t,"isEnabled"),r.saveButtonView.bind("isEnabled").to(t,"isEnabled"),this.listenTo(r,"submit",()=>{if(r.isValid()){const{value:o}=r.urlInputView.fieldView.element,s=sv(o,n);e.execute("link",s,r.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(r.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(o,s)=>{this._closeFormView(),s()}),r}_createToolbarLinkButton(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const t=this._createButton(Ht);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:link",()=>{const t=this._createButton(Ii);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){const t=this.editor,n=t.locale,r=t.commands.get("link"),o=new e(t.locale),s=n.t;return o.set({label:s("Link"),icon:sE,keystroke:af,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",l=>!!l),this.listenTo(o,"execute",()=>this._showUI(!0)),o}_enableBalloonActivators(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(af,(n,r)=>{r(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),Cu({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let n=this._getSelectedLinkElement(),r=s();const o=()=>{const l=this._getSelectedLinkElement(),c=s();n&&!l||!n&&c!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=l,r=c};function s(){return t.selection.focus.getAncestors().reverse().find(l=>l.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,n=e.document;let r;if(t.markers.has(ka)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(ka)),s=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));r=e.domConverter.viewRangeToDom(s)}else r=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(n.selection.getFirstRange())};return{target:r}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,n=t.getSelectedElement();if(t.isCollapsed||n&&Hi(n))return bb(t.getFirstPosition());{const r=t.getFirstRange().getTrimmed(),o=bb(r.start),s=bb(r.end);return!o||o!=s?null:e.createRangeIn(o).getTrimmed().isEqual(r)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const n=e.document.selection.getFirstRange();if(e.markers.has(ka))t.updateMarker(ka,{range:n});else if(n.start.isAtEnd){const r=n.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:n});t.addMarker(ka,{usingOperation:!1,affectsData:!1,range:t.createRange(r,n.end)})}else t.addMarker(ka,{usingOperation:!1,affectsData:!1,range:n})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(ka)&&e.change(t=>{t.removeMarker(ka)})}}function bb(i){return i.getAncestors().find(e=>W6(e))||null}function o8(i){const e=i.t,t=i.config.get("link.allowCreatingEmptyLinks");return[n=>{if(!t&&!n.url.length)return e("Link URL must not be empty.")}]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const s8=4,lE=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),a8=2;class l8 extends Fe{static get requires(){return[kl,lg]}static get pluginName(){return"AutoLink"}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?Gf(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){const r=this.editor.model,o=r.document.selection,s=o.getFirstPosition(),l=o.getLastPosition();let c=t.getJoined(this._expandLinkRange(r,s)||t);c&&(c=c.getJoined(this._expandLinkRange(r,l)||t)),c&&(c.start.isBefore(s)||c.end.isAfter(l))&&e.setSelection(c)}_enablePasteLinking(){const e=this.editor,t=e.model,n=t.document.selection,r=e.plugins.get("ClipboardPipeline"),o=e.commands.get("link");r.on("inputTransformation",(s,l)=>{if(!this.isEnabled||!o.isEnabled||n.isCollapsed||l.method!=="paste"||n.rangeCount>1)return;const c=n.getFirstRange(),h=l.dataTransfer.getData("text/plain");if(!h)return;const g=h.match(lE);g&&g[2]===h&&(t.change(b=>{this._selectEntireLinks(b,c),o.execute(h)}),s.stop())},{priority:"high"})}_enableTypingHandling(){const e=this.editor,t=new qx(e.model,n=>{if(!c8(n))return;const r=fy(n.substr(0,n.length-1));if(r)return{url:r}});t.on("matched:data",(n,r)=>{const{batch:o,range:s,url:l}=r;if(!o.isTyping)return;const c=s.end.getShiftedBy(-1),h=c.getShiftedBy(-l.length),g=e.model.createRange(h,c);this._applyAutoLink(l,g)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,n=e.commands.get("enter");n&&n.on("execute",()=>{const r=t.document.selection.getFirstPosition();if(!r.parent.previousSibling)return;const o=t.createRangeIn(r.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,n=e.commands.get("shiftEnter");n&&n.on("execute",()=>{const r=t.document.selection.getFirstPosition(),o=t.createRange(t.createPositionAt(r.parent,0),r.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:n,range:r}=$x(e,t),o=fy(n);if(o){const s=t.createRange(r.end.getShiftedBy(-o.length),r.end);this._applyAutoLink(o,s)}}_applyAutoLink(e,t){const n=this.editor.model,r=this.editor.config.get("link.defaultProtocol"),o=sv(e,r);!this.isEnabled||!u8(t,n)||!oE(o)||d8(t)||this._persistAutoLink(o,t)}_persistAutoLink(e,t){const n=this.editor.model,r=this.editor.plugins.get("Delete");n.enqueueChange(o=>{o.setAttribute("linkHref",e,t),n.enqueueChange(()=>{r.requestUndoOnBackspace()})})}}function c8(i){return i.length>s8&&i[i.length-1]===" "&&i[i.length-2]!==" "}function fy(i){const e=lE.exec(i);return e?e[a8]:null}function u8(i,e){return e.schema.checkAttributeInSelection(e.createSelection(i),"linkHref")}function d8(i){const e=i.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class h8 extends Fe{static get requires(){return[lg,aE,l8]}static get pluginName(){return"Link"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class f8 extends Fe{static get requires(){return["ImageEditing","ImageUtils",lg]}static get pluginName(){return"LinkImageEditing"}afterInit(){const e=this.editor,t=e.model.schema;e.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["linkHref"]}),e.conversion.for("upcast").add(m8(e)),e.conversion.for("downcast").add(p8(e)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const e=this.editor,n=e.commands.get("link").automaticDecorators;n.length&&e.conversion.for("downcast").add(n.getDispatcherForLinkedImage())}_enableManualDecorators(){const e=this.editor,t=e.commands.get("link");for(const n of t.manualDecorators)e.plugins.has("ImageBlockEditing")&&e.model.schema.extend("imageBlock",{allowAttributes:n.id}),e.plugins.has("ImageInlineEditing")&&e.model.schema.extend("imageInline",{allowAttributes:n.id}),e.conversion.for("downcast").add(g8(n)),e.conversion.for("upcast").add(b8(e,n))}}function m8(i){const e=i.plugins.has("ImageInlineEditing"),t=i.plugins.get("ImageUtils");return n=>{n.on("element:a",(r,o,s)=>{const l=o.viewItem,c=t.findViewImgElement(l);if(!c)return;const h=c.findAncestor(k=>t.isBlockImageView(k));if(e&&!h)return;const g={attributes:["href"]};if(!s.consumable.consume(l,g))return;const b=l.getAttribute("href");if(!b)return;let y=o.modelCursor.parent;if(!y.is("element","imageBlock")){const k=s.convertItem(c,o.modelCursor);o.modelRange=k.modelRange,o.modelCursor=k.modelCursor,y=o.modelCursor.nodeBefore}y&&y.is("element","imageBlock")&&s.writer.setAttribute("linkHref",b,y)},{priority:"high"})}}function p8(i){const e=i.plugins.get("ImageUtils");return t=>{t.on("attribute:linkHref:imageBlock",(n,r,o)=>{if(!o.consumable.consume(r.item,n.name))return;const s=o.mapper.toViewElement(r.item),l=o.writer,c=Array.from(s.getChildren()).find(b=>b.is("element","a")),h=e.findViewImgElement(s),g=h.parent.is("element","picture")?h.parent:h;if(c)r.attributeNewValue?l.setAttribute("href",r.attributeNewValue,c):(l.move(l.createRangeOn(g),l.createPositionAt(s,0)),l.remove(c));else{const b=l.createContainerElement("a",{href:r.attributeNewValue});l.insert(l.createPositionAt(s,0),b),l.move(l.createRangeOn(g),l.createPositionAt(b,0))}},{priority:"high"})}}function g8(i){return e=>{e.on(`attribute:${i.id}:imageBlock`,(t,n,r)=>{const o=r.mapper.toViewElement(n.item),s=Array.from(o.getChildren()).find(l=>l.is("element","a"));if(s){for(const[l,c]of Ta(i.attributes))r.writer.setAttribute(l,c,s);i.classes&&r.writer.addClass(i.classes,s);for(const l in i.styles)r.writer.setStyle(l,i.styles[l],s)}})}}function b8(i,e){const t=i.plugins.has("ImageInlineEditing"),n=i.plugins.get("ImageUtils");return r=>{r.on("element:a",(o,s,l)=>{const c=s.viewItem,h=n.findViewImgElement(c);if(!h)return;const g=h.findAncestor(x=>n.isBlockImageView(x));if(t&&!g)return;const y=new wc(e._createPattern()).match(c);if(!y||!l.consumable.consume(c,y.match))return;const k=s.modelCursor.nodeBefore||s.modelCursor.parent;l.writer.setAttribute(e.id,!0,k)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class v8 extends Fe{static get requires(){return[lg,aE,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",(n,r)=>{this._isSelectedLinkedImage(e.model.document.selection)&&(r.preventDefault(),n.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("linkImage",n=>{const r=new Ht(n),o=e.plugins.get("LinkUI"),s=e.commands.get("link");return r.set({isEnabled:!0,label:t("Link image"),icon:sE,keystroke:af,tooltip:!0,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value",l=>!!l),this.listenTo(r,"execute",()=>{this._isSelectedLinkedImage(e.model.document.selection)?o._addActionsView():o._showUI(!0)}),r})}_isSelectedLinkedImage(e){const t=e.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(t)&&t.hasAttribute("linkHref")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class w8 extends Fe{static get requires(){return[f8,v8]}static get pluginName(){return"LinkImage"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Es{constructor(e,t){this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=An(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){const r=new this(e,t)[Symbol.iterator]();return Wi(r)}*[Symbol.iterator](){const e=[];for(const{node:t}of Yf(this._getStartNode(),this._isForward?"forward":"backward")){const n=t.getAttribute("listIndent");if(n<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=n}else if(n>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*e,e.length=0);break}continue}if(this._sameAttributes.some(r=>t.getAttribute(r)!==this._startElement.getAttribute(r)))break}e.length&&(yield*e,e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}function*Yf(i,e="forward"){const t=e=="forward",n=[];let r=null;for(;pr(i);){let o=null;if(r){const s=i.getAttribute("listIndent"),l=r.getAttribute("listIndent");s>l?n[l]=r:s<l?(o=n[s],n.length=s):o=r}yield{node:i,previous:r,previousNodeInList:o},r=i,i=t?i.nextSibling:i.previousSibling}}class y8{constructor(e){this._listHead=e}[Symbol.iterator](){return Yf(this._listHead,"forward")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qd{static next(){return xs()}}function pr(i){return!!i&&i.is("element")&&i.hasAttribute("listItemId")}function av(i,e={}){return[..._c(i,{...e,direction:"backward"}),..._c(i,{...e,direction:"forward"})]}function _c(i,e={}){const t=e.direction=="forward",n=Array.from(new Es(i,{...e,includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"}));return t?n:n.reverse()}function _8(i){return Array.from(new Es(i,{direction:"forward",higherIndent:!0}))}function cE(i,e){const t=new Es(i,{sameIndent:!0,sameAttributes:"listType",...e}),n=new Es(i,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...e});return[...Array.from(t).reverse(),...n]}function wu(i){return!Es.first(i,{sameIndent:!0,sameAttributes:"listItemId"})}function my(i){return!Es.first(i,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function Jf(i,e={}){i=An(i);const t=e.withNested!==!1,n=new Set;for(const r of i)for(const o of av(r,{higherIndent:t}))n.add(o);return Pu(n)}function k8(i){i=An(i);const e=new Set;for(const t of i)for(const n of cE(t))e.add(n);return Pu(e)}function lv(i,e){const t=_c(i,{direction:"forward"}),n=qd.next();for(const r of t)e.setAttribute("listItemId",n,r);return t}function r0(i,e,t){const n={};for(const[o,s]of e.getAttributes())o.startsWith("list")&&(n[o]=s);const r=_c(i,{direction:"forward"});for(const o of r)t.setAttributes(n,o);return r}function o0(i,e,{expand:t,indentBy:n=1}={}){i=An(i);const r=t?Jf(i):i;for(const o of r){const s=o.getAttribute("listIndent")+n;s<0?cg(o,e):e.setAttribute("listIndent",s,o)}return r}function C8(i,e){i=An(i);const t=Jf(i),n=new Set,r=Math.min(...t.map(s=>s.getAttribute("listIndent"))),o=new Map;for(const s of t)o.set(s,Es.first(s,{lowerIndent:!0}));for(const s of t){if(n.has(s))continue;n.add(s);const l=s.getAttribute("listIndent")-1;if(l<0){cg(s,e);continue}if(s.getAttribute("listIndent")==r){const c=S8(s,o.get(s),e);for(const h of c)n.add(h);if(c.length)continue}e.setAttribute("listIndent",l,s)}return Pu(n)}function cg(i,e){i=An(i);for(const t of i)t.is("element","listItem")&&e.rename(t,"paragraph");for(const t of i)for(const n of t.getAttributeKeys())n.startsWith("list")&&e.removeAttribute(n,t);return i}function Ff(i){if(!i.length)return!1;const e=i[0].getAttribute("listItemId");return e?!i.some(t=>t.getAttribute("listItemId")!=e):!1}function x8(i,e){const t=[];let n=Number.POSITIVE_INFINITY;for(const{node:r}of Yf(i.nextSibling,"forward")){const o=r.getAttribute("listIndent");if(o==0)break;o<n&&(n=o);const s=o-n;e.setAttribute("listIndent",s,r),t.push(r)}return t}function Pu(i){return Array.from(i).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function Mf(i){const e=i.document.selection.getSelectedElement();return e&&i.schema.isObject(e)&&i.schema.isBlock(e)?e:null}function vb(i,e){return e.checkChild(i.parent,"listItem")&&e.checkChild(i,"$text")&&!e.isObject(i)}function E8(i){return i=="numbered"||i=="customNumbered"}function S8(i,e,t){return _c(e,{direction:"forward"}).pop().index>i.index?r0(i,e,t):[]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class py extends Wt{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=gy(e.document.selection);e.change(n=>{const r=[];Ff(t)&&!wu(t[0])?(this._direction=="forward"&&r.push(...o0(t,n)),r.push(...lv(t[0],n))):this._direction=="forward"?r.push(...o0(t,n,{expand:!0})):r.push(...C8(t,n));for(const o of r){if(!o.hasAttribute("listType"))continue;const s=Es.first(o,{sameIndent:!0});s&&n.setAttribute("listType",s.getAttribute("listType"),o)}this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Pu(new Set(e)))}_checkEnabled(){let e=gy(this.editor.model.document.selection),t=e[0];if(!t)return!1;if(this._direction=="backward"||Ff(e)&&!wu(e[0]))return!0;e=Jf(e),t=e[0];const n=Es.first(t,{sameIndent:!0});return n?n.getAttribute("listType")==t.getAttribute("listType"):!1}}function gy(i){const e=Array.from(i.getSelectedBlocks()),t=e.findIndex(n=>!pr(n));return t!=-1&&(e.length=t),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $m extends Wt{constructor(e,t,n={}){super(e),this.type=t,this._listWalkerOptions=n.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,n=t.document,r=Mf(t),o=Array.from(n.selection.getSelectedBlocks()).filter(l=>t.schema.checkAttribute(l,"listType")||vb(l,t.schema)),s=e.forceValue!==void 0?!e.forceValue:this.value;t.change(l=>{if(s){const c=o[o.length-1],h=_c(c,{direction:"forward"}),g=[];h.length>1&&g.push(...lv(h[1],l)),g.push(...cg(o,l)),g.push(...x8(c,l)),this._fireAfterExecute(g)}else if((r||n.selection.isCollapsed)&&pr(o[0])){const c=cE(r||o[0],this._listWalkerOptions);for(const h of c)l.setAttributes({...e.additionalAttributes,listType:this.type},h);this._fireAfterExecute(c)}else{const c=[];for(const h of o)if(!h.hasAttribute("listType"))!h.is("element","listItem")&&vb(h,t.schema)&&l.rename(h,"listItem"),l.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:qd.next(),listType:this.type},h),c.push(h);else for(const g of Jf(h,{withNested:!1}))g.getAttribute("listType")!=this.type&&(l.setAttributes({...e.additionalAttributes,listType:this.type},g),c.push(g));this._fireAfterExecute(c)}})}_fireAfterExecute(e){this.fire("afterExecute",Pu(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,t=Array.from(e.getSelectedBlocks());if(!t.length)return!1;for(const n of t)if(n.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,t=e.schema,n=e.document.selection,r=Array.from(n.getSelectedBlocks());if(!r.length)return!1;if(this.value)return!0;for(const o of r)if(t.checkAttribute(o,"listType")||vb(o,t))return!0;return!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class by extends Wt{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const t=this.editor.model,n=t.document.selection,r=[];t.change(o=>{const{firstElement:s,lastElement:l}=this._getMergeSubjectElements(n,e),c=s.getAttribute("listIndent")||0,h=l.getAttribute("listIndent"),g=l.getAttribute("listItemId");if(c!=h){const b=_8(l);r.push(...o0([l,...b],o,{indentBy:c-h,expand:c<h}))}if(e){let b=n;n.isCollapsed&&(b=o.createSelection(o.createRange(o.createPositionAt(s,"end"),o.createPositionAt(l,0)))),t.deleteContent(b,{doNotResetEntireContent:n.isCollapsed});const y=b.getLastPosition().parent,k=y.nextSibling;r.push(y),k&&k!==l&&k.getAttribute("listItemId")==g&&r.push(...r0(k,y,o))}else r.push(...r0(l,s,o));this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Pu(new Set(e)))}_checkEnabled(){const e=this.editor.model,t=e.document.selection,n=Mf(e);if(t.isCollapsed||n){const r=n||t.getFirstPosition().parent;if(!pr(r))return!1;const o=this._direction=="backward"?r.previousSibling:r.nextSibling;if(!o||Ff([r,o]))return!1}else{const r=t.getLastPosition(),o=t.getFirstPosition();if(r.parent===o.parent||!pr(r.parent))return!1}return!0}_getMergeSubjectElements(e,t){const n=this.editor.model,r=Mf(n);let o,s;if(e.isCollapsed||r){const l=r||e.getFirstPosition().parent,c=wu(l);this._direction=="backward"?(s=l,c&&!t?o=Es.first(l,{sameIndent:!0,lowerIndent:!0}):o=l.previousSibling):(o=l,s=l.nextSibling)}else o=e.getFirstPosition().parent,s=e.getLastPosition().parent;return{firstElement:o,lastElement:s}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vy extends Wt{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(t=>{const n=lv(this._getStartBlock(),t);this._fireAfterExecute(n)})}_fireAfterExecute(e){this.fire("afterExecute",Pu(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,t=this._getStartBlock();return e.isCollapsed&&pr(t)&&!wu(t)}_getStartBlock(){const t=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?t:t.nextSibling}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class T8 extends Fe{static get pluginName(){return"ListUtils"}expandListBlocksToCompleteList(e){return k8(e)}isFirstBlockOfListItem(e){return wu(e)}isListItemBlock(e){return pr(e)}expandListBlocksToCompleteItems(e,t={}){return Jf(e,t)}isNumberedListType(e){return E8(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function A8(i){return i.is("element","ol")||i.is("element","ul")}function s0(i){return i.is("element","li")}function P8(i){let e=0,t=i.parent;for(;t;){if(s0(t))e++;else{const n=t.previousSibling;n&&s0(n)&&e++}t=t.parent}return e}function I8(i,e,t,n=dE(t,e)){return i.createAttributeElement(uE(t),null,{priority:2*e/100-100,id:n})}function D8(i,e,t){return i.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function uE(i){return i=="numbered"||i=="customNumbered"?"ol":"ul"}function dE(i,e){return`list-${i}-${e}`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $s(i,e){const t=i.nodeBefore;if(pr(t)){let n=t;for(const{node:r}of Yf(n,"backward"))if(n=r,e.has(n))return;e.set(t,n)}else{const n=i.nodeAfter;pr(n)&&e.set(n,n)}}function R8(i,e){let t=0,n=-1,r=null,o=!1;for(const{node:s}of i){const l=s.getAttribute("listIndent");if(l>t){let c;r===null?(r=l-t,c=t):(r>l&&(r=l),c=l-r),c>n+1&&(c=n+1),e.setAttribute("listIndent",c,s),o=!0,n=c}else r=null,t=l+1,n=l}return o}function O8(i,e,t){const n=new Set;let r=!1;for(const{node:o}of i){if(n.has(o))continue;let s=o.getAttribute("listType"),l=o.getAttribute("listItemId");if(e.has(l)&&(l=qd.next()),e.add(l),o.is("element","listItem")){o.getAttribute("listItemId")!=l&&(t.setAttribute("listItemId",l,o),r=!0);continue}for(const c of _c(o,{direction:"forward"}))n.add(c),c.getAttribute("listType")!=s&&(l=qd.next(),s=c.getAttribute("listType")),c.getAttribute("listItemId")!=l&&(t.setAttribute("listItemId",l,c),r=!0)}return r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function F8(){return(i,e,t)=>{const{writer:n,schema:r}=t;if(!e.modelRange)return;const o=Array.from(e.modelRange.getItems({shallow:!0})).filter(b=>r.checkAttribute(b,"listItemId"));if(!o.length)return;const s=qd.next(),l=P8(e.viewItem);let c=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const h=o[0].getAttribute("listType");h&&(c=h);const g={listItemId:s,listIndent:l,listType:c};for(const b of o)b.hasAttribute("listItemId")||n.setAttributes(g,b);o.length>1&&o[1].getAttribute("listItemId")!=g.listItemId&&t.keepEmptyElement(o[0])}}function M8(i,e,t,n){return()=>{const l=i.document.differ.getChanges(),c=[],h=new Map,g=new Set;for(const b of l)if(b.type=="insert"&&b.name!="$text")$s(b.position,h),b.attributes.has("listItemId")?g.add(b.position.nodeAfter):$s(b.position.getShiftedBy(b.length),h);else if(b.type=="remove"&&b.attributes.has("listItemId"))$s(b.position,h);else if(b.type=="attribute"){const y=b.range.start.nodeAfter;t.includes(b.attributeKey)?($s(b.range.start,h),b.attributeNewValue===null?($s(b.range.start.getShiftedBy(1),h),o(y)&&c.push(y)):g.add(y)):pr(y)&&o(y)&&c.push(y)}for(const b of h.values())c.push(...r(b,g));for(const b of new Set(c))e.reconvertItem(b)};function r(l,c){const h=[],g=new Set,b=[];for(const{node:y,previous:k}of Yf(l,"forward")){if(g.has(y))continue;const x=y.getAttribute("listIndent");k&&x<k.getAttribute("listIndent")&&(b.length=x+1),b[x]=Object.fromEntries(Array.from(y.getAttributes()).filter(([L])=>t.includes(L)));const D=_c(y,{direction:"forward"});for(const L of D)g.add(L),(o(L,D)||s(L,b,c))&&h.push(L)}return h}function o(l,c){const h=e.mapper.toViewElement(l);if(!h)return!1;if(n.fire("checkElement",{modelElement:l,viewElement:h}))return!0;if(!l.is("element","paragraph")&&!l.is("element","listItem"))return!1;const b=fE(l,t,c);return b&&h.is("element","p")?!0:!!(!b&&h.is("element","span"))}function s(l,c,h){if(h.has(l))return!1;const g=e.mapper.toViewElement(l);let b=c.length-1;for(let y=g.parent;!y.is("editableElement");y=y.parent){const k=s0(y),x=A8(y);if(!x&&!k)continue;const D=`checkAttributes:${k?"item":"list"}`;if(n.fire(D,{viewElement:y,modelAttributes:c[b]}))break;if(x&&(b--,b<0))return!1}return!0}}function wy(i,e,t,{dataPipeline:n}={}){const r=U8(i);return(o,s,l)=>{const{writer:c,mapper:h,consumable:g}=l,b=s.item;if(!i.includes(s.attributeKey)||!r(b,g))return;const y=B8(b,h,t);hE(y,c,h),z8(y,c);const k=V8(b,y,e,c,{dataPipeline:n});H8(b,k,e,c)}}function L8(i){return(e,t,n)=>{const{writer:r,mapper:o}=n,s=e.name.split(":")[1];if(!i.checkAttribute(s,"listItemId"))return;const l=o.toViewPosition(t.position),c=t.position.getShiftedBy(t.length),h=o.toViewPosition(c,{isPhantom:!0}),b=r.createRange(l,h).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */b&&hE(b,r,o)}}function yy(i,{dataPipeline:e}={}){return(t,{writer:n})=>{if(!fE(t,i))return null;if(!e)return n.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const r=n.createContainerElement("p");return n.setCustomProperty("dataPipeline:transparentRendering",!0,r),r}}function B8(i,e,t){const n=t.createRangeOn(i);return e.toViewRange(n).getTrimmed().end.nodeBefore}function N8(i,e){return(t,n)=>{if(n.modelPosition.offset>0)return;const r=n.modelPosition.parent;if(!pr(r)||!i.some(h=>h.scope=="itemMarker"&&h.canInjectMarkerIntoElement&&h.canInjectMarkerIntoElement(r)))return;const o=n.mapper.toViewElement(r),s=e.createRangeIn(o),l=s.getWalker();let c=s.start;for(const{item:h}of l){if(h.is("element")&&n.mapper.toModelElement(h)||h.is("$textProxy"))break;h.is("element")&&h.getCustomProperty("listItemMarker")&&(c=e.createPositionAfter(h),l.skip(({previousPosition:g})=>!g.isEqual(c)))}n.viewPosition=c}}function hE(i,e,t){for(;i.parent.is("attributeElement")&&i.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(i),i.parent);const n=[];r(e.createPositionBefore(i).getWalker({direction:"backward"})),r(e.createRangeIn(i).getWalker());for(const o of n)e.remove(o);function r(o){for(const{item:s}of o){if(s.is("element")&&t.toModelElement(s))break;s.is("element")&&s.getCustomProperty("listItemMarker")&&n.push(s)}}}function V8(i,e,t,n,{dataPipeline:r}){let o=n.createRangeOn(e);if(!wu(i))return o;for(const s of t){if(s.scope!="itemMarker")continue;const l=s.createElement(n,i,{dataPipeline:r});if(!l||(n.setCustomProperty("listItemMarker",!0,l),s.canInjectMarkerIntoElement&&s.canInjectMarkerIntoElement(i)?n.insert(n.createPositionAt(e,0),l):(n.insert(o.start,l),o=n.createRange(n.createPositionBefore(l),n.createPositionAfter(e))),!s.createWrapperElement||!s.canWrapElement))continue;const c=s.createWrapperElement(n,i,{dataPipeline:r});n.setCustomProperty("listItemWrapper",!0,c),s.canWrapElement(i)?o=n.wrap(o,c):(o=n.wrap(n.createRangeOn(l),c),o=n.createRange(o.start,n.createPositionAfter(e)))}return o}function z8(i,e){let t=i.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){const n=t.parent;e.unwrap(e.createRangeOn(i),t),t=n}}function H8(i,e,t,n){if(!i.hasAttribute("listIndent"))return;const r=i.getAttribute("listIndent");let o=i;for(let s=r;s>=0;s--){const l=D8(n,s,o.getAttribute("listItemId")),c=I8(n,s,o.getAttribute("listType"));for(const h of t)(h.scope=="list"||h.scope=="item")&&o.hasAttribute(h.attributeName)&&h.setAttributeOnDowncast(n,o.getAttribute(h.attributeName),h.scope=="list"?c:l);if(e=n.wrap(e,l),e=n.wrap(e,c),s==0||(o=Es.first(o,{lowerIndent:!0}),!o))break}}function U8(i){return(e,t)=>{const n=[];for(const r of i)e.hasAttribute(r)&&n.push(`attribute:${r}`);return n.every(r=>t.test(e,r)!==!1)?(n.forEach(r=>t.consume(e,r)),!0):!1}}function fE(i,e,t=av(i)){if(!pr(i))return!1;for(const n of i.getAttributeKeys())if(!n.startsWith("selection:")&&!e.includes(n))return!1;return t.length<2}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const sp=["listType","listIndent","listItemId"];class W8 extends Fe{static get pluginName(){return"ListEditing"}static get requires(){return[Kf,kl,T8,Ys]}constructor(e){super(e),this._downcastStrategies=[],e.config.define("list.multiBlock",!0)}init(){const e=this.editor,t=e.model,n=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new be("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});t.schema.register("$listItem",{allowAttributes:sp}),n?(t.schema.extend("$container",{allowAttributesOf:"$listItem"}),t.schema.extend("$block",{allowAttributesOf:"$listItem"}),t.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):t.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const r of sp)t.schema.setAttributeProperties(r,{copyOnReplace:!0});e.commands.add("numberedList",new $m(e,"numbered")),e.commands.add("bulletedList",new $m(e,"bulleted")),e.commands.add("customNumberedList",new $m(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new $m(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new py(e,"forward")),e.commands.add("outdentList",new py(e,"backward")),e.commands.add("splitListItemBefore",new vy(e,"before")),e.commands.add("splitListItemAfter",new vy(e,"after")),n&&(e.commands.add("mergeListItemBackward",new by(e,"backward")),e.commands.add("mergeListItemForward",new by(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const t=this.editor.commands,n=t.get("indent"),r=t.get("outdent");n&&n.registerChildCommand(t.get("indentList"),{priority:"high"}),r&&r.registerChildCommand(t.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...sp,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,t=e.commands.get("mergeListItemBackward"),n=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(r,o)=>{const s=e.model.document.selection;Mf(e.model)||e.model.change(()=>{const l=s.getFirstPosition();if(s.isCollapsed&&o.direction=="backward"){if(!l.isAtStart)return;const c=l.parent;if(!pr(c))return;if(!Es.first(c,{sameAttributes:"listType",sameIndent:!0})&&c.getAttribute("listIndent")===0)my(c)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!t||!t.isEnabled)return;t.execute({shouldMergeOnBlocksContentLevel:_y(e.model,"backward")})}o.preventDefault(),r.stop()}else{if(s.isCollapsed&&!s.getLastPosition().isAtEnd||!n||!n.isEnabled)return;n.execute({shouldMergeOnBlocksContentLevel:_y(e.model,"forward")}),o.preventDefault(),r.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,t=e.model,n=e.commands,r=n.get("enter");this.listenTo(e.editing.view.document,"enter",(o,s)=>{const l=t.document,c=l.selection.getFirstPosition().parent;if(l.selection.isCollapsed&&pr(c)&&c.isEmpty&&!s.isSoft){const h=wu(c),g=my(c);h&&g?(e.execute("outdentList"),s.preventDefault(),o.stop()):h&&!g?(e.execute("splitListItemAfter"),s.preventDefault(),o.stop()):g&&(e.execute("splitListItemBefore"),s.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(r,"afterExecute",()=>{const o=n.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const l=e.model.document.selection.getLastPosition().parent;av(l).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(t,n)=>{const r=n.shiftKey?"outdentList":"indentList";this.editor.commands.get(r).isEnabled&&(e.execute(r),n.stopPropagation(),n.preventDefault(),t.stop())},{context:"li"})}_setupConversion(){const e=this.editor,t=e.model,n=this.getListAttributeNames(),r=e.config.get("list.multiBlock"),o=r?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(l,{writer:c})=>c.createElement(o,{listType:""})}).elementToElement({view:"p",model:(l,{writer:c})=>l.parent&&l.parent.is("element","li")?c.createElement(o,{listType:""}):null,converterPriority:"high"}).add(l=>{l.on("element:li",F8())}),r||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:yy(n),converterPriority:"high"}).add(l=>{l.on("attribute",wy(n,this._downcastStrategies,t)),l.on("remove",L8(t.schema))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:yy(n,{dataPipeline:!0}),converterPriority:"high"}).add(l=>{l.on("attribute",wy(n,this._downcastStrategies,t,{dataPipeline:!0}))});const s=N8(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",s),e.data.mapper.on("modelToViewPosition",s),this.listenTo(t.document,"change:data",M8(t,e.editing,n,this),{priority:"high"}),this.on("checkAttributes:item",(l,{viewElement:c,modelAttributes:h})=>{c.id!=h.listItemId&&(l.return=!0,l.stop())}),this.on("checkAttributes:list",(l,{viewElement:c,modelAttributes:h})=>{(c.name!=uE(h.listType)||c.id!=dE(h.listType,h.listIndent))&&(l.return=!0,l.stop())})}_setupModelPostFixing(){const e=this.editor.model,t=this.getListAttributeNames();e.document.registerPostFixer(n=>j8(e,n,t,this)),this.on("postFixer",(n,{listNodes:r,writer:o})=>{n.return=R8(r,o)||n.return},{priority:"high"}),this.on("postFixer",(n,{listNodes:r,writer:o,seenIds:s})=>{n.return=O8(r,s,o)||n.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,t=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",$8(e),{priority:"high"}),this.listenTo(t,"outputTransformation",(n,r)=>{e.change(o=>{const s=Array.from(r.content.getChildren()),l=s[s.length-1];if(s.length>1&&l.is("element")&&l.isEmpty&&s.slice(0,-1).every(pr)&&o.remove(l),r.method=="copy"||r.method=="cut"){const c=Array.from(r.content.getChildren());Ff(c)&&cg(c,o)}})})}_setupAccessibilityIntegration(){const e=this.editor,t=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:t("Keystrokes that can be used in a list"),keystrokes:[{label:t("Increase list item indent"),keystroke:"Tab"},{label:t("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function j8(i,e,t,n){const r=i.document.differ.getChanges(),o=new Map,s=n.editor.config.get("list.multiBlock");let l=!1;for(const h of r){if(h.type=="insert"&&h.name!="$text"){const g=h.position.nodeAfter;if(!i.schema.checkAttribute(g,"listItemId"))for(const b of Array.from(g.getAttributeKeys()))t.includes(b)&&(e.removeAttribute(b,g),l=!0);$s(h.position,o),h.attributes.has("listItemId")||$s(h.position.getShiftedBy(h.length),o);for(const{item:b,previousPosition:y}of i.createRangeIn(g))pr(b)&&$s(y,o)}else h.type=="remove"?$s(h.position,o):h.type=="attribute"&&t.includes(h.attributeKey)&&($s(h.range.start,o),h.attributeNewValue===null&&$s(h.range.start.getShiftedBy(1),o));if(!s&&h.type=="attribute"&&sp.includes(h.attributeKey)){const g=h.range.start.nodeAfter;h.attributeNewValue===null&&g&&g.is("element","listItem")?(e.rename(g,"paragraph"),l=!0):h.attributeOldValue===null&&g&&g.is("element")&&g.name!="listItem"&&(e.rename(g,"listItem"),l=!0)}}const c=new Set;for(const h of o.values())l=n.fire("postFixer",{listNodes:new y8(h),listHead:h,writer:e,seenIds:c})||l;return l}function $8(i){return(e,[t,n])=>{const r=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!r.length)return;const s=(n?i.createSelection(n):i.document.selection).getFirstPosition();let l;if(pr(s.parent))l=s.parent;else if(pr(s.nodeBefore))l=s.nodeBefore;else return;i.change(c=>{const h=l.getAttribute("listType"),g=l.getAttribute("listIndent"),b=r[0].getAttribute("listIndent")||0,y=Math.max(g-b,0);for(const k of r){const x=pr(k);l.is("element","listItem")&&k.is("element","paragraph")&&c.rename(k,"listItem"),c.setAttributes({listIndent:(x?k.getAttribute("listIndent"):0)+y,listItemId:x?k.getAttribute("listItemId"):qd.next(),listType:h},k)}})}}function _y(i,e){const t=i.document.selection;if(!t.isCollapsed)return!Mf(i);if(e==="forward")return!0;const r=t.getFirstPosition().parent,o=r.previousSibling;return i.schema.isObject(o)?!1:o.isEmpty?!0:Ff([r,o])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ky(i,e,t,n){i.ui.componentFactory.add(e,()=>{const r=Cy(Ht,i,e,t,n);return r.set({tooltip:!0,isToggleable:!0}),r}),i.ui.componentFactory.add(`menuBar:${e}`,()=>{const r=Cy(Ii,i,e,t,n);return r.set({role:"menuitemcheckbox",isToggleable:!0}),r})}function Cy(i,e,t,n,r){const o=e.commands.get(t),s=new i(e.locale);return s.set({label:n,icon:r}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.on("execute",()=>{e.execute(t),e.editing.view.focus()}),s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q8 extends Fe{static get pluginName(){return"ListUI"}init(){const e=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||ky(this.editor,"numberedList",e("Numbered List"),it.numberedList),this.editor.ui.componentFactory.has("bulletedList")||ky(this.editor,"bulletedList",e("Bulleted List"),it.bulletedList)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class G8 extends Fe{static get requires(){return[W8,q8]}static get pluginName(){return"List"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const K8=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:i,typeAttribute:e,listType:t}of K8);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cv(i,e){const{modelAttribute:t,styleName:n,viewElement:r,defaultValue:o,reduceBoxSides:s=!1,shouldUpcast:l=()=>!0}=e;i.for("upcast").attributeToAttribute({view:{name:r,styles:{[n]:/[\s\S]+/}},model:{key:t,value:c=>{if(!l(c))return;const h=c.getNormalizedStyle(n),g=s?lp(h):h;if(o!==g)return g}}})}function a0(i,e,t,n){i.for("upcast").add(r=>r.on("element:"+e,(o,s,l)=>{if(!s.modelRange)return;const c=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(k=>s.viewItem.hasStyle(k));if(!c.length)return;const h={styles:c};if(!l.consumable.test(s.viewItem,h))return;const g=[...s.modelRange.getItems({shallow:!0})].pop();l.consumable.consume(s.viewItem,h);const b={style:s.viewItem.getNormalizedStyle("border-style"),color:s.viewItem.getNormalizedStyle("border-color"),width:s.viewItem.getNormalizedStyle("border-width")},y={style:lp(b.style),color:lp(b.color),width:lp(b.width)};y.style!==n.style&&l.writer.setAttribute(t.style,y.style,g),y.color!==n.color&&l.writer.setAttribute(t.color,y.color,g),y.width!==n.width&&l.writer.setAttribute(t.width,y.width,g)}))}function bf(i,e){const{modelElement:t,modelAttribute:n,styleName:r}=e;i.for("downcast").attributeToAttribute({model:{name:t,key:n},view:o=>({key:"style",value:{[r]:o}})})}function ap(i,e){const{modelAttribute:t,styleName:n}=e;i.for("downcast").add(r=>r.on(`attribute:${t}:table`,(o,s,l)=>{const{item:c,attributeNewValue:h}=s,{mapper:g,writer:b}=l;if(!l.consumable.consume(s.item,o.name))return;const y=[...g.toViewElement(c).getChildren()].find(k=>k.is("element","table"));h?b.setStyle(n,h,y):b.removeStyle(n,y)}))}function lp(i){if(!i)return;const e=["top","right","bottom","left"];if(!e.every(o=>i[o]))return i;const n=i.top;return e.every(o=>i[o]===n)?n:i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zi(i,e,t,n,r=1){e!=null&&r!==void 0&&r!==null&&e>r?n.setAttribute(i,e,t):n.removeAttribute(i,t)}function Iu(i,e,t={}){const n=i.createElement("tableCell",t);return i.insertElement("paragraph",n),i.insert(n,e),n}function l0(i,e){const t=e.parent.parent,n=parseInt(t.getAttribute("headingColumns")||"0"),{column:r}=i.getCellLocation(e);return!!n&&r<n}function cp(i,e,t){const{modelAttribute:n}=t;i.extend("tableCell",{allowAttributes:[n]}),cv(e,{viewElement:/^(td|th)$/,...t}),bf(e,{modelElement:"tableCell",...t})}function c0(i){const e=i.getSelectedElement();return e&&e.is("element","table")?e:i.getFirstPosition().findAncestor("table")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Z8(){return i=>{i.on("element:figure",(e,t,n)=>{if(!n.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const r=X8(t.viewItem);if(!r||!n.consumable.test(r,{name:!0}))return;n.consumable.consume(t.viewItem,{name:!0,classes:"table"});const o=n.convertItem(r,t.modelCursor),s=Wi(o.modelRange.getItems());if(!s){n.consumable.revert(t.viewItem,{name:!0,classes:"table"});return}n.convertChildren(t.viewItem,n.writer.createPositionAt(s,"end")),n.updateConversionResult(s,t)})}}function Y8(){return i=>{i.on("element:table",(e,t,n)=>{const r=t.viewItem;if(!n.consumable.test(r,{name:!0}))return;const{rows:o,headingRows:s,headingColumns:l}=Q8(r),c={};l&&(c.headingColumns=l),s&&(c.headingRows=s);const h=n.writer.createElement("table",c);if(n.safeInsert(h,t.modelCursor)){if(n.consumable.consume(r,{name:!0}),o.forEach(g=>n.convertItem(g,n.writer.createPositionAt(h,"end"))),n.convertChildren(r,n.writer.createPositionAt(h,"end")),h.isEmpty){const g=n.writer.createElement("tableRow");n.writer.insert(g,n.writer.createPositionAt(h,"end")),Iu(n.writer,n.writer.createPositionAt(g,"end"))}n.updateConversionResult(h,t)}})}}function J8(){return i=>{i.on("element:tr",(e,t)=>{t.viewItem.isEmpty&&t.modelCursor.index==0&&e.stop()},{priority:"high"})}}function xy(i){return e=>{e.on(`element:${i}`,(t,n,{writer:r})=>{if(!n.modelRange)return;const o=n.modelRange.start.nodeAfter,s=r.createPositionAt(o,0);if(n.viewItem.isEmpty){r.insertElement("paragraph",s);return}const l=Array.from(o.getChildren());if(l.every(c=>c.is("element","$marker"))){const c=r.createElement("paragraph");r.insert(c,r.createPositionAt(o,0));for(const h of l)r.move(r.createRangeOn(h),r.createPositionAt(c,"end"))}},{priority:"low"})}}function X8(i){for(const e of i.getChildren())if(e.is("element","table"))return e}function Q8(i){let e=0,t;const n=[],r=[];let o;for(const s of Array.from(i.getChildren())){if(s.name!=="tbody"&&s.name!=="thead"&&s.name!=="tfoot")continue;s.name==="thead"&&!o&&(o=s);const l=Array.from(s.getChildren()).filter(c=>c.is("element","tr"));for(const c of l)if(o&&s===o||s.name==="tbody"&&Array.from(c.getChildren()).length&&Array.from(c.getChildren()).every(h=>h.is("element","th")))e++,n.push(c);else{r.push(c);const h=e9(c);(!t||h<t)&&(t=h)}}return{headingRows:e,headingColumns:t||0,rows:[...n,...r]}}function e9(i){let e=0,t=0;const n=Array.from(i.getChildren()).filter(r=>r.name==="th"||r.name==="td");for(;t<n.length&&n[t].name==="th";){const r=n[t],o=parseInt(r.getAttribute("colspan")||"1");e=e+o,t++}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nn{constructor(e,t={}){this._jumpedToStartRow=!1,this._table=e,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0,value:void 0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(n.cell,n.row,n.column));else{const r=e.getChild(this._cellIndex);if(!r)return this._advanceToNextRow();const o=parseInt(r.getAttribute("colspan")||"1"),s=parseInt(r.getAttribute("rowspan")||"1");(o>1||s>1)&&this._recordSpans(r,s,o),this._shouldSkipSlot()||(t=this._formatOutValue(r)),this._nextCellAtColumn=this._column+o}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(e,t=this._row,n=this._column){return{done:!1,value:new t9(this,e,t,n)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,n=this._column<this._startColumn,r=this._endColumn!==void 0&&this._column>this._endColumn;return e||t||n||r}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,n){const r={cell:e,row:this._row,column:this._column};for(let o=this._row;o<this._row+t;o++)for(let s=this._column;s<this._column+n;s++)(o!=this._row||s!=this._column)&&this._markSpannedCell(o,s,r)}_markSpannedCell(e,t,n){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const e=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)e===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(e){return[...this._table.getChild(e).getChildren()].reduce((n,r)=>n+parseInt(r.getAttribute("colspan")||"1"),0)}}class t9{constructor(e,t,n,r){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=n,this.cellAnchorColumn=r,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ey(i,e){return(t,{writer:n})=>{const r=t.getAttribute("headingRows")||0,o=n.createContainerElement("table",null,[]),s=n.createContainerElement("figure",{class:"table"},o);r>0&&n.insert(n.createPositionAt(o,"end"),n.createContainerElement("thead",null,n.createSlot(l=>l.is("element","tableRow")&&l.index<r))),r<i.getRows(t)&&n.insert(n.createPositionAt(o,"end"),n.createContainerElement("tbody",null,n.createSlot(l=>l.is("element","tableRow")&&l.index>=r)));for(const{positionOffset:l,filter:c}of e.additionalSlots)n.insert(n.createPositionAt(o,l),n.createSlot(c));return n.insert(n.createPositionAt(o,"after"),n.createSlot(l=>l.is("element","tableRow")?!1:!e.additionalSlots.some(({filter:c})=>c(l)))),e.asWidget?i9(s,n):s}}function n9(){return(i,{writer:e})=>i.isEmpty?e.createEmptyElement("tr"):e.createContainerElement("tr")}function Sy(i={}){return(e,{writer:t})=>{const n=e.parent,r=n.parent,o=r.getChildIndex(n),s=new Nn(r,{row:o}),l=r.getAttribute("headingRows")||0,c=r.getAttribute("headingColumns")||0;let h=null;for(const g of s)if(g.cell==e){const y=g.row<l||g.column<c?"th":"td";h=i.asWidget?Yx(t.createEditableElement(y),t):t.createContainerElement(y);break}return h}}function Ty(i={}){return(e,{writer:t})=>{if(!e.parent.is("element","tableCell")||!mE(e))return null;if(i.asWidget)return t.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const n=t.createContainerElement("p");return t.setCustomProperty("dataPipeline:transparentRendering",!0,n),n}}}function mE(i){return i.parent.childCount==1&&!r9(i)}function i9(i,e){return e.setCustomProperty("table",!0,i),El(i,e,{hasSelectionHandle:!0})}function r9(i){return!i.getAttributeKeys().next().done}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class o9 extends Wt{refresh(){const e=this.editor.model,t=e.document.selection,n=e.schema;this.isEnabled=s9(t,n)}execute(e={}){const t=this.editor,n=t.model,r=t.plugins.get("TableUtils"),o=t.config.get("table.defaultHeadings.rows"),s=t.config.get("table.defaultHeadings.columns");e.headingRows===void 0&&o&&(e.headingRows=o),e.headingColumns===void 0&&s&&(e.headingColumns=s),n.change(l=>{const c=r.createTable(l,e);n.insertObject(c,null,null,{findOptimalPosition:"auto"}),l.setSelection(l.createPositionAt(c.getNodeByPath([0,0,0]),0))})}}function s9(i,e){const t=i.getFirstPosition().parent,n=t===t.root?t:t.parent;return e.checkChild(n,"table")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ay extends Wt{constructor(e,t={}){super(e),this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,n=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=n}execute(){const e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),r=this.order==="above",o=n.getSelectionAffectedTableCells(t),s=n.getRowIndexes(o),l=r?s.first:s.last,c=o[0].findAncestor("table");n.insertRows(c,{at:r?l:l+1,copyStructureFromAbove:!r})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Py extends Wt{constructor(e,t={}){super(e),this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,n=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=n}execute(){const e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),r=this.order==="left",o=n.getSelectionAffectedTableCells(t),s=n.getColumnIndexes(o),l=r?s.first:s.last,c=o[0].findAncestor("table");n.insertColumns(c,{columns:1,at:r?l:l+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Iy extends Wt{constructor(e,t={}){super(e),this.direction=t.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(t,2):e.splitCellVertically(t,2)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function pE(i,e,t){const{startRow:n,startColumn:r,endRow:o,endColumn:s}=e,l=t.createElement("table"),c=o-n+1;for(let g=0;g<c;g++)t.insertElement("tableRow",l,"end");const h=[...new Nn(i,{startRow:n,endRow:o,startColumn:r,endColumn:s,includeAllSlots:!0})];for(const{row:g,column:b,cell:y,isAnchor:k,cellAnchorRow:x,cellAnchorColumn:D}of h){const L=g-n,M=l.getChild(L);if(!k)(x<n||D<r)&&Iu(t,t.createPositionAt(M,"end"));else{const V=t.cloneElement(y);t.append(V,M),yE(V,g,b,o,s,t)}}return a9(l,i,n,r,t),l}function gE(i,e,t=0){const n=[],r=new Nn(i,{startRow:t,endRow:e-1});for(const o of r){const{row:s,cellHeight:l}=o,c=s+l-1;s<e&&e<=c&&n.push(o)}return n}function bE(i,e,t){const n=i.parent,r=n.parent,o=n.index,s=parseInt(i.getAttribute("rowspan")),l=e-o,c={},h=s-l;h>1&&(c.rowspan=h);const g=parseInt(i.getAttribute("colspan")||"1");g>1&&(c.colspan=g);const b=o,y=b+l,k=[...new Nn(r,{startRow:b,endRow:y,includeAllSlots:!0})];let x=null,D;for(const L of k){const{row:M,column:V,cell:O}=L;O===i&&D===void 0&&(D=V),D!==void 0&&D===V&&M===y&&(x=Iu(t,L.getPositionBefore(),c))}return zi("rowspan",l,i,t),x}function vE(i,e){const t=[],n=new Nn(i);for(const r of n){const{column:o,cellWidth:s}=r,l=o+s-1;o<e&&e<=l&&t.push(r)}return t}function wE(i,e,t,n){const r=parseInt(i.getAttribute("colspan")),o=t-e,s={},l=r-o;l>1&&(s.colspan=l);const c=parseInt(i.getAttribute("rowspan")||"1");c>1&&(s.rowspan=c);const h=Iu(n,n.createPositionAfter(i),s);return zi("colspan",o,i,n),h}function yE(i,e,t,n,r,o){const s=parseInt(i.getAttribute("colspan")||"1"),l=parseInt(i.getAttribute("rowspan")||"1");if(t+s-1>r){const g=r-t+1;zi("colspan",g,i,o,1)}if(e+l-1>n){const g=n-e+1;zi("rowspan",g,i,o,1)}}function a9(i,e,t,n,r){const o=parseInt(e.getAttribute("headingRows")||"0");if(o>0){const l=o-t;zi("headingRows",l,i,r,0)}const s=parseInt(e.getAttribute("headingColumns")||"0");if(s>0){const l=s-n;zi("headingColumns",l,i,r,0)}}function u0(i,e){const t=e.getColumns(i),n=new Array(t).fill(0);for(const{column:o}of new Nn(i))n[o]++;const r=n.reduce((o,s,l)=>s?o:[...o,l],[]);if(r.length>0){const o=r[r.length-1];return e.removeColumns(i,{at:o}),!0}return!1}function d0(i,e){const t=[],n=e.getRows(i);for(let r=0;r<n;r++)i.getChild(r).isEmpty&&t.push(r);if(t.length>0){const r=t[t.length-1];return e.removeRows(i,{at:r}),!0}return!1}function uv(i,e){u0(i,e)||d0(i,e)}function _E(i,e){const t=Array.from(new Nn(i,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(t.every(({cellHeight:o})=>o===1))return e.lastRow;const r=t[0].cellHeight-1;return e.lastRow+r}function kE(i,e){const t=Array.from(new Nn(i,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(t.every(({cellWidth:o})=>o===1))return e.lastColumn;const r=t[0].cellWidth-1;return e.lastColumn+r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qm extends Wt{constructor(e,t){super(e),this.direction=t.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,r=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0],o=this.value,s=this.direction;e.change(l=>{const c=s=="right"||s=="down",h=c?r:o,g=c?o:r,b=g.parent;u9(g,h,l);const y=this.isHorizontal?"colspan":"rowspan",k=parseInt(r.getAttribute(y)||"1"),x=parseInt(o.getAttribute(y)||"1");l.setAttribute(y,k+x,h),l.setSelection(l.createRangeIn(h));const D=this.editor.plugins.get("TableUtils"),L=b.findAncestor("table");uv(L,D)})}_getMergeableCell(){const t=this.editor.model.document,n=this.editor.plugins.get("TableUtils"),r=n.getTableCellsContainingSelection(t.selection)[0];if(!r)return;const o=this.isHorizontal?l9(r,this.direction,n):c9(r,this.direction,n);if(!o)return;const s=this.isHorizontal?"rowspan":"colspan",l=parseInt(r.getAttribute(s)||"1");if(parseInt(o.getAttribute(s)||"1")===l)return o}}function l9(i,e,t){const r=i.parent.parent,o=e=="right"?i.nextSibling:i.previousSibling,s=(r.getAttribute("headingColumns")||0)>0;if(!o)return;const l=e=="right"?i:o,c=e=="right"?o:i,{column:h}=t.getCellLocation(l),{column:g}=t.getCellLocation(c),b=parseInt(l.getAttribute("colspan")||"1"),y=l0(t,l),k=l0(t,c);return s&&y!=k?void 0:h+b===g?o:void 0}function c9(i,e,t){const n=i.parent,r=n.parent,o=r.getChildIndex(n);if(e=="down"&&o===t.getRows(r)-1||e=="up"&&o===0)return null;const s=parseInt(i.getAttribute("rowspan")||"1"),l=r.getAttribute("headingRows")||0,c=e=="down"&&o+s===l,h=e=="up"&&o===l;if(l&&(c||h))return null;const g=parseInt(i.getAttribute("rowspan")||"1"),b=e=="down"?o+g:o,y=[...new Nn(r,{endRow:b})],x=y.find(L=>L.cell===i).column,D=y.find(({row:L,cellHeight:M,column:V})=>V!==x?!1:e=="down"?L===b:b===L+M);return D&&D.cell?D.cell:null}function u9(i,e,t){Dy(i)||(Dy(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(i),t.createPositionAt(e,"end"))),t.remove(i)}function Dy(i){const e=i.getChild(0);return i.childCount==1&&e.is("element","paragraph")&&e.isEmpty}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class d9 extends Wt{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),n=t[0];if(n){const r=n.findAncestor("table"),s=e.getRows(r)-1,l=e.getRowIndexes(t),c=l.first===0&&l.last===s;this.isEnabled=!c}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),n=t.getSelectionAffectedTableCells(e.document.selection),r=t.getRowIndexes(n),o=n[0],s=o.findAncestor("table"),l=t.getCellLocation(o).column;e.change(c=>{const h=r.last-r.first+1;t.removeRows(s,{at:r.first,rows:h});const g=h9(s,r.first,l,t.getRows(s));c.setSelection(c.createPositionAt(g,0))})}}function h9(i,e,t,n){const r=i.getChild(Math.min(e,n-1));let o=r.getChild(0),s=0;for(const l of r.getChildren()){if(s>t)return o;o=l,s+=parseInt(l.getAttribute("colspan")||"1")}return o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class f9 extends Wt{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),n=t[0];if(n){const r=n.findAncestor("table"),o=e.getColumns(r),{first:s,last:l}=e.getColumnIndexes(t);this.isEnabled=l-s<o-1}else this.isEnabled=!1}execute(){const e=this.editor.plugins.get("TableUtils"),[t,n]=p9(this.editor.model.document.selection,e),r=t.parent.parent,o=[...new Nn(r)],s={first:o.find(c=>c.cell===t).column,last:o.find(c=>c.cell===n).column},l=m9(o,t,n,s);this.editor.model.change(c=>{const h=s.last-s.first+1;e.removeColumns(r,{at:s.first,columns:h}),c.setSelection(c.createPositionAt(l,0))})}}function m9(i,e,t,n){return parseInt(t.getAttribute("colspan")||"1")>1?t:e.previousSibling||t.nextSibling?t.nextSibling||e.previousSibling:n.first?i.reverse().find(({column:o})=>o<n.first).cell:i.reverse().find(({column:o})=>o>n.last).cell}function p9(i,e){const t=e.getSelectionAffectedTableCells(i),n=t[0],r=t.pop(),o=[n,r];return n.isBefore(r)?o:o.reverse()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class g9 extends Wt{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,n=e.getSelectionAffectedTableCells(t.document.selection),r=n.length>0;this.isEnabled=r,this.value=r&&n.every(o=>this._isInHeading(o,o.parent.parent))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),n=this.editor.model,r=t.getSelectionAffectedTableCells(n.document.selection),o=r[0].findAncestor("table"),{first:s,last:l}=t.getRowIndexes(r),c=this.value?s:l+1,h=o.getAttribute("headingRows")||0;n.change(g=>{if(c){const b=c>h?h:0,y=gE(o,c,b);for(const{cell:k}of y)bE(k,c,g)}zi("headingRows",c,o,g,0)})}_isInHeading(e,t){const n=parseInt(t.getAttribute("headingRows")||"0");return!!n&&e.parent.index<n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b9 extends Wt{refresh(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),n=t.getSelectionAffectedTableCells(e.document.selection),r=n.length>0;this.isEnabled=r,this.value=r&&n.every(o=>l0(t,o))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),n=this.editor.model,r=t.getSelectionAffectedTableCells(n.document.selection),o=r[0].findAncestor("table"),{first:s,last:l}=t.getColumnIndexes(r),c=this.value?s:l+1;n.change(h=>{if(c){const g=vE(o,c);for(const{cell:b,column:y}of g)wE(b,y,c,h)}zi("headingColumns",c,o,h,0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const v9=5,h0=40,w9=2;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function y9(i){const e=new Set;for(const t of i.document.differ.getChanges()){let n=null;switch(t.type){case"insert":n=["table","tableRow","tableCell"].includes(t.name)?t.position:null;break;case"remove":n=["tableRow","tableCell"].includes(t.name)?t.position:null;break;case"attribute":t.range.start.nodeAfter&&(n=["table","tableRow","tableCell"].includes(t.range.start.nodeAfter.name)?t.range.start:null);break}if(!n)continue;const r=n.nodeAfter&&n.nodeAfter.is("element","table")?n.nodeAfter:n.findAncestor("table");for(const o of i.createRangeOn(r).getItems())o.is("element","table")&&Xf(o)&&e.add(o)}return e}function _9(i,e){return h0*100/CE(i,e)}function CE(i,e){const t=Ry(i,"tbody",e)||Ry(i,"thead",e),n=e.editing.view.domConverter.mapViewToDom(t);return f0(n)}function Ry(i,e,t){return[...[...t.editing.mapper.toViewElement(i).getChildren()].find(o=>o.is("element","table")).getChildren()].find(o=>o.is("element",e))}function f0(i){const e=_t.window.getComputedStyle(i);return e.boxSizing==="border-box"?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function k9(i,e){const t=e.getCellLocation(i).column,n=i.getAttribute("colspan")||1;return{leftEdge:t,rightEdge:t+n-1}}function Do(i){const e=Math.pow(10,w9),t=typeof i=="number"?i:parseFloat(i);return Math.round(t*e)/e}function C9(i,e,t){return i<=e?Do(e):i>=t?Do(t):Do(i)}function x9(i,e){return Array(i).fill(e)}function Lf(i){return i.map(e=>typeof e=="number"?e:parseFloat(e)).filter(e=>!Number.isNaN(e)).reduce((e,t)=>e+t,0)}function dv(i){const e=i.map(r=>r==="auto"?r:parseFloat(r.replace("%","")));let t=E9(e);const n=Lf(t);return n!==100&&(t=t.map(r=>Do(r*100/n)).map((r,o,s)=>{if(!(o===s.length-1))return r;const c=Lf(s);return Do(r+100-c)})),t.map(r=>r+"%")}function E9(i){const e=i.filter(r=>r==="auto").length;if(e===0)return i.map(r=>Do(r));const t=Lf(i),n=Math.max((100-t)/e,v9);return i.map(r=>r==="auto"?n:r).map(r=>Do(r))}function S9(i){const e=_t.window.getComputedStyle(i);return e.boxSizing==="border-box"?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}function xE(i,e,t,n){for(let r=0;r<Math.max(t.length,i.length);r++){const o=i[r],s=t[r];s?o?n.setAttribute("columnWidth",s,o):n.appendElement("tableColumn",{columnWidth:s},e):n.remove(o)}}function Xf(i){if(i.is("element","tableColumnGroup"))return i;const e=i.getChildren();return Array.from(e).find(t=>t.is("element","tableColumnGroup"))}function Qf(i){const e=Xf(i);return e?Array.from(e.getChildren()):[]}function T9(i){return Qf(i).map(e=>e.getAttribute("columnWidth"))}function A9(i,e){return Qf(i).reduce((n,r)=>{const o=r.getAttribute("columnWidth"),s=r.getAttribute("colSpan");if(!s)return n.push(o),n;for(let l=0;l<s;l++)n.push(o);return e.removeAttribute("colSpan",r),n},[])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ir extends Fe{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,n=t.parent,r=n.getChildIndex(t),o=new Nn(n,{row:r});for(const{cell:s,row:l,column:c}of o)if(s===e)return{row:l,column:c};/* istanbul ignore next -- @preserve */}createTable(e,t){const n=e.createElement("table"),r=t.rows||2,o=t.columns||2;return wb(e,n,0,r,o),t.headingRows&&zi("headingRows",Math.min(t.headingRows,r),n,e,0),t.headingColumns&&zi("headingColumns",Math.min(t.headingColumns,o),n,e,0),n}insertRows(e,t={}){const n=this.editor.model,r=t.at||0,o=t.rows||1,s=t.copyStructureFromAbove!==void 0,l=t.copyStructureFromAbove?r-1:r,c=this.getRows(e),h=this.getColumns(e);if(r>c)throw new be("tableutils-insertrows-insert-out-of-range",this,{options:t});n.change(g=>{const b=e.getAttribute("headingRows")||0;if(b>r&&zi("headingRows",b+o,e,g,0),!s&&(r===0||r===c)){wb(g,e,r,o,h);return}const y=s?Math.max(r,l):r,k=new Nn(e,{endRow:y}),x=new Array(h).fill(1);for(const{row:D,column:L,cellHeight:M,cellWidth:V,cell:O}of k){const U=D+M-1,K=D<r&&r<=U,q=D<=l&&l<=U;K?(g.setAttribute("rowspan",M+o,O),x[L]=-V):s&&q&&(x[L]=V)}for(let D=0;D<o;D++){const L=g.createElement("tableRow");g.insert(L,e,r);for(let M=0;M<x.length;M++){const V=x[M],O=g.createPositionAt(L,"end");V>0&&Iu(g,O,V>1?{colspan:V}:void 0),M+=Math.abs(V)-1}}})}insertColumns(e,t={}){const n=this.editor.model,r=t.at||0,o=t.columns||1;n.change(s=>{const l=e.getAttribute("headingColumns");r<l&&s.setAttribute("headingColumns",l+o,e);const c=this.getColumns(e);if(r===0||c===r){for(const g of e.getChildren())g.is("element","tableRow")&&Od(o,s,s.createPositionAt(g,r?"end":0));return}const h=new Nn(e,{column:r,includeAllSlots:!0});for(const g of h){const{row:b,cell:y,cellAnchorColumn:k,cellAnchorRow:x,cellWidth:D,cellHeight:L}=g;if(k<r){s.setAttribute("colspan",D+o,y);const M=x+L-1;for(let V=b;V<=M;V++)h.skipRow(V)}else Od(o,s,g.getPositionBefore())}})}removeRows(e,t){const n=this.editor.model,r=t.rows||1,o=this.getRows(e),s=t.at,l=s+r-1;if(l>o-1)throw new be("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});n.change(c=>{const h={first:s,last:l},{cellsToMove:g,cellsToTrim:b}=D9(e,h);if(g.size){const y=l+1;R9(e,y,g,c)}for(let y=l;y>=s;y--)c.remove(e.getChild(y));for(const{rowspan:y,cell:k}of b)zi("rowspan",y,k,c);I9(e,h,c),u0(e,this)||d0(e,this)})}removeColumns(e,t){const n=this.editor.model,r=t.at,o=t.columns||1,s=t.at+o-1;n.change(l=>{P9(e,{first:r,last:s},l);const c=Qf(e);for(let h=s;h>=r;h--){for(const{cell:g,column:b,cellWidth:y}of[...new Nn(e)])b<=h&&y>1&&b+y>h?zi("colspan",y-1,g,l):b===h&&l.remove(g);if(c[h]){const g=h===0?c[1]:c[h-1],b=parseFloat(c[h].getAttribute("columnWidth")),y=parseFloat(g.getAttribute("columnWidth"));l.remove(c[h]),l.setAttribute("columnWidth",b+y+"%",g)}}d0(e,this)||u0(e,this)})}splitCellVertically(e,t=2){const n=this.editor.model,o=e.parent.parent,s=parseInt(e.getAttribute("rowspan")||"1"),l=parseInt(e.getAttribute("colspan")||"1");n.change(c=>{if(l>1){const{newCellsSpan:h,updatedSpan:g}=Oy(l,t);zi("colspan",g,e,c);const b={};h>1&&(b.colspan=h),s>1&&(b.rowspan=s);const y=l>t?t-1:l-1;Od(y,c,c.createPositionAfter(e),b)}if(l<t){const h=t-l,g=[...new Nn(o)],{column:b}=g.find(({cell:D})=>D===e),y=g.filter(({cell:D,cellWidth:L,column:M})=>{const V=D!==e&&M===b,O=M<b&&M+L>b;return V||O});for(const{cell:D,cellWidth:L}of y)c.setAttribute("colspan",L+h,D);const k={};s>1&&(k.rowspan=s),Od(h,c,c.createPositionAfter(e),k);const x=o.getAttribute("headingColumns")||0;x>b&&zi("headingColumns",x+h,o,c)}})}splitCellHorizontally(e,t=2){const n=this.editor.model,r=e.parent,o=r.parent,s=o.getChildIndex(r),l=parseInt(e.getAttribute("rowspan")||"1"),c=parseInt(e.getAttribute("colspan")||"1");n.change(h=>{if(l>1){const g=[...new Nn(o,{startRow:s,endRow:s+l-1,includeAllSlots:!0})],{newCellsSpan:b,updatedSpan:y}=Oy(l,t);zi("rowspan",y,e,h);const{column:k}=g.find(({cell:L})=>L===e),x={};b>1&&(x.rowspan=b),c>1&&(x.colspan=c);let D=0;for(const L of g){const{column:M,row:V}=L,O=V>=s+y,U=M===k;D>=b&&U&&(D=0),O&&U&&(D||Od(1,h,L.getPositionBefore(),x),D++)}}if(l<t){const g=t-l,b=[...new Nn(o,{startRow:0,endRow:s})];for(const{cell:x,cellHeight:D,row:L}of b)if(x!==e&&L+D>s){const M=D+g;h.setAttribute("rowspan",M,x)}const y={};c>1&&(y.colspan=c),wb(h,o,s+1,g,1,y);const k=o.getAttribute("headingRows")||0;k>s&&zi("headingRows",k+g,o,h)}})}getColumns(e){return[...e.getChild(0).getChildren()].filter(n=>n.is("element","tableCell")).reduce((n,r)=>{const o=parseInt(r.getAttribute("colspan")||"1");return n+o},0)}getRows(e){return Array.from(e.getChildren()).reduce((t,n)=>n.is("element","tableRow")?t+1:t,0)}createTableWalker(e,t={}){return new Nn(e,t)}getSelectedTableCells(e){const t=[];for(const n of this.sortRanges(e.getRanges())){const r=n.getContainedElement();r&&r.is("element","tableCell")&&t.push(r)}return t}getTableCellsContainingSelection(e){const t=[];for(const n of e.getRanges()){const r=n.start.findAncestor("tableCell");r&&t.push(r)}return t}getSelectionAffectedTableCells(e){const t=this.getSelectedTableCells(e);return t.length?t:this.getTableCellsContainingSelection(e)}getRowIndexes(e){const t=e.map(n=>n.parent.index);return this._getFirstLastIndexesObject(t)}getColumnIndexes(e){const t=e[0].findAncestor("table"),r=[...new Nn(t)].filter(o=>e.includes(o.cell)).map(o=>o.column);return this._getFirstLastIndexesObject(r)}isSelectionRectangular(e){if(e.length<2||!this._areCellInTheSameTableSection(e))return!1;const t=new Set,n=new Set;let r=0;for(const s of e){const{row:l,column:c}=this.getCellLocation(s),h=parseInt(s.getAttribute("rowspan"))||1,g=parseInt(s.getAttribute("colspan"))||1;t.add(l),n.add(c),h>1&&t.add(l+h-1),g>1&&n.add(c+g-1),r+=h*g}return F9(t,n)==r}sortRanges(e){return Array.from(e).sort(O9)}_getFirstLastIndexesObject(e){const t=e.sort((o,s)=>o-s),n=t[0],r=t[t.length-1];return{first:n,last:r}}_areCellInTheSameTableSection(e){const t=e[0].findAncestor("table"),n=this.getRowIndexes(e),r=parseInt(t.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(n,r))return!1;const o=this.getColumnIndexes(e),s=parseInt(t.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(o,s)}_areIndexesInSameSection({first:e,last:t},n){const r=e<n,o=t<n;return r===o}}function wb(i,e,t,n,r,o={}){for(let s=0;s<n;s++){const l=i.createElement("tableRow");i.insert(l,e,t),Od(r,i,i.createPositionAt(l,"end"),o)}}function Od(i,e,t,n={}){for(let r=0;r<i;r++)Iu(e,t,n)}function Oy(i,e){if(i<e)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(i/e),n=i-t*e+t;return{newCellsSpan:t,updatedSpan:n}}function P9(i,e,t){const n=i.getAttribute("headingColumns")||0;if(n&&e.first<n){const r=Math.min(n-1,e.last)-e.first+1;t.setAttribute("headingColumns",n-r,i)}}function I9(i,{first:e,last:t},n){const r=i.getAttribute("headingRows")||0;if(e<r){const o=t<r?r-(t-e+1):e;zi("headingRows",o,i,n,0)}}function D9(i,{first:e,last:t}){const n=new Map,r=[];for(const{row:o,column:s,cellHeight:l,cell:c}of new Nn(i,{endRow:t})){const h=o+l-1;if(o>=e&&o<=t&&h>t){const y=t-o+1,k=l-y;n.set(s,{cell:c,rowspan:k})}if(o<e&&h>=e){let y;h>=t?y=t-e+1:y=h-e+1,r.push({cell:c,rowspan:l-y})}}return{cellsToMove:n,cellsToTrim:r}}function R9(i,e,t,n){const o=[...new Nn(i,{includeAllSlots:!0,row:e})],s=i.getChild(e);let l;for(const{column:c,cell:h,isAnchor:g}of o)if(t.has(c)){const{cell:b,rowspan:y}=t.get(c),k=l?n.createPositionAfter(l):n.createPositionAt(s,0);n.move(n.createRangeOn(b),k),zi("rowspan",y,b,n),l=b}else g&&(l=h)}function O9(i,e){const t=i.start,n=e.start;return t.isBefore(n)?-1:1}function F9(i,e){const t=Array.from(i.values()),n=Array.from(e.values()),r=Math.max(...t),o=Math.min(...t),s=Math.max(...n),l=Math.min(...n);return(r-o+1)*(s-l+1)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M9 extends Wt{refresh(){const e=this.editor.plugins.get(Ir),t=e.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=e.isSelectionRectangular(t)}execute(){const e=this.editor.model,t=this.editor.plugins.get(Ir);e.change(n=>{const r=t.getSelectedTableCells(e.document.selection),o=r.shift(),{mergeWidth:s,mergeHeight:l}=B9(o,r,t);zi("colspan",s,o,n),zi("rowspan",l,o,n);for(const h of r)L9(h,o,n);const c=o.findAncestor("table");uv(c,t),n.setSelection(o,"in")})}}function L9(i,e,t){Fy(i)||(Fy(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(i),t.createPositionAt(e,"end"))),t.remove(i)}function Fy(i){const e=i.getChild(0);return i.childCount==1&&e.is("element","paragraph")&&e.isEmpty}function B9(i,e,t){let n=0,r=0;for(const h of e){const{row:g,column:b}=t.getCellLocation(h);n=My(h,b,n,"colspan"),r=My(h,g,r,"rowspan")}const{row:o,column:s}=t.getCellLocation(i),l=n-s,c=r-o;return{mergeWidth:l,mergeHeight:c}}function My(i,e,t,n){const r=parseInt(i.getAttribute(n)||"1");return Math.max(t,e+r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N9 extends Wt{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),n=t.getSelectionAffectedTableCells(e.document.selection),r=t.getRowIndexes(n),o=n[0].findAncestor("table"),s=[];for(let l=r.first;l<=r.last;l++)for(const c of o.getChild(l).getChildren())s.push(e.createRangeOn(c));e.change(l=>{l.setSelection(s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class V9 extends Wt{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,n=e.getSelectionAffectedTableCells(t.document.selection),r=n[0],o=n.pop(),s=r.findAncestor("table"),l=e.getCellLocation(r),c=e.getCellLocation(o),h=Math.min(l.column,c.column),g=Math.max(l.column,c.column),b=[];for(const y of new Nn(s,{startColumn:h,endColumn:g}))b.push(t.createRangeOn(y.cell));t.change(y=>{y.setSelection(b)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function z9(i){i.document.registerPostFixer(e=>H9(e,i))}function H9(i,e){const t=e.document.differ.getChanges();let n=!1;const r=new Set;for(const o of t){let s=null;o.type=="insert"&&o.name=="table"&&(s=o.position.nodeAfter),(o.type=="insert"||o.type=="remove")&&(o.name=="tableRow"||o.name=="tableCell")&&(s=o.position.findAncestor("table")),q9(o)&&(s=o.range.start.findAncestor("table")),s&&!r.has(s)&&(n=U9(s,i)||n,n=W9(s,i)||n,r.add(s))}return n}function U9(i,e){let t=!1;const n=j9(i);if(n.length){t=!0;for(const r of n)zi("rowspan",r.rowspan,r.cell,e,1)}return t}function W9(i,e){let t=!1;const n=$9(i),r=[];for(const[c,h]of n.entries())!h&&i.getChild(c).is("element","tableRow")&&r.push(c);if(r.length){t=!0;for(const c of r.reverse())e.remove(i.getChild(c)),n.splice(c,1)}const o=n.filter((c,h)=>i.getChild(h).is("element","tableRow")),s=o[0];if(!o.every(c=>c===s)){const c=o.reduce((h,g)=>g>h?g:h,0);for(const[h,g]of o.entries()){const b=c-g;if(b){for(let y=0;y<b;y++)Iu(e,e.createPositionAt(i.getChild(h),"end"));t=!0}}}return t}function j9(i){const e=parseInt(i.getAttribute("headingRows")||"0"),t=Array.from(i.getChildren()).reduce((r,o)=>o.is("element","tableRow")?r+1:r,0),n=[];for(const{row:r,cell:o,cellHeight:s}of new Nn(i)){if(s<2)continue;const c=r<e?e:t;if(r+s>c){const h=c-r;n.push({cell:o,rowspan:h})}}return n}function $9(i){const e=new Array(i.childCount).fill(0);for(const{rowIndex:t}of new Nn(i,{includeAllSlots:!0}))e[t]++;return e}function q9(i){if(i.type!=="attribute")return!1;const e=i.attributeKey;return e==="headingRows"||e==="colspan"||e==="rowspan"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function G9(i){i.document.registerPostFixer(e=>K9(e,i))}function K9(i,e){const t=e.document.differ.getChanges();let n=!1;for(const r of t)r.type=="insert"&&r.name=="table"&&(n=Z9(r.position.nodeAfter,i)||n),r.type=="insert"&&r.name=="tableRow"&&(n=EE(r.position.nodeAfter,i)||n),r.type=="insert"&&r.name=="tableCell"&&(n=m0(r.position.nodeAfter,i)||n),(r.type=="remove"||r.type=="insert")&&Y9(r)&&(n=m0(r.position.parent,i)||n);return n}function Z9(i,e){let t=!1;for(const n of i.getChildren())n.is("element","tableRow")&&(t=EE(n,e)||t);return t}function EE(i,e){let t=!1;for(const n of i.getChildren())t=m0(n,e)||t;return t}function m0(i,e){if(i.childCount==0)return e.insertElement("paragraph",i),!0;const t=Array.from(i.getChildren()).filter(n=>n.is("$text"));for(const n of t)e.wrap(e.createRangeOn(n),"paragraph");return!!t.length}function Y9(i){return i.position.parent.is("element","tableCell")?i.type=="insert"&&i.name=="$text"||i.type=="remove":!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function J9(i,e){const t=i.document.differ;for(const n of t.getChanges()){let r,o=!1;if(n.type=="attribute"){const h=n.range.start.nodeAfter;if(!h||!h.is("element","table")||n.attributeKey!="headingRows"&&n.attributeKey!="headingColumns")continue;r=h,o=n.attributeKey=="headingRows"}else(n.name=="tableRow"||n.name=="tableCell")&&(r=n.position.findAncestor("table"),o=n.name=="tableRow");if(!r)continue;const s=r.getAttribute("headingRows")||0,l=r.getAttribute("headingColumns")||0,c=new Nn(r);for(const h of c){const b=h.row<s||h.column<l?"th":"td",y=e.mapper.toViewElement(h.cell);y&&y.is("element")&&y.name!=b&&e.reconvertItem(o?h.cell.parent:h.cell)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function X9(i,e){const t=i.document.differ,n=new Set;for(const r of t.getChanges()){const o=r.type=="attribute"?r.range.start.parent:r.position.parent;o.is("element","tableCell")&&n.add(o)}for(const r of n.values()){const o=Array.from(r.getChildren()).filter(s=>Q9(s,e.mapper));for(const s of o)e.reconvertItem(s)}}function Q9(i,e){if(!i.is("element","paragraph"))return!1;const t=e.toViewElement(i);return t?mE(i)!==t.is("element","span"):!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class em extends Fe{static get pluginName(){return"TableEditing"}static get requires(){return[Ir]}constructor(e){super(e),this._additionalSlots=[]}init(){const e=this.editor,t=e.model,n=t.schema,r=e.conversion,o=e.plugins.get(Ir);n.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),r.for("upcast").add(Z8()),r.for("upcast").add(Y8()),r.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Ey(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),r.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Ey(o,{additionalSlots:this._additionalSlots})}),r.for("upcast").elementToElement({model:"tableRow",view:"tr"}),r.for("upcast").add(J8()),r.for("downcast").elementToElement({model:"tableRow",view:n9()}),r.for("upcast").elementToElement({model:"tableCell",view:"td"}),r.for("upcast").elementToElement({model:"tableCell",view:"th"}),r.for("upcast").add(xy("td")),r.for("upcast").add(xy("th")),r.for("editingDowncast").elementToElement({model:"tableCell",view:Sy({asWidget:!0})}),r.for("dataDowncast").elementToElement({model:"tableCell",view:Sy()}),r.for("editingDowncast").elementToElement({model:"paragraph",view:Ty({asWidget:!0}),converterPriority:"high"}),r.for("dataDowncast").elementToElement({model:"paragraph",view:Ty(),converterPriority:"high"}),r.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),r.for("upcast").attributeToAttribute({model:{key:"colspan",value:Ly("colspan")},view:"colspan"}),r.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),r.for("upcast").attributeToAttribute({model:{key:"rowspan",value:Ly("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new o9(e)),e.commands.add("insertTableRowAbove",new Ay(e,{order:"above"})),e.commands.add("insertTableRowBelow",new Ay(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new Py(e,{order:"left"})),e.commands.add("insertTableColumnRight",new Py(e,{order:"right"})),e.commands.add("removeTableRow",new d9(e)),e.commands.add("removeTableColumn",new f9(e)),e.commands.add("splitTableCellVertically",new Iy(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new Iy(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new M9(e)),e.commands.add("mergeTableCellRight",new qm(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new qm(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new qm(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new qm(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new b9(e)),e.commands.add("setTableRowHeader",new g9(e)),e.commands.add("selectTableRow",new N9(e)),e.commands.add("selectTableColumn",new V9(e)),z9(t),G9(t),this.listenTo(t.document,"change:data",()=>{J9(t,e.editing),X9(t,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function Ly(i){return e=>{const t=parseInt(e.getAttribute(i));return Number.isNaN(t)||t<=0?null:t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class By extends mt{constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new di,this.focusTracker=new Jn,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(n,r)=>`${r} × ${n}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:t.to("label")}]}],on:{mousedown:t.to(n=>{n.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(n,r)=>{const{row:o,column:s}=r.target.dataset;this.items.get((parseInt(o,10)-1)*10+(parseInt(s,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(n,r,o)=>{if(!o)return;const{row:s,column:l}=o.dataset;this.set({rows:parseInt(s),columns:parseInt(l)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),V0({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map((n,r)=>{const o=Math.floor(r/10),s=r%10,l=o<e&&s<t;n.set("isOn",l)})}_createGridButton(e,t,n,r){const o=new Ht(e);return o.set({label:r,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":t,"data-column":n}}),o}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const n=Math.floor(t/10),r=t%10,o=`${n+1} × ${r+1}`;e.push(this._createGridButton(this.locale,n+1,r+1,o))}return this.createCollection(e)}}const eV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',tV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',nV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iV extends Fe{static get pluginName(){return"TableUI"}init(){const e=this.editor,t=this.editor.t,r=e.locale.contentLanguageDirection==="ltr";e.ui.componentFactory.add("insertTable",o=>{const s=e.commands.get("insertTable"),l=Dr(o);l.bind("isEnabled").to(s),l.buttonView.set({icon:it.table,label:t("Insert table"),tooltip:!0});let c;return l.on("change:isOpen",()=>{c||(c=new By(o),l.panelView.children.add(c),c.delegate("execute").to(l),l.on("execute",()=>{e.execute("insertTable",{rows:c.rows,columns:c.columns}),e.editing.view.focus()}))}),l}),e.ui.componentFactory.add("menuBar:insertTable",o=>{const s=e.commands.get("insertTable"),l=new Qo(o),c=new By(o);return c.delegate("execute").to(l),l.on("change:isOpen",(h,g,b)=>{b||c.reset()}),c.on("execute",()=>{e.execute("insertTable",{rows:c.rows,columns:c.columns}),e.editing.view.focus()}),l.buttonView.set({label:t("Table"),icon:it.table}),l.panelView.children.add(c),l.bind("isEnabled").to(s),l}),e.ui.componentFactory.add("tableColumn",o=>{const s=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:r?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:r?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),eV,s,o)}),e.ui.componentFactory.add("tableRow",o=>{const s=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),tV,s,o)}),e.ui.componentFactory.add("mergeTableCells",o=>{const s=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:r?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:r?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),nV,s,o)})}_prepareDropdown(e,t,n,r){const o=this.editor,s=Dr(r),l=this._fillDropdownWithListOptions(s,n);return s.buttonView.set({label:e,icon:t,tooltip:!0}),s.bind("isEnabled").toMany(l,"isEnabled",(...c)=>c.some(h=>h)),this.listenTo(s,"execute",c=>{o.execute(c.source.commandName),c.source instanceof ig||o.editing.view.focus()}),s}_prepareMergeSplitButtonDropdown(e,t,n,r){const o=this.editor,s=Dr(r,og),l="mergeTableCells",c=o.commands.get(l),h=this._fillDropdownWithListOptions(s,n);return s.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),s.bind("isEnabled").toMany([c,...h],"isEnabled",(...g)=>g.some(b=>b)),this.listenTo(s.buttonView,"execute",()=>{o.execute(l),o.editing.view.focus()}),this.listenTo(s,"execute",g=>{o.execute(g.source.commandName),o.editing.view.focus()}),s}_fillDropdownWithListOptions(e,t){const n=this.editor,r=[],o=new Or;for(const s of t)rV(s,n,r,o);return xl(e,o),r}}function rV(i,e,t,n){if(i.type==="button"||i.type==="switchbutton"){const r=i.model=new yl(i.model),{commandName:o,bindIsOn:s}=i.model,l=e.commands.get(o);t.push(l),r.set({commandName:o}),r.bind("isEnabled").to(l),s&&r.bind("isOn").to(l,"value"),r.set({withText:!0})}n.add(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hu extends Fe{static get pluginName(){return"TableSelection"}static get requires(){return[Ir,Ir]}init(){const e=this.editor,t=e.model,n=e.editing.view;this.listenTo(t,"deleteContent",(r,o)=>this._handleDeleteContent(r,o),{priority:"high"}),this.listenTo(n.document,"insertText",(r,o)=>this._handleInsertTextEvent(r,o),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=this.editor.plugins.get(Ir),t=this.editor.model.document.selection,n=e.getSelectedTableCells(t);return n.length==0?null:n}getSelectionAsFragment(){const e=this.editor.plugins.get(Ir),t=this.getSelectedTableCells();return t?this.editor.model.change(n=>{const r=n.createDocumentFragment(),{first:o,last:s}=e.getColumnIndexes(t),{first:l,last:c}=e.getRowIndexes(t),h=t[0].findAncestor("table");let g=c,b=s;if(e.isSelectionRectangular(t)){const x={firstColumn:o,lastColumn:s,firstRow:l,lastRow:c};g=_E(h,x),b=kE(h,x)}const k=pE(h,{startRow:l,startColumn:o,endRow:g,endColumn:b},n);return n.insert(k,r,0),r}):null}setCellSelection(e,t){const n=this._getCellsToSelect(e,t);this.editor.model.change(r=>{r.setSelection(n.cells.map(o=>r.createRangeOn(o)),{backward:n.backward})})}getFocusCell(){const n=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return n&&n.is("element","tableCell")?n:null}getAnchorCell(){const e=this.editor.model.document.selection,n=Wi(e.getRanges()).getContainedElement();return n&&n.is("element","tableCell")?n:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add(r=>r.on("selection",(o,s,l)=>{const c=l.writer;n(c);const h=this.getSelectedTableCells();if(!h)return;for(const b of h){const y=l.mapper.toViewElement(b);c.addClass("ck-editor__editable_selected",y),t.add(y)}const g=l.mapper.toViewElement(h[h.length-1]);c.setSelection(g,0)},{priority:"lowest"}));function n(r){for(const o of t)r.removeClass("ck-editor__editable_selected",o);t.clear()}}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change(n=>{const r=n.createPositionAt(t[0],0),o=e.model.schema.getNearestSelectionRange(r);n.setSelection(o)})}})}_handleDeleteContent(e,t){const n=this.editor.plugins.get(Ir),r=t[0],o=t[1],s=this.editor.model,l=!o||o.direction=="backward",c=n.getSelectedTableCells(r);c.length&&(e.stop(),s.change(h=>{const g=c[l?c.length-1:0];s.change(y=>{for(const k of c)s.deleteContent(y.createSelection(k,"in"))});const b=s.schema.getNearestSelectionRange(h.createPositionAt(g,0));r.is("documentSelection")?h.setSelection(b):r.setTo(b)}))}_handleInsertTextEvent(e,t){const n=this.editor,r=this.getSelectedTableCells();if(!r)return;const o=n.editing.view,s=n.editing.mapper,l=r.map(c=>o.createRangeOn(s.toViewElement(c)));t.selection=o.createSelection(l)}_getCellsToSelect(e,t){const n=this.editor.plugins.get("TableUtils"),r=n.getCellLocation(e),o=n.getCellLocation(t),s=Math.min(r.row,o.row),l=Math.max(r.row,o.row),c=Math.min(r.column,o.column),h=Math.max(r.column,o.column),g=new Array(l-s+1).fill(null).map(()=>[]),b={startRow:s,endRow:l,startColumn:c,endColumn:h};for(const{row:x,cell:D}of new Nn(e.findAncestor("table"),b))g[x-s].push(D);const y=o.row<r.row,k=o.column<r.column;return y&&g.reverse(),k&&g.forEach(x=>x.reverse()),{cells:g.flat(),backward:y||k}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oV extends Fe{static get pluginName(){return"TableClipboard"}static get requires(){return[gf,Ys,hu,Ir]}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",(n,r)=>this._onCopyCut(n,r)),this.listenTo(t,"cut",(n,r)=>this._onCopyCut(n,r)),this.listenTo(e.model,"insertContent",(n,[r,o])=>this._onInsertContent(n,r,o),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(e,t){const n=this.editor.editing.view,r=this.editor.plugins.get(hu),o=this.editor.plugins.get(gf);r.getSelectedTableCells()&&(e.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(t.preventDefault(),e.stop(),this.editor.model.enqueueChange({isUndoable:e.name==="cut"},()=>{const s=o._copySelectedFragmentWithMarkers(e.name,this.editor.model.document.selection,()=>r.getSelectionAsFragment());n.document.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:this.editor.data.toView(s),method:e.name})})))}_onInsertContent(e,t,n){if(n&&!n.is("documentSelection"))return;const r=this.editor.model,o=this.editor.plugins.get(Ir),s=this.editor.plugins.get(gf),l=this.getTableIfOnlyTableInContent(t,r);if(!l)return;const c=o.getSelectionAffectedTableCells(r.document.selection);if(!c.length){uv(l,o);return}e.stop(),t.is("documentFragment")?s._pasteMarkersIntoTransformedElement(t.markers,h=>this._replaceSelectedCells(l,c,h)):this.editor.model.change(h=>{this._replaceSelectedCells(l,c,h)})}_replaceSelectedCells(e,t,n){const r=this.editor.plugins.get(Ir),o={width:r.getColumns(e),height:r.getRows(e)},s=sV(t,o,n,r),l=s.lastRow-s.firstRow+1,c=s.lastColumn-s.firstColumn+1,h={startRow:0,startColumn:0,endRow:Math.min(l,o.height)-1,endColumn:Math.min(c,o.width)-1};e=pE(e,h,n);const g=t[0].findAncestor("table"),b=this._replaceSelectedCellsWithPasted(e,o,g,s,n);if(this.editor.plugins.get("TableSelection").isEnabled){const y=r.sortRanges(b.map(k=>n.createRangeOn(k)));n.setSelection(y)}else n.setSelection(b[0],0);return g}_replaceSelectedCellsWithPasted(e,t,n,r,o){const{width:s,height:l}=t,c=lV(e,s,l),h=[...new Nn(n,{startRow:r.firstRow,endRow:r.lastRow,startColumn:r.firstColumn,endColumn:r.lastColumn,includeAllSlots:!0})],g=[];let b;for(const L of h){const{row:M,column:V}=L;V===r.firstColumn&&(b=L.getPositionBefore());const O=M-r.firstRow,U=V-r.firstColumn,K=c[O%l][U%s],q=K?o.cloneElement(K):null,Q=this._replaceTableSlotCell(L,q,b,o);Q&&(yE(Q,M,V,r.lastRow,r.lastColumn,o),g.push(Q),b=o.createPositionAfter(Q))}const y=parseInt(n.getAttribute("headingRows")||"0"),k=parseInt(n.getAttribute("headingColumns")||"0"),x=r.firstRow<y&&y<=r.lastRow,D=r.firstColumn<k&&k<=r.lastColumn;if(x){const L={first:r.firstColumn,last:r.lastColumn},M=p0(n,y,L,o,r.firstRow);g.push(...M)}if(D){const L={first:r.firstRow,last:r.lastRow},M=g0(n,k,L,o);g.push(...M)}return g}_replaceTableSlotCell(e,t,n,r){const{cell:o,isAnchor:s}=e;return s&&r.remove(o),t?(r.insert(t,n),t):null}getTableIfOnlyTableInContent(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(e.childCount==1&&e.getChild(0).is("element","table"))return e.getChild(0);const n=t.createRangeIn(e);for(const r of n.getItems())if(r.is("element","table")){const o=t.createRange(n.start,t.createPositionBefore(r));if(t.hasContent(o,{ignoreWhitespaces:!0}))return null;const s=t.createRange(t.createPositionAfter(r),n.end);return t.hasContent(s,{ignoreWhitespaces:!0})?null:r}return null}}function sV(i,e,t,n){const r=i[0].findAncestor("table"),o=n.getColumnIndexes(i),s=n.getRowIndexes(i),l={firstColumn:o.first,lastColumn:o.last,firstRow:s.first,lastRow:s.last},c=i.length===1;return c&&(l.lastRow+=e.height-1,l.lastColumn+=e.width-1,aV(r,l.lastRow+1,l.lastColumn+1,n)),c||!n.isSelectionRectangular(i)?cV(r,l,t):(l.lastRow=_E(r,l),l.lastColumn=kE(r,l)),l}function aV(i,e,t,n){const r=n.getColumns(i),o=n.getRows(i);t>r&&n.insertColumns(i,{at:r,columns:t-r}),e>o&&n.insertRows(i,{at:o,rows:e-o})}function lV(i,e,t){const n=new Array(t).fill(null).map(()=>new Array(e).fill(null));for(const{column:r,row:o,cell:s}of new Nn(i))n[o][r]=s;return n}function cV(i,e,t){const{firstRow:n,lastRow:r,firstColumn:o,lastColumn:s}=e,l={first:n,last:r},c={first:o,last:s};g0(i,o,l,t),g0(i,s+1,l,t),p0(i,n,c,t),p0(i,r+1,c,t,n)}function p0(i,e,t,n,r=0){return e<1?void 0:gE(i,e,r).filter(({column:l,cellWidth:c})=>SE(l,c,t)).map(({cell:l})=>bE(l,e,n))}function g0(i,e,t,n){return e<1?void 0:vE(i,e).filter(({row:s,cellHeight:l})=>SE(s,l,t)).map(({cell:s,column:l})=>wE(s,l,e,n))}function SE(i,e,t){const n=i+e-1,{first:r,last:o}=t,s=i>=r&&i<=o,l=i<r&&n>=r;return s||l}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uV extends Fe{static get pluginName(){return"TableKeyboard"}static get requires(){return[hu,Ir]}init(){const e=this.editor,n=e.editing.view.document,r=e.t;this.listenTo(n,"arrowKey",(...o)=>this._onArrowKey(...o),{context:"table"}),this.listenTo(n,"tab",(...o)=>this._handleTabOnSelectedTable(...o),{context:"figure"}),this.listenTo(n,"tab",(...o)=>this._handleTab(...o),{context:["th","td"]}),e.accessibility.addKeystrokeInfoGroup({id:"table",label:r("Keystrokes that can be used in a table cell"),keystrokes:[{label:r("Move the selection to the next cell"),keystroke:"Tab"},{label:r("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:r("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:r("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(e,t){const n=this.editor,o=n.model.document.selection.getSelectedElement();!o||!o.is("element","table")||(t.preventDefault(),t.stopPropagation(),e.stop(),n.model.change(s=>{s.setSelection(s.createRangeIn(o.getChild(0).getChild(0)))}))}_handleTab(e,t){const n=this.editor,r=this.editor.plugins.get(Ir),o=this.editor.plugins.get("TableSelection"),s=n.model.document.selection,l=!t.shiftKey;let c=r.getTableCellsContainingSelection(s)[0];if(c||(c=o.getFocusCell()),!c)return;t.preventDefault(),t.stopPropagation(),e.stop();const h=c.parent,g=h.parent,b=g.getChildIndex(h),y=h.getChildIndex(c),k=y===0;if(!l&&k&&b===0){n.model.change(M=>{M.setSelection(M.createRangeOn(g))});return}const x=y===h.childCount-1,D=b===r.getRows(g)-1;if(l&&D&&x&&(n.execute("insertTableRowBelow"),b===r.getRows(g)-1)){n.model.change(M=>{M.setSelection(M.createRangeOn(g))});return}let L;if(l&&x)L=g.getChild(b+1).getChild(0);else if(!l&&k){const M=g.getChild(b-1);L=M.getChild(M.childCount-1)}else L=h.getChild(y+(l?1:-1));n.model.change(M=>{M.setSelection(M.createRangeIn(L))})}_onArrowKey(e,t){const n=this.editor,r=t.keyCode,o=O0(r,n.locale.contentLanguageDirection);this._handleArrowKeys(o,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const n=this.editor.plugins.get(Ir),r=this.editor.plugins.get("TableSelection"),o=this.editor.model,s=o.document.selection,l=["right","down"].includes(e),c=n.getSelectedTableCells(s);if(c.length){let g;return t?g=r.getFocusCell():g=l?c[c.length-1]:c[0],this._navigateFromCellInDirection(g,e,t),!0}const h=s.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!h)return!1;if(!s.isCollapsed)if(t){if(s.isBackward==l&&!s.containsEntireContent(h))return!1}else{const g=s.getSelectedElement();if(!g||!o.schema.isObject(g))return!1}return this._isSelectionAtCellEdge(s,h,l)?(this._navigateFromCellInDirection(h,e,t),!0):!1}_isSelectionAtCellEdge(e,t,n){const r=this.editor.model,o=this.editor.model.schema,s=n?e.getLastPosition():e.getFirstPosition();if(!o.getLimitElement(s).is("element","tableCell"))return r.createPositionAt(t,n?"end":0).isTouching(s);const l=r.createSelection(s);return r.modifySelection(l,{direction:n?"forward":"backward"}),s.isEqual(l.focus)}_navigateFromCellInDirection(e,t,n=!1){const r=this.editor.model,o=e.findAncestor("table"),s=[...new Nn(o,{includeAllSlots:!0})],{row:l,column:c}=s[s.length-1],h=s.find(({cell:V})=>V==e);let{row:g,column:b}=h;switch(t){case"left":b--;break;case"up":g--;break;case"right":b+=h.cellWidth;break;case"down":g+=h.cellHeight;break}const y=g<0||g>l,k=b<0&&g<=0,x=b>c&&g>=l;if(y||k||x){r.change(V=>{V.setSelection(V.createRangeOn(o))});return}b<0?(b=n?0:c,g--):b>c&&(b=n?c:0,g++);const D=s.find(V=>V.row==g&&V.column==b).cell,L=["right","down"].includes(t),M=this.editor.plugins.get("TableSelection");if(n&&M.isEnabled){const V=M.getAnchorCell()||e;M.setCellSelection(V,D)}else{const V=r.createPositionAt(D,L?0:"end");r.change(O=>{O.setSelection(V)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TE extends kc{constructor(){super(...arguments),this.domEventType=["mousemove","mouseleave"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dV extends Fe{static get pluginName(){return"TableMouse"}static get requires(){return[hu,Ir]}init(){this.editor.editing.view.addObserver(TE),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor,t=e.plugins.get(Ir);let n=!1;const r=e.plugins.get(hu);this.listenTo(e.editing.view.document,"mousedown",(o,s)=>{const l=e.model.document.selection;if(!this.isEnabled||!r.isEnabled||!s.domEvent.shiftKey)return;const c=r.getAnchorCell()||t.getTableCellsContainingSelection(l)[0];if(!c)return;const h=this._getModelTableCellFromDomEvent(s);h&&Ny(c,h)&&(n=!0,r.setCellSelection(c,h),s.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{n=!1}),this.listenTo(e.editing.view.document,"selectionChange",o=>{n&&o.stop()},{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,n,r=!1,o=!1;const s=e.plugins.get(hu);this.listenTo(e.editing.view.document,"mousedown",(l,c)=>{!this.isEnabled||!s.isEnabled||c.domEvent.shiftKey||c.domEvent.ctrlKey||c.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(c))}),this.listenTo(e.editing.view.document,"mousemove",(l,c)=>{if(!c.domEvent.buttons||!t)return;const h=this._getModelTableCellFromDomEvent(c);h&&Ny(t,h)&&(n=h,!r&&n!=t&&(r=!0)),r&&(o=!0,s.setCellSelection(t,n),c.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{r=!1,o=!1,t=null,n=null}),this.listenTo(e.editing.view.document,"selectionChange",l=>{o&&l.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,n=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function Ny(i,e){return i.parent.parent==e.parent.parent}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hV extends Fe{static get requires(){return[em,iV,hu,dV,uV,oV,Pa]}static get pluginName(){return"Table"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function AE(i){const e=PE(i);return e||ug(i)}function PE(i){const e=i.getSelectedElement();return e&&IE(e)?e:null}function ug(i){const e=i.getFirstPosition();if(!e)return null;let t=e.parent;for(;t;){if(t.is("element")&&IE(t))return t;t=t.parent}return null}function IE(i){return!!i.getCustomProperty("table")&&Hi(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fV extends Fe{static get requires(){return[Ap]}static get pluginName(){return"TableToolbar"}afterInit(){const e=this.editor,t=e.t,n=e.plugins.get(Ap),r=e.config.get("table.contentToolbar"),o=e.config.get("table.tableToolbar");r&&n.register("tableContent",{ariaLabel:t("Table toolbar"),items:r,getRelatedElement:ug}),o&&n.register("table",{ariaLabel:t("Table toolbar"),items:o,getRelatedElement:PE})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mV extends mt{constructor(e,t){super(e),this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=t,this.focusTracker=new Jn,this._focusables=new Wr,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new di,this._stillTyping=!1,this.focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(n,r,o)=>this._setInputValue(o))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,t=e.t,n=this.bindTemplate,r=this._createColorSelector(e),o=Dr(e),s=new mt;return s.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:n.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",n.if("value","ck-hidden",l=>l!="")]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(s),o.buttonView.label=t("Color picker"),o.buttonView.tooltip=!0,o.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",o.panelView.children.add(r),o.bind("isEnabled").to(this,"isReadOnly",l=>!l),o.on("change:isOpen",(l,c,h)=>{h&&(r.updateSelectedColors(),r.showColorGridsFragment())}),o}_createInputTextView(){const e=this.locale,t=new xx(e);return t.extendTemplate({on:{blur:t.bindTemplate.to("blur")}}),t.value=this.value,t.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(t),t.on("input",()=>{const n=t.element.value,r=this.options.colorDefinitions.find(o=>n===o.label);this._stillTyping=!0,this.value=r&&r.color||n}),t.on("blur",()=>{this._stillTyping=!1,this._setInputValue(t.element.value)}),t.delegate("input").to(this),t}_createColorSelector(e){const t=e.t,n=this.options.defaultColorValue||"",r=t(n?"Restore default":"Remove color"),o=new nv(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:r,colorPickerLabel:t("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});o.appendUI(),o.on("execute",(l,c)=>{if(c.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=c.value||n,this.fire("input"),c.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let s=this.value;return o.on("colorPicker:cancel",()=>{this.value=s,this.fire("input"),this.dropdownView.isOpen=!1}),o.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{s=this.value}),o.bind("selectedColor").to(this,"value"),o}_setInputValue(e){if(!this._stillTyping){const t=Vy(e),n=this.options.colorDefinitions.find(r=>t===Vy(r.color));n?this.inputView.value=n.label:this.inputView.value=e||""}}}function Vy(i){return i.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hv=i=>i==="";function fv(i){return{none:i("None"),solid:i("Solid"),dotted:i("Dotted"),dashed:i("Dashed"),double:i("Double"),groove:i("Groove"),ridge:i("Ridge"),inset:i("Inset"),outset:i("Outset")}}function DE(i){return i('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function RE(i){return i('The value is invalid. Try "10px" or "2em" or simply "2".')}function Pp(i){return i=i.trim().toLowerCase(),hv(i)||ox(i)}function vf(i){return i=i.trim(),hv(i)||ME(i)||tg(i)||sx(i)}function OE(i){return i=i.trim(),hv(i)||ME(i)||tg(i)}function FE(i,e){const t=new Or,n=fv(i.t);for(const r in n){const o={type:"button",model:new yl({_borderStyleValue:r,label:n[r],role:"menuitemradio",withText:!0})};r==="none"?o.model.bind("isOn").to(i,"borderStyle",s=>e==="none"?!s:s===r):o.model.bind("isOn").to(i,"borderStyle",s=>s===r),t.add(o)}return t}function b0(i){const{view:e,icons:t,toolbar:n,labels:r,propertyName:o,nameToValue:s,defaultValue:l}=i;for(const c in r){const h=new Ht(e.locale);h.set({label:r[c],icon:t[c],tooltip:r[c]});const g=s?s(c):c;h.bind("isOn").to(e,o,b=>{let y=b;return b===""&&l&&(y=l),g===y}),h.on("execute",()=>{e[o]=g}),n.items.add(h)}}const Ip=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function Dp(i){return(e,t,n)=>{const r=new mV(e.locale,{colorDefinitions:pV(i.colorConfig),columns:i.columns,defaultColorValue:i.defaultColorValue,colorPickerConfig:i.colorPickerConfig});return r.inputView.set({id:t,ariaDescribedById:n}),r.bind("isReadOnly").to(e,"isEnabled",o=>!o),r.bind("hasError").to(e,"errorText",o=>!!o),r.on("input",()=>{e.errorText=null}),e.bind("isEmpty","isFocused").to(r),r}}function ME(i){const e=parseFloat(i);return!Number.isNaN(e)&&i===String(e)}function pV(i){return i.map(e=>({color:e.model,label:e.label,options:{hasBorder:e.hasBorder}}))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $o extends mt{constructor(e,t={}){super(e);const n=this.bindTemplate;this.set("class",t.class||null),this.children=this.createCollection(),t.children&&t.children.forEach(r=>this.children.add(r)),this.set("_role",null),this.set("_ariaLabelledBy",null),t.labelView&&this.set({_role:"group",_ariaLabelledBy:t.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",n.to("class")],role:n.to("_role"),"aria-labelledby":n.to("_ariaLabelledBy")},children:this.children})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gV extends mt{constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=t;const{borderStyleDropdown:n,borderWidthInput:r,borderColorInput:o,borderRowLabel:s}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:c}=this._createBackgroundFields(),{widthInput:h,operatorLabel:g,heightInput:b,dimensionsLabel:y}=this._createDimensionFields(),{horizontalAlignmentToolbar:k,verticalAlignmentToolbar:x,alignmentLabel:D}=this._createAlignmentFields();this.focusTracker=new Jn,this.keystrokes=new di,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=r,this.borderColorInput=o,this.backgroundInput=c,this.paddingInput=this._createPaddingField(),this.widthInput=h,this.heightInput=b,this.horizontalAlignmentToolbar=k,this.verticalAlignmentToolbar=x;const{saveButtonView:L,cancelButtonView:M}=this._createActionButtons();this.saveButtonView=L,this.cancelButtonView=M,this._focusables=new Wr,this._focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new J0(e,{label:this.t("Cell properties")})),this.children.add(new $o(e,{labelView:s,children:[s,n,o,r],class:"ck-table-form__border-row"})),this.children.add(new $o(e,{labelView:l,children:[l,c],class:"ck-table-form__background-row"})),this.children.add(new $o(e,{children:[new $o(e,{labelView:y,children:[y,h,g,b],class:"ck-table-form__dimensions-row"}),new $o(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new $o(e,{labelView:D,children:[D,k,x],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new $o(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),xu({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},n=Dp({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color,colorPickerConfig:this.options.colorPickerConfig}),r=this.locale,o=this.t,s=o("Style"),l=new Yo(r);l.text=o("Border");const c=fv(o),h=new lr(r,Px);h.set({label:s,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:s,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:s}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",y=>c[y||"none"]),h.fieldView.on("execute",y=>{this.borderStyle=y.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",y=>!y),xl(h.fieldView,FE(this,t.style),{role:"menu",ariaLabel:s});const g=new lr(r,Jo);g.set({label:o("Width"),class:"ck-table-form__border-width"}),g.fieldView.bind("value").to(this,"borderWidth"),g.bind("isEnabled").to(this,"borderStyle",Gm),g.fieldView.on("input",()=>{this.borderWidth=g.fieldView.element.value});const b=new lr(r,n);return b.set({label:o("Color"),class:"ck-table-form__border-color"}),b.fieldView.bind("value").to(this,"borderColor"),b.bind("isEnabled").to(this,"borderStyle",Gm),b.fieldView.on("input",()=>{this.borderColor=b.fieldView.value}),this.on("change:borderStyle",(y,k,x,D)=>{Gm(x)||(this.borderColor="",this.borderWidth=""),Gm(D)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:l,borderStyleDropdown:h,borderColorInput:b,borderWidthInput:g}}_createBackgroundFields(){const e=this.locale,t=this.t,n=new Yo(e);n.text=t("Background");const r=Dp({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new lr(e,r);return o.set({label:t("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:n,backgroundInput:o}}_createDimensionFields(){const e=this.locale,t=this.t,n=new Yo(e);n.text=t("Dimensions");const r=new lr(e,Jo);r.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",()=>{this.width=r.fieldView.element.value});const o=new mt(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const s=new lr(e,Jo);return s.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),s.fieldView.bind("value").to(this,"height"),s.fieldView.on("input",()=>{this.height=s.fieldView.element.value}),{dimensionsLabel:n,widthInput:r,operatorLabel:o,heightInput:s}}_createPaddingField(){const e=this.locale,t=this.t,n=new lr(e,Jo);return n.set({label:t("Padding"),class:"ck-table-cell-properties-form__padding"}),n.fieldView.bind("value").to(this,"padding"),n.fieldView.on("input",()=>{this.padding=n.fieldView.element.value}),n}_createAlignmentFields(){const e=this.locale,t=this.t,n=new Yo(e),r={left:it.alignLeft,center:it.alignCenter,right:it.alignRight,justify:it.alignJustify,top:it.alignTop,middle:it.alignMiddle,bottom:it.alignBottom};n.text=t("Table cell text alignment");const o=new $d(e),s=e.contentLanguageDirection==="rtl";o.set({isCompact:!0,ariaLabel:t("Horizontal text alignment toolbar")}),b0({view:this,icons:r,toolbar:o,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:c=>{if(s){if(c==="left")return"right";if(c==="right")return"left"}return c},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const l=new $d(e);return l.set({isCompact:!0,ariaLabel:t("Vertical text alignment toolbar")}),b0({view:this,icons:r,toolbar:l,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:o,verticalAlignmentToolbar:l,alignmentLabel:n}}_createActionButtons(){const e=this.locale,t=this.t,n=new Ht(e),r=new Ht(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return n.set({label:t("Save"),icon:it.check,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(o,"errorText",(...s)=>s.every(l=>!l)),r.set({label:t("Cancel"),icon:it.cancel,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:r}}get _horizontalAlignmentLabels(){const e=this.locale,t=this.t,n=t("Align cell text to the left"),r=t("Align cell text to the center"),o=t("Align cell text to the right"),s=t("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:o,center:r,left:n,justify:s}:{left:n,center:r,right:o,justify:s}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function Gm(i){return i!=="none"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const v0=[ti.defaultPositions.northArrowSouth,ti.defaultPositions.northArrowSouthWest,ti.defaultPositions.northArrowSouthEast,ti.defaultPositions.southArrowNorth,ti.defaultPositions.southArrowNorthWest,ti.defaultPositions.southArrowNorthEast,ti.defaultPositions.viewportStickyNorth];function LE(i,e){const t=i.plugins.get("ContextualBalloon"),n=i.editing.view.document.selection;let r;e==="cell"?ug(n)&&(r=NE(i)):AE(n)&&(r=BE(i)),r&&t.updatePosition(r)}function BE(i){const e=i.model.document.selection,t=c0(e),n=i.editing.mapper.toViewElement(t);return{target:i.editing.view.domConverter.mapViewToDom(n),positions:v0}}function NE(i){const e=i.editing.mapper,t=i.editing.view.domConverter,n=i.model.document.selection;if(n.rangeCount>1)return{target:()=>bV(n.getRanges(),i),positions:v0};const r=VE(n.getFirstPosition()),o=e.toViewElement(r);return{target:t.mapViewToDom(o),positions:v0}}function VE(i){return i.nodeAfter&&i.nodeAfter.is("element","tableCell")?i.nodeAfter:i.findAncestor("tableCell")}function bV(i,e){const t=e.editing.mapper,n=e.editing.view.domConverter,r=Array.from(i).map(o=>{const s=VE(o.start),l=t.toViewElement(s);return new Jt(n.mapViewToDom(l))});return Jt.getBoundingRect(r)}const vV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Du(i){if(!i||!ro(i))return i;const{top:e,right:t,bottom:n,left:r}=i;if(e==t&&t==n&&n==r)return e}function Ru(i,e){const t=parseFloat(i);return Number.isNaN(t)||String(t)!==String(i)?i:`${t}${e}`}function zE(i,e={}){const t={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...i};return e.includeAlignmentProperty&&!t.alignment&&(t.alignment="center"),e.includePaddingProperty&&!t.padding&&(t.padding=""),e.includeVerticalAlignmentProperty&&!t.verticalAlignment&&(t.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!t.horizontalAlignment&&(t.horizontalAlignment=e.isRightToLeftContent?"right":"left"),t}function HE(i,e){return zE({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...i},e)}function mv(i,e){return zE({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...i},e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const wV=500,zy={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class yV extends Fe{static get requires(){return[_l]}static get pluginName(){return"TableCellPropertiesUI"}constructor(e){super(e),e.config.define("table.tableCellProperties",{borderColors:Ip,backgroundColors:Ip})}init(){const e=this.editor,t=e.t;this._defaultTableCellProperties=mv(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(_l),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",n=>{const r=new Ht(n);r.set({label:t("Cell properties"),icon:vV,tooltip:!0}),this.listenTo(r,"execute",()=>this._showView());const o=Object.values(zy).map(s=>e.commands.get(s));return r.bind("isEnabled").toMany(o,"isEnabled",(...s)=>s.some(l=>l)),r})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,t=e.config.get("table.tableCellProperties"),n=Pf(t.borderColors),r=Af(e.locale,n),o=Pf(t.backgroundColors),s=Af(e.locale,o),l=t.colorPicker!==!1,c=new gV(e.locale,{borderColors:r,backgroundColors:s,defaultTableCellProperties:this._defaultTableCellProperties,colorPickerConfig:l?t.colorPicker||{}:!1}),h=e.t;c.render(),this.listenTo(c,"submit",()=>{this._hideView()}),this.listenTo(c,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),c.keystrokes.set("Esc",(y,k)=>{this._hideView(),k()}),Cu({emitter:c,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const g=DE(h),b=RE(h);return c.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),c.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:c.borderColorInput,commandName:"tableCellBorderColor",errorText:g,validator:Pp})),c.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:c.borderWidthInput,commandName:"tableCellBorderWidth",errorText:b,validator:OE})),c.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:c.paddingInput,commandName:"tableCellPadding",errorText:b,validator:vf})),c.on("change:width",this._getValidatedPropertyChangeCallback({viewField:c.widthInput,commandName:"tableCellWidth",errorText:b,validator:vf})),c.on("change:height",this._getValidatedPropertyChangeCallback({viewField:c.heightInput,commandName:"tableCellHeight",errorText:b,validator:vf})),c.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:c.backgroundInput,commandName:"tableCellBackgroundColor",errorText:g,validator:Pp})),c.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),c.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),c}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableCellBorderStyle");Object.entries(zy).map(([n,r])=>{const o=this._defaultTableCellProperties[n]||"";return[n,e.get(r).value||o]}).forEach(([n,r])=>{(n==="borderColor"||n==="borderWidth")&&t.value==="none"||this.view.set(n,r)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:NE(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;ug(t.selection)?this._isViewVisible&&LE(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,n,r)=>{this._isReady&&this.editor.execute(e,{value:r,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:n,validator:r,errorText:o}=e,s=bl(()=>{n.errorText=o},wV);return(l,c,h)=>{s.cancel(),this._isReady&&(r(h)?(this.editor.execute(t,{value:h,batch:this._undoStepBatch}),n.errorText=null):s())}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sl extends Wt{constructor(e,t,n){super(e),this.attributeName=t,this._defaultValue=n}refresh(){const e=this.editor,n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e.model.document.selection);this.isEnabled=!!n.length,this.value=this._getSingleValue(n)}execute(e={}){const{value:t,batch:n}=e,r=this.editor.model,s=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(r.document.selection),l=this._getValueToSet(t);r.enqueueChange(n,c=>{l?s.forEach(h=>c.setAttribute(this.attributeName,l,h)):s.forEach(h=>c.removeAttribute(this.attributeName,h))})}_getAttribute(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const t=this._getAttribute(e[0]);return e.every(r=>this._getAttribute(r)===t)?t:void 0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _V extends Sl{constructor(e,t){super(e,"tableCellWidth",t)}_getValueToSet(e){if(e=Ru(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UE extends Fe{static get pluginName(){return"TableCellWidthEditing"}static get requires(){return[em]}init(){const e=this.editor,t=mv(e.config.get("table.tableCellProperties.defaultProperties"));cp(e.model.schema,e.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:t.width}),e.commands.add("tableCellWidth",new _V(e,t.width))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kV extends Sl{constructor(e,t){super(e,"tableCellPadding",t)}_getAttribute(e){if(!e)return;const t=Du(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=Ru(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CV extends Sl{constructor(e,t){super(e,"tableCellHeight",t)}_getValueToSet(e){const t=Ru(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xV extends Sl{constructor(e,t){super(e,"tableCellBackgroundColor",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EV extends Sl{constructor(e,t){super(e,"tableCellVerticalAlignment",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SV extends Sl{constructor(e,t){super(e,"tableCellHorizontalAlignment",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TV extends Sl{constructor(e,t){super(e,"tableCellBorderStyle",t)}_getAttribute(e){if(!e)return;const t=Du(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AV extends Sl{constructor(e,t){super(e,"tableCellBorderColor",t)}_getAttribute(e){if(!e)return;const t=Du(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PV extends Sl{constructor(e,t){super(e,"tableCellBorderWidth",t)}_getAttribute(e){if(!e)return;const t=Du(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=Ru(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Hy=/^(top|middle|bottom)$/,Uy=/^(left|center|right|justify)$/;class IV extends Fe{static get pluginName(){return"TableCellPropertiesEditing"}static get requires(){return[em,UE]}init(){const e=this.editor,t=e.model.schema,n=e.conversion;e.config.define("table.tableCellProperties.defaultProperties",{});const r=mv(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"});e.data.addStyleProcessorRules(lx),DV(t,n,{color:r.borderColor,style:r.borderStyle,width:r.borderWidth}),e.commands.add("tableCellBorderStyle",new TV(e,r.borderStyle)),e.commands.add("tableCellBorderColor",new AV(e,r.borderColor)),e.commands.add("tableCellBorderWidth",new PV(e,r.borderWidth)),cp(t,n,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:r.height}),e.commands.add("tableCellHeight",new CV(e,r.height)),e.data.addStyleProcessorRules(GM),cp(t,n,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:r.padding}),e.commands.add("tableCellPadding",new kV(e,r.padding)),e.data.addStyleProcessorRules(Y0),cp(t,n,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:r.backgroundColor}),e.commands.add("tableCellBackgroundColor",new xV(e,r.backgroundColor)),RV(t,n,r.horizontalAlignment),e.commands.add("tableCellHorizontalAlignment",new SV(e,r.horizontalAlignment)),OV(t,n,r.verticalAlignment),e.commands.add("tableCellVerticalAlignment",new EV(e,r.verticalAlignment))}}function DV(i,e,t){const n={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};i.extend("tableCell",{allowAttributes:Object.values(n)}),a0(e,"td",n,t),a0(e,"th",n,t),bf(e,{modelElement:"tableCell",modelAttribute:n.style,styleName:"border-style"}),bf(e,{modelElement:"tableCell",modelAttribute:n.color,styleName:"border-color"}),bf(e,{modelElement:"tableCell",modelAttribute:n.width,styleName:"border-width"})}function RV(i,e,t){i.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:n=>({key:"style",value:{"text-align":n}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":Uy}},model:{key:"tableCellHorizontalAlignment",value:n=>{const r=n.getStyle("text-align");return r===t?null:r}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:Uy}},model:{key:"tableCellHorizontalAlignment",value:n=>{const r=n.getAttribute("align");return r===t?null:r}}})}function OV(i,e,t){i.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:n=>({key:"style",value:{"vertical-align":n}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":Hy}},model:{key:"tableCellVerticalAlignment",value:n=>{const r=n.getStyle("vertical-align");return r===t?null:r}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:Hy}},model:{key:"tableCellVerticalAlignment",value:n=>{const r=n.getAttribute("valign");return r===t?null:r}}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FV extends Fe{static get pluginName(){return"TableCellProperties"}static get requires(){return[IV,yV]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ou extends Wt{constructor(e,t,n){super(e),this.attributeName=t,this._defaultValue=n}refresh(){const t=this.editor.model.document.selection,n=c0(t);this.isEnabled=!!n,this.value=this._getValue(n)}execute(e={}){const t=this.editor.model,n=t.document.selection,{value:r,batch:o}=e,s=c0(n),l=this._getValueToSet(r);t.enqueueChange(o,c=>{l?c.setAttribute(this.attributeName,l,s):c.removeAttribute(this.attributeName,s)})}_getValue(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MV extends Ou{constructor(e,t){super(e,"tableBackgroundColor",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LV extends Ou{constructor(e,t){super(e,"tableBorderColor",t)}_getValue(e){if(!e)return;const t=Du(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BV extends Ou{constructor(e,t){super(e,"tableBorderStyle",t)}_getValue(e){if(!e)return;const t=Du(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NV extends Ou{constructor(e,t){super(e,"tableBorderWidth",t)}_getValue(e){if(!e)return;const t=Du(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=Ru(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VV extends Ou{constructor(e,t){super(e,"tableWidth",t)}_getValueToSet(e){if(e=Ru(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zV extends Ou{constructor(e,t){super(e,"tableHeight",t)}_getValueToSet(e){if(e=Ru(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HV extends Ou{constructor(e,t){super(e,"tableAlignment",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const UV=/^(left|center|right)$/,WV=/^(left|none|right)$/;class jV extends Fe{static get pluginName(){return"TablePropertiesEditing"}static get requires(){return[em]}init(){const e=this.editor,t=e.model.schema,n=e.conversion;e.config.define("table.tableProperties.defaultProperties",{});const r=HE(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});e.data.addStyleProcessorRules(lx),$V(t,n,{color:r.borderColor,style:r.borderStyle,width:r.borderWidth}),e.commands.add("tableBorderColor",new LV(e,r.borderColor)),e.commands.add("tableBorderStyle",new BV(e,r.borderStyle)),e.commands.add("tableBorderWidth",new NV(e,r.borderWidth)),qV(t,n,r.alignment),e.commands.add("tableAlignment",new HV(e,r.alignment)),Wy(t,n,{modelAttribute:"tableWidth",styleName:"width",defaultValue:r.width}),e.commands.add("tableWidth",new VV(e,r.width)),Wy(t,n,{modelAttribute:"tableHeight",styleName:"height",defaultValue:r.height}),e.commands.add("tableHeight",new zV(e,r.height)),e.data.addStyleProcessorRules(Y0),GV(t,n,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:r.backgroundColor}),e.commands.add("tableBackgroundColor",new MV(e,r.backgroundColor))}}function $V(i,e,t){const n={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};i.extend("table",{allowAttributes:Object.values(n)}),a0(e,"table",n,t),ap(e,{modelAttribute:n.color,styleName:"border-color"}),ap(e,{modelAttribute:n.style,styleName:"border-style"}),ap(e,{modelAttribute:n.width,styleName:"border-width"})}function qV(i,e,t){i.extend("table",{allowAttributes:["tableAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:n=>({key:"style",value:{float:n==="center"?"none":n}}),converterPriority:"high"}),e.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:WV}},model:{key:"tableAlignment",value:n=>{let r=n.getStyle("float");return r==="none"&&(r="center"),r===t?null:r}}}).attributeToAttribute({view:{attributes:{align:UV}},model:{name:"table",key:"tableAlignment",value:n=>{const r=n.getAttribute("align");return r===t?null:r}}})}function GV(i,e,t){const{modelAttribute:n}=t;i.extend("table",{allowAttributes:[n]}),cv(e,{viewElement:"table",...t}),ap(e,t)}function Wy(i,e,t){const{modelAttribute:n}=t;i.extend("table",{allowAttributes:[n]}),cv(e,{viewElement:/^(table|figure)$/,shouldUpcast:r=>!(r.name=="table"&&r.parent.name=="figure"),...t}),bf(e,{modelElement:"table",...t})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KV extends mt{constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=t;const{borderStyleDropdown:n,borderWidthInput:r,borderColorInput:o,borderRowLabel:s}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:c}=this._createBackgroundFields(),{widthInput:h,operatorLabel:g,heightInput:b,dimensionsLabel:y}=this._createDimensionFields(),{alignmentToolbar:k,alignmentLabel:x}=this._createAlignmentFields();this.focusTracker=new Jn,this.keystrokes=new di,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=r,this.borderColorInput=o,this.backgroundInput=c,this.widthInput=h,this.heightInput=b,this.alignmentToolbar=k;const{saveButtonView:D,cancelButtonView:L}=this._createActionButtons();this.saveButtonView=D,this.cancelButtonView=L,this._focusables=new Wr,this._focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new J0(e,{label:this.t("Table properties")})),this.children.add(new $o(e,{labelView:s,children:[s,n,o,r],class:"ck-table-form__border-row"})),this.children.add(new $o(e,{labelView:l,children:[l,c],class:"ck-table-form__background-row"})),this.children.add(new $o(e,{children:[new $o(e,{labelView:y,children:[y,h,g,b],class:"ck-table-form__dimensions-row"}),new $o(e,{labelView:x,children:[x,k],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new $o(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),xu({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},n=Dp({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color,colorPickerConfig:this.options.colorPickerConfig}),r=this.locale,o=this.t,s=o("Style"),l=new Yo(r);l.text=o("Border");const c=fv(o),h=new lr(r,Px);h.set({label:s,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:s,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:s}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",y=>c[y||"none"]),h.fieldView.on("execute",y=>{this.borderStyle=y.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",y=>!y),xl(h.fieldView,FE(this,t.style),{role:"menu",ariaLabel:s});const g=new lr(r,Jo);g.set({label:o("Width"),class:"ck-table-form__border-width"}),g.fieldView.bind("value").to(this,"borderWidth"),g.bind("isEnabled").to(this,"borderStyle",Km),g.fieldView.on("input",()=>{this.borderWidth=g.fieldView.element.value});const b=new lr(r,n);return b.set({label:o("Color"),class:"ck-table-form__border-color"}),b.fieldView.bind("value").to(this,"borderColor"),b.bind("isEnabled").to(this,"borderStyle",Km),b.fieldView.on("input",()=>{this.borderColor=b.fieldView.value}),this.on("change:borderStyle",(y,k,x,D)=>{Km(x)||(this.borderColor="",this.borderWidth=""),Km(D)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:l,borderStyleDropdown:h,borderColorInput:b,borderWidthInput:g}}_createBackgroundFields(){const e=this.locale,t=this.t,n=new Yo(e);n.text=t("Background");const r=Dp({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new lr(e,r);return o.set({label:t("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:n,backgroundInput:o}}_createDimensionFields(){const e=this.locale,t=this.t,n=new Yo(e);n.text=t("Dimensions");const r=new lr(e,Jo);r.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",()=>{this.width=r.fieldView.element.value});const o=new mt(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const s=new lr(e,Jo);return s.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),s.fieldView.bind("value").to(this,"height"),s.fieldView.on("input",()=>{this.height=s.fieldView.element.value}),{dimensionsLabel:n,widthInput:r,operatorLabel:o,heightInput:s}}_createAlignmentFields(){const e=this.locale,t=this.t,n=new Yo(e);n.text=t("Alignment");const r=new $d(e);return r.set({isCompact:!0,ariaLabel:t("Table alignment toolbar")}),b0({view:this,icons:{left:it.objectLeft,center:it.objectCenter,right:it.objectRight},toolbar:r,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:n,alignmentToolbar:r}}_createActionButtons(){const e=this.locale,t=this.t,n=new Ht(e),r=new Ht(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return n.set({label:t("Save"),icon:it.check,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(o,"errorText",(...s)=>s.every(l=>!l)),r.set({label:t("Cancel"),icon:it.cancel,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:r}}get _alignmentLabels(){const e=this.locale,t=this.t,n=t("Align table to the left"),r=t("Center table"),o=t("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:o,center:r,left:n}:{left:n,center:r,right:o}}}function Km(i){return i!=="none"}const ZV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const YV=500,jy={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class JV extends Fe{static get requires(){return[_l]}static get pluginName(){return"TablePropertiesUI"}constructor(e){super(e),this.view=null,e.config.define("table.tableProperties",{borderColors:Ip,backgroundColors:Ip})}init(){const e=this.editor,t=e.t;this._defaultTableProperties=HE(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=e.plugins.get(_l),e.ui.componentFactory.add("tableProperties",n=>{const r=new Ht(n);r.set({label:t("Table properties"),icon:ZV,tooltip:!0}),this.listenTo(r,"execute",()=>this._showView());const o=Object.values(jy).map(s=>e.commands.get(s));return r.bind("isEnabled").toMany(o,"isEnabled",(...s)=>s.some(l=>l)),r})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,t=e.config.get("table.tableProperties"),n=Pf(t.borderColors),r=Af(e.locale,n),o=Pf(t.backgroundColors),s=Af(e.locale,o),l=t.colorPicker!==!1,c=new KV(e.locale,{borderColors:r,backgroundColors:s,defaultTableProperties:this._defaultTableProperties,colorPickerConfig:l?t.colorPicker||{}:!1}),h=e.t;c.render(),this.listenTo(c,"submit",()=>{this._hideView()}),this.listenTo(c,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),c.keystrokes.set("Esc",(y,k)=>{this._hideView(),k()}),Cu({emitter:c,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const g=DE(h),b=RE(h);return c.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),c.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:c.borderColorInput,commandName:"tableBorderColor",errorText:g,validator:Pp})),c.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:c.borderWidthInput,commandName:"tableBorderWidth",errorText:b,validator:OE})),c.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:c.backgroundInput,commandName:"tableBackgroundColor",errorText:g,validator:Pp})),c.on("change:width",this._getValidatedPropertyChangeCallback({viewField:c.widthInput,commandName:"tableWidth",errorText:b,validator:vf})),c.on("change:height",this._getValidatedPropertyChangeCallback({viewField:c.heightInput,commandName:"tableHeight",errorText:b,validator:vf})),c.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),c}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableBorderStyle");Object.entries(jy).map(([n,r])=>{const o=n,s=this._defaultTableProperties[o]||"";return[o,e.get(r).value||s]}).forEach(([n,r])=>{(n==="borderColor"||n==="borderWidth")&&t.value==="none"||this.view.set(n,r)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:BE(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;AE(t.selection)?this._isViewVisible&&LE(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,n,r)=>{this._isReady&&this.editor.execute(e,{value:r,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:n,validator:r,errorText:o}=e,s=bl(()=>{n.errorText=o},YV);return(l,c,h)=>{s.cancel(),this._isReady&&(r(h)?(this.editor.execute(t,{value:h,batch:this._undoStepBatch}),n.errorText=null):s())}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XV extends Fe{static get pluginName(){return"TableProperties"}static get requires(){return[jV,JV]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QV extends Wt{refresh(){this.isEnabled=!0}execute(e={}){const{model:t,plugins:n}=this.editor;let{table:r=t.document.selection.getSelectedElement(),columnWidths:o,tableWidth:s}=e;o&&(o=Array.isArray(o)?o:o.split(",")),t.change(l=>{s?l.setAttribute("tableWidth",s,r):l.removeAttribute("tableWidth",r);const c=n.get("TableColumnResizeEditing").getColumnGroupElement(r);if(!o&&!c)return;if(!o)return l.remove(c);const h=dv(o);if(c)Array.from(c.getChildren()).forEach((g,b)=>l.setAttribute("columnWidth",h[b],g));else{const g=l.createElement("tableColumnGroup");h.forEach(b=>l.appendElement("tableColumn",{columnWidth:b},g)),l.append(g,r)}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function e3(i){return e=>e.on("element:colgroup",(t,n,r)=>{const o=n.modelCursor.findAncestor("table"),s=Xf(o);if(!s)return;const l=Qf(s),c=i.getColumns(o);let h=A9(s,r.writer);h=Array.from({length:c},(g,b)=>h[b]||"auto"),(h.length!=l.length||h.includes("auto"))&&xE(l,s,dv(h),r.writer)},{priority:"low"})}function t3(){return i=>i.on("insert:table",(e,t,n)=>{const r=n.writer,o=t.item,s=n.mapper.toViewElement(o),l=s.is("element","table")?s:Array.from(s.getChildren()).find(h=>h.is("element","table"));Xf(o)?r.addClass("ck-table-resized",l):r.removeClass("ck-table-resized",l)},{priority:"low"})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class n3 extends Fe{static get requires(){return[em,Ir]}static get pluginName(){return"TableColumnResizeEditing"}constructor(e){super(e),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Bo()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(t,n,r)=>{const o=r?"removeClass":"addClass";e.editing.view.change(s=>{for(const l of e.editing.view.document.roots)s[o]("ck-column-resize_disabled",e.editing.view.document.getRoot(l.rootName))})})}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,t=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:o=>o.is("element","tableColumnGroup"),positionOffset:0});const r=new QV(e);e.commands.add("resizeTableWidth",r),e.commands.add("resizeColumnWidths",r),this.bind("_isResizingAllowed").to(e,"isReadOnly",t,"isEnabled",r,"isEnabled",(o,s,l)=>!o&&s&&l)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return Xf(e)}getTableColumnElements(e){return Qf(e)}getTableColumnsWidths(e){return T9(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const t=this.editor.model;t.document.registerPostFixer(o=>{let s=!1;for(const l of y9(t)){const c=this.getColumnGroupElement(l),h=this.getTableColumnElements(c),g=this.getTableColumnsWidths(c);let b=dv(g);b=n(b,l,this),!Vd(g,b)&&(xE(h,c,b,o),s=!0)}return s});function n(o,s,l){const c=l._tableUtilsPlugin.getColumns(s);if(c-o.length===0)return o;const g=o.map(y=>Number(y.replace("%",""))),b=r(l.editor.model.document.differ,s);for(const y of b){const k=c-g.length;if(k===0)continue;const x=k>0,D=l._tableUtilsPlugin.getCellLocation(y).column;if(x){const L=_9(s,l.editor),M=x9(k,L);g.splice(D,0,...M)}else{const L=g.splice(D,Math.abs(k));g[D]+=Lf(L)}}return g.map(y=>y+"%")}function r(o,s){const l=new Set;for(const c of o.getChanges())if(c.type=="insert"&&c.position.nodeAfter&&c.position.nodeAfter.name=="tableCell"&&c.position.nodeAfter.getAncestors().includes(s))l.add(c.position.nodeAfter);else if(c.type=="remove"){const h=c.position.nodeBefore||c.position.nodeAfter;h.name=="tableCell"&&h.getAncestors().includes(s)&&l.add(h)}return l}}_registerConverters(){const t=this.editor.conversion;t.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:n=>n.getStyle("width")}}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:n=>({name:"figure",key:"style",value:{width:n}})}),t.elementToElement({model:"tableColumnGroup",view:"colgroup"}),t.elementToElement({model:"tableColumn",view:"col"}),t.for("downcast").add(t3()),t.for("upcast").add(e3(this._tableUtilsPlugin)),t.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:n=>{const r=n.getStyle("width");return!r||!r.endsWith("%")&&!r.endsWith("pt")?"auto":r}}}),t.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),t.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:n=>({key:"style",value:{width:n}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(TE),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(_t.window.document,"mousemove",Nd(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(_t.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(e,t){const n=t.target;if(!n.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const r=this.editor,o=r.editing.mapper.toModelElement(n.findAncestor("figure"));if(!r.model.canEditAt(o))return;t.preventDefault(),e.stop();const s=h(o,this._tableUtilsPlugin,r),l=n.findAncestor("table"),c=r.editing.view;Array.from(l.getChildren()).find(y=>y.is("element","colgroup"))||c.change(y=>{g(y,s,l)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(t,s),c.change(y=>b(y,l,this._resizingData));function h(y,k,x){const D=Array(k.getColumns(y)),L=new Nn(y);for(const M of L){const V=x.editing.mapper.toViewElement(M.cell),O=x.editing.view.domConverter.mapViewToDom(V),U=S9(O);(!D[M.column]||U<D[M.column])&&(D[M.column]=Do(U))}return D}function g(y,k,x){const D=y.createContainerElement("colgroup");for(let L=0;L<k.length;L++){const M=y.createEmptyElement("col"),V=`${Do(k[L]/Lf(k)*100)}%`;y.setStyle("width",V,M),y.insert(y.createPositionAt(D,"end"),M)}y.insert(y.createPositionAt(x,0),D)}function b(y,k,x){const D=x.widths.viewFigureWidth/x.widths.viewFigureParentWidth;y.addClass("ck-table-resized",k),y.addClass("ck-table-column-resizer__active",x.elements.viewResizer),y.setStyle("width",`${Do(D*100)}%`,k.findAncestor("figure"))}}_onMouseMoveHandler(e,t){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:n,flags:{isRightEdge:r,isTableCentered:o,isLtrContent:s},elements:{viewFigure:l,viewLeftColumn:c,viewRightColumn:h},widths:{viewFigureParentWidth:g,tableWidth:b,leftColumnWidth:y,rightColumnWidth:k}}=this._resizingData,x=-y+h0,D=r?g-b:k-h0,L=(s?1:-1)*(r&&o?2:1),M=C9((t.clientX-n)*L,Math.min(x,0),Math.max(D,0));M!==0&&this.editor.editing.view.change(V=>{const O=Do((y+M)*100/b);if(V.setStyle("width",`${O}%`,c),r){const U=Do((b+M)*100/g);V.setStyle("width",`${U}%`,l)}else{const U=Do((k-M)*100/b);V.setStyle("width",`${U}%`,h)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:e,modelTable:t,viewFigure:n,viewColgroup:r}=this._resizingData.elements,o=this.editor,s=o.editing.view,l=this.getColumnGroupElement(t),c=Array.from(r.getChildren()).filter(D=>D.is("view:element")),h=l?this.getTableColumnsWidths(l):null,g=c.map(D=>D.getStyle("width")),b=!Vd(h,g),y=t.getAttribute("tableWidth"),k=n.getStyle("width"),x=y!==k;(b||x)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:t,tableWidth:`${Do(k)}%`,columnWidths:g}):s.change(D=>{if(h)for(const L of c)D.setStyle("width",h.shift(),L);else D.remove(r);x&&(y?D.setStyle("width",y,n):D.removeStyle("width",n)),!h&&!y&&D.removeClass("ck-table-resized",[...n.getChildren()].find(L=>L.name==="table"))})),s.change(D=>{D.removeClass("ck-table-column-resizer__active",e)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,t){const n=this.editor,r=e.domEvent.clientX,o=e.target,s=o.findAncestor("td")||o.findAncestor("th"),l=n.editing.mapper.toModelElement(s),c=l.findAncestor("table"),h=k9(l,this._tableUtilsPlugin).rightEdge,g=this._tableUtilsPlugin.getColumns(c)-1,b=h===g,y=!c.hasAttribute("tableAlignment"),k=n.locale.contentLanguageDirection!=="rtl",x=s.findAncestor("table"),D=x.findAncestor("figure"),L=[...x.getChildren()].find(ne=>ne.is("element","colgroup")),M=L.getChild(h),V=b?void 0:L.getChild(h+1),O=f0(n.editing.view.domConverter.mapViewToDom(D.parent)),U=f0(n.editing.view.domConverter.mapViewToDom(D)),K=CE(c,n),q=t[h],Q=b?void 0:t[h+1];return{columnPosition:r,flags:{isRightEdge:b,isTableCentered:y,isLtrContent:k},elements:{viewResizer:o,modelTable:c,viewFigure:D,viewColgroup:L,viewLeftColumn:M,viewRightColumn:V},widths:{viewFigureParentWidth:O,viewFigureWidth:U,tableWidth:K,leftColumnWidth:q,rightColumnWidth:Q}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(t,n,r)=>{const o=n.item,s=r.mapper.toViewElement(o),l=r.writer;l.insert(l.createPositionAt(s,"end"),l.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class i3 extends Fe{static get requires(){return[n3,UE]}static get pluginName(){return"TableColumnResize"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $y(i,e){const t=(n,r,o)=>{if(!o.consumable.consume(r.item,n.name))return;const s=r.attributeNewValue,l=o.writer,c=o.mapper.toViewElement(r.item),h=[...c.getChildren()].find(b=>b.getCustomProperty("media-content"));l.remove(h);const g=i.getMediaViewElement(l,s,e);l.insert(l.createPositionAt(c,0),g)};return n=>{n.on("attribute:url:media",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function r3(i,e,t){return e.setCustomProperty("media",!0,i),El(i,e,{label:t})}function qy(i,e,t,n){return i.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(i,t,n),i.createSlot()])}function Gy(i){const e=i.getSelectedElement();return e&&e.is("element","media")?e:null}function WE(i,e,t,n){i.change(r=>{const o=r.createElement("media",{url:e});i.insertObject(o,t,null,{setSelection:"on",findOptimalPosition:n?"auto":void 0})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class o3 extends Wt{refresh(){const e=this.editor.model,t=e.document.selection,n=Gy(t);this.value=n?n.getAttribute("url"):void 0,this.isEnabled=a3(t)||s3(t,e)}execute(e){const t=this.editor.model,n=t.document.selection,r=Gy(n);r?t.change(o=>{o.setAttribute("url",e,r)}):WE(t,e,n,!0)}}function s3(i,e){let n=ag(i,e).start.parent;return n.isEmpty&&!e.schema.isLimit(n)&&(n=n.parent),e.schema.checkChild(n,"media")}function a3(i){const e=i.getSelectedElement();return!!e&&e.name==="media"}const l3='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const c3="0 0 64 42";class u3{constructor(e,t){const n=t.providers,r=t.extraProviders||[],o=new Set(t.removeProviders),s=n.concat(r).filter(l=>{const c=l.name;return c?!o.has(c):(vn("media-embed-no-provider-name",{provider:l}),!1)});this.locale=e,this.providerDefinitions=s}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,n){return this._getMedia(t).getViewElement(e,n)}_getMedia(e){if(!e)return new Ky(this.locale);e=e.trim();for(const t of this.providerDefinitions){const n=t.html,r=An(t.url);for(const o of r){const s=this._getUrlMatches(e,o);if(s)return new Ky(this.locale,e,s,n)}}return null}_getUrlMatches(e,t){let n=e.match(t);if(n)return n;let r=e.replace(/^https?:\/\//,"");return n=r.match(t),n||(r=r.replace(/^www\./,""),n=r.match(t),n)?n:null}}class Ky{constructor(e,t,n,r){this.url=this._getValidUrl(t),this._locale=e,this._match=n,this._previewRenderer=r}getViewElement(e,t){const n={};let r;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),t.renderForEditingView&&(n.class="ck-media__wrapper");const o=this._getPreviewHtml(t);r=e.createRawElement("div",n,(s,l)=>{l.setContentOf(s,o)})}else this.url&&(n.url=this.url),r=e.createEmptyElement(t.elementName,n);return e.setCustomProperty("media-content",!0,r),r}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new ns,t=this._locale.t;return e.content=l3,e.viewBox=c3,new Mo({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rp extends Fe{static get pluginName(){return"MediaEmbedEditing"}constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{const n=t[1],r=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${n}${r?`?start=${r}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new u3(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,n=e.t,r=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),s=e.config.get("mediaEmbed.elementName"),l=this.registry;e.commands.add("mediaEmbed",new o3(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),r.for("dataDowncast").elementToStructure({model:"media",view:(c,{writer:h})=>{const g=c.getAttribute("url");return qy(h,l,g,{elementName:s,renderMediaPreview:!!g&&o})}}),r.for("dataDowncast").add($y(l,{elementName:s,renderMediaPreview:o})),r.for("editingDowncast").elementToStructure({model:"media",view:(c,{writer:h})=>{const g=c.getAttribute("url"),b=qy(h,l,g,{elementName:s,renderForEditingView:!0});return r3(b,h,n("media widget"))}}),r.for("editingDowncast").add($y(l,{elementName:s,renderForEditingView:!0})),r.for("upcast").elementToElement({view:c=>["oembed",s].includes(c.name)&&c.getAttribute("url")?{name:!0}:null,model:(c,{writer:h})=>{const g=c.getAttribute("url");return l.hasMedia(g)?h.createElement("media",{url:g}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(c,{writer:h})=>{const g=c.getAttribute("data-oembed-url");return l.hasMedia(g)?h.createElement("media",{url:g}):null}}).add(c=>{const h=(g,b,y)=>{if(!y.consumable.consume(b.viewItem,{name:!0,classes:"media"}))return;const{modelRange:k,modelCursor:x}=y.convertChildren(b.viewItem,b.modelCursor);b.modelRange=k,b.modelCursor=x,Wi(k.getItems())||y.consumable.revert(b.viewItem,{name:!0,classes:"media"})};c.on("element:figure",h)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const d3=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class h3 extends Fe{static get requires(){return[tE,kl,iE]}static get pluginName(){return"AutoMediaEmbed"}constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document,n=e.plugins.get("ClipboardPipeline");this.listenTo(n,"inputTransformation",()=>{const o=t.selection.getFirstRange(),s=Hr.fromPosition(o.start);s.stickiness="toPrevious";const l=Hr.fromPosition(o.end);l.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(s,l),s.detach(),l.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(_t.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const n=this.editor,r=n.plugins.get(Rp).registry,o=new Ro(e,t),s=o.getWalker({ignoreElementEnd:!0});let l="";for(const h of s)h.item.is("$textProxy")&&(l+=h.item.data);if(l=l.trim(),!l.match(d3)){o.detach();return}if(!r.hasMedia(l)){o.detach();return}if(!n.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=Hr.fromPosition(e),this._timeoutId=_t.window.setTimeout(()=>{n.model.change(h=>{this._timeoutId=null,h.remove(o),o.detach();let g=null;this._positionToInsert.root.rootName!=="$graveyard"&&(g=this._positionToInsert),WE(n.model,l,g,!1),this._positionToInsert.detach(),this._positionToInsert=null}),n.plugins.get(kl).requestUndoOnBackspace()},100)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class f3 extends mt{constructor(e,t){super(t),this.focusTracker=new Jn,this.keystrokes=new di,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),xu({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new lr(this.locale,Jo),n=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,n.inputMode="url",n.on("input",()=>{t.infoText=n.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=n.element.value.trim()}),t}}const m3='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class p3 extends Fe{static get requires(){return[Rp,js]}static get pluginName(){return"MediaEmbedUI"}init(){const e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{const t=this.editor.locale.t,n=this._createDialogButton(Ht);return n.tooltip=!0,n.label=t("Insert media"),n}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const t=this.editor.locale.t,n=this._createDialogButton(Ii);return n.label=t("Media"),n})}_createDialogButton(e){const t=this.editor,n=new e(t.locale),r=t.commands.get("mediaEmbed"),o=this.editor.plugins.get("Dialog");return n.icon=m3,n.bind("isEnabled").to(r,"isEnabled"),n.on("execute",()=>{o.id==="mediaEmbed"?o.hide():this._showDialog()}),n}_showDialog(){const e=this.editor,t=e.plugins.get("Dialog"),n=e.commands.get("mediaEmbed"),r=e.locale.t;if(!this._formView){const o=e.plugins.get(Rp).registry;this._formView=new(Yp(f3))(g3(e.t,o),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}t.show({id:"mediaEmbed",title:r("Insert media"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=n.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:r("Cancel"),withText:!0,onExecute:()=>t.hide()},{label:r("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const e=this.editor,t=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),t.hide(),e.editing.view.focus())}}function g3(i,e){return[t=>{if(!t.url.length)return i("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return i("This media URL is not supported.")}]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b3 extends Fe{static get requires(){return[Rp,p3,h3,Pa]}static get pluginName(){return"MediaEmbed"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class v3 extends Fe{static get pluginName(){return"IndentEditing"}init(){const e=this.editor;e.commands.add("indent",new xw(e)),e.commands.add("outdent",new xw(e))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class w3 extends Fe{static get pluginName(){return"IndentUI"}init(){const e=this.editor,t=e.locale,n=e.t,r=t.uiLanguageDirection=="ltr"?it.indent:it.outdent,o=t.uiLanguageDirection=="ltr"?it.outdent:it.indent;this._defineButton("indent",n("Increase indent"),r),this._defineButton("outdent",n("Decrease indent"),o)}_defineButton(e,t,n){const r=this.editor;r.ui.componentFactory.add(e,()=>{const o=this._createButton(Ht,e,t,n);return o.set({tooltip:!0}),o}),r.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(Ii,e,t,n))}_createButton(e,t,n,r){const o=this.editor,s=o.commands.get(t),l=new e(o.locale);return l.set({label:n,icon:r}),l.bind("isEnabled").to(s,"isEnabled"),this.listenTo(l,"execute",()=>{o.execute(t),o.editing.view.focus()}),l}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class y3 extends Fe{static get pluginName(){return"Indent"}static get requires(){return[v3,w3]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zm extends Wt{constructor(e,t){super(e),this._indentBehavior=t}refresh(){const t=this.editor.model,n=Wi(t.document.selection.getSelectedBlocks());if(!n||!this._isIndentationChangeAllowed(n)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(n.getAttribute("blockIndent"))}execute(){const e=this.editor.model,t=this._getBlocksToChange();e.change(n=>{for(const r of t){const o=r.getAttribute("blockIndent"),s=this._indentBehavior.getNextIndent(o);s?n.setAttribute("blockIndent",s,r):n.removeAttribute("blockIndent",r)}})}_getBlocksToChange(){const t=this.editor.model.document.selection;return Array.from(t.getSelectedBlocks()).filter(r=>this._isIndentationChangeAllowed(r))}_isIndentationChangeAllowed(e){const t=this.editor;return t.model.schema.checkAttribute(e,"blockIndent")?!t.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!t.plugins.get("ListUtils").isListItemBlock(e):!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zy{constructor(e){this.isForward=e.direction==="forward",this.offset=e.offset,this.unit=e.unit}checkEnabled(e){const t=parseFloat(e||"0");return this.isForward||t>0}getNextIndent(e){const t=parseFloat(e||"0");if(!(!e||e.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const r=this.isForward?this.offset:-this.offset,o=t+r;return o>0?o+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yy{constructor(e){this.isForward=e.direction==="forward",this.classes=e.classes}checkEnabled(e){const t=this.classes.indexOf(e);return this.isForward?t<this.classes.length-1:t>=0}getNextIndent(e){const t=this.classes.indexOf(e),n=this.isForward?1:-1;return this.classes[t+n]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _3=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class k3 extends Fe{constructor(e){super(e),e.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}init(){const e=this.editor,t=e.config.get("indentBlock");t.classes&&t.classes.length?(this._setupConversionUsingClasses(t.classes),e.commands.add("indentBlock",new Zm(e,new Yy({direction:"forward",classes:t.classes}))),e.commands.add("outdentBlock",new Zm(e,new Yy({direction:"backward",classes:t.classes})))):(e.data.addStyleProcessorRules(qM),this._setupConversionUsingOffset(),e.commands.add("indentBlock",new Zm(e,new Zy({direction:"forward",offset:t.offset,unit:t.unit}))),e.commands.add("outdentBlock",new Zm(e,new Zy({direction:"backward",offset:t.offset,unit:t.unit}))))}afterInit(){const e=this.editor,t=e.model.schema,n=e.commands.get("indent"),r=e.commands.get("outdent"),o=e.config.get("heading.options");(o&&o.map(c=>c.model)||_3).forEach(c=>{t.isRegistered(c)&&t.extend(c,{allowAttributes:"blockIndent"})}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),n.registerChildCommand(e.commands.get("indentBlock")),r.registerChildCommand(e.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const e=this.editor.conversion,n=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";e.for("upcast").attributeToAttribute({view:{styles:{[n]:/[\s\S]+/}},model:{key:"blockIndent",value:r=>{if(!r.is("element","li"))return r.getStyle(n)}}}),e.for("downcast").attributeToAttribute({model:"blockIndent",view:r=>({key:"style",value:{[n]:r}})})}_setupConversionUsingClasses(e){const t={model:{key:"blockIndent",values:[]},view:{}};for(const n of e)t.model.values.push(n),t.view[n]={key:"class",value:[n]};this.editor.conversion.attributeToAttribute(t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function C3(i){return i.createContainerElement("span",{class:"image-inline"},i.createEmptyElement("img"))}function Jy(i){return i.createContainerElement("figure",{class:"image"},[i.createEmptyElement("img"),i.createSlot("children")])}function jE(i,e){const t=i.plugins.get("ImageUtils"),n=i.plugins.has("ImageInlineEditing")&&i.plugins.has("ImageBlockEditing");return o=>t.isInlineImageView(o)?n&&(o.getStyle("display")=="block"||o.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:r(o):null;function r(o){const s={name:!0};return o.hasAttribute("src")&&(s.attributes=["src"]),s}}function pv(i,e){const t=Wi(e.getSelectedBlocks());return!t||i.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function Op(i){return i&&i.endsWith("px")?parseInt(i):null}function Fp(i){const e=Op(i.getStyle("width")),t=Op(i.getStyle("height"));return!!(e&&t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const x3=/^(image|image-inline)$/;class bo extends Fe{constructor(){super(...arguments),this._domEmitter=new(Bo())}static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,n=null,r={}){const o=this.editor,s=o.model,l=s.document.selection,c=$E(o,t||l,n);e={...Object.fromEntries(l.getAttributes()),...e};for(const h in e)s.schema.checkAttribute(c,h)||delete e[h];return s.change(h=>{const{setImageSizes:g=!0}=r,b=h.createElement(c,e);return s.insertObject(b,t,null,{setSelection:"on",findOptimalPosition:!t&&c!="imageInline"?"auto":void 0}),b.parent?(g&&this.setImageNaturalSizeAttributes(b),b):null})}setImageNaturalSizeAttributes(e){const t=e.getAttribute("src");t&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(n=>{const r=new _t.window.Image;this._domEmitter.listenTo(r,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(n.batch,o=>{o.setAttribute("width",r.naturalWidth,e),o.setAttribute("height",r.naturalHeight,e)}),this._domEmitter.stopListening(r,"load")}),r.src=t}))}getClosestSelectedImageWidget(e){const t=e.getFirstPosition();if(!t)return null;const n=e.getSelectedElement();if(n&&this.isImageWidget(n))return n;let r=t.parent;for(;r;){if(r.is("element")&&this.isImageWidget(r))return r;r=r.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:x3})}isImageAllowed(){const t=this.editor.model.document.selection;return E3(this.editor,t)&&S3(t)}toImageWidget(e,t,n){return t.setCustomProperty("image",!0,e),El(e,t,{label:()=>{const s=this.findViewImgElement(e).getAttribute("alt");return s?`${s} ${n}`:n}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Hi(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:n}of t.createRangeIn(e))if(this.isInlineImageView(n))return n}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function E3(i,e){if($E(i,e,null)=="imageBlock"){const n=T3(e,i.model);if(i.model.schema.checkChild(n,"imageBlock"))return!0}else if(i.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function S3(i){return[...i.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function T3(i,e){const n=ag(i,e).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}function $E(i,e,t){const n=i.model.schema,r=i.config.get("image.insert.type");return i.plugins.has("ImageBlockEditing")?i.plugins.has("ImageInlineEditing")?t||(r==="inline"?"imageInline":r!=="auto"?"imageBlock":e.is("selection")?pv(n,e):n.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class A3 extends Wt{refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled&&n.hasAttribute("alt")?this.value=n.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,n=t.plugins.get("ImageUtils"),r=t.model,o=n.getClosestSelectedImageElement(r.document.selection);r.change(s=>{s.setAttribute("alt",e.newValue,o)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P3 extends Fe{static get requires(){return[bo]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new A3(this.editor))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I3 extends mt{constructor(e){super(e);const t=this.locale.t;this.focusTracker=new Jn,this.keystrokes=new di,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),it.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),it.cancel,"ck-button-cancel","cancel"),this._focusables=new Wr,this._focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),xu({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,n,r){const o=new Ht(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){const e=this.locale.t,t=new lr(this.locale,Jo);return t.label=e("Text alternative"),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function D3(i){const e=i.plugins.get("ContextualBalloon");if(i.plugins.get("ImageUtils").getClosestSelectedImageWidget(i.editing.view.document.selection)){const n=gv(i);e.updatePosition(n)}}function gv(i){const e=i.editing.view,t=ti.defaultPositions,n=i.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(n.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R3 extends Fe{static get requires(){return[_l]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",n=>{const r=e.commands.get("imageTextAlternative"),o=new Ht(n);return o.set({label:t("Change image text alternative"),icon:it.textAlternative,tooltip:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",s=>!!s),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,n=e.editing.view.document,r=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Yp(I3))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,s)=>{this._hideForm(!0),s()}),this.listenTo(e.ui,"update",()=>{r.getClosestSelectedImageWidget(n.selection)?this._isVisible&&D3(e):this._hideForm(!0)}),Cu({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,t=e.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:gv(e)}),n.fieldView.value=n.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qE extends Fe{static get requires(){return[P3,R3]}static get pluginName(){return"ImageTextAlternative"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function O3(i){const e=(t,n,r)=>{if(!r.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const o=i.findViewImgElement(n.viewItem);if(!o||!r.consumable.test(o,{name:!0}))return;r.consumable.consume(n.viewItem,{name:!0,classes:"image"});const s=r.convertItem(o,n.modelCursor),l=Wi(s.modelRange.getItems());if(!l){r.consumable.revert(n.viewItem,{name:!0,classes:"image"});return}r.convertChildren(n.viewItem,l),r.updateConversionResult(l,n)};return t=>{t.on("element:figure",e)}}function GE(i,e){const t=(n,r,o)=>{if(!o.consumable.consume(r.item,n.name))return;const s=o.writer,l=o.mapper.toViewElement(r.item),c=i.findViewImgElement(l);r.attributeNewValue===null?(s.removeAttribute("srcset",c),s.removeAttribute("sizes",c)):r.attributeNewValue&&(s.setAttribute("srcset",r.attributeNewValue,c),s.setAttribute("sizes","100vw",c))};return n=>{n.on(`attribute:srcset:${e}`,t)}}function Mp(i,e,t){const n=(r,o,s)=>{if(!s.consumable.consume(o.item,r.name))return;const l=s.writer,c=s.mapper.toViewElement(o.item),h=i.findViewImgElement(c);l.setAttribute(o.attributeKey,o.attributeNewValue||"",h)};return r=>{r.on(`attribute:${t}:${e}`,n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bv extends Aa{observe(e){this.listenTo(e,"load",(t,n)=>{const r=n.target;this.checkShouldIgnoreEventFromTarget(r)||r.tagName=="IMG"&&this._fireEvents(n)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class F3 extends Wt{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&vn("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&vn("image-inline-plugin-required")}refresh(){const e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){const t=An(e.source),n=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());t.forEach((s,l)=>{const c=n.getSelectedElement();if(typeof s=="string"&&(s={src:s}),l&&c&&r.isImage(c)){const h=this.editor.model.createPositionAfter(c);r.insertImage({...s,...o},h,e.imageType)}else r.insertImage({...s,...o},null,e.imageType)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M3 extends Wt{constructor(e){super(e),this.decorate("cleanupImage")}refresh(){const t=this.editor.plugins.get("ImageUtils"),n=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(n),this.value=this.isEnabled?n.getAttribute("src"):null}execute(e){const t=this.editor.model.document.selection.getSelectedElement(),n=this.editor.plugins.get("ImageUtils");this.editor.model.change(r=>{r.setAttribute("src",e.source,t),this.cleanupImage(r,t),n.setImageNaturalSizeAttributes(t)})}cleanupImage(e,t){e.removeAttribute("srcset",t),e.removeAttribute("sizes",t),e.removeAttribute("sources",t),e.removeAttribute("width",t),e.removeAttribute("height",t),e.removeAttribute("alt",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KE extends Fe{static get requires(){return[bo]}static get pluginName(){return"ImageEditing"}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(bv),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const n=new F3(e),r=new M3(e);e.commands.add("insertImage",n),e.commands.add("replaceImageSource",r),e.commands.add("imageInsert",n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZE extends Fe{static get requires(){return[bo]}static get pluginName(){return"ImageSizeAttributes"}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(e){const t=this.editor,n=t.plugins.get("ImageUtils"),r=e==="imageBlock"?"figure":"img";t.conversion.for("upcast").attributeToAttribute({view:{name:r,styles:{width:/.+/}},model:{key:"width",value:s=>Fp(s)?Op(s.getStyle("width")):null}}).attributeToAttribute({view:{name:r,key:"width"},model:"width"}).attributeToAttribute({view:{name:r,styles:{height:/.+/}},model:{key:"height",value:s=>Fp(s)?Op(s.getStyle("height")):null}}).attributeToAttribute({view:{name:r,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(s=>{o(s,"width","width",!0),o(s,"height","height",!0)}),t.conversion.for("dataDowncast").add(s=>{o(s,"width","width",!1),o(s,"height","height",!1)});function o(s,l,c,h){s.on(`attribute:${l}:${e}`,(g,b,y)=>{if(!y.consumable.consume(b.item,g.name))return;const k=y.writer,x=y.mapper.toViewElement(b.item),D=n.findViewImgElement(x);if(b.attributeNewValue!==null?k.setAttribute(c,b.attributeNewValue,D):k.removeAttribute(c,D),b.item.hasAttribute("sources"))return;const L=b.item.hasAttribute("resizedWidth");if(e==="imageInline"&&!L&&!h)return;const M=b.item.getAttribute("width"),V=b.item.getAttribute("height");M&&V&&k.setStyle("aspect-ratio",`${M}/${V}`,D)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YE extends Wt{constructor(e,t){super(e),this._modelElementName=t}refresh(){const t=this.editor.plugins.get("ImageUtils"),n=t.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=t.isInlineImage(n):this.isEnabled=t.isBlockImage(n)}execute(e={}){const t=this.editor,n=this.editor.model,r=t.plugins.get("ImageUtils"),o=r.getClosestSelectedImageElement(n.document.selection),s=Object.fromEntries(o.getAttributes());return!s.src&&!s.uploadId?null:n.change(l=>{const{setImageSizes:c=!0}=e,h=Array.from(n.markers).filter(y=>y.getRange().containsItem(o)),g=r.insertImage(s,n.createSelection(o,"on"),this._modelElementName,{setImageSizes:c});if(!g)return null;const b=l.createRangeOn(g);for(const y of h){const k=y.getRange(),x=k.root.rootName!="$graveyard"?k.getJoined(b,!0):b;l.updateMarker(y,{range:x})}return{oldElement:o,newElement:g}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JE extends Fe{static get requires(){return[bo]}static get pluginName(){return"ImagePlaceholder"}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const e=this.editor.model.schema;e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["placeholder"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const e=this.editor,t=e.conversion,n=e.plugins.get("ImageUtils");t.for("editingDowncast").add(r=>{r.on("attribute:placeholder",(o,s,l)=>{if(!l.consumable.test(s.item,o.name)||!s.item.is("element","imageBlock")&&!s.item.is("element","imageInline"))return;l.consumable.consume(s.item,o.name);const c=l.writer,h=l.mapper.toViewElement(s.item),g=n.findViewImgElement(h);s.attributeNewValue?(c.addClass("image_placeholder",g),c.setStyle("background-image",`url(${s.attributeNewValue})`,g),c.setCustomProperty("editingPipeline:doNotReuseOnce",!0,g)):(c.removeClass("image_placeholder",g),c.removeStyle("background-image",g))})})}_setupLoadListener(){const e=this.editor,t=e.model,n=e.editing,r=n.view,o=e.plugins.get("ImageUtils");r.addObserver(bv),this.listenTo(r.document,"imageLoaded",(s,l)=>{const c=r.domConverter.mapDomToView(l.target);if(!c)return;const h=o.getImageWidgetFromImageView(c);if(!h)return;const g=n.mapper.toModelElement(h);!g||!g.hasAttribute("placeholder")||t.enqueueChange({isUndoable:!1},b=>{b.removeAttribute("placeholder",g)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XE extends Fe{static get requires(){return[KE,ZE,bo,JE,Ys]}static get pluginName(){return"ImageBlockEditing"}init(){const e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new YE(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,n=e.conversion,r=e.plugins.get("ImageUtils");n.for("dataDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:s})=>Jy(s)}),n.for("editingDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:s})=>r.toImageWidget(Jy(s),s,t("image widget"))}),n.for("downcast").add(Mp(r,"imageBlock","src")).add(Mp(r,"imageBlock","alt")).add(GE(r,"imageBlock")),n.for("upcast").elementToElement({view:jE(e,"imageBlock"),model:(o,{writer:s})=>s.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)}).add(O3(r))}_setupClipboardIntegration(){const e=this.editor,t=e.model,n=e.editing.view,r=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(s,l)=>{const c=Array.from(l.content.getChildren());let h;if(!c.every(r.isInlineImageView))return;l.targetRanges?h=e.editing.mapper.toModelRange(l.targetRanges[0]):h=t.document.selection.getFirstRange();const g=t.createSelection(h);if(pv(t.schema,g)==="imageBlock"){const b=new eg(n.document),y=c.map(k=>b.createElement("figure",{class:"image"},k));l.content=b.createDocumentFragment(y)}}),this.listenTo(o,"contentInsertion",(s,l)=>{l.method==="paste"&&t.change(c=>{const h=c.createRangeIn(l.content);for(const g of h.getItems())g.is("element","imageBlock")&&r.setImageNaturalSizeAttributes(g)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L3 extends mt{constructor(e,t=[]){super(e),this.focusTracker=new Jn,this.keystrokes=new di,this._focusables=new Wr,this.children=this.createCollection(),this._focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const n of t)this.children.add(n),this._focusables.add(n),n instanceof SL&&this._focusables.addMany(n.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),xu({view:this});for(const t of this._focusables)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tm extends Fe{static get pluginName(){return"ImageInsertUI"}static get requires(){return[bo]}constructor(e){super(e),this._integrations=new Map,e.config.define("image.insert.integrations",["upload","assetManager","url"])}init(){const e=this.editor,t=e.model.document.selection,n=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=n.isImage(t.getSelectedElement())});const r=s=>this._createToolbarComponent(s),o=s=>this._createMenuBarComponent(s);e.ui.componentFactory.add("insertImage",r),e.ui.componentFactory.add("imageInsert",r),e.ui.componentFactory.add("menuBar:insertImage",o)}registerIntegration({name:e,observable:t,buttonViewCreator:n,formViewCreator:r,menuBarButtonViewCreator:o,requiresForm:s=!1}){this._integrations.has(e)&&vn("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:t,buttonViewCreator:n,menuBarButtonViewCreator:o,formViewCreator:r,requiresForm:s})}_createToolbarComponent(e){const t=this.editor,n=e.t,r=this._prepareIntegrations();if(!r.length)return null;let o;const s=r[0];if(r.length==1){if(!s.requiresForm)return s.buttonViewCreator(!0);o=s.buttonViewCreator(!0)}else{const h=s.buttonViewCreator(!1);o=new og(e,h),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",g=>n(g?"Replace image":"Insert image"))}const l=this.dropdownView=Dr(e,o),c=r.map(({observable:h})=>typeof h=="function"?h():h);return l.bind("isEnabled").toMany(c,"isEnabled",(...h)=>h.some(g=>g)),l.once("change:isOpen",()=>{const h=r.map(({formViewCreator:b})=>b(r.length==1)),g=new L3(t.locale,h);l.panelView.children.add(g)}),l}_createMenuBarComponent(e){const t=e.t,n=this._prepareIntegrations();if(!n.length)return null;let r;const o=n[0];if(n.length==1)r=o.menuBarButtonViewCreator(!0);else{r=new Qo(e);const s=new vu(e);r.panelView.children.add(s),r.buttonView.set({icon:it.image,label:t("Image")});for(const l of n){const c=new Au(e,r),h=l.menuBarButtonViewCreator(!1);c.children.add(h),s.items.add(c)}}return r}_prepareIntegrations(){const t=this.editor.config.get("image.insert.integrations"),n=[];if(!t.length)return vn("image-insert-integrations-not-specified"),n;for(const r of t){if(!this._integrations.has(r)){["upload","assetManager","url"].includes(r)||vn("image-insert-unknown-integration",{item:r});continue}n.push(this._integrations.get(r))}return n.length||vn("image-insert-integrations-not-registered"),n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B3 extends Fe{static get requires(){return[XE,Pa,qE,tm]}static get pluginName(){return"ImageBlock"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N3 extends Fe{static get requires(){return[KE,ZE,bo,JE,Ys]}static get pluginName(){return"ImageInlineEditing"}init(){const e=this.editor;e.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new YE(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,n=e.conversion,r=e.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:s})=>s.createEmptyElement("img")}),n.for("editingDowncast").elementToStructure({model:"imageInline",view:(o,{writer:s})=>r.toImageWidget(C3(s),s,t("image widget"))}),n.for("downcast").add(Mp(r,"imageInline","src")).add(Mp(r,"imageInline","alt")).add(GE(r,"imageInline")),n.for("upcast").elementToElement({view:jE(e,"imageInline"),model:(o,{writer:s})=>s.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const e=this.editor,t=e.model,n=e.editing.view,r=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(s,l)=>{const c=Array.from(l.content.getChildren());let h;if(!c.every(r.isBlockImageView))return;l.targetRanges?h=e.editing.mapper.toModelRange(l.targetRanges[0]):h=t.document.selection.getFirstRange();const g=t.createSelection(h);if(pv(t.schema,g)==="imageInline"){const b=new eg(n.document),y=c.map(k=>k.childCount===1?(Array.from(k.getAttributes()).forEach(x=>b.setAttribute(...x,r.findViewImgElement(k))),k.getChild(0)):k);l.content=b.createDocumentFragment(y)}}),this.listenTo(o,"contentInsertion",(s,l)=>{l.method==="paste"&&t.change(c=>{const h=c.createRangeIn(l.content);for(const g of h.getItems())g.is("element","imageInline")&&r.setImageNaturalSizeAttributes(g)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QE extends Fe{static get requires(){return[N3,Pa,qE,tm]}static get pluginName(){return"ImageInline"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class V3 extends Fe{static get requires(){return[B3,QE]}static get pluginName(){return"Image"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eS extends Fe{static get pluginName(){return"ImageCaptionUtils"}static get requires(){return[bo]}getCaptionFromImageModelElement(e){for(const t of e.getChildren())if(t&&t.is("element","caption"))return t;return null}getCaptionFromModelSelection(e){const t=this.editor.plugins.get("ImageUtils"),n=e.getFirstPosition().findAncestor("caption");return n&&t.isBlockImage(n.parent)?n:null}matchImageCaptionViewElement(e){const t=this.editor.plugins.get("ImageUtils");return e.name=="figcaption"&&t.isBlockImageView(e.parent)?{name:!0}:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class z3 extends Wt{refresh(){const e=this.editor,t=e.plugins.get("ImageCaptionUtils"),n=e.plugins.get("ImageUtils");if(!e.plugins.has(XE)){this.isEnabled=!1,this.value=!1;return}const r=e.model.document.selection,o=r.getSelectedElement();if(!o){const s=t.getCaptionFromModelSelection(r);this.isEnabled=!!s,this.value=!!s;return}this.isEnabled=n.isImage(o),this.isEnabled?this.value=!!t.getCaptionFromImageModelElement(o):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change(n=>{this.value?this._hideImageCaption(n):this._showImageCaption(n,t)})}_showImageCaption(e,t){const r=this.editor.model.document.selection,o=this.editor.plugins.get("ImageCaptionEditing"),s=this.editor.plugins.get("ImageUtils");let l=r.getSelectedElement();const c=o._getSavedCaption(l);s.isInlineImage(l)&&(this.editor.execute("imageTypeBlock"),l=r.getSelectedElement());const h=c||e.createElement("caption");e.append(h,l),t&&e.setSelection(h,"in")}_hideImageCaption(e){const t=this.editor,n=t.model.document.selection,r=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageCaptionUtils");let s=n.getSelectedElement(),l;s?l=o.getCaptionFromImageModelElement(s):(l=o.getCaptionFromModelSelection(n),s=l.parent),r._saveCaption(s,l),e.setSelection(s,"on"),e.remove(l)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class H3 extends Fe{static get requires(){return[bo,eS]}static get pluginName(){return"ImageCaptionEditing"}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new z3(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,t=e.editing.view,n=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:s=>r.matchImageCaptionViewElement(s),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(s,{writer:l})=>n.isBlockImage(s.parent)?l.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(s,{writer:l})=>{if(!n.isBlockImage(s.parent))return null;const c=l.createEditableElement("figcaption");l.setCustomProperty("imageCaption",!0,c),c.placeholder=o("Enter image caption"),mC({view:t,element:c,keepOnFocus:!0});const h=s.parent.getAttribute("alt"),g=h?o("Caption for image: %0",[h]):o("Caption for the image");return Yx(c,l,{label:g})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,t=e.plugins.get("ImageUtils"),n=e.plugins.get("ImageCaptionUtils"),r=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),s=l=>{if(!l.return)return;const{oldElement:c,newElement:h}=l.return;/* istanbul ignore if: paranoid check -- @preserve */if(!c)return;if(t.isBlockImage(c)){const b=n.getCaptionFromImageModelElement(c);if(b){this._saveCaption(h,b);return}}const g=this._getSavedCaption(c);g&&this._saveCaption(h,g)};r&&this.listenTo(r,"execute",s,{priority:"low"}),o&&this.listenTo(o,"execute",s,{priority:"low"})}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?ci.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}_registerCaptionReconversion(){const e=this.editor,t=e.model,n=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils");t.document.on("change:data",()=>{const o=t.document.differ.getChanges();for(const s of o){if(s.attributeKey!=="alt")continue;const l=s.range.start.nodeAfter;if(n.isBlockImage(l)){const c=r.getCaptionFromImageModelElement(l);if(!c)return;e.editing.reconvertItem(c)}}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class U3 extends Fe{static get requires(){return[eS]}static get pluginName(){return"ImageCaptionUI"}init(){const e=this.editor,t=e.editing.view,n=e.plugins.get("ImageCaptionUtils"),r=e.t;e.ui.componentFactory.add("toggleImageCaption",o=>{const s=e.commands.get("toggleImageCaption"),l=new Ht(o);return l.set({icon:it.caption,tooltip:!0,isToggleable:!0}),l.bind("isOn","isEnabled").to(s,"value","isEnabled"),l.bind("label").to(s,"value",c=>r(c?"Toggle caption off":"Toggle caption on")),this.listenTo(l,"execute",()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});const c=n.getCaptionFromModelSelection(e.model.document.selection);if(c){const h=e.editing.mapper.toViewElement(c);t.scrollToTheSelection(),t.change(g=>{g.addClass("image__caption_highlighted",h)})}e.editing.view.focus()}),l})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class W3 extends Fe{static get requires(){return[H3,U3]}static get pluginName(){return"ImageCaption"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tS(i){const e=i.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function j3(i){return new Promise((e,t)=>{const n=i.getAttribute("src");fetch(n).then(r=>r.blob()).then(r=>{const o=nS(r,n),l=`image.${o.replace("image/","")}`,c=new File([r],l,{type:o});e(c)}).catch(r=>r&&r.name==="TypeError"?q3(n).then(e).catch(t):t(r))})}function $3(i,e){return!i.isInlineImageView(e)||!e.getAttribute("src")?!1:!!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!e.getAttribute("src").match(/^blob:/g)}function nS(i,e){return i.type?i.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function q3(i){return G3(i).then(e=>{const t=nS(e,i),r=`image.${t.replace("image/","")}`;return new File([e],r,{type:t})})}function G3(i){return new Promise((e,t)=>{const n=_t.document.createElement("img");n.addEventListener("load",()=>{const r=_t.document.createElement("canvas");r.width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0),r.toBlob(s=>s?e(s):t())}),n.addEventListener("error",()=>t()),n.src=i})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class K3 extends Fe{static get pluginName(){return"ImageUploadUI"}init(){const e=this.editor;e.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),e.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),e.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),e.plugins.has("ImageInsertUI")&&e.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>e.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createButton(e){const t=this.editor,n=t.locale,r=t.commands.get("uploadImage"),o=t.config.get("image.upload.types"),s=tS(o),l=new e(t.locale),c=n.t;return l.set({acceptedType:o.map(h=>`image/${h}`).join(","),allowMultipleFiles:!0,label:c("Upload from computer"),icon:it.imageUpload}),l.bind("isEnabled").to(r),l.on("done",(h,g)=>{const b=Array.from(g).filter(y=>s.test(y.type));b.length&&(t.execute("uploadImage",{file:b}),t.editing.view.focus())}),l}_createToolbarButton(){const e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),n=this.editor.commands.get("uploadImage"),r=this._createButton(f1);return r.tooltip=!0,r.bind("label").to(t,"isImageSelected",n,"isAccessAllowed",(o,s)=>e(s?o?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),r}_createDropdownButton(){const e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),n=this._createButton(f1);return n.withText=!0,n.bind("label").to(t,"isImageSelected",r=>e(r?"Replace from computer":"Upload from computer")),n.on("execute",()=>{t.dropdownView.isOpen=!1}),n}_createMenuBarButton(e){const t=this.editor.locale.t,n=this._createButton(Vx);switch(n.withText=!0,e){case"standalone":n.label=t("Image from computer");break;case"insertOnly":n.label=t("Image");break;case"insertNested":n.label=t("From computer");break}return n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Z3=class extends Vn(){constructor(){super();const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise((n,r)=>{t.onload=()=>{const o=t.result;this._data=o,n(o)},t.onerror=()=>{r("error")},t.onabort=()=>{r("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fu extends Fe{constructor(){super(...arguments),this.loaders=new Or,this._loadersMap=new Map,this._pendingAction=null}static get pluginName(){return"FileRepository"}static get requires(){return[Ep]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return vn("filerepository-no-upload-adapter"),null;const t=new Xy(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(n=>{this._loadersMap.set(n,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let n=0;for(const r of this.loaders)n+=r.uploaded;this.uploaded=n}),t.on("change:uploadTotal",()=>{let n=0;for(const r of this.loaders)r.uploadTotal&&(n+=r.uploadTotal);this.uploadTotal=n}),t}destroyLoader(e){const t=e instanceof Xy?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach((n,r)=>{n===t&&this._loadersMap.delete(r)})}_updatePendingAction(){const e=this.editor.plugins.get(Ep);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,n=r=>`${t("Upload in progress")} ${parseInt(r)}%.`;this._pendingAction=e.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else e.remove(this._pendingAction),this._pendingAction=null}}class Xy extends Vn(){constructor(e,t){super(),this.id=xs(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new Z3,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(n,r)=>r?n/r*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new be("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new be("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise((n,r)=>{t.rejecter=r,t.isFulfilled=!1,e.then(o=>{t.isFulfilled=!0,n(o)}).catch(o=>{t.isFulfilled=!0,r(o)})}),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Y3 extends Fe{static get requires(){return[fu]}static get pluginName(){return"Base64UploadAdapter"}init(){this.editor.plugins.get(fu).createUploadAdapter=e=>new J3(e)}}class J3{constructor(e){this.loader=e}upload(){return new Promise((e,t)=>{const n=this.reader=new window.FileReader;n.addEventListener("load",()=>{e({default:n.result})}),n.addEventListener("error",r=>{t(r)}),n.addEventListener("abort",()=>{t()}),this.loader.file.then(r=>{n.readAsDataURL(r)})})}abort(){this.reader.abort()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class X3 extends Fe{static get pluginName(){return"ImageUploadProgress"}constructor(e){super(e),this.uploadStatusChange=(t,n,r)=>{const o=this.editor,s=n.item,l=s.getAttribute("uploadId");if(!r.consumable.consume(n.item,t.name))return;const c=o.plugins.get("ImageUtils"),h=o.plugins.get(fu),g=l?n.attributeNewValue:null,b=this.placeholder,y=o.editing.mapper.toViewElement(s),k=r.writer;if(g=="reading"){Qy(y,k),e_(c,b,y,k);return}if(g=="uploading"){const x=h.loaders.get(l);Qy(y,k),x?(t_(y,k),ez(y,k,x,o.editing.view),oz(c,y,k,x)):e_(c,b,y,k);return}g=="complete"&&h.loaders.get(l)&&nz(y,k,o.editing.view),tz(y,k),t_(y,k),Q3(y,k)},this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function Qy(i,e){i.hasClass("ck-appear")||e.addClass("ck-appear",i)}function Q3(i,e){e.removeClass("ck-appear",i)}function e_(i,e,t,n){t.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",t);const r=i.findViewImgElement(t);r.getAttribute("src")!==e&&n.setAttribute("src",e,r),iS(t,"placeholder")||n.insert(n.createPositionAfter(r),rz(n))}function t_(i,e){i.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",i),rS(i,e,"placeholder")}function ez(i,e,t,n){const r=iz(e);e.insert(e.createPositionAt(i,"end"),r),t.on("change:uploadedPercent",(o,s,l)=>{n.change(c=>{c.setStyle("width",l+"%",r)})})}function tz(i,e){rS(i,e,"progressBar")}function nz(i,e,t){const n=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(i,"end"),n),setTimeout(()=>{t.change(r=>r.remove(r.createRangeOn(n)))},3e3)}function iz(i){const e=i.createUIElement("div",{class:"ck-progress-bar"});return i.setCustomProperty("progressBar",!0,e),e}function rz(i){const e=i.createUIElement("div",{class:"ck-upload-placeholder-loader"});return i.setCustomProperty("placeholder",!0,e),e}function iS(i,e){for(const t of i.getChildren())if(t.getCustomProperty(e))return t}function rS(i,e,t){const n=iS(i,t);n&&e.remove(e.createRangeOn(n))}function oz(i,e,t,n){if(n.data){const r=i.findViewImgElement(e);t.setAttribute("src",n.data,r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sz extends Wt{constructor(e){super(e),this.set("isAccessAllowed",!0)}refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),n=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(n)}execute(e){const t=An(e.file),n=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());t.forEach((s,l)=>{const c=n.getSelectedElement();if(l&&c&&r.isImage(c)){const h=this.editor.model.createPositionAfter(c);this._uploadImage(s,o,h)}else this._uploadImage(s,o)})}_uploadImage(e,t,n){const r=this.editor,s=r.plugins.get(fu).createLoader(e),l=r.plugins.get("ImageUtils");s&&l.insertImage({...t,uploadId:s.id},n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class az extends Fe{static get requires(){return[fu,R1,Ys,bo]}static get pluginName(){return"ImageUploadEditing"}constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const e=this.editor,t=e.model.document,n=e.conversion,r=e.plugins.get(fu),o=e.plugins.get("ImageUtils"),s=e.plugins.get("ClipboardPipeline"),l=tS(e.config.get("image.upload.types")),c=new sz(e);e.commands.add("uploadImage",c),e.commands.add("imageUpload",c),n.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",(h,g)=>{if(lz(g.dataTransfer))return;const b=Array.from(g.dataTransfer.files).filter(k=>k?l.test(k.type):!1);if(!b.length)return;if(h.stop(),e.model.change(k=>{g.targetRanges&&k.setSelection(g.targetRanges.map(x=>e.editing.mapper.toModelRange(x))),e.execute("uploadImage",{file:b})}),!e.commands.get("uploadImage").isAccessAllowed){const k=e.plugins.get("Notification"),x=e.locale.t;k.showWarning(x("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(s,"inputTransformation",(h,g)=>{const b=Array.from(e.editing.view.createRangeIn(g.content)).map(k=>k.item).filter(k=>$3(o,k)&&!k.getAttribute("uploadProcessed")).map(k=>({promise:j3(k),imageElement:k}));if(!b.length)return;const y=new eg(e.editing.view.document);for(const k of b){y.setAttribute("uploadProcessed",!0,k.imageElement);const x=r.createLoader(k.promise);x&&(y.setAttribute("src","",k.imageElement),y.setAttribute("uploadId",x.id,k.imageElement))}}),e.editing.view.document.on("dragover",(h,g)=>{g.preventDefault()}),t.on("change",()=>{const h=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),g=new Set;for(const b of h)if(b.type=="insert"&&b.name!="$text"){const y=b.position.nodeAfter,k=b.position.root.rootName=="$graveyard";for(const x of cz(e,y)){const D=x.getAttribute("uploadId");if(!D)continue;const L=r.loaders.get(D);L&&(k?g.has(D)||L.abort():(g.add(D),this._uploadImageElements.set(D,x),L.status=="idle"&&this._readAndUpload(L)))}}}),this.on("uploadComplete",(h,{imageElement:g,data:b})=>{const y=b.urls?b.urls:b;this.editor.model.change(k=>{k.setAttribute("src",y.default,g),this._parseAndSetSrcsetAttributeOnImage(y,g,k),o.setImageNaturalSizeAttributes(g)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){const t=this.editor,n=t.model,r=t.locale.t,o=t.plugins.get(fu),s=t.plugins.get(R1),l=t.plugins.get("ImageUtils"),c=this._uploadImageElements;return n.enqueueChange({isUndoable:!1},g=>{g.setAttribute("uploadStatus","reading",c.get(e.id))}),e.read().then(()=>{const g=e.upload(),b=c.get(e.id);/* istanbul ignore next -- @preserve */if(Yt.isSafari){const y=t.editing.mapper.toViewElement(b),k=l.findViewImgElement(y);t.editing.view.once("render",()=>{if(!k.parent)return;const x=t.editing.view.domConverter.mapViewToDom(k.parent);if(!x)return;const D=x.style.display;x.style.display="none",x._ckHack=x.offsetHeight,x.style.display=D})}return t.ui&&t.ui.ariaLiveAnnouncer.announce(r("Uploading image")),n.enqueueChange({isUndoable:!1},y=>{y.setAttribute("uploadStatus","uploading",b)}),g}).then(g=>{n.enqueueChange({isUndoable:!1},b=>{const y=c.get(e.id);b.setAttribute("uploadStatus","complete",y),t.ui&&t.ui.ariaLiveAnnouncer.announce(r("Image upload complete")),this.fire("uploadComplete",{data:g,imageElement:y})}),h()}).catch(g=>{if(t.ui&&t.ui.ariaLiveAnnouncer.announce(r("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw g;e.status=="error"&&g&&s.showWarning(g,{title:r("Upload failed"),namespace:"upload"}),n.enqueueChange({isUndoable:!1},b=>{b.remove(c.get(e.id))}),h()});function h(){n.enqueueChange({isUndoable:!1},g=>{const b=c.get(e.id);g.removeAttribute("uploadId",b),g.removeAttribute("uploadStatus",b),c.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,n){let r=0;const o=Object.keys(e).filter(s=>{const l=parseInt(s,10);if(!isNaN(l))return r=Math.max(r,l),!0}).map(s=>`${e[s]} ${s}w`).join(", ");if(o!=""){const s={srcset:o};!t.hasAttribute("width")&&!t.hasAttribute("height")&&(s.width=r),n.setAttributes(s,t)}}}function lz(i){return Array.from(i.types).includes("text/html")&&i.getData("text/html")!==""}function cz(i,e){const t=i.plugins.get("ImageUtils");return Array.from(i.model.createRangeOn(e)).filter(n=>t.isImage(n.item)).map(n=>n.item)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oS extends Fe{static get pluginName(){return"ImageUpload"}static get requires(){return[az,K3,X3]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uz extends mt{constructor(e){super(e),this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new di,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-image-insert-url"]},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,t=e.t,n=new lr(e,Jo);return n.bind("label").to(this,"isImageSelected",r=>t(r?"Update image URL":"Insert image via URL")),n.bind("isEnabled").to(this),n.fieldView.inputMode="url",n.fieldView.placeholder="https://example.com/image.png",n.fieldView.bind("value").to(this,"imageURLInputValue",r=>r||""),n.fieldView.on("input",()=>{this.imageURLInputValue=n.fieldView.element.value.trim()}),n}focus(){this.urlInputView.focus()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dz extends Fe{static get pluginName(){return"ImageInsertViaUrlUI"}static get requires(){return[tm,js]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const t=new e(this.editor.locale);return t.icon=it.imageUrl,t.on("execute",()=>{this._showModal()}),t}_createToolbarButton(){const e=this.editor.locale.t,t=this._createInsertUrlButton(Ht);return t.tooltip=!0,t.bind("label").to(this._imageInsertUI,"isImageSelected",n=>e(n?"Update image URL":"Insert image via URL")),t}_createDropdownButton(){const e=this.editor.locale.t,t=this._createInsertUrlButton(Ht);return t.withText=!0,t.bind("label").to(this._imageInsertUI,"isImageSelected",n=>e(n?"Update image URL":"Insert via URL")),t}_createMenuBarButton(e){const t=this.editor.locale.t,n=this._createInsertUrlButton(Ii);switch(n.withText=!0,e){case"standalone":n.label=t("Image via URL");break;case"insertOnly":n.label=t("Image");break;case"insertNested":n.label=t("Via URL");break}return n}_createInsertUrlView(){const e=this.editor,t=e.locale,n=e.commands.get("replaceImageSource"),r=e.commands.get("insertImage"),o=new uz(t);return o.bind("isImageSelected").to(this._imageInsertUI),o.bind("isEnabled").toMany([r,n],"isEnabled",(...s)=>s.some(l=>l)),o}_showModal(){const e=this.editor,n=e.locale.t,r=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const o=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=o.value||"",r.show({id:"insertImageViaUrl",title:this._imageInsertUI.isImageSelected?n("Update image URL"):n("Insert image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:n("Cancel"),withText:!0,onExecute:()=>r.hide()},{label:n("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hz extends Fe{static get pluginName(){return"ImageInsertViaUrl"}static get requires(){return[dz,tm]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fz extends Fe{static get pluginName(){return"ImageInsert"}static get requires(){return[oS,hz,tm]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mz extends Wt{refresh(){const e=this.editor,n=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!n,!n||!n.hasAttribute("resizedWidth")?this.value=null:this.value={width:n.getAttribute("resizedWidth"),height:null}}execute(e){const t=this.editor,n=t.model,r=t.plugins.get("ImageUtils"),o=r.getClosestSelectedImageElement(n.document.selection);this.value={width:e.width,height:null},o&&n.change(s=>{s.setAttribute("resizedWidth",e.width,o),s.removeAttribute("resizedHeight",o),r.setImageNaturalSizeAttributes(o)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vv extends Fe{static get requires(){return[bo]}static get pluginName(){return"ImageResizeEditing"}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,t=new mz(e);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(e){const t=this.editor,n=t.plugins.get("ImageUtils");t.conversion.for("downcast").add(r=>r.on(`attribute:resizedWidth:${e}`,(o,s,l)=>{if(!l.consumable.consume(s.item,o.name))return;const c=l.writer,h=l.mapper.toViewElement(s.item);s.attributeNewValue!==null?(c.setStyle("width",s.attributeNewValue,h),c.addClass("image_resized",h)):(c.removeStyle("width",h),c.removeClass("image_resized",h))})),t.conversion.for("dataDowncast").attributeToAttribute({model:{name:e,key:"resizedHeight"},view:r=>({key:"style",value:{height:r}})}),t.conversion.for("editingDowncast").add(r=>r.on(`attribute:resizedHeight:${e}`,(o,s,l)=>{if(!l.consumable.consume(s.item,o.name))return;const c=l.writer,h=l.mapper.toViewElement(s.item),g=e==="imageInline"?n.findViewImgElement(h):h;s.attributeNewValue!==null?c.setStyle("height",s.attributeNewValue,g):c.removeStyle("height",g)})),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:r=>Fp(r)?null:r.getStyle("width")}}),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:r=>Fp(r)?null:r.getStyle("height")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yb={small:it.objectSizeSmall,medium:it.objectSizeMedium,large:it.objectSizeLarge,custom:it.objectSizeCustom,original:it.objectSizeFull};class pz extends Fe{static get requires(){return[vv]}static get pluginName(){return"ImageResizeButtons"}constructor(e){super(e),this._resizeUnit=e.config.get("image.resizeUnit")}init(){const e=this.editor,t=e.config.get("image.resizeOptions"),n=e.commands.get("resizeImage");this.bind("isEnabled").to(n);for(const r of t)this._registerImageResizeButton(r);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const t=this.editor,{name:n,value:r,icon:o}=e;t.ui.componentFactory.add(n,s=>{const l=new Ht(s),c=t.commands.get("resizeImage"),h=this._getOptionLabelValue(e,!0);if(!yb[o])throw new be("imageresizebuttons-missing-icon",t,e);if(l.set({label:h,icon:yb[o],tooltip:h,isToggleable:!0}),l.bind("isEnabled").to(this),t.plugins.has("ImageCustomResizeUI")&&tf(e)){const g=t.plugins.get("ImageCustomResizeUI");this.listenTo(l,"execute",()=>{g._showForm(this._resizeUnit)})}else{const g=r?r+this._resizeUnit:null;l.bind("isOn").to(c,"value",w0(g)),this.listenTo(l,"execute",()=>{t.execute("resizeImage",{width:g})})}return l})}_registerImageResizeDropdown(e){const t=this.editor,n=t.t,r=e.find(s=>!s.value),o=s=>{const l=t.commands.get("resizeImage"),c=Dr(s,Ex),h=c.buttonView,g=n("Resize image");return h.set({tooltip:g,commandValue:r.value,icon:yb.medium,isToggleable:!0,label:this._getOptionLabelValue(r),withText:!0,class:"ck-resize-image-button",ariaLabel:g,ariaLabelledBy:void 0}),h.bind("label").to(l,"value",b=>b&&b.width?b.width:this._getOptionLabelValue(r)),c.bind("isEnabled").to(this),xl(c,()=>this._getResizeDropdownListItemDefinitions(e,l),{ariaLabel:n("Image resize list"),role:"menu"}),this.listenTo(c,"execute",b=>{"onClick"in b.source?b.source.onClick():(t.execute(b.source.commandName,{width:b.source.commandValue}),t.editing.view.focus())}),c};t.ui.componentFactory.add("resizeImage",o),t.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,t=!1){const n=this.editor.t;return e.label?e.label:t?tf(e)?n("Custom image size"):e.value?n("Resize image to %0",e.value+this._resizeUnit):n("Resize image to the original size"):tf(e)?n("Custom"):e.value?e.value+this._resizeUnit:n("Original")}_getResizeDropdownListItemDefinitions(e,t){const{editor:n}=this,r=new Or,o=e.map(s=>tf(s)?{...s,valueWithUnits:"custom"}:s.value?{...s,valueWithUnits:`${s.value}${this._resizeUnit}`}:{...s,valueWithUnits:null});for(const s of o){let l=null;if(n.plugins.has("ImageCustomResizeUI")&&tf(s)){const c=n.plugins.get("ImageCustomResizeUI");l={type:"button",model:new yl({label:this._getOptionLabelValue(s),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{c._showForm(this._resizeUnit)}})};const h=tT(o,"valueWithUnits");l.model.bind("isOn").to(t,"value",gz(h))}else l={type:"button",model:new yl({commandName:"resizeImage",commandValue:s.valueWithUnits,label:this._getOptionLabelValue(s),role:"menuitemradio",withText:!0,icon:null})},l.model.bind("isOn").to(t,"value",w0(s.valueWithUnits));l.model.bind("isEnabled").to(t,"isEnabled"),r.add(l)}return r}}function tf(i){return i.value==="custom"}function w0(i){return e=>{const t=e;return i===null&&t===i?!0:t!==null&&t.width===i}}function gz(i){return e=>!i.some(t=>w0(t)(e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const bz="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",_b="image_resized";class sS extends Fe{static get requires(){return[hb,bo]}static get pluginName(){return"ImageResizeHandles"}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view,n=e.plugins.get("ImageUtils");t.addObserver(bv),this.listenTo(t.document,"imageLoaded",(r,o)=>{if(!o.target.matches(bz))return;const s=e.editing.view.domConverter,l=s.domToView(o.target),c=n.getImageWidgetFromImageView(l);let h=this.editor.plugins.get(hb).getResizerByViewElement(c);if(h){h.redraw();return}const g=e.editing.mapper,b=g.toModelElement(c);h=e.plugins.get(hb).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:b,viewElement:c,editor:e,getHandleHost(y){return y.querySelector("img")},getResizeHost(){return s.mapViewToDom(g.toViewElement(b))},isCentered(){return b.getAttribute("imageStyle")=="alignCenter"},onCommit(y){t.change(k=>{k.removeClass(_b,c)}),e.execute("resizeImage",{width:y})}}),h.on("updateSize",()=>{c.hasClass(_b)||t.change(k=>{k.addClass(_b,c)});const y=b.name==="imageInline"?l:c;y.getStyle("height")&&t.change(k=>{k.removeStyle("height",y)})}),h.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function aS(i){if(!i)return null;const[,e,t]=i.trim().match(/([.,\d]+)(%|px)$/)||[],n=Number.parseFloat(e);return Number.isNaN(n)?null:{value:n,unit:t}}function lS(i,e,t){return t==="px"?{value:e.value,unit:"px"}:{value:e.value/i*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cS(i){const{editing:e}=i,n=i.plugins.get("ImageUtils").getClosestSelectedImageElement(i.model.document.selection);if(!n)return null;const r=e.mapper.toViewElement(n),o=e.view.domConverter.mapViewToDom(r);return{model:n,view:r,dom:o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vz(i,e){const t=cS(i);if(!t)return null;const n=aS(t.model.getAttribute("resizedWidth")||null);if(!n)return null;if(n.unit===e)return n;const r=iv(t.dom),o={unit:"px",value:new Jt(t.dom).width};return lS(r,o,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wz extends mt{constructor(e,t,n){super(e);const r=this.locale.t;this.focusTracker=new Jn,this.keystrokes=new di,this.unit=t,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(r("Save"),it.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),it.cancel,"ck-button-cancel","cancel"),this._focusables=new Wr,this._validators=n,this._focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),xu({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,n,r){const o=new Ht(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){const e=this.locale.t,t=new lr(this.locale,h4);return t.label=e("Resize image (in %0)",this.unit),t.fieldView.set({step:.1}),t}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.labeledInput.errorText=t,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const t=Number.parseFloat(e);return Number.isNaN(t)?null:t}get sizeWithUnits(){const{parsedSize:e,unit:t}=this;return e===null?null:`${e}${t}`}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yz(i,e){const t=cS(i);if(!t)return null;const n=iv(t.dom),r=aS(window.getComputedStyle(t.dom).minWidth)||{value:1,unit:"px"},o=Math.max(.1,lS(n,r,e).value);return{unit:e,lower:o,upper:e==="px"?n:100}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _z extends Fe{static get requires(){return[_l]}static get pluginName(){return"ImageCustomResizeUI"}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const t=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Yp(wz))(t.locale,e,kz(t)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(t.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{t.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(n,r)=>{this._hideForm(!0),r()}),Cu({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const t=this.editor,n=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:gv(t)});const r=vz(t,e),o=r?r.value.toFixed(1):"",s=yz(t,e);n.fieldView.value=n.fieldView.element.value=o,s&&Object.assign(n.fieldView,{min:s.lower.toFixed(1),max:Math.ceil(s.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function kz(i){const e=i.t;return[t=>{if(t.rawSize.trim()==="")return e("The value must not be empty.");if(t.parsedSize===null)return e("The value should be a plain number.")}]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cz extends Fe{static get requires(){return[vv,sS,_z,pz]}static get pluginName(){return"ImageResize"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xz extends Wt{constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(n=>{if(n.isDefault)for(const r of n.modelElements)this._defaultStyles[r]=n.name;return[n.name,n]}))}refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled?n.hasAttribute("imageStyle")?this.value=n.getAttribute("imageStyle"):this.value=this._defaultStyles[n.name]:this.value=!1}execute(e={}){const t=this.editor,n=t.model,r=t.plugins.get("ImageUtils");n.change(o=>{const s=e.value,{setImageSizes:l=!0}=e;let c=r.getClosestSelectedImageElement(n.document.selection);s&&this.shouldConvertImageType(s,c)&&(this.editor.execute(r.isBlockImage(c)?"imageTypeInline":"imageTypeBlock",{setImageSizes:l}),c=r.getClosestSelectedImageElement(n.document.selection)),!s||this._styles.get(s).isDefault?o.removeAttribute("imageStyle",c):o.setAttribute("imageStyle",s,c),l&&r.setImageNaturalSizeAttributes(c)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const up={get inline(){return{name:"inline",title:"In line",icon:it.objectInline,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:it.objectLeft,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:it.objectBlockLeft,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:it.objectCenter,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:it.objectRight,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:it.objectBlockRight,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:it.objectCenter,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:it.objectRight,modelElements:["imageBlock"],className:"image-style-side"}}},uS={full:it.objectFullWidth,left:it.objectBlockLeft,right:it.objectBlockRight,center:it.objectCenter,inlineLeft:it.objectLeft,inlineRight:it.objectRight,inline:it.objectInline},dS=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function Ez(i){return(i.configuredStyles.options||[]).map(n=>Az(n)).filter(n=>Pz(n,i))}function Sz(i,e){return i&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:i?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}}function Tz(i){return i.has("ImageBlockEditing")&&i.has("ImageInlineEditing")?[...dS]:[]}function Az(i){return typeof i=="string"?up[i]?i={...up[i]}:i={name:i}:i=Iz(up[i.name],i),typeof i.icon=="string"&&(i.icon=uS[i.icon]||i.icon),i}function Pz(i,{isBlockPluginLoaded:e,isInlinePluginLoaded:t}){const{modelElements:n,name:r}=i;if(!n||!n.length||!r)return hS({style:i}),!1;{const o=[e?"imageBlock":null,t?"imageInline":null];if(!n.some(s=>o.includes(s)))return vn("image-style-missing-dependency",{style:i,missingPlugins:n.map(s=>s==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function Iz(i,e){const t={...e};for(const n in i)Object.prototype.hasOwnProperty.call(e,n)||(t[n]=i[n]);return t}function hS(i){vn("image-style-configuration-definition-invalid",i)}const y0={normalizeStyles:Ez,getDefaultStylesConfiguration:Sz,getDefaultDropdownDefinitions:Tz,warnInvalidStyle:hS,DEFAULT_OPTIONS:up,DEFAULT_ICONS:uS,DEFAULT_DROPDOWN_DEFINITIONS:dS};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Dz(i){return(e,t,n)=>{if(!n.consumable.consume(t.item,e.name))return;const r=n_(t.attributeNewValue,i),o=n_(t.attributeOldValue,i),s=n.mapper.toViewElement(t.item),l=n.writer;o&&l.removeClass(o.className,s),r&&l.addClass(r.className,s)}}function Rz(i){const e={imageInline:i.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:i.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,n,r)=>{if(!n.modelRange)return;const o=n.viewItem,s=Wi(n.modelRange.getItems());if(s&&r.schema.checkAttribute(s,"imageStyle"))for(const l of e[s.name])r.consumable.consume(o,{classes:l.className})&&r.writer.setAttribute("imageStyle",l.name,s)}}function n_(i,e){for(const t of e)if(t.name===i)return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fS extends Fe{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[bo]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:t}=y0,n=this.editor,r=n.plugins.has("ImageBlockEditing"),o=n.plugins.has("ImageInlineEditing");n.config.define("image.styles",t(r,o)),this.normalizedStyles=e({configuredStyles:n.config.get("image.styles"),isBlockPluginLoaded:r,isInlinePluginLoaded:o}),this._setupConversion(r,o),this._setupPostFixer(),n.commands.add("imageStyle",new xz(n,this.normalizedStyles))}_setupConversion(e,t){const n=this.editor,r=n.model.schema,o=Dz(this.normalizedStyles),s=Rz(this.normalizedStyles);n.editing.downcastDispatcher.on("attribute:imageStyle",o),n.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(r.extend("imageBlock",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:figure",s,{priority:"low"})),t&&(r.extend("imageInline",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:img",s,{priority:"low"}))}_setupPostFixer(){const e=this.editor,t=e.model.document,n=e.plugins.get(bo),r=new Map(this.normalizedStyles.map(o=>[o.name,o]));t.registerPostFixer(o=>{let s=!1;for(const l of t.differ.getChanges())if(l.type=="insert"||l.type=="attribute"&&l.attributeKey=="imageStyle"){let c=l.type=="insert"?l.position.nodeAfter:l.range.start.nodeAfter;if(c&&c.is("element","paragraph")&&c.childCount>0&&(c=c.getChild(0)),!n.isImage(c))continue;const h=c.getAttribute("imageStyle");if(!h)continue;const g=r.get(h);(!g||!g.modelElements.includes(c.name))&&(o.removeAttribute("imageStyle",c),s=!0)}return s})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oz extends Fe{static get requires(){return[fS]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],n=e.get("ImageStyleEditing"),r=i_(n.normalizedStyles,this.localizedDefaultStylesTitles);for(const s of r)this._createButton(s);const o=i_([...t.filter(ro),...y0.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const s of o)this._createDropdown(s,r)}_createDropdown(e,t){const n=this.editor.ui.componentFactory;n.add(e.name,r=>{let o;const{defaultItem:s,items:l,title:c}=e,h=l.filter(k=>t.find(({name:x})=>r_(x)===k)).map(k=>{const x=n.create(k);return k===s&&(o=x),x});l.length!==h.length&&y0.warnInvalidStyle({dropdown:e});const g=Dr(r,og),b=g.buttonView,y=b.arrowView;return sg(g,h,{enableActiveItemFocusOnDropdownOpen:!0}),b.set({label:o_(c,o.label),class:null,tooltip:!0}),y.unbind("label"),y.set({label:c}),b.bind("icon").toMany(h,"isOn",(...k)=>{const x=k.findIndex(qh);return x<0?o.icon:h[x].icon}),b.bind("label").toMany(h,"isOn",(...k)=>{const x=k.findIndex(qh);return o_(c,x<0?o.label:h[x].label)}),b.bind("isOn").toMany(h,"isOn",(...k)=>k.some(qh)),b.bind("class").toMany(h,"isOn",(...k)=>k.some(qh)?"ck-splitbutton_flatten":void 0),b.on("execute",()=>{h.some(({isOn:k})=>k)?g.isOpen=!g.isOpen:o.fire("execute")}),g.bind("isEnabled").toMany(h,"isEnabled",(...k)=>k.some(qh)),this.listenTo(g,"execute",()=>{this.editor.editing.view.focus()}),g})}_createButton(e){const t=e.name;this.editor.ui.componentFactory.add(r_(t),n=>{const r=this.editor.commands.get("imageStyle"),o=new Ht(n);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",s=>s===t),o.on("execute",this._executeCommand.bind(this,t)),o})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function i_(i,e){for(const t of i)e[t.title]&&(t.title=e[t.title]);return i}function r_(i){return`imageStyle:${i}`}function o_(i,e){return(i?i+": ":"")+e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fz extends Fe{static get requires(){return[fS,Oz]}static get pluginName(){return"ImageStyle"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mz extends Fe{static get requires(){return[Ap,bo]}static get pluginName(){return"ImageToolbar"}afterInit(){const e=this.editor,t=e.t,n=e.plugins.get(Ap),r=e.plugins.get("ImageUtils");n.register("image",{ariaLabel:t("Image toolbar"),items:Lz(e.config.get("image.toolbar")||[]),getRelatedElement:o=>r.getClosestSelectedImageWidget(o)})}}function Lz(i){return i.map(e=>ro(e)?e.name:e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bz extends Wt{refresh(){const e=this.editor.model,t=e.schema,n=e.document.selection;this.isEnabled=Nz(n,t,e)}execute(){const e=this.editor.model;e.change(t=>{const n=t.createElement("horizontalLine");e.insertObject(n,null,null,{setSelection:"after"})})}}function Nz(i,e,t){const n=Vz(i,t);return e.checkChild(n,"horizontalLine")}function Vz(i,e){const n=ag(i,e).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zz extends Fe{static get pluginName(){return"HorizontalLineEditing"}init(){const e=this.editor,t=e.model.schema,n=e.t,r=e.conversion;t.register("horizontalLine",{inheritAllFrom:"$blockObject"}),r.for("dataDowncast").elementToElement({model:"horizontalLine",view:(o,{writer:s})=>s.createEmptyElement("hr")}),r.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(o,{writer:s})=>{const l=n("Horizontal line"),c=s.createContainerElement("div",null,s.createEmptyElement("hr"));return s.addClass("ck-horizontal-line",c),s.setCustomProperty("hr",!0,c),Hz(c,s,l)}}),r.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),e.commands.add("horizontalLine",new Bz(e))}}function Hz(i,e,t){return e.setCustomProperty("horizontalLine",!0,i),El(i,e,{label:t})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uz extends Fe{static get pluginName(){return"HorizontalLineUI"}init(){const e=this.editor;e.ui.componentFactory.add("horizontalLine",()=>{const t=this._createButton(Ht);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(Ii))}_createButton(e){const t=this.editor,n=t.locale,r=t.commands.get("horizontalLine"),o=new e(t.locale),s=n.t;return o.set({label:s("Horizontal line"),icon:it.horizontalLine}),o.bind("isEnabled").to(r,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("horizontalLine"),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wz extends Fe{static get requires(){return[zz,Uz,Pa]}static get pluginName(){return"HorizontalLine"}}const jz='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ym="removeFormat";class $z extends Fe{static get pluginName(){return"RemoveFormatUI"}init(){const e=this.editor;e.ui.componentFactory.add(Ym,()=>{const t=this._createButton(Ht);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add(`menuBar:${Ym}`,()=>this._createButton(Ii))}_createButton(e){const t=this.editor,n=t.locale,r=t.commands.get(Ym),o=new e(t.locale),s=n.t;return o.set({label:s("Remove Format"),icon:jz}),o.bind("isEnabled").to(r,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute(Ym),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qz extends Wt{refresh(){const e=this.editor.model;this.isEnabled=!!Wi(this._getFormattingItems(e.document.selection,e.schema))}execute(){const e=this.editor.model,t=e.schema;e.change(n=>{for(const r of this._getFormattingItems(e.document.selection,t))if(r.is("selection"))for(const o of this._getFormattingAttributes(r,t))n.removeSelectionAttribute(o);else{const o=n.createRangeOn(r);for(const s of this._getFormattingAttributes(r,t))n.removeAttribute(s,o)}})}*_getFormattingItems(e,t){const n=r=>!!Wi(this._getFormattingAttributes(r,t));for(const r of e.getRanges())for(const o of r.getItems())!t.isBlock(o)&&n(o)&&(yield o);for(const r of e.getSelectedBlocks())n(r)&&(yield r);n(e)&&(yield e)}*_getFormattingAttributes(e,t){for(const[n]of e.getAttributes()){const r=t.getAttributeProperties(n);r&&r.isFormatting&&(yield n)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gz extends Fe{static get pluginName(){return"RemoveFormatEditing"}init(){const e=this.editor;e.commands.add("removeFormat",new qz(e))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kz extends Fe{static get requires(){return[Gz,$z]}static get pluginName(){return"RemoveFormat"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zz extends Wt{refresh(){const e=this.editor.model,t=e.schema,n=e.document.selection,r=s_(n);this.isEnabled=Yz(n,t,e),this.value=r?r.getAttribute("value")||"":null}execute(e){const t=this.editor.model,n=t.document.selection;t.change(r=>{let o;this.value!==null?o=s_(n):(o=r.createElement("rawHtml"),t.insertObject(o,null,null,{setSelection:"on"})),r.setAttribute("value",e,o)})}}function Yz(i,e,t){const n=Jz(i,t);return e.checkChild(n,"rawHtml")}function Jz(i,e){const n=ag(i,e).start.parent;return n.isEmpty&&!n.is("rootElement")?n.parent:n}function s_(i){const e=i.getSelectedElement();return e&&e.is("element","rawHtml")?e:null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xz extends Fe{static get pluginName(){return"HtmlEmbedEditing"}constructor(e){super(e),this._widgetButtonViewReferences=new Set,e.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:t=>(vn("html-embed-provide-sanitize-function"),{html:t,hasChanged:!1})})}init(){const e=this.editor;e.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),e.commands.add("htmlEmbed",new Zz(e)),this._setupConversion()}_setupConversion(){const e=this.editor,t=e.t,n=e.editing.view,r=this._widgetButtonViewReferences,o=e.config.get("htmlEmbed");this.editor.editing.view.on("render",()=>{for(const g of r){if(g.element&&g.element.isConnected)return;g.destroy(),r.delete(g)}},{priority:"lowest"}),e.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),e.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(g,{writer:b})=>b.createElement("rawHtml",{value:g.getCustomProperty("$rawContent")})}),e.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(g,{writer:b})=>b.createRawElement("div",{class:"raw-html-embed"},function(y){y.innerHTML=g.getAttribute("value")||""})}),e.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(g,{writer:b})=>{let y,k,x;const D=b.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(V){y=V,s({editor:e,domElement:V,state:k,props:x}),y.addEventListener("mousedown",()=>{if(k.isEditable){const O=e.model;O.document.selection.getSelectedElement()!==g&&O.change(K=>K.setSelection(g,"on"))}},!0)}),L={makeEditable(){k=Object.assign({},k,{isEditable:!0}),s({domElement:y,editor:e,state:k,props:x}),n.change(V=>{V.setAttribute("data-cke-ignore-events","true",D)}),y.querySelector("textarea").focus()},save(V){V!==k.getRawHtmlValue()?(e.execute("htmlEmbed",V),e.editing.view.focus()):this.cancel()},cancel(){k=Object.assign({},k,{isEditable:!1}),s({domElement:y,editor:e,state:k,props:x}),e.editing.view.focus(),n.change(V=>{V.removeAttribute("data-cke-ignore-events",D)})}};k={showPreviews:o.showPreviews,isEditable:!1,getRawHtmlValue:()=>g.getAttribute("value")||""},x={sanitizeHtml:o.sanitizeHtml,textareaPlaceholder:t("Paste raw HTML here..."),onEditClick(){L.makeEditable()},onSaveClick(V){L.save(V)},onCancelClick(){L.cancel()}};const M=b.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":t("HTML snippet"),dir:e.locale.uiLanguageDirection},D);return b.setCustomProperty("rawHtmlApi",L,M),b.setCustomProperty("rawHtml",!0,M),El(M,b,{label:t("HTML snippet"),hasSelectionHandle:!0})}});function s({editor:g,domElement:b,state:y,props:k}){b.textContent="";const x=b.ownerDocument;let D;if(y.isEditable){const M={isDisabled:!1,placeholder:k.textareaPlaceholder};D=c({domDocument:x,state:y,props:M}),b.append(D)}else if(y.showPreviews){const M={sanitizeHtml:k.sanitizeHtml};b.append(h({domDocument:x,state:y,props:M,editor:g}))}else{const M={isDisabled:!0,placeholder:k.textareaPlaceholder};b.append(c({domDocument:x,state:y,props:M}))}const L={onEditClick:k.onEditClick,onSaveClick:()=>{k.onSaveClick(D.value)},onCancelClick:k.onCancelClick};b.prepend(l({editor:g,domDocument:x,state:y,props:L}))}function l({editor:g,domDocument:b,state:y,props:k}){const x=Pr(b,"div",{class:"raw-html-embed__buttons-wrapper"});if(y.isEditable){const D=kb(g,"save",k.onSaveClick),L=kb(g,"cancel",k.onCancelClick);x.append(D.element,L.element),r.add(D).add(L)}else{const D=kb(g,"edit",k.onEditClick);x.append(D.element),r.add(D)}return x}function c({domDocument:g,state:b,props:y}){const k=Pr(g,"textarea",{placeholder:y.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return k.disabled=y.isDisabled,k.value=b.getRawHtmlValue(),k}function h({editor:g,domDocument:b,state:y,props:k}){const x=k.sanitizeHtml(y.getRawHtmlValue()),D=y.getRawHtmlValue().length>0?t("No preview available"):t("Empty snippet content"),L=Pr(b,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},D),M=Pr(b,"div",{class:"raw-html-embed__preview-content",dir:g.locale.contentLanguageDirection}),O=b.createRange().createContextualFragment(x.html);return M.appendChild(O),Pr(b,"div",{class:"raw-html-embed__preview"},[L,M])}}}function kb(i,e,t){const{t:n}=i.locale,r=new Ht(i.locale),o=i.commands.get("htmlEmbed");return r.set({class:`raw-html-embed__${e}-button`,icon:it.pencil,tooltip:!0,tooltipPosition:i.locale.uiLanguageDirection==="rtl"?"e":"w"}),r.render(),e==="edit"?(r.set({icon:it.pencil,label:n("Edit source")}),r.bind("isEnabled").to(o)):e==="save"?(r.set({icon:it.check,label:n("Save changes")}),r.bind("isEnabled").to(o)):r.set({icon:it.cancel,label:n("Cancel")}),r.on("execute",t),r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qz extends Fe{static get pluginName(){return"HtmlEmbedUI"}init(){const e=this.editor,n=e.locale.t;e.ui.componentFactory.add("htmlEmbed",()=>{const r=this._createButton(Ht);return r.set({tooltip:!0,label:n("Insert HTML")}),r}),e.ui.componentFactory.add("menuBar:htmlEmbed",()=>{const r=this._createButton(Ii);return r.set({label:n("HTML snippet")}),r})}_createButton(e){const t=this.editor,n=t.commands.get("htmlEmbed"),r=new e(t.locale);return r.set({icon:it.html}),r.bind("isEnabled").to(n,"isEnabled"),this.listenTo(r,"execute",()=>{t.execute("htmlEmbed"),t.editing.view.focus(),t.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),r}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eH extends Fe{static get requires(){return[Xz,Qz,Pa]}static get pluginName(){return"HtmlEmbed"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tH(i){const e=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],t=e.map(s=>s.name).join("|"),n=i.replace(new RegExp(`</?(${t})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`);let r=0,o=!1;return n.filter(s=>s.length).map(s=>(o=rH(s,o),nH(s,e)?Cb(s,r++):iH(s,e)?Cb(s,--r):o==="middle"||o==="last"?s:Cb(s,r))).join(`
`)}function nH(i,e){return e.some(t=>!(t.isVoid||!new RegExp(`<${t.name}( .*?)?>`).test(i)))}function iH(i,e){return e.some(t=>new RegExp(`</${t.name}>`).test(i))}function Cb(i,e,t="    "){return`${t.repeat(Math.max(0,e))}${i}`}function rH(i,e){return new RegExp("<pre( .*?)?>").test(i)?"first":new RegExp("</pre>").test(i)?"last":e==="first"||e==="middle"?"middle":!1}const oH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Jm="SourceEditingMode";class sH extends Fe{static get pluginName(){return"SourceEditing"}static get requires(){return[Ep]}constructor(e){super(e),this.set("isSourceEditingMode",!1),this._elementReplacer=new jk,this._replacedRoots=new Map,this._dataFromRoots=new Map,e.config.define("sourceEditing.allowCollaborationFeatures",!1)}init(){this._checkCompatibility();const e=this.editor,t=e.locale.t;e.ui.componentFactory.add("sourceEditing",()=>{const n=this._createButton(Ht);return n.set({label:t("Source"),icon:oH,tooltip:!0,class:"ck-source-editing-button"}),n}),e.ui.componentFactory.add("menuBar:sourceEditing",()=>{const n=this._createButton(Ii);return n.set({label:t("Show source"),role:"menuitemcheckbox"}),n}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(n,r,o)=>{o?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(n,r,o)=>this._handleReadOnlyMode(!o)),this.listenTo(e,"change:isReadOnly",(n,r,o)=>this._handleReadOnlyMode(o))),e.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){const e=this.editor,t={};for(const[n,r]of this._replacedRoots){const o=this._dataFromRoots.get(n),s=r.dataset.value;o!==s&&(t[n]=s,this._dataFromRoots.set(n,s))}Object.keys(t).length&&e.data.set(t,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){const e=this.editor,t=e.config.get("sourceEditing.allowCollaborationFeatures");if(!t&&e.plugins.has("RealTimeCollaborativeEditing"))throw new be("source-editing-incompatible-with-real-time-collaboration",null);!t&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(r=>e.plugins.has(r))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),e.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const e=this.editor,t=e.editing.view,n=e.model;n.change(r=>{r.setSelection(null),r.removeSelectionAttribute(n.document.selection.getAttributeKeys())});for(const[r,o]of t.domRoots){const s=aH(e.data.get({rootName:r})),l=Pr(o.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),c=Pr(o.ownerDocument,"div",{class:"ck-source-editing-area","data-value":s},[l]);l.value=s,l.setSelectionRange(0,0),l.addEventListener("input",()=>{c.dataset.value=l.value,e.ui.update()}),t.change(h=>{const g=t.document.getRoot(r);h.addClass("ck-hidden",g)}),e.ui.setEditableElement("sourceEditing:"+r,l),this._replacedRoots.set(r,c),this._elementReplacer.replace(o,c),this._dataFromRoots.set(r,s)}this._focusSourceEditing()}_hideSourceEditing(){const t=this.editor.editing.view;this.updateEditorData(),t.change(n=>{for(const[r]of this._replacedRoots)n.removeClass("ck-hidden",t.document.getRoot(r))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),t.focus()}_focusSourceEditing(){const e=this.editor,[t]=this._replacedRoots.values(),n=t.querySelector("textarea");e.editing.view.document.isFocused=!1,n.focus()}_disableCommands(){const e=this.editor;for(const t of e.commands.commands())t.forceDisabled(Jm);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").forceDisabled(Jm)}_enableCommands(){const e=this.editor;for(const t of e.commands.commands())t.clearForceDisabled(Jm);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").clearForceDisabled(Jm)}_handleReadOnlyMode(e){if(this.isSourceEditingMode)for(const[,t]of this._replacedRoots)t.querySelector("textarea").readOnly=e}_isAllowedToHandleSourceEditingMode(){const t=this.editor.ui.view.editable;return t&&!t.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){const e=this.editor.plugins.get("Dialog");e.isOpen&&e.hide()}}_createButton(e){const t=this.editor,n=new e(t.locale);return n.set({withText:!0,isToggleable:!0}),n.bind("isOn").to(this,"isSourceEditingMode"),n.bind("isEnabled").to(this,"isEnabled",t,"isReadOnly",t.plugins.get(Ep),"hasAny",(r,o,s)=>!(!r||o||s)),this.listenTo(n,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),n}}function aH(i){return lH(i)?tH(i):i}function lH(i){return i.startsWith("<")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dg extends Wt{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,r=t.document.selection,o=e.value,s=e.batch,l=c=>{if(r.isCollapsed)o?c.setSelectionAttribute(this.attributeKey,o):c.removeSelectionAttribute(this.attributeKey);else{const h=t.schema.getValidRanges(r.getRanges(),this.attributeKey);for(const g of h)o?c.setAttribute(this.attributeKey,o,g):c.removeAttribute(this.attributeKey,g)}};s?t.enqueueChange(s,c=>{l(c)}):t.change(c=>{l(c)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Po="fontSize",Io="fontFamily",xa="fontColor",fl="fontBackgroundColor";function mS(i,e){const t={model:{key:i,values:[]},view:{},upcastAlso:{}};for(const n of e)t.model.values.push(n.model),t.view[n.model]=n.view,n.upcastAlso&&(t.upcastAlso[n.model]=n.upcastAlso);return t}function pS(i){return e=>uH(e.getStyle(i))}function gS(i){return(e,{writer:t})=>t.createAttributeElement("span",{style:`${i}:${e}`},{priority:7})}function cH({dropdownView:i,colors:e,columns:t,removeButtonLabel:n,colorPickerLabel:r,documentColorsLabel:o,documentColorsCount:s,colorPickerViewConfig:l}){const c=i.locale,h=new nv(c,{colors:e,columns:t,removeButtonLabel:n,colorPickerLabel:r,documentColorsLabel:o,documentColorsCount:s,colorPickerViewConfig:l});return i.colorSelectorView=h,i.panelView.children.add(h),h}function uH(i){return i.replace(/\s/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dH extends dg{constructor(e){super(e,Io)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bS(i){return i.map(hH).filter(e=>e!==void 0)}function hH(i){if(typeof i=="object")return i;if(i==="default")return{title:"Default",model:void 0};if(typeof i=="string")return fH(i)}function fH(i){const e=i.replace(/"|'/g,"").split(","),t=e[0],n=e.map(mH).join(", ");return{title:t,model:n,view:{name:"span",styles:{"font-family":n},priority:7}}}function mH(i){return i=i.trim(),i.indexOf(" ")>0&&(i=`'${i}'`),i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pH extends Fe{static get pluginName(){return"FontFamilyEditing"}constructor(e){super(e),e.config.define(Io,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Io}),e.model.schema.setAttributeProperties(Io,{isFormatting:!0,copyOnEnter:!0});const t=bS(e.config.get("fontFamily.options")).filter(r=>r.model),n=mS(Io,t);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(n),e.commands.add(Io,new dH(e))}_prepareAnyValueConverters(){const e=this.editor;e.conversion.for("downcast").attributeToElement({model:Io,view:(t,{writer:n})=>n.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:Io,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Io,value:t=>t.getAttribute("face")}})}}const a_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gH extends Fe{static get pluginName(){return"FontFamilyUI"}init(){const e=this.editor,t=e.t,n=this._getLocalizedOptions(),r=e.commands.get(Io),o=t("Font Family"),s=bH(n,r);e.ui.componentFactory.add(Io,l=>{const c=Dr(l);return xl(c,s,{role:"menu",ariaLabel:o}),c.buttonView.set({label:o,icon:a_,tooltip:!0}),c.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),c.bind("isEnabled").to(r),this.listenTo(c,"execute",h=>{e.execute(h.source.commandName,{value:h.source.commandParam}),e.editing.view.focus()}),c}),e.ui.componentFactory.add(`menuBar:${Io}`,l=>{const c=new Qo(l);c.buttonView.set({label:o,icon:a_}),c.bind("isEnabled").to(r);const h=new vu(l);for(const g of s){const b=new Au(l,c),y=new Ii(l);y.set({role:"menuitemradio",isToggleable:!0}),y.bind(...Object.keys(g.model)).to(g.model),y.delegate("execute").to(c),y.on("execute",()=>{e.execute(g.model.commandName,{value:g.model.commandParam}),e.editing.view.focus()}),b.children.add(y),h.items.add(b)}return c.panelView.children.add(h),c})}_getLocalizedOptions(){const e=this.editor,t=e.t;return bS(e.config.get(Io).options).map(r=>(r.title==="Default"&&(r.title=t("Default")),r))}}function bH(i,e){const t=new Or;for(const n of i){const r={type:"button",model:new yl({commandName:Io,commandParam:n.model,label:n.title,role:"menuitemradio",withText:!0})};r.model.bind("isOn").to(e,"value",o=>o===n.model?!0:!o||!n.model?!1:o.split(",")[0].replace(/'/g,"").toLowerCase()===n.model.toLowerCase()),n.view&&typeof n.view!="string"&&n.view.styles&&r.model.set("labelStyle",`font-family: ${n.view.styles["font-family"]}`),t.add(r)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vH extends Fe{static get requires(){return[pH,gH]}static get pluginName(){return"FontFamily"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wH extends dg{constructor(e){super(e,Po)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wv(i){return i.map(e=>yH(e)).filter(e=>e!==void 0)}const l_={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function yH(i){if(typeof i=="number"&&(i=String(i)),typeof i=="object"&&CH(i))return _0(i);const e=kH(i);if(e)return _0(e);if(i==="default")return{model:void 0,title:"Default"};if(!xH(i))return _H(i)}function _H(i){return typeof i=="string"&&(i={title:i,model:`${parseFloat(i)}px`}),i.view={name:"span",styles:{"font-size":i.model}},_0(i)}function _0(i){return i.view&&typeof i.view!="string"&&!i.view.priority&&(i.view.priority=7),i}function kH(i){return typeof i=="string"?l_[i]:l_[i.model]}function CH(i){return i.title&&i.model&&i.view}function xH(i){let e;if(typeof i=="object")if(i.model)e=parseFloat(i.model);else throw new be("font-size-invalid-definition",null,i);else e=parseFloat(i);return isNaN(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const c_=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class EH extends Fe{static get pluginName(){return"FontSizeEditing"}constructor(e){super(e),e.config.define(Po,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Po}),e.model.schema.setAttributeProperties(Po,{isFormatting:!0,copyOnEnter:!0});const t=e.config.get("fontSize.supportAllValues"),n=wv(this.editor.config.get("fontSize.options")).filter(o=>o.model),r=mS(Po,n);t?(this._prepareAnyValueConverters(r),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(r),e.commands.add(Po,new wH(e))}_prepareAnyValueConverters(e){const t=this.editor,n=e.model.values.filter(r=>!tg(String(r))&&!sx(String(r)));if(n.length)throw new be("font-size-invalid-use-of-named-presets",null,{presets:n});t.conversion.for("downcast").attributeToElement({model:Po,view:(r,{writer:o})=>{if(r)return o.createAttributeElement("span",{style:"font-size:"+r},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:Po,value:r=>r.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:Po,value:t=>{const n=t.getAttribute("size"),r=n[0]==="-"||n[0]==="+";let o=parseInt(n,10);r&&(o=3+o);const s=c_.length-1,l=Math.min(Math.max(o,0),s);return c_[l]}}})}}const u_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SH extends Fe{static get pluginName(){return"FontSizeUI"}init(){const e=this.editor,t=e.t,n=this._getLocalizedOptions(),r=e.commands.get(Po),o=t("Font Size"),s=TH(n,r);e.ui.componentFactory.add(Po,l=>{const c=Dr(l);return xl(c,s,{role:"menu",ariaLabel:o}),c.buttonView.set({label:o,icon:u_,tooltip:!0}),c.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),c.bind("isEnabled").to(r),this.listenTo(c,"execute",h=>{e.execute(h.source.commandName,{value:h.source.commandParam}),e.editing.view.focus()}),c}),e.ui.componentFactory.add(`menuBar:${Po}`,l=>{const c=new Qo(l);c.buttonView.set({label:o,icon:u_}),c.bind("isEnabled").to(r);const h=new vu(l);for(const g of s){const b=new Au(l,c),y=new Ii(l);y.set({role:"menuitemradio",isToggleable:!0}),y.bind(...Object.keys(g.model)).to(g.model),y.delegate("execute").to(c),y.on("execute",()=>{e.execute(g.model.commandName,{value:g.model.commandParam}),e.editing.view.focus()}),b.children.add(y),h.items.add(b)}return c.panelView.children.add(h),c})}_getLocalizedOptions(){const e=this.editor,t=e.t,n={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return wv(e.config.get(Po).options).map(o=>{const s=n[o.title];return s&&s!=o.title&&(o=Object.assign({},o,{title:s})),o})}}function TH(i,e){const t=new Or;for(const n of i){const r={type:"button",model:new yl({commandName:Po,commandParam:n.model,label:n.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};n.view&&typeof n.view!="string"&&(n.view.styles&&r.model.set("labelStyle",`font-size:${n.view.styles["font-size"]}`),n.view.classes&&r.model.set("class",`${r.model.class} ${n.view.classes}`)),r.model.bind("isOn").to(e,"value",o=>o===n.model),t.add(r)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AH extends Fe{static get requires(){return[EH,SH]}static get pluginName(){return"FontSize"}normalizeSizeOptions(e){return wv(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PH extends dg{constructor(e){super(e,xa)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IH extends Fe{static get pluginName(){return"FontColorEditing"}constructor(e){super(e),e.config.define(xa,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:xa,value:pS("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:xa,value:t=>t.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:xa,view:gS("color")}),e.commands.add(xa,new PH(e)),e.model.schema.extend("$text",{allowAttributes:xa}),e.model.schema.setAttributeProperties(xa,{isFormatting:!0,copyOnEnter:!0})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vS extends Fe{constructor(e,{commandName:t,componentName:n,icon:r,dropdownLabel:o}){super(e),this.commandName=t,this.componentName=n,this.icon=r,this.dropdownLabel=o,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,t=e.locale,n=t.t,r=e.commands.get(this.commandName),o=e.config.get(this.componentName),s=Pf(o.colors),l=Af(t,s),c=o.documentColors,h=o.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,g=>{const b=Dr(g);let y=!1;const k=cH({dropdownView:b,colors:l.map(x=>({label:x.label,color:x.model,options:{hasBorder:x.hasBorder}})),columns:this.columns,removeButtonLabel:n("Remove color"),colorPickerLabel:n("Color picker"),documentColorsLabel:c!==0?n("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:h?o.colorPicker||{}:!1});return k.bind("selectedColor").to(r,"value"),b.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),b.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),b.bind("isEnabled").to(r),k.on("execute",(x,D)=>{b.isOpen&&e.execute(this.commandName,{value:D.value,batch:this._undoStepBatch}),D.source!=="colorPicker"&&e.editing.view.focus(),D.source==="colorPickerSaveButton"&&(b.isOpen=!1)}),k.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),k.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(b.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),b.on("change:isOpen",(x,D,L)=>{y||(y=!0,b.colorSelectorView.appendUI()),L&&(c!==0&&k.updateDocumentColors(e.model,this.componentName),k.updateSelectedColors(),k.showColorGridsFragment())}),ev(b,()=>b.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(x=>x.isOn)),b}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,g=>{const b=new Qo(g);b.buttonView.set({label:this.dropdownLabel,icon:this.icon}),b.bind("isEnabled").to(r);let y=!1;const k=new nv(g,{colors:l.map(x=>({label:x.label,color:x.model,options:{hasBorder:x.hasBorder}})),columns:this.columns,removeButtonLabel:n("Remove color"),colorPickerLabel:n("Color picker"),documentColorsLabel:c!==0?n("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:!1});return k.bind("selectedColor").to(r,"value"),k.delegate("execute").to(b),k.on("execute",(x,D)=>{e.execute(this.commandName,{value:D.value,batch:this._undoStepBatch}),e.editing.view.focus()}),b.on("change:isOpen",(x,D,L)=>{y||(y=!0,k.appendUI()),L&&(c!==0&&k.updateDocumentColors(e.model,this.componentName),k.updateSelectedColors(),k.showColorGridsFragment())}),b.panelView.children.add(k),b})}}const DH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RH extends vS{constructor(e){const t=e.locale.t;super(e,{commandName:xa,componentName:xa,icon:DH,dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OH extends Fe{static get requires(){return[IH,RH]}static get pluginName(){return"FontColor"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FH extends dg{constructor(e){super(e,fl)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MH extends Fe{static get pluginName(){return"FontBackgroundColorEditing"}constructor(e){super(e),e.config.define(fl,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(Y0),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:fl,value:pS("background-color")}}),e.conversion.for("downcast").attributeToElement({model:fl,view:gS("background-color")}),e.commands.add(fl,new FH(e)),e.model.schema.extend("$text",{allowAttributes:fl}),e.model.schema.setAttributeProperties(fl,{isFormatting:!0,copyOnEnter:!0})}}const LH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BH extends vS{constructor(e){const t=e.locale.t;super(e,{commandName:fl,componentName:fl,icon:LH,dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NH extends Fe{static get requires(){return[MH,BH]}static get pluginName(){return"FontBackgroundColor"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VH extends Fe{static get requires(){return[vH,AH,OH,NH]}static get pluginName(){return"Font"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zH extends Wt{constructor(e){super(e),this.affectsData=!1,this.value=!1}execute(){const e="ck-show-blocks",t=this.editor.editing.view;t.change(n=>{for(const r of t.document.roots)r.hasClass(e)?(n.removeClass(e,r),this.value=!1):(n.addClass(e,r),this.value=!0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HH extends Fe{static get pluginName(){return"ShowBlocksEditing"}init(){const{editor:e}=this;e.commands.add("showBlocks",new zH(e))}}const UH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m6.395 9.196 2.545-.007V6.498a.598.598 0 0 1 .598-.598h.299a.598.598 0 0 1 .598.598v6.877a.598.598 0 0 1-.598.598h-.299a.598.598 0 0 1-.598-.598v-2.691l-2.545.007v2.691a.598.598 0 0 1-.598.598h-.299a.598.598 0 0 1-.598-.598V6.505a.598.598 0 0 1 .598-.598h.299a.598.598 0 0 1 .598.598v2.691Z"/><path d="M15.094 13.417V6.462a.562.562 0 0 0-.562-.562h-.782a1 1 0 0 0-.39.08l-1.017.43a.562.562 0 0 0-.343.517v.197c0 .4.406.67.775.519l.819-.337v6.111c0 .31.251.562.561.562h.377c.31 0 .562-.251.562-.562Z"/><path d="M0 15.417v1.5h1.5v-1.5H0Z"/><path d="M18.5 15.417v1.5H20v-1.5h-1.5Z"/><path d="M18.5 12.333v1.5H20v-1.5h-1.5Z"/><path d="M18.5 9.25v1.5H20v-1.5h-1.5Z"/><path d="M18.5 6.167v1.5H20v-1.5h-1.5Z"/><path d="M0 18.5v.5a1 1 0 0 0 1 1h.5v-1.5H0Z"/><path d="M3.083 18.5V20h1.5v-1.5h-1.5Z"/><path d="M6.167 18.5V20h1.5v-1.5h-1.5Z"/><path d="M9.25 18.5V20h1.5v-1.5h-1.5Z"/><path d="M12.333 18.5V20h1.5v-1.5h-1.5Z"/><path d="M15.417 18.5V20h1.5v-1.5h-1.5Z"/><path d="M18.5 18.5V20h.5a1 1 0 0 0 1-1v-.5h-1.5Z"/><path clip-rule="evenodd" d="M0 1a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v3.583h-1.5V1.5h-17v12.333H0V1Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WH extends Fe{static get pluginName(){return"ShowBlocksUI"}init(){const e=this.editor;e.ui.componentFactory.add("showBlocks",()=>{const t=this._createButton(Ht);return t.set({tooltip:!0,icon:UH}),t}),e.ui.componentFactory.add("menuBar:showBlocks",()=>this._createButton(Ii))}_createButton(e){const t=this.editor,n=t.locale,r=t.commands.get("showBlocks"),o=new e(n),s=n.t;return o.set({label:s("Show blocks"),isToggleable:!0,role:"menuitemcheckbox"}),o.bind("isEnabled").to(r),o.bind("isOn").to(r,"value",r,"isEnabled",(l,c)=>l&&c),this.listenTo(o,"execute",()=>{t.execute("showBlocks"),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jH extends Fe{static get pluginName(){return"ShowBlocks"}static get requires(){return[HH,WH]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $H extends Ht{constructor(e,t){super(e),this.styleDefinition=t,this.previewView=this._createPreview(),this.set({label:t.name,class:"ck-style-grid__button",withText:!0}),this.extendTemplate({attributes:{role:"option"}}),this.children.add(this.previewView,0)}_createPreview(){const e=new mt(this.locale);return e.setTemplate({tag:"div",attributes:{class:["ck","ck-reset_all-excluded","ck-style-grid__button__preview","ck-content"],"aria-hidden":"true"},children:[this.styleDefinition.previewTemplate]}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qH extends mt{constructor(e,t){super(e),this.focusTracker=new Jn,this.keystrokes=new di,this.set("activeStyles",[]),this.set("enabledStyles",[]),this.children=this.createCollection(),this.children.delegate("execute").to(this);for(const n of t){const r=new $H(e,n);this.children.add(r)}this.on("change:activeStyles",()=>{for(const n of this.children)n.isOn=this.activeStyles.includes(n.styleDefinition.name)}),this.on("change:enabledStyles",()=>{for(const n of this.children)n.isEnabled=this.enabledStyles.includes(n.styleDefinition.name)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-grid"],role:"listbox"},children:this.children})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element);V0({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.children,numberOfColumns:3,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection}),this.keystrokes.listenTo(this.element)}focus(){this.children.first.focus()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class d_ extends mt{constructor(e,t,n){super(e),this.labelView=new Yo(e),this.labelView.text=t,this.gridView=new qH(e,n),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel__style-group"],role:"group","aria-labelledby":this.labelView.id},children:[this.labelView,this.gridView]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GH extends mt{constructor(e,t){super(e);const n=e.t;this.focusTracker=new Jn,this.keystrokes=new di,this.children=this.createCollection(),this.blockStylesGroupView=new d_(e,n("Block styles"),t.block),this.inlineStylesGroupView=new d_(e,n("Text styles"),t.inline),this.set("activeStyles",[]),this.set("enabledStyles",[]),this._focusables=new Wr,this._focusCycler=new jr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["shift + tab"],focusNext:["tab"]}}),t.block.length&&this.children.add(this.blockStylesGroupView),t.inline.length&&this.children.add(this.inlineStylesGroupView),this.blockStylesGroupView.gridView.delegate("execute").to(this),this.inlineStylesGroupView.gridView.delegate("execute").to(this),this.blockStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this,"activeStyles","enabledStyles"),this.inlineStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this,"activeStyles","enabledStyles"),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel"]},children:this.children})}render(){super.render(),this._focusables.add(this.blockStylesGroupView.gridView),this._focusables.add(this.inlineStylesGroupView.gridView),this.focusTracker.add(this.blockStylesGroupView.gridView.element),this.focusTracker.add(this.inlineStylesGroupView.gridView.element),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const KH=["caption","colgroup","dd","dt","figcaption","legend","li","optgroup","option","rp","rt","summary","tbody","td","tfoot","th","thead","tr"];class Cl extends Fe{static get pluginName(){return"StyleUtils"}constructor(e){super(e),this.decorate("isStyleEnabledForBlock"),this.decorate("isStyleActiveForBlock"),this.decorate("getAffectedBlocks"),this.decorate("isStyleEnabledForInlineSelection"),this.decorate("isStyleActiveForInlineSelection"),this.decorate("getAffectedInlineSelectable"),this.decorate("getStylePreview"),this.decorate("configureGHSDataFilter")}init(){this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport")}normalizeConfig(e,t=[]){const n={block:[],inline:[]};for(const r of t){const o=[],s=[];for(const c of e.getDefinitionsForView(r.element)){const h="appliesToBlock"in c?c.appliesToBlock:!1;if(c.isBlock||h){if(typeof h=="string")o.push(h);else if(c.isBlock){const g=c;o.push(c.model),g.paragraphLikeModel&&o.push(g.paragraphLikeModel)}}else s.push(c.model)}const l=this.getStylePreview(r,[{text:"AaBbCcDdEeFfGgHhIiJj"}]);o.length?n.block.push({...r,previewTemplate:l,modelElements:o,isBlock:!0}):n.inline.push({...r,previewTemplate:l,ghsAttributes:s})}return n}isStyleEnabledForBlock(e,t){const n=this.editor.model,r=this._htmlSupport.getGhsAttributeNameForElement(e.element);return n.schema.checkAttribute(t,r)?e.modelElements.includes(t.name):!1}isStyleActiveForBlock(e,t){const n=this._htmlSupport.getGhsAttributeNameForElement(e.element),r=t.getAttribute(n);return this.hasAllClasses(r,e.classes)}getAffectedBlocks(e,t){return e.modelElements.includes(t.name)?[t]:null}isStyleEnabledForInlineSelection(e,t){const n=this.editor.model;for(const r of e.ghsAttributes)if(n.schema.checkAttributeInSelection(t,r))return!0;return!1}isStyleActiveForInlineSelection(e,t){for(const n of e.ghsAttributes){const r=this._getValueFromFirstAllowedNode(t,n);if(this.hasAllClasses(r,e.classes))return!0}return!1}getAffectedInlineSelectable(e,t){return t}getStylePreview(e,t){const{element:n,classes:r}=e;return{tag:YH(n)?n:"div",attributes:{class:r},children:t}}hasAllClasses(e,t){return ro(e)&&ZH(e)&&t.every(n=>e.classes.includes(n))}configureGHSDataFilter({block:e,inline:t}){const n=this.editor.plugins.get("DataFilter");n.loadAllowedConfig(e.map(h_)),n.loadAllowedConfig(t.map(h_))}_getValueFromFirstAllowedNode(e,t){const r=this.editor.model.schema;if(e.isCollapsed)return e.getAttribute(t);for(const o of e.getRanges())for(const s of o.getItems())if(r.checkAttribute(s,t))return s.getAttribute(t);return null}}function ZH(i){return!!i.classes&&Array.isArray(i.classes)}function YH(i){return!KH.includes(i)}function h_({element:i,classes:e}){return{name:i,classes:e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JH extends Fe{static get pluginName(){return"StyleUI"}static get requires(){return[Cl]}init(){const e=this.editor,t=e.plugins.get("DataSchema"),n=e.plugins.get("StyleUtils"),r=e.config.get("style.definitions"),o=n.normalizeConfig(t,r);e.ui.componentFactory.add("style",s=>{const l=s.t,c=Dr(s),h=e.commands.get("style");return c.once("change:isOpen",()=>{const g=new GH(s,o);c.panelView.children.add(g),g.delegate("execute").to(c),g.bind("activeStyles").to(h,"value"),g.bind("enabledStyles").to(h,"enabledStyles")}),c.bind("isEnabled").to(h),c.buttonView.withText=!0,c.buttonView.bind("label").to(h,"value",g=>g.length>1?l("Multiple styles"):g.length===1?g[0]:l("Styles")),c.bind("class").to(h,"value",g=>{const b=["ck-style-dropdown"];return g.length>1&&b.push("ck-style-dropdown_multiple-active"),b.join(" ")}),c.on("execute",g=>{e.execute("style",{styleName:g.source.styleDefinition.name}),e.editing.view.focus()}),c})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XH extends Wt{constructor(e,t){super(e),this.set("value",[]),this.set("enabledStyles",[]),this._styleDefinitions=t,this._styleUtils=this.editor.plugins.get(Cl)}refresh(){const e=this.editor.model,t=e.document.selection,n=new Set,r=new Set;for(const s of this._styleDefinitions.inline)this._styleUtils.isStyleEnabledForInlineSelection(s,t)&&r.add(s.name),this._styleUtils.isStyleActiveForInlineSelection(s,t)&&n.add(s.name);const o=Wi(t.getSelectedBlocks())||t.getFirstPosition().parent;if(o){const s=o.getAncestors({includeSelf:!0,parentFirst:!0});for(const l of s){if(l.is("rootElement"))break;for(const c of this._styleDefinitions.block)this._styleUtils.isStyleEnabledForBlock(c,l)&&(r.add(c.name),this._styleUtils.isStyleActiveForBlock(c,l)&&n.add(c.name));if(e.schema.isObject(l))break}}this.enabledStyles=Array.from(r).sort(),this.isEnabled=this.enabledStyles.length>0,this.value=this.isEnabled?Array.from(n).sort():[]}execute({styleName:e,forceValue:t}){if(!this.enabledStyles.includes(e)){vn("style-command-executed-with-incorrect-style-name");return}const n=this.editor.model,r=n.document.selection,o=this.editor.plugins.get("GeneralHtmlSupport"),s=[...this._styleDefinitions.inline,...this._styleDefinitions.block],l=s.filter(({name:g})=>this.value.includes(g)),c=s.find(({name:g})=>g==e),h=t===void 0?!this.value.includes(c.name):t;n.change(()=>{let g;eU(c)?g=this._findAffectedBlocks(tU(r),c):g=[this._styleUtils.getAffectedInlineSelectable(c,r)];for(const b of g)h?o.addModelHtmlClass(c.element,c.classes,b):o.removeModelHtmlClass(c.element,QH(l,c),b)})}_findAffectedBlocks(e,t){const n=new Set;for(const r of e){const o=r.getAncestors({includeSelf:!0,parentFirst:!0});for(const s of o){if(s.is("rootElement"))break;const l=this._styleUtils.getAffectedBlocks(t,s);if(l){for(const c of l)n.add(c);break}}}return n}}function QH(i,e){return i.reduce((t,n)=>n.name===e.name?t:t.filter(r=>!n.classes.includes(r)),e.classes)}function eU(i){return"isBlock"in i}function tU(i){const e=Array.from(i.getSelectedBlocks());return e.length?e:[i.getFirstPosition().parent]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nU extends Fe{static get pluginName(){return"ListStyleSupport"}static get requires(){return[Cl,"GeneralHtmlSupport"]}init(){const e=this.editor;e.plugins.has("ListEditing")&&(this._styleUtils=e.plugins.get(Cl),this._listUtils=this.editor.plugins.get("ListUtils"),this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport"),this.listenTo(this._styleUtils,"isStyleEnabledForBlock",(t,[n,r])=>{this._isStyleEnabledForBlock(n,r)&&(t.return=!0,t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"isStyleActiveForBlock",(t,[n,r])=>{this._isStyleActiveForBlock(n,r)&&(t.return=!0,t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedBlocks",(t,[n,r])=>{const o=this._getAffectedBlocks(n,r);o&&(t.return=o,t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getStylePreview",(t,[n,r])=>{const o=this._getStylePreview(n,r);o&&(t.return=o,t.stop())},{priority:"high"}))}_isStyleEnabledForBlock(e,t){const n=this.editor.model;if(!["ol","ul","li"].includes(e.element)||!this._listUtils.isListItemBlock(t))return!1;const r=this._htmlSupport.getGhsAttributeNameForElement(e.element);if(e.element=="ol"||e.element=="ul"){if(!n.schema.checkAttribute(t,r))return!1;const s=this._listUtils.isNumberedListType(t.getAttribute("listType"))?"ol":"ul";return e.element==s}else return n.schema.checkAttribute(t,r)}_isStyleActiveForBlock(e,t){const n=this._htmlSupport.getGhsAttributeNameForElement(e.element),r=t.getAttribute(n);return this._styleUtils.hasAllClasses(r,e.classes)}_getAffectedBlocks(e,t){return this._isStyleEnabledForBlock(e,t)?e.element=="li"?this._listUtils.expandListBlocksToCompleteItems(t,{withNested:!1}):this._listUtils.expandListBlocksToCompleteList(t):null}_getStylePreview(e,t){const{element:n,classes:r}=e;return n=="ol"||n=="ul"?{tag:n,attributes:{class:r},children:[{tag:"li",children:t}]}:n=="li"?{tag:"ol",children:[{tag:n,attributes:{class:r},children:t}]}:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iU extends Fe{static get pluginName(){return"TableStyleSupport"}static get requires(){return[Cl]}init(){const e=this.editor;e.plugins.has("TableEditing")&&(this._styleUtils=e.plugins.get(Cl),this._tableUtils=this.editor.plugins.get("TableUtils"),this.listenTo(this._styleUtils,"isStyleEnabledForBlock",(t,[n,r])=>{this._isApplicable(n,r)&&(t.return=this._isStyleEnabledForBlock(n,r),t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedBlocks",(t,[n,r])=>{this._isApplicable(n,r)&&(t.return=this._getAffectedBlocks(n,r),t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"configureGHSDataFilter",(t,[{block:n}])=>{this.editor.plugins.get("DataFilter").loadAllowedConfig(n.filter(o=>o.element=="figcaption").map(o=>({name:"caption",classes:o.classes})))}))}_isApplicable(e,t){return["td","th"].includes(e.element)?t.name=="tableCell":["thead","tbody"].includes(e.element)?t.name=="table":!1}_isStyleEnabledForBlock(e,t){if(["td","th"].includes(e.element)){const n=this._tableUtils.getCellLocation(t),o=t.parent.parent,s=o.getAttribute("headingRows")||0,l=o.getAttribute("headingColumns")||0,c=n.row<s||n.column<l;return e.element=="th"?c:!c}if(["thead","tbody"].includes(e.element)){const n=t.getAttribute("headingRows")||0;return e.element=="thead"?n>0:n<this._tableUtils.getRows(t)}/* istanbul ignore next -- @preserve */return!1}_getAffectedBlocks(e,t){return this._isStyleEnabledForBlock(e,t)?[t]:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rU extends Fe{static get pluginName(){return"LinkStyleSupport"}static get requires(){return[Cl,"GeneralHtmlSupport"]}init(){const e=this.editor;e.plugins.has("LinkEditing")&&(this._styleUtils=e.plugins.get(Cl),this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport"),this.listenTo(this._styleUtils,"isStyleEnabledForInlineSelection",(t,[n,r])=>{n.element=="a"&&(t.return=this._isStyleEnabled(n,r),t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"isStyleActiveForInlineSelection",(t,[n,r])=>{n.element=="a"&&(t.return=this._isStyleActive(n,r),t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedInlineSelectable",(t,[n,r])=>{if(n.element!="a")return;const o=this._getAffectedSelectable(n,r);o&&(t.return=o,t.stop())},{priority:"high"}))}_isStyleEnabled(e,t){const n=this.editor.model;if(t.isCollapsed)return t.hasAttribute("linkHref");for(const r of t.getRanges())for(const o of r.getItems())if((o.is("$textProxy")||n.schema.isInline(o))&&o.hasAttribute("linkHref"))return!0;return!1}_isStyleActive(e,t){const n=this.editor.model,r=this._htmlSupport.getGhsAttributeNameForElement(e.element);if(t.isCollapsed){if(t.hasAttribute("linkHref")){const o=t.getAttribute(r);if(this._styleUtils.hasAllClasses(o,e.classes))return!0}return!1}for(const o of t.getRanges())for(const s of o.getItems())if((s.is("$textProxy")||n.schema.isInline(s))&&s.hasAttribute("linkHref")){const l=s.getAttribute(r);return this._styleUtils.hasAllClasses(l,e.classes)}return!1}_getAffectedSelectable(e,t){const n=this.editor.model;if(t.isCollapsed){const o=t.getAttribute("linkHref");return Gf(t.getFirstPosition(),"linkHref",o,n)}const r=[];for(const o of t.getRanges()){const s=n.createRange(f_(o.start,"linkHref",!0,n),f_(o.end,"linkHref",!1,n));for(const l of s.getItems())(l.is("$textProxy")||n.schema.isInline(l))&&l.hasAttribute("linkHref")&&r.push(this.editor.model.createRangeOn(l))}return oU(r)}}function f_(i,e,t,n){const r=i.textNode||(t?i.nodeAfter:i.nodeBefore);if(!r||!r.hasAttribute(e))return i;const o=r.getAttribute(e);return t0(i,e,o,t,n)}function oU(i){for(let e=1;e<i.length;e++){const t=i[e-1].getJoined(i[e]);t&&i.splice(--e,2,t)}return i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sU extends Fe{static get pluginName(){return"StyleEditing"}static get requires(){return["GeneralHtmlSupport",Cl,nU,iU,rU]}init(){const e=this.editor,t=e.plugins.get("DataSchema"),n=e.plugins.get("StyleUtils"),r=e.config.get("style.definitions"),o=n.normalizeConfig(t,r);e.commands.add("style",new XH(e,o)),n.configureGHSDataFilter(o)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aU extends Fe{static get pluginName(){return"Style"}static get requires(){return[sU,JH]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yu(i,e,t,n){e&&lU(i,e,n),t&&Sa(i,t,n)}function Sa(i,e,t){if(e.attributes)for(const[n,r]of Object.entries(e.attributes))i.setAttribute(n,r,t);e.styles&&i.setStyle(e.styles,t),e.classes&&i.addClass(e.classes,t)}function lU(i,e,t){if(e.attributes)for(const[n]of Object.entries(e.attributes))i.removeAttribute(n,t);if(e.styles)for(const n of Object.keys(e.styles))i.removeStyle(n,t);e.classes&&i.removeClass(e.classes,t)}function cU(i,e){const t=Ss(i);let n="attributes";for(n in e)n=="classes"?t[n]=Array.from(new Set([...i[n]||[],...e[n]])):t[n]={...i[n],...e[n]};return t}function xd(i,e,t,n,r){const o=e.getAttribute(t),s={};for(const l of["attributes","styles","classes"]){if(l!=n){o&&o[l]&&(s[l]=o[l]);continue}if(n=="classes"){const h=new Set(o&&o.classes||[]);r(h),h.size&&(s[l]=Array.from(h));continue}const c=new Map(Object.entries(o&&o[l]||{}));r(c),c.size&&(s[l]=Object.fromEntries(c))}Object.keys(s).length?e.is("documentSelection")?i.setSelectionAttribute(t,s):i.setAttribute(t,s,e):o&&(e.is("documentSelection")?i.removeSelectionAttribute(t):i.removeAttribute(t,e))}function uU(i){return jI(i).replace(/ /g,"")}function Cs(i){return`html${uU(i)}Attributes`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yv({model:i}){return(e,t)=>t.writer.createElement(i,{htmlContent:e.getCustomProperty("$rawContent")})}function dU(i,{view:e,isInline:t}){const n=i.t;return(r,{writer:o})=>{const s=n("HTML object"),l=hg(e,r,o),c=r.getAttribute(Cs(e));o.addClass("html-object-embed__content",l),c&&Sa(o,c,l);const h=o.createContainerElement(t?"span":"div",{class:"html-object-embed","data-html-object-embed-label":s},l);return El(h,o,{label:s})}}function hg(i,e,t){return t.createRawElement(i,null,(n,r)=>{r.setContentOf(n,e.getAttribute("htmlContent"))})}function hU({view:i,model:e,allowEmpty:t},n){return o=>{o.on(`element:${i}`,(s,l,c)=>{let h=n.processViewAttributes(l.viewItem,c);if(!(!h&&!c.consumable.test(l.viewItem,{name:!0}))){if(h=h||{},c.consumable.consume(l.viewItem,{name:!0}),l.modelRange||(l=Object.assign(l,c.convertChildren(l.viewItem,l.modelCursor))),t&&l.modelRange.isCollapsed&&Object.keys(h).length){const g=c.writer.createElement("htmlEmptyElement");if(!c.safeInsert(g,l.modelCursor))return;const b=c.getSplitParts(g);l.modelRange=c.writer.createRange(l.modelRange.start,c.writer.createPositionAfter(b[b.length-1])),c.updateConversionResult(g,l),r(g,h,c);return}for(const g of l.modelRange.getItems())r(g,h,c)}},{priority:"low"})};function r(o,s,l){if(l.schema.checkAttribute(o,e)){const c=o.getAttribute(e),h=cU(s,c||{});l.writer.setAttribute(e,h,o)}}}function m_({model:i,view:e},t){return(n,{writer:r,consumable:o})=>{if(!n.hasAttribute(i))return null;const s=r.createContainerElement(e),l=n.getAttribute(i);return o.consume(n,`attribute:${i}`),Sa(r,l,s),s.getFillerOffset=()=>null,t?El(s,r):s}}function fU({priority:i,view:e}){return(t,n)=>{if(!t)return;const{writer:r}=n,o=r.createAttributeElement(e,null,{priority:i});return Sa(r,t,o),o}}function Bf({view:i},e){return t=>{t.on(`element:${i}`,(n,r,o)=>{if(!r.modelRange||r.modelRange.isCollapsed)return;const s=e.processViewAttributes(r.viewItem,o);s&&o.writer.setAttribute(Cs(r.viewItem.name),s,r.modelRange)},{priority:"low"})}}function Nf({view:i,model:e}){return t=>{t.on(`attribute:${Cs(i)}:${e}`,(n,r,o)=>{if(!o.consumable.consume(r.item,n.name))return;const{attributeOldValue:s,attributeNewValue:l}=r,c=o.writer,h=o.mapper.toViewElement(r.item);yu(c,s,l,h)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const p_={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gd extends Fe{constructor(){super(...arguments),this._definitions=[]}static get pluginName(){return"DataSchema"}init(){for(const e of p_.block)this.registerBlockElement(e);for(const e of p_.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push({...e,isBlock:!0})}registerInlineElement(e){this._definitions.push({...e,isInline:!0})}extendBlockElement(e){this._extendDefinition({...e,isBlock:!0})}extendInlineElement(e){this._extendDefinition({...e,isInline:!0})}getDefinitionsForView(e,t=!1){const n=new Set;for(const r of this._getMatchingViewDefinitions(e)){if(t)for(const o of this._getReferences(r.model))n.add(o);n.add(r)}return n}getDefinitionsForModel(e){return this._definitions.filter(t=>t.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(t=>t.view&&mU(e,t.view))}*_getReferences(e){const t=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],n=this._definitions.filter(r=>r.model==e);for(const{modelSchema:r}of n)if(r)for(const o of t)for(const s of An(r[o]||[])){const l=this._definitions.filter(c=>c.model==s);for(const c of l)s!==e&&(yield*this._getReferences(c.model),yield c)}}_extendDefinition(e){const t=Array.from(this._definitions.entries()).filter(([,n])=>n.model==e.model);if(t.length==0){this._definitions.push(e);return}for(const[n,r]of t)this._definitions[n]=FI({},r,e,(o,s)=>Array.isArray(o)?o.concat(s):void 0)}}function mU(i,e){return typeof i=="string"?i===e:i instanceof RegExp?i.test(e):!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qi extends Fe{constructor(e){super(e),this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new wc,this._disallowedAttributes=new wc,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get requires(){return[Gd,Pa]}loadAllowedConfig(e){for(const t of e){const n=t.name||/[\s\S]+/,r=b_(t);this.allowElement(n),r.forEach(o=>this.allowAttributes(o))}}loadDisallowedConfig(e){for(const t of e){const n=t.name||/[\s\S]+/,r=b_(t);r.length==0?this.disallowElement(n):r.forEach(o=>this.disallowAttributes(o))}}loadAllowedEmptyElementsConfig(e){for(const t of e)this.allowEmptyElement(t)}allowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(t),this._coupledAttributes=null}disallowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(t.view)}allowEmptyElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))t.isInline&&this._dataSchema.extendInlineElement({...t,allowEmpty:!0})}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,t){const{consumable:n}=t;return g_(e,this._disallowedAttributes,n),pU(e,g_(e,this._allowedAttributes,n))}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(const t of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))t.isBlock&&this._addAllowedElement(t);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:Zo.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const e of this._allowedElements)this._fireRegisterEvent(e)},{priority:Zo.highest+1})}_registerElementHandlers(){this.on("register",(e,t)=>{const n=this.editor.model.schema;if(t.isObject&&!n.isRegistered(t.model))this._registerObjectElement(t);else if(t.isBlock)this._registerBlockElement(t);else if(t.isInline)this._registerInlineElement(t);else throw new be("data-filter-invalid-definition",null,t);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const e=this.editor.model,t=e.document.selection;e.document.registerPostFixer(n=>{const r=e.document.differ.getChanges();let o=!1;const s=this._getCoupledAttributesMap();for(const l of r){if(l.type!="attribute"||l.attributeNewValue!==null)continue;const c=s.get(l.attributeKey);if(c)for(const{item:h}of l.range.getWalker())for(const g of c)h.hasAttribute(g)&&(n.removeAttribute(g,h),o=!0)}return o}),this.listenTo(t,"change:attribute",(n,{attributeKeys:r})=>{const o=new Set,s=this._getCoupledAttributesMap();for(const l of r){if(t.hasAttribute(l))continue;const c=s.get(l);if(c)for(const h of c)t.hasAttribute(h)&&o.add(h)}o.size!=0&&e.change(l=>{for(const c of o)l.removeSelectionAttribute(c)})})}_registerAssociatedHtmlAttributesPostFixer(){const e=this.editor.model;e.document.registerPostFixer(t=>{const n=e.document.differ.getChanges();let r=!1;for(const o of n)if(!(o.type!=="insert"||o.name==="$text"))for(const s of o.attributes.keys())!s.startsWith("html")||!s.endsWith("Attributes")||e.schema.checkAttribute(o.name,s)||(t.removeAttribute(s,o.position.nodeAfter),r=!0);return r})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const e of this._allowedElements)if(e.coupledAttribute&&e.model){const t=this._coupledAttributes.get(e.coupledAttribute);t?t.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){const t=this.editor,n=t.model.schema,r=t.conversion,{view:o,model:s}=e;n.register(s,e.modelSchema);/* istanbul ignore next: paranoid check -- @preserve */o&&(n.extend(e.model,{allowAttributes:[Cs(o),"htmlContent"]}),t.data.registerRawContentMatcher({name:o}),r.for("upcast").elementToElement({view:o,model:yv(e),converterPriority:Zo.low+2}),r.for("upcast").add(Bf(e,this)),r.for("editingDowncast").elementToStructure({model:{name:s,attributes:[Cs(o)]},view:dU(t,e)}),r.for("dataDowncast").elementToElement({model:s,view:(l,{writer:c})=>hg(o,l,c)}),r.for("dataDowncast").add(Nf(e)))}_registerBlockElement(e){const t=this.editor,n=t.model.schema,r=t.conversion,{view:o,model:s}=e;if(!n.isRegistered(e.model)){if(n.register(e.model,e.modelSchema),!o)return;r.for("upcast").elementToElement({model:s,view:o,converterPriority:Zo.low+2}),r.for("downcast").elementToElement({model:s,view:o})}o&&(n.extend(e.model,{allowAttributes:Cs(o)}),r.for("upcast").add(Bf(e,this)),r.for("downcast").add(Nf(e)))}_registerInlineElement(e){const t=this.editor,n=t.model.schema,r=t.conversion,o=e.model;e.appliesToBlock||(n.extend("$text",{allowAttributes:o}),e.attributeProperties&&n.setAttributeProperties(o,e.attributeProperties),r.for("upcast").add(hU(e,this)),r.for("downcast").attributeToElement({model:o,view:fU(e)}),e.allowEmpty&&(n.setAttributeProperties(o,{copyFromObject:!1}),n.isRegistered("htmlEmptyElement")||n.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"}),t.data.htmlProcessor.domConverter.registerInlineObjectMatcher(s=>s.name==e.view&&s.isEmpty&&Array.from(s.getAttributeKeys()).length?{name:!0}:null),r.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:m_(e,!0)}),r.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:m_(e)})))}}function g_(i,e,t){const n=e.matchAll(i)||[],r=i.document.stylesProcessor;return n.reduce((o,{match:s})=>{for(const l of s.styles||[]){const c=r.getRelatedStyles(l).filter(h=>h.split("-").length>l.split("-").length).sort((h,g)=>g.split("-").length-h.split("-").length);for(const h of c)t.consume(i,{styles:[h]})&&o.styles.push(h);t.consume(i,{styles:[l]})&&o.styles.push(l)}for(const l of s.classes||[])t.consume(i,{classes:[l]})&&o.classes.push(l);for(const l of s.attributes||[])t.consume(i,{attributes:[l]})&&o.attributes.push(l);return o},{attributes:[],classes:[],styles:[]})}function pU(i,{attributes:e,classes:t,styles:n}){return!e.length&&!t.length&&!n.length?null:{...e.length&&{attributes:gU(i,e)},...n.length&&{styles:bU(i,n)},...t.length&&{classes:t}}}function gU(i,e){const t={};for(const n of e){const r=i.getAttribute(n);r!==void 0&&Qk(n)&&(t[n]=r)}return t}function bU(i,e){const t=new kp(i.document.stylesProcessor);for(const n of e){const r=i.getStyle(n);r!==void 0&&t.set(n,r)}return Object.fromEntries(t.getStylesEntries())}function xb(i,e){const{name:t}=i,n=i[e];return Go(n)?Object.entries(n).map(([r,o])=>({name:t,[e]:{[r]:o}})):Array.isArray(n)?n.map(r=>({name:t,[e]:[r]})):[i]}function b_(i){const{name:e,attributes:t,classes:n,styles:r}=i,o=[];return t&&o.push(...xb({name:e,attributes:t},"attributes")),n&&o.push(...xb({name:e,classes:n},"classes")),r&&o.push(...xb({name:e,styles:r},"styles")),o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vU extends Fe{static get requires(){return[Qi]}static get pluginName(){return"CodeBlockElementSupport"}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const e=this.editor.plugins.get(Qi);e.on("register:pre",(t,n)=>{if(n.model!=="codeBlock")return;const r=this.editor,o=r.model.schema,s=r.conversion;o.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),s.for("upcast").add(wU(e)),s.for("downcast").add(yU()),t.stop()})}}function wU(i){return e=>{e.on("element:code",(t,n,r)=>{const o=n.viewItem,s=o.parent;if(!s||!s.is("element","pre"))return;l(s,"htmlPreAttributes"),l(o,"htmlContentAttributes");function l(c,h){const g=i.processViewAttributes(c,r);g&&r.writer.setAttribute(h,g,n.modelRange)}},{priority:"low"})}}function yU(){return i=>{i.on("attribute:htmlPreAttributes:codeBlock",(e,t,n)=>{if(!n.consumable.consume(t.item,e.name))return;const{attributeOldValue:r,attributeNewValue:o}=t,l=n.mapper.toViewElement(t.item).parent;yu(n.writer,r,o,l)}),i.on("attribute:htmlContentAttributes:codeBlock",(e,t,n)=>{if(!n.consumable.consume(t.item,e.name))return;const{attributeOldValue:r,attributeNewValue:o}=t,s=n.mapper.toViewElement(t.item);yu(n.writer,r,o,s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _U extends Fe{static get requires(){return[Qi]}static get pluginName(){return"DualContentModelElementSupport"}init(){this.editor.plugins.get(Qi).on("register",(t,n)=>{const r=n,o=this.editor,s=o.model.schema,l=o.conversion;if(!r.paragraphLikeModel||s.isRegistered(r.model)||s.isRegistered(r.paragraphLikeModel))return;const c={model:r.paragraphLikeModel,view:r.view};s.register(r.model,r.modelSchema),s.register(c.model,{inheritAllFrom:"$block"}),l.for("upcast").elementToElement({view:r.view,model:(h,{writer:g})=>this._hasBlockContent(h)?g.createElement(r.model):g.createElement(c.model),converterPriority:Zo.low+.5}),l.for("downcast").elementToElement({view:r.view,model:r.model}),this._addAttributeConversion(r),l.for("downcast").elementToElement({view:c.view,model:c.model}),this._addAttributeConversion(c),t.stop()})}_hasBlockContent(e){const t=this.editor.editing.view,n=t.domConverter.blockElements;for(const r of t.createRangeIn(e).getItems())if(r.is("element")&&n.includes(r.name))return!0;return!1}_addAttributeConversion(e){const t=this.editor,n=t.conversion,r=t.plugins.get(Qi);t.model.schema.extend(e.model,{allowAttributes:Cs(e.view)}),n.for("upcast").add(Bf(e,r)),n.for("downcast").add(Nf(e))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kU extends Fe{static get requires(){return[Gd,Kf]}static get pluginName(){return"HeadingElementSupport"}init(){const e=this.editor;if(!e.plugins.has("HeadingEditing"))return;const t=e.config.get("heading.options");this.registerHeadingElements(e,t)}registerHeadingElements(e,t){const n=e.plugins.get(Gd),r=[];for(const o of t)"model"in o&&"view"in o&&(n.registerBlockElement({view:o.view,model:o.model}),r.push(o.model));n.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:r}}),n.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:r}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Lp(i,e,t){const n=i.createRangeOn(e);for(const{item:r}of n.getWalker())if(r.is("element",t))return r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CU extends Fe{static get requires(){return[Qi]}static get pluginName(){return"ImageElementSupport"}init(){const e=this.editor;if(!e.plugins.has("ImageInlineEditing")&&!e.plugins.has("ImageBlockEditing"))return;const t=e.model.schema,n=e.conversion,r=e.plugins.get(Qi);r.on("register:figure",()=>{n.for("upcast").add(SU(r))}),r.on("register:img",(o,s)=>{s.model!=="imageBlock"&&s.model!=="imageInline"||(t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),n.for("upcast").add(xU(r)),n.for("downcast").add(TU()),e.plugins.has("LinkImage")&&n.for("upcast").add(EU(r,e)),o.stop())})}}function xU(i){return e=>{e.on("element:img",(t,n,r)=>{if(!n.modelRange)return;const o=n.viewItem,s=i.processViewAttributes(o,r);s&&r.writer.setAttribute("htmlImgAttributes",s,n.modelRange)},{priority:"low"})}}function EU(i,e){const t=e.plugins.get("ImageUtils");return n=>{n.on("element:a",(r,o,s)=>{const l=o.viewItem;if(!t.findViewImgElement(l))return;const h=o.modelCursor.parent;if(!h.is("element","imageBlock"))return;const g=i.processViewAttributes(l,s);g&&s.writer.setAttribute("htmlLinkAttributes",g,h)},{priority:"low"})}}function SU(i){return e=>{e.on("element:figure",(t,n,r)=>{const o=n.viewItem;if(!n.modelRange||!o.hasClass("image"))return;const s=i.processViewAttributes(o,r);s&&r.writer.setAttribute("htmlFigureAttributes",s,n.modelRange)},{priority:"low"})}}function TU(){return i=>{e("htmlImgAttributes"),t("img","htmlImgAttributes"),t("figure","htmlFigureAttributes"),t("a","htmlLinkAttributes");function e(n){i.on(`attribute:${n}:imageInline`,(r,o,s)=>{if(!s.consumable.consume(o.item,r.name))return;const{attributeOldValue:l,attributeNewValue:c}=o,h=s.mapper.toViewElement(o.item);yu(s.writer,l,c,h)},{priority:"low"})}function t(n,r){i.on(`attribute:${r}:imageBlock`,(o,s,l)=>{if(!l.consumable.test(s.item,o.name))return;const{attributeOldValue:c,attributeNewValue:h}=s,g=l.mapper.toViewElement(s.item),b=Lp(l.writer,g,n);b&&(yu(l.writer,c,h,b),l.consumable.consume(s.item,o.name))},{priority:"low"}),n==="a"&&i.on("attribute:linkHref:imageBlock",(o,s,l)=>{if(!l.consumable.consume(s.item,"attribute:htmlLinkAttributes:imageBlock"))return;const c=l.mapper.toViewElement(s.item),h=Lp(l.writer,c,"a");Sa(l.writer,s.item.getAttribute("htmlLinkAttributes"),h)},{priority:"low"})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AU extends Fe{static get requires(){return[Qi]}static get pluginName(){return"MediaEmbedElementSupport"}init(){const e=this.editor;if(!e.plugins.has("MediaEmbed")||e.config.get("mediaEmbed.previewsInData"))return;const t=e.model.schema,n=e.conversion,r=this.editor.plugins.get(Qi),o=this.editor.plugins.get(Gd),s=e.config.get("mediaEmbed.elementName");o.registerBlockElement({model:"media",view:s}),r.on("register:figure",()=>{n.for("upcast").add(IU(r))}),r.on(`register:${s}`,(l,c)=>{c.model==="media"&&(t.extend("media",{allowAttributes:[Cs(s),"htmlFigureAttributes"]}),n.for("upcast").add(PU(r,s)),n.for("dataDowncast").add(DU(s)),l.stop())})}}function PU(i,e){const t=(n,r,o)=>{const s=r.viewItem;l(s,Cs(e));function l(c,h){const g=i.processViewAttributes(c,o);g&&o.writer.setAttribute(h,g,r.modelRange)}};return n=>{n.on(`element:${e}`,t,{priority:"low"})}}function IU(i){return e=>{e.on("element:figure",(t,n,r)=>{const o=n.viewItem;if(!n.modelRange||!o.hasClass("media"))return;const s=i.processViewAttributes(o,r);s&&r.writer.setAttribute("htmlFigureAttributes",s,n.modelRange)},{priority:"low"})}}function DU(i){return e=>{t(i,Cs(i)),t("figure","htmlFigureAttributes");function t(n,r){e.on(`attribute:${r}:media`,(o,s,l)=>{if(!l.consumable.consume(s.item,o.name))return;const{attributeOldValue:c,attributeNewValue:h}=s,g=l.mapper.toViewElement(s.item),b=Lp(l.writer,g,n);yu(l.writer,c,h,b)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RU extends Fe{static get requires(){return[Qi]}static get pluginName(){return"ScriptElementSupport"}init(){const e=this.editor.plugins.get(Qi);e.on("register:script",(t,n)=>{const r=this.editor,o=r.model.schema,s=r.conversion;o.register("htmlScript",n.modelSchema),o.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),r.data.registerRawContentMatcher({name:"script"}),s.for("upcast").elementToElement({view:"script",model:yv(n)}),s.for("upcast").add(Bf(n,e)),s.for("downcast").elementToElement({model:"htmlScript",view:(l,{writer:c})=>hg("script",l,c)}),s.for("downcast").add(Nf(n)),t.stop()})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OU extends Fe{static get requires(){return[Qi]}static get pluginName(){return"TableElementSupport"}init(){const e=this.editor;if(!e.plugins.has("TableEditing"))return;const t=e.model.schema,n=e.conversion,r=e.plugins.get(Qi),o=e.plugins.get("TableUtils");r.on("register:figure",()=>{n.for("upcast").add(LU(r))}),r.on("register:table",(s,l)=>{l.model==="table"&&(t.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),n.for("upcast").add(MU(r)),n.for("downcast").add(BU()),e.model.document.registerPostFixer(FU(e.model,o)),s.stop())})}}function FU(i,e){return t=>{const n=i.document.differ.getChanges();let r=!1;for(const o of n){if(o.type!="attribute"||o.attributeKey!="headingRows")continue;const s=o.range.start.nodeAfter,l=s.getAttribute("htmlTheadAttributes"),c=s.getAttribute("htmlTbodyAttributes");l&&!o.attributeNewValue?(t.removeAttribute("htmlTheadAttributes",s),r=!0):c&&o.attributeNewValue==e.getRows(s)&&(t.removeAttribute("htmlTbodyAttributes",s),r=!0)}return r}}function MU(i){return e=>{e.on("element:table",(t,n,r)=>{if(!n.modelRange)return;const o=n.viewItem;s(o,"htmlTableAttributes");for(const l of o.getChildren())l.is("element","thead")&&s(l,"htmlTheadAttributes"),l.is("element","tbody")&&s(l,"htmlTbodyAttributes");function s(l,c){const h=i.processViewAttributes(l,r);h&&r.writer.setAttribute(c,h,n.modelRange)}},{priority:"low"})}}function LU(i){return e=>{e.on("element:figure",(t,n,r)=>{const o=n.viewItem;if(!n.modelRange||!o.hasClass("table"))return;const s=i.processViewAttributes(o,r);s&&r.writer.setAttribute("htmlFigureAttributes",s,n.modelRange)},{priority:"low"})}}function BU(){return i=>{e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes");function e(t,n){i.on(`attribute:${n}:table`,(r,o,s)=>{if(!s.consumable.test(o.item,r.name))return;const l=s.mapper.toViewElement(o.item),c=Lp(s.writer,l,t);c&&(s.consumable.consume(o.item,r.name),yu(s.writer,o.attributeOldValue,o.attributeNewValue,c))})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NU extends Fe{static get requires(){return[Qi]}static get pluginName(){return"StyleElementSupport"}init(){const e=this.editor.plugins.get(Qi);e.on("register:style",(t,n)=>{const r=this.editor,o=r.model.schema,s=r.conversion;o.register("htmlStyle",n.modelSchema),o.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),r.data.registerRawContentMatcher({name:"style"}),s.for("upcast").elementToElement({view:"style",model:yv(n)}),s.for("upcast").add(Bf(n,e)),s.for("downcast").elementToElement({model:"htmlStyle",view:(l,{writer:c})=>hg("style",l,c)}),s.for("downcast").add(Nf(n)),t.stop()})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VU extends Fe{static get requires(){return[Qi]}static get pluginName(){return"ListElementSupport"}init(){const e=this.editor;if(!e.plugins.has("ListEditing"))return;const t=e.model.schema,n=e.conversion,r=e.plugins.get(Qi),o=e.plugins.get("ListEditing"),s=e.plugins.get("ListUtils"),l=["ul","ol","li"];o.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:Sa}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:Sa}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:Sa}),r.on("register",(c,h)=>{if(!l.includes(h.view)||(c.stop(),t.checkAttribute("$block","htmlLiAttributes")))return;const g=l.map(b=>Cs(b));t.extend("$listItem",{allowAttributes:g}),n.for("upcast").add(b=>{b.on("element:ul",Eb("htmlUlAttributes",r),{priority:"low"}),b.on("element:ol",Eb("htmlOlAttributes",r),{priority:"low"}),b.on("element:li",Eb("htmlLiAttributes",r),{priority:"low"})})}),o.on("postFixer",(c,{listNodes:h,writer:g})=>{for(const{node:b,previousNodeInList:y}of h)if(y){if(y.getAttribute("listType")==b.getAttribute("listType")){const k=v_(y.getAttribute("listType")),x=y.getAttribute(k);!Vd(b.getAttribute(k),x)&&g.model.schema.checkAttribute(b,k)&&(g.setAttribute(k,x,b),c.return=!0)}if(y.getAttribute("listItemId")==b.getAttribute("listItemId")){const k=y.getAttribute("htmlLiAttributes");!Vd(b.getAttribute("htmlLiAttributes"),k)&&g.model.schema.checkAttribute(b,"htmlLiAttributes")&&(g.setAttribute("htmlLiAttributes",k,b),c.return=!0)}}}),o.on("postFixer",(c,{listNodes:h,writer:g})=>{for(const{node:b}of h){const y=b.getAttribute("listType");!s.isNumberedListType(y)&&b.getAttribute("htmlOlAttributes")&&(g.removeAttribute("htmlOlAttributes",b),c.return=!0),s.isNumberedListType(y)&&b.getAttribute("htmlUlAttributes")&&(g.removeAttribute("htmlUlAttributes",b),c.return=!0)}})}afterInit(){const e=this.editor;if(!e.commands.get("indentList"))return;const t=e.commands.get("indentList");this.listenTo(t,"afterExecute",(n,r)=>{e.model.change(o=>{for(const s of r){const l=v_(s.getAttribute("listType"));e.model.schema.checkAttribute(s,l)&&o.setAttribute(l,{},s)}})})}}function Eb(i,e){return(t,n,r)=>{const o=n.viewItem;n.modelRange||Object.assign(n,r.convertChildren(n.viewItem,n.modelCursor));const s=e.processViewAttributes(o,r);for(const l of n.modelRange.getItems({shallow:!0}))l.hasAttribute("listItemId")&&(l.hasAttribute("htmlUlAttributes")||l.hasAttribute("htmlOlAttributes")||r.writer.model.schema.checkAttribute(l,i)&&r.writer.setAttribute(i,s||{},l))}}function v_(i){return i==="numbered"||i=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zU extends Fe{static get requires(){return[Qi,Gd]}static get pluginName(){return"CustomElementSupport"}init(){const e=this.editor.plugins.get(Qi),t=this.editor.plugins.get(Gd);e.on("register:$customElement",(n,r)=>{n.stop();const o=this.editor,s=o.model.schema,l=o.conversion,c=o.editing.view.domConverter.unsafeElements,h=o.data.htmlProcessor.domConverter.preElements;s.register(r.model,r.modelSchema),s.extend(r.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),o.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),l.for("upcast").elementToElement({view:/.*/,model:(g,b)=>{if(g.name=="$comment"||!HU(g.name)||t.getDefinitionsForView(g.name).size)return null;c.includes(g.name)||c.push(g.name),h.includes(g.name)||h.push(g.name);const y=b.writer.createElement(r.model,{htmlElementName:g.name}),k=e.processViewAttributes(g,b);k&&b.writer.setAttribute("htmlCustomElementAttributes",k,y);let x;if(g.is("element","template")&&g.getCustomProperty("$rawContent"))x=g.getCustomProperty("$rawContent");else{const L=new eg(g.document).createDocumentFragment(g),M=o.data.htmlProcessor.domConverter.viewToDom(L),V=M.firstChild;for(;V.firstChild;)M.appendChild(V.firstChild);V.remove(),x=o.data.htmlProcessor.htmlWriter.getHtml(M)}b.writer.setAttribute("htmlContent",x,y);for(const{item:D}of o.editing.view.createRangeIn(g))b.consumable.consume(D,{name:!0});return y},converterPriority:"low"}),l.for("editingDowncast").elementToElement({model:{name:r.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(g,{writer:b})=>{const y=g.getAttribute("htmlElementName"),k=b.createRawElement(y);return g.hasAttribute("htmlCustomElementAttributes")&&Sa(b,g.getAttribute("htmlCustomElementAttributes"),k),k}}),l.for("dataDowncast").elementToElement({model:{name:r.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(g,{writer:b})=>{const y=g.getAttribute("htmlElementName"),k=g.getAttribute("htmlContent"),x=b.createRawElement(y,null,(D,L)=>{L.setContentOf(D,k)});return g.hasAttribute("htmlCustomElementAttributes")&&Sa(b,g.getAttribute("htmlCustomElementAttributes"),x),x}})})}}function HU(i){try{document.createElement(i)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UU extends Fe{static get pluginName(){return"GeneralHtmlSupport"}static get requires(){return[Qi,vU,_U,kU,CU,AU,RU,OU,NU,VU,zU]}init(){const e=this.editor,t=e.plugins.get(Qi);t.loadAllowedEmptyElementsConfig(e.config.get("htmlSupport.allowEmpty")||[]),t.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),t.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(e){const t=this.editor.plugins.get("DataSchema"),n=Array.from(t.getDefinitionsForView(e,!1)),r=n.find(o=>o.isInline&&!n[0].isObject);return r?r.model:Cs(e)}addModelHtmlClass(e,t,n){const r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(const l of Ed(r,n,o))xd(s,l,o,"classes",c=>{for(const h of An(t))c.add(h)})})}removeModelHtmlClass(e,t,n){const r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(const l of Ed(r,n,o))xd(s,l,o,"classes",c=>{for(const h of An(t))c.delete(h)})})}setModelHtmlAttributes(e,t,n){const r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(const l of Ed(r,n,o))xd(s,l,o,"attributes",c=>{for(const[h,g]of Object.entries(t))c.set(h,g)})})}removeModelHtmlAttributes(e,t,n){const r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(const l of Ed(r,n,o))xd(s,l,o,"attributes",c=>{for(const h of An(t))c.delete(h)})})}setModelHtmlStyles(e,t,n){const r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(const l of Ed(r,n,o))xd(s,l,o,"styles",c=>{for(const[h,g]of Object.entries(t))c.set(h,g)})})}removeModelHtmlStyles(e,t,n){const r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(const l of Ed(r,n,o))xd(s,l,o,"styles",c=>{for(const h of An(t))c.delete(h)})})}}function*Ed(i,e,t){if(e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)i.schema.checkAttributeInSelection(e,t)&&(yield e);else for(const n of WU(i,e,t))yield*n.getItems({shallow:!0})}function WU(i,e,t){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?i.schema.checkAttribute(e,t)?[i.createRangeOn(e)]:[]:i.schema.getValidRanges(i.createSelection(e).getRanges(),t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _v=["left","right","center","justify"];function wS(i){return _v.includes(i)}function yS(i,e){return e.contentLanguageDirection=="rtl"?i==="right":i==="left"}function _S(i){const e=i.map(n=>{let r;return typeof n=="string"?r={name:n}:r=n,r}).filter(n=>{const r=_v.includes(n.name);return r||vn("alignment-config-name-not-recognized",{option:n}),r}),t=e.filter(n=>!!n.className).length;if(t&&t<e.length)throw new be("alignment-config-classnames-are-missing",{configuredOptions:i});return e.forEach((n,r,o)=>{const s=o.slice(r+1);if(s.some(c=>c.name==n.name))throw new be("alignment-config-name-already-defined",{option:n,configuredOptions:i});if(n.className&&s.some(h=>h.className==n.className))throw new be("alignment-config-classname-already-defined",{option:n,configuredOptions:i})}),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const kv="alignment";class jU extends Wt{refresh(){const t=this.editor.locale,n=Wi(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!n&&this._canBeAligned(n),this.isEnabled&&n.hasAttribute("alignment")?this.value=n.getAttribute("alignment"):this.value=t.contentLanguageDirection==="rtl"?"right":"left"}execute(e={}){const t=this.editor,n=t.locale,r=t.model,o=r.document,s=e.value;r.change(l=>{const c=Array.from(o.selection.getSelectedBlocks()).filter(b=>this._canBeAligned(b)),h=c[0].getAttribute("alignment");yS(s,n)||h===s||!s?$U(c,l):qU(c,l,s)})}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,kv)}}function $U(i,e){for(const t of i)e.removeAttribute(kv,t)}function qU(i,e,t){for(const n of i)e.setAttribute(kv,t,n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GU extends Fe{static get pluginName(){return"AlignmentEditing"}constructor(e){super(e),e.config.define("alignment",{options:_v.map(t=>({name:t}))})}init(){const e=this.editor,t=e.locale,n=e.model.schema,o=_S(e.config.get("alignment.options")).filter(h=>wS(h.name)&&!yS(h.name,t)),s=o.some(h=>!!h.className);n.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),s?e.conversion.attributeToAttribute(JU(o)):e.conversion.for("downcast").attributeToAttribute(KU(o));const l=ZU(o);for(const h of l)e.conversion.for("upcast").attributeToAttribute(h);const c=YU(o);for(const h of c)e.conversion.for("upcast").attributeToAttribute(h);e.commands.add("alignment",new jU(e))}}function KU(i){const e={};for(const{name:n}of i)e[n]={key:"style",value:{"text-align":n}};return{model:{key:"alignment",values:i.map(n=>n.name)},view:e}}function ZU(i){const e=[];for(const{name:t}of i)e.push({view:{key:"style",value:{"text-align":t}},model:{key:"alignment",value:t}});return e}function YU(i){const e=[];for(const{name:t}of i)e.push({view:{key:"align",value:t},model:{key:"alignment",value:t}});return e}function JU(i){const e={};for(const n of i)e[n.name]={key:"class",value:n.className};return{model:{key:"alignment",values:i.map(n=>n.name)},view:e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const nf=new Map([["left",it.alignLeft],["right",it.alignRight],["center",it.alignCenter],["justify",it.alignJustify]]);class XU extends Fe{get localizedOptionTitles(){const e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const e=this.editor,t=_S(e.config.get("alignment.options"));t.map(n=>n.name).filter(wS).forEach(n=>this._addButton(n)),this._addToolbarDropdown(t),this._addMenuBarMenu(t)}_addButton(e){this.editor.ui.componentFactory.add(`alignment:${e}`,n=>this._createButton(n,e))}_createButton(e,t,n={}){const r=this.editor,o=r.commands.get("alignment"),s=new Ht(e);return s.set({label:this.localizedOptionTitles[t],icon:nf.get(t),tooltip:!0,isToggleable:!0,...n}),s.bind("isEnabled").to(o),s.bind("isOn").to(o,"value",l=>l===t),this.listenTo(s,"execute",()=>{r.execute("alignment",{value:t}),r.editing.view.focus()}),s}_addToolbarDropdown(e){const t=this.editor;t.ui.componentFactory.add("alignment",r=>{const o=Dr(r),s=r.uiLanguageDirection==="rtl"?"w":"e",l=r.t;sg(o,()=>e.map(g=>this._createButton(r,g.name,{tooltipPosition:s})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:l("Text alignment toolbar")}),o.buttonView.set({label:l("Text alignment"),tooltip:!0}),o.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const c=r.contentLanguageDirection==="rtl"?nf.get("right"):nf.get("left"),h=t.commands.get("alignment");return o.buttonView.bind("icon").to(h,"value",g=>nf.get(g)||c),o.bind("isEnabled").to(h,"isEnabled"),this.listenTo(o,"execute",()=>{t.editing.view.focus()}),o})}_addMenuBarMenu(e){const t=this.editor;t.ui.componentFactory.add("menuBar:alignment",n=>{const r=t.commands.get("alignment"),o=n.t,s=new Qo(n),l=new vu(n);s.bind("isEnabled").to(r),l.set({ariaLabel:o("Text alignment"),role:"menu"}),s.buttonView.set({label:o("Text alignment")});for(const c of e){const h=new Au(n,s),g=new Ii(n);g.delegate("execute").to(s),g.set({label:this.localizedOptionTitles[c.name],icon:nf.get(c.name),role:"menuitemcheckbox",isToggleable:!0}),g.on("execute",()=>{t.execute("alignment",{value:c.name}),t.editing.view.focus()}),g.bind("isOn").to(r,"value",b=>b===c.name),g.bind("isEnabled").to(r,"isEnabled"),h.children.add(g),l.items.add(h)}return s.panelView.children.add(l),s})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QU extends Fe{static get requires(){return[GU,XU]}static get pluginName(){return"Alignment"}}class eW extends Wt{execute(e){const t=this.editor,n=t.model.document.selection;t.model.change(r=>{const o=r.createElement("chartEmbedElement",{...Object.fromEntries(n.getAttributes()),id:`viz-${e.value.id}`,"viz-id":e.value.id,type:e.value.type});t.model.insertObject(o,null,null,{setSelection:"on"})})}refresh(){const e=this.editor.model,t=e.document.selection,n=e.schema.checkChild(t.focus.parent,"chartEmbedElement");this.isEnabled=n}}class tW extends Fe{constructor(e){super(e)}static get requires(){return[Pa]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("chartEmbed",new eW(this.editor))}_defineSchema(){this.editor.model.schema.register("chartEmbedElement",{inheritAllFrom:"$inlineObject",allowAttributes:["id","viz-id","type","x-data","x-init"]})}_defineConverters(){const e=this.editor;e.conversion.for("upcast").elementToElement({view:{name:"div",attributes:["id","viz-id","x-init","type"]},model:(t,{writer:n})=>n.createElement("chartEmbedElement",{id:t.getAttribute("id"),"viz-id":t.getAttribute("viz-id"),type:t.getAttribute("type")})}),e.conversion.for("dataDowncast").elementToElement({model:"chartEmbedElement",view:(t,{writer:n})=>{let r=t.getAttribute("id"),o=t.getAttribute("type"),s;return o==="Chart"?s=`new PlotlyChart('${r}')`:o==="Table"&&(s=`new AgGridTable('${r}')`),n.createEmptyElement("div",{id:r,"viz-id":t.getAttribute("viz-id"),type:o,"x-init":s})}}),e.conversion.for("editingDowncast").elementToElement({model:"chartEmbedElement",view:(t,{writer:n})=>{let r=t.getAttribute("id"),o=t.getAttribute("type"),s;o==="Chart"?s=`new PlotlyChart('${r}')`:o==="Table"&&(s=`new AgGridTable('${r}')`);const l=n.createRawElement("div",{id:r,"viz-id":t.getAttribute("viz-id")}),c=n.createContainerElement("div",{"x-init":s},l);return El(c,n)}})}}class nW extends Fe{init(){const e=this.editor,t=e.t,n=this.editor.config.get("chartList");e.ui.componentFactory.add("chartEmbed",r=>{const o=Dr(r);xl(o,iW(n)),o.buttonView.set({label:t("Chart"),tooltip:!0,withText:!0});const s=e.commands.get("chartEmbed");return o.bind("isEnabled").to(s),this.listenTo(o,"execute",l=>{e.execute("chartEmbed",{value:l.source.commandParam}),e.editing.view.focus()}),o})}}function iW(i){const e=new Or;for(const t of i){const n={type:"button",model:new yl({commandParam:t,label:`${t.name} (${t.type})`,withText:!0})};e.add(n)}return e}class rW extends Fe{static get requires(){return[tW,nW]}}class oW extends Wt{execute({value:e}){const t=this.editor,n=t.model.document.selection;t.model.change(r=>{const o=r.createElement("placeholder",{...Object.fromEntries(n.getAttributes()),name:e});t.model.insertObject(o,null,null,{setSelection:"on"})})}refresh(){const e=this.editor.model,t=e.document.selection,n=e.schema.checkChild(t.focus.parent,"placeholder");this.isEnabled=n}}class sW extends Fe{static get requires(){return[Pa]}init(){console.log("PlaceholderEditing#init() got called"),this._defineSchema(),this._defineConverters(),this.editor.commands.add("placeholder",new oW(this.editor)),this.editor.editing.mapper.on("viewToModelPosition",mN(this.editor.model,e=>e.hasClass("placeholder"))),this.editor.config.define("placeholderConfig",{types:["date","first name","surname"]})}_defineSchema(){this.editor.model.schema.register("placeholder",{inheritAllFrom:"$inlineObject",allowAttributes:["name","x-init"]})}_defineConverters(){const e=this.editor;e.conversion.for("upcast").elementToElement({view:{name:"div",attributes:["x-init"]},model:(t,{writer:n})=>n.createElement("placeholder",{name:"area"})}),e.conversion.for("dataDowncast").elementToElement({model:"placeholder",view:(t,{writer:n})=>{let r=t.getAttribute("name"),o=`new DynamicText('${r}')`;return n.createEmptyElement("div",{name:r,"x-init":o})}}),e.conversion.for("editingDowncast").elementToElement({model:"placeholder",view:(t,{writer:n})=>{let r=t.getAttribute("name"),o=`new DynamicText('${r}')`;const s=n.createRawElement("div",{name:r}),l=n.createContainerElement("div",{"x-init":o},s);return El(l,n)}})}}class aW extends Fe{init(){const e=this.editor,t=e.t,n=e.config.get("placeholderConfig.types");e.ui.componentFactory.add("placeholder",r=>{const o=Dr(r);xl(o,lW(n)),o.buttonView.set({label:t("Placeholder"),tooltip:!0,withText:!0});const s=e.commands.get("placeholder");return o.bind("isEnabled").to(s),this.listenTo(o,"execute",l=>{e.execute("placeholder",{value:l.source.commandParam}),e.editing.view.focus()}),o})}}function lW(i){const e=new Or;for(const t of i){const n={type:"button",model:new yl({commandParam:t,label:t,withText:!0})};e.add(n)}return e}class cW extends Fe{static get requires(){return[sW,aW]}}class Cv extends PB{}Cv.builtinPlugins=[h6,m6,VH,aU,UU,b6,jH,QU,_6,E6,P6,L6,GB,h8,G8,Zf,hV,fV,i3,b3,y3,k3,XV,FV,V3,W3,Fz,fz,Cz,oS,Mz,w8,QE,vv,sS,eH,sH,Wz,Y3,Kz,rW,cW];Cv.defaultConfig={placeholderConfig:{types:["date","color","first name","surname"]},toolbar:{items:["undo","redo","|","heading","style","|","link","insertImage","insertTable","blockQuote","mediaEmbed","htmlEmbed","horizontalLine","|","bold","italic","underline",{label:"Basic styles",icon:"text",items:["fontSize","fontFamily","fontColor","fontBackgroundColor"]},"removeFormat","|","alignment","|","bulletedList","numberedList","|","outdent","indent","|","showBlocks","sourceEditing","|","placeholder","chartEmbed"],shouldNotGroupWhenFull:!0},language:"en",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"],tableProperties:{defaultProperties:{borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",width:"100%",height:"100%"}}},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"}]},alignment:{options:["left","center","right","justify"]},style:{definitions:[{name:"Article category",element:"h3",classes:["category"]},{name:"Title",element:"h2",classes:["document-title"]},{name:"Subtitle",element:"h3",classes:["document-subtitle"]},{name:"Info box",element:"p",classes:["info-box"]},{name:"Side quote",element:"blockquote",classes:["side-quote"]},{name:"Marker",element:"span",classes:["marker"]},{name:"Spoiler",element:"span",classes:["spoiler"]},{name:"Code (dark)",element:"pre",classes:["fancy-code","fancy-code-dark"]},{name:"Code (bright)",element:"pre",classes:["fancy-code","fancy-code-bright"]}]},image:{toolbar:["imageStyle:block","imageStyle:alignBlockLeft","imageStyle:alignBlockRight","|","imageStyle:inline","imageStyle:alignLeft","imageStyle:alignRight","|","toggleImageCaption","imageTextAlternative","|","linkImage"],insert:{type:"auto"}},htmlEmbed:{showPreviews:!0,sanitizeHtml:i=>({html:i,hasChanged:!1})},htmlSupport:{allow:[{name:"div",classes:["grid","grid-cols-2","grid-cols-3","grid-cols-4","border-1","border-2","flex"]}]},chartList:[]};var kS={exports:{}};/*! For license information please see inspector.js.LICENSE.txt */(function(i,e){(function(t,n){i.exports=n()})(window,function(){return function(t){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=n,r.d=function(o,s,l){r.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:l})},r.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,s){if(1&s&&(o=r(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var c in o)r.d(l,c,function(h){return o[h]}.bind(null,c));return l},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=94)}([function(t,n,r){t.exports=r(21)},function(t,n,r){r.d(n,"a",function(){return s}),r.d(n,"b",function(){return l}),r.d(n,"c",function(){return c});var o=r(19);function s(g,b=!0){if(g===void 0)return"undefined";if(typeof g=="function")return"function() {…}";const y=Object(o.stringify)(g,h,null,{maxDepth:2});return b?y:y.replace(/(^"|"$)/g,"")}function l(g){const b={};for(const y in g)b[y]=g[y],b[y].value=s(b[y].value);return b}function c(g,b){return g.length>b?g.substr(0,b)+`… [${g.length-b} characters left]`:g}function h(g,b,y){return typeof g=="string"?`"${g.replace("'",'"')}"`:y(g)}},function(t,n,r){function o(x){return x&&x.name}function s(x){return x&&o(x)&&x.is("attributeElement")}function l(x){return x&&o(x)&&x.is("emptyElement")}function c(x){return x&&o(x)&&x.is("uiElement")}function h(x){return x&&o(x)&&x.is("rawElement")}function g(x){return x&&o(x)&&x.is("editableElement")}function b(x){return x&&x.is("rootElement")}function y(x){return{path:[...x.parent.getPath(),x.offset],offset:x.offset,isAtEnd:x.isAtEnd,isAtStart:x.isAtStart,parent:k(x.parent)}}function k(x){return o(x)?s(x)?"attribute:"+x.name:b(x)?"root:"+x.name:"container:"+x.name:x.data}r.d(n,"d",function(){return o}),r.d(n,"b",function(){return s}),r.d(n,"e",function(){return l}),r.d(n,"h",function(){return c}),r.d(n,"f",function(){return h}),r.d(n,"c",function(){return g}),r.d(n,"g",function(){return b}),r.d(n,"a",function(){return y})},function(t,n,r){r.d(n,"a",function(){return o});class o{static group(...l){console.group(...l)}static groupEnd(...l){console.groupEnd(...l)}static log(...l){console.log(...l)}static warn(...l){console.warn(...l)}}},function(t,n,r){function o(h){return h&&h.is("element")}function s(h){return h&&h.is("rootElement")}function l(h){return h.getPath?h.getPath():h.path}function c(h){return{path:l(h),stickiness:h.stickiness,index:h.index,isAtEnd:h.isAtEnd,isAtStart:h.isAtStart,offset:h.offset,textNode:h.textNode&&h.textNode.data}}r.d(n,"c",function(){return o}),r.d(n,"d",function(){return s}),r.d(n,"b",function(){return l}),r.d(n,"a",function(){return c})},function(t,n,r){(function(o,s){var l="[object Arguments]",c="[object Map]",h="[object Object]",g="[object Set]",b=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,k={};k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k[l]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object Boolean]"]=k["[object DataView]"]=k["[object Date]"]=k["[object Error]"]=k["[object Function]"]=k[c]=k["[object Number]"]=k[h]=k["[object RegExp]"]=k[g]=k["[object String]"]=k["[object WeakMap]"]=!1;var x=typeof o=="object"&&o&&o.Object===Object&&o,D=typeof self=="object"&&self&&self.Object===Object&&self,L=x||D||Function("return this")(),M=n&&!n.nodeType&&n,V=M&&typeof s=="object"&&s&&!s.nodeType&&s,O=V&&V.exports===M,U=O&&x.process,K=function(){try{return U&&U.binding&&U.binding("util")}catch{}}(),q=K&&K.isTypedArray;function Q(Se,He){for(var nt=-1,Tt=Se==null?0:Se.length;++nt<Tt;)if(He(Se[nt],nt,Se))return!0;return!1}function ne(Se){var He=-1,nt=Array(Se.size);return Se.forEach(function(Tt,yn){nt[++He]=[yn,Tt]}),nt}function X(Se){var He=-1,nt=Array(Se.size);return Se.forEach(function(Tt){nt[++He]=Tt}),nt}var se,fe,Oe,_e=Array.prototype,Ie=Function.prototype,re=Object.prototype,ae=L["__core-js_shared__"],pe=Ie.toString,Z=re.hasOwnProperty,Pe=(se=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||""))?"Symbol(src)_1."+se:"",je=re.toString,wt=RegExp("^"+pe.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=O?L.Buffer:void 0,z=L.Symbol,ke=L.Uint8Array,at=re.propertyIsEnumerable,lt=_e.splice,Ee=z?z.toStringTag:void 0,xe=Object.getOwnPropertySymbols,Ue=oe?oe.isBuffer:void 0,P=(fe=Object.keys,Oe=Object,function(Se){return fe(Oe(Se))}),R=Ne(L,"DataView"),W=Ne(L,"Map"),he=Ne(L,"Promise"),ge=Ne(L,"Set"),ce=Ne(L,"WeakMap"),$e=Ne(Object,"create"),At=Nt(R),Ct=Nt(W),jt=Nt(he),ct=Nt(ge),En=Nt(ce),Sn=z?z.prototype:void 0,Di=Sn?Sn.valueOf:void 0;function Te(Se){var He=-1,nt=Se==null?0:Se.length;for(this.clear();++He<nt;){var Tt=Se[He];this.set(Tt[0],Tt[1])}}function Ae(Se){var He=-1,nt=Se==null?0:Se.length;for(this.clear();++He<nt;){var Tt=Se[He];this.set(Tt[0],Tt[1])}}function we(Se){var He=-1,nt=Se==null?0:Se.length;for(this.clear();++He<nt;){var Tt=Se[He];this.set(Tt[0],Tt[1])}}function $(Se){var He=-1,nt=Se==null?0:Se.length;for(this.__data__=new we;++He<nt;)this.add(Se[He])}function Y(Se){var He=this.__data__=new Ae(Se);this.size=He.size}function de(Se,He){var nt=Ri(Se),Tt=!nt&&Wn(Se),yn=!nt&&!Tt&&mn(Se),rn=!nt&&!Tt&&!yn&&$r(Se),Tn=nt||Tt||yn||rn,pn=Tn?function(In,Mi){for(var Fr=-1,Bn=Array(In);++Fr<In;)Bn[Fr]=Mi(Fr);return Bn}(Se.length,String):[],Fi=pn.length;for(var gn in Se)!Z.call(Se,gn)||Tn&&(gn=="length"||yn&&(gn=="offset"||gn=="parent")||rn&&(gn=="buffer"||gn=="byteLength"||gn=="byteOffset")||ln(gn,Fi))||pn.push(gn);return pn}function ue(Se,He){for(var nt=Se.length;nt--;)if(zn(Se[nt][0],He))return nt;return-1}function ve(Se){return Se==null?Se===void 0?"[object Undefined]":"[object Null]":Ee&&Ee in Object(Se)?function(He){var nt=Z.call(He,Ee),Tt=He[Ee];try{He[Ee]=void 0;var yn=!0}catch{}var rn=je.call(He);return yn&&(nt?He[Ee]=Tt:delete He[Ee]),rn}(Se):function(He){return je.call(He)}(Se)}function et(Se){return gr(Se)&&ve(Se)==l}function ht(Se,He,nt,Tt,yn){return Se===He||(Se==null||He==null||!gr(Se)&&!gr(He)?Se!=Se&&He!=He:function(rn,Tn,pn,Fi,gn,In){var Mi=Ri(rn),Fr=Ri(Tn),Bn=Mi?"[object Array]":Bt(rn),$i=Fr?"[object Array]":Bt(Tn),dr=(Bn=Bn==l?h:Bn)==h,Dn=($i=$i==l?h:$i)==h,qi=Bn==$i;if(qi&&mn(rn)){if(!mn(Tn))return!1;Mi=!0,dr=!1}if(qi&&!dr)return In||(In=new Y),Mi||$r(rn)?Et(rn,Tn,pn,Fi,gn,In):function(cn,$t,Gi,Xt,qr,ni,hr){switch(Gi){case"[object DataView]":if(cn.byteLength!=$t.byteLength||cn.byteOffset!=$t.byteOffset)return!1;cn=cn.buffer,$t=$t.buffer;case"[object ArrayBuffer]":return!(cn.byteLength!=$t.byteLength||!ni(new ke(cn),new ke($t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return zn(+cn,+$t);case"[object Error]":return cn.name==$t.name&&cn.message==$t.message;case"[object RegExp]":case"[object String]":return cn==$t+"";case c:var Ke=ne;case g:var Rt=1&Xt;if(Ke||(Ke=X),cn.size!=$t.size&&!Rt)return!1;var No=hr.get(cn);if(No)return No==$t;Xt|=2,hr.set(cn,$t);var Gr=Et(Ke(cn),Ke($t),Xt,qr,ni,hr);return hr.delete(cn),Gr;case"[object Symbol]":if(Di)return Di.call(cn)==Di.call($t)}return!1}(rn,Tn,Bn,pn,Fi,gn,In);if(!(1&pn)){var br=dr&&Z.call(rn,"__wrapped__"),oo=Dn&&Z.call(Tn,"__wrapped__");if(br||oo){var jn=br?rn.value():rn,St=oo?Tn.value():Tn;return In||(In=new Y),gn(jn,St,pn,Fi,In)}}return qi?(In||(In=new Y),function(cn,$t,Gi,Xt,qr,ni){var hr=1&Gi,Ke=rt(cn),Rt=Ke.length,No=rt($t).length;if(Rt!=No&&!hr)return!1;for(var Gr=Rt;Gr--;){var er=Ke[Gr];if(!(hr?er in $t:Z.call($t,er)))return!1}var Hn=ni.get(cn);if(Hn&&ni.get($t))return Hn==$t;var hi=!0;ni.set(cn,$t),ni.set($t,cn);for(var Vt=hr;++Gr<Rt;){er=Ke[Gr];var As=cn[er],Kr=$t[er];if(Xt)var wi=hr?Xt(Kr,As,er,$t,cn,ni):Xt(As,Kr,er,cn,$t,ni);if(!(wi===void 0?As===Kr||qr(As,Kr,Gi,Xt,ni):wi)){hi=!1;break}Vt||(Vt=er=="constructor")}if(hi&&!Vt){var $n=cn.constructor,vr=$t.constructor;$n==vr||!("constructor"in cn)||!("constructor"in $t)||typeof $n=="function"&&$n instanceof $n&&typeof vr=="function"&&vr instanceof vr||(hi=!1)}return ni.delete(cn),ni.delete($t),hi}(rn,Tn,pn,Fi,gn,In)):!1}(Se,He,nt,Tt,ht,yn))}function ft(Se){return!(!ji(Se)||function(He){return!!Pe&&Pe in He}(Se))&&(ur(Se)?wt:b).test(Nt(Se))}function ut(Se){if(nt=(He=Se)&&He.constructor,Tt=typeof nt=="function"&&nt.prototype||re,He!==Tt)return P(Se);var He,nt,Tt,yn=[];for(var rn in Object(Se))Z.call(Se,rn)&&rn!="constructor"&&yn.push(rn);return yn}function Et(Se,He,nt,Tt,yn,rn){var Tn=1&nt,pn=Se.length,Fi=He.length;if(pn!=Fi&&!(Tn&&Fi>pn))return!1;var gn=rn.get(Se);if(gn&&rn.get(He))return gn==He;var In=-1,Mi=!0,Fr=2&nt?new $:void 0;for(rn.set(Se,He),rn.set(He,Se);++In<pn;){var Bn=Se[In],$i=He[In];if(Tt)var dr=Tn?Tt($i,Bn,In,He,Se,rn):Tt(Bn,$i,In,Se,He,rn);if(dr!==void 0){if(dr)continue;Mi=!1;break}if(Fr){if(!Q(He,function(Dn,qi){if(br=qi,!Fr.has(br)&&(Bn===Dn||yn(Bn,Dn,nt,Tt,rn)))return Fr.push(qi);var br})){Mi=!1;break}}else if(Bn!==$i&&!yn(Bn,$i,nt,Tt,rn)){Mi=!1;break}}return rn.delete(Se),rn.delete(He),Mi}function rt(Se){return function(He,nt,Tt){var yn=nt(He);return Ri(He)?yn:function(rn,Tn){for(var pn=-1,Fi=Tn.length,gn=rn.length;++pn<Fi;)rn[gn+pn]=Tn[pn];return rn}(yn,Tt(He))}(Se,Ia,dn)}function xt(Se,He){var nt,Tt,yn=Se.__data__;return((Tt=typeof(nt=He))=="string"||Tt=="number"||Tt=="symbol"||Tt=="boolean"?nt!=="__proto__":nt===null)?yn[typeof He=="string"?"string":"hash"]:yn.map}function Ne(Se,He){var nt=function(Tt,yn){return Tt?.[yn]}(Se,He);return ft(nt)?nt:void 0}Te.prototype.clear=function(){this.__data__=$e?$e(null):{},this.size=0},Te.prototype.delete=function(Se){var He=this.has(Se)&&delete this.__data__[Se];return this.size-=He?1:0,He},Te.prototype.get=function(Se){var He=this.__data__;if($e){var nt=He[Se];return nt==="__lodash_hash_undefined__"?void 0:nt}return Z.call(He,Se)?He[Se]:void 0},Te.prototype.has=function(Se){var He=this.__data__;return $e?He[Se]!==void 0:Z.call(He,Se)},Te.prototype.set=function(Se,He){var nt=this.__data__;return this.size+=this.has(Se)?0:1,nt[Se]=$e&&He===void 0?"__lodash_hash_undefined__":He,this},Ae.prototype.clear=function(){this.__data__=[],this.size=0},Ae.prototype.delete=function(Se){var He=this.__data__,nt=ue(He,Se);return!(nt<0)&&(nt==He.length-1?He.pop():lt.call(He,nt,1),--this.size,!0)},Ae.prototype.get=function(Se){var He=this.__data__,nt=ue(He,Se);return nt<0?void 0:He[nt][1]},Ae.prototype.has=function(Se){return ue(this.__data__,Se)>-1},Ae.prototype.set=function(Se,He){var nt=this.__data__,Tt=ue(nt,Se);return Tt<0?(++this.size,nt.push([Se,He])):nt[Tt][1]=He,this},we.prototype.clear=function(){this.size=0,this.__data__={hash:new Te,map:new(W||Ae),string:new Te}},we.prototype.delete=function(Se){var He=xt(this,Se).delete(Se);return this.size-=He?1:0,He},we.prototype.get=function(Se){return xt(this,Se).get(Se)},we.prototype.has=function(Se){return xt(this,Se).has(Se)},we.prototype.set=function(Se,He){var nt=xt(this,Se),Tt=nt.size;return nt.set(Se,He),this.size+=nt.size==Tt?0:1,this},$.prototype.add=$.prototype.push=function(Se){return this.__data__.set(Se,"__lodash_hash_undefined__"),this},$.prototype.has=function(Se){return this.__data__.has(Se)},Y.prototype.clear=function(){this.__data__=new Ae,this.size=0},Y.prototype.delete=function(Se){var He=this.__data__,nt=He.delete(Se);return this.size=He.size,nt},Y.prototype.get=function(Se){return this.__data__.get(Se)},Y.prototype.has=function(Se){return this.__data__.has(Se)},Y.prototype.set=function(Se,He){var nt=this.__data__;if(nt instanceof Ae){var Tt=nt.__data__;if(!W||Tt.length<199)return Tt.push([Se,He]),this.size=++nt.size,this;nt=this.__data__=new we(Tt)}return nt.set(Se,He),this.size=nt.size,this};var dn=xe?function(Se){return Se==null?[]:(Se=Object(Se),function(He,nt){for(var Tt=-1,yn=He==null?0:He.length,rn=0,Tn=[];++Tt<yn;){var pn=He[Tt];nt(pn,Tt,He)&&(Tn[rn++]=pn)}return Tn}(xe(Se),function(He){return at.call(Se,He)}))}:function(){return[]},Bt=ve;function ln(Se,He){return!!(He=He??9007199254740991)&&(typeof Se=="number"||y.test(Se))&&Se>-1&&Se%1==0&&Se<He}function Nt(Se){if(Se!=null){try{return pe.call(Se)}catch{}try{return Se+""}catch{}}return""}function zn(Se,He){return Se===He||Se!=Se&&He!=He}(R&&Bt(new R(new ArrayBuffer(1)))!="[object DataView]"||W&&Bt(new W)!=c||he&&Bt(he.resolve())!="[object Promise]"||ge&&Bt(new ge)!=g||ce&&Bt(new ce)!="[object WeakMap]")&&(Bt=function(Se){var He=ve(Se),nt=He==h?Se.constructor:void 0,Tt=nt?Nt(nt):"";if(Tt)switch(Tt){case At:return"[object DataView]";case Ct:return c;case jt:return"[object Promise]";case ct:return g;case En:return"[object WeakMap]"}return He});var Wn=et(function(){return arguments}())?et:function(Se){return gr(Se)&&Z.call(Se,"callee")&&!at.call(Se,"callee")},Ri=Array.isArray,mn=Ue||function(){return!1};function ur(Se){if(!ji(Se))return!1;var He=ve(Se);return He=="[object Function]"||He=="[object GeneratorFunction]"||He=="[object AsyncFunction]"||He=="[object Proxy]"}function Oi(Se){return typeof Se=="number"&&Se>-1&&Se%1==0&&Se<=9007199254740991}function ji(Se){var He=typeof Se;return Se!=null&&(He=="object"||He=="function")}function gr(Se){return Se!=null&&typeof Se=="object"}var $r=q?function(Se){return function(He){return Se(He)}}(q):function(Se){return gr(Se)&&Oi(Se.length)&&!!k[ve(Se)]};function Ia(Se){return(He=Se)!=null&&Oi(He.length)&&!ur(He)?de(Se):ut(Se);var He}s.exports=function(Se,He){return ht(Se,He)}}).call(this,r(15),r(33)(t))},function(t,n,r){var o,s=function(){return o===void 0&&(o=!!(window&&document&&document.all&&!window.atob)),o},l=function(){var O={};return function(U){if(O[U]===void 0){var K=document.querySelector(U);if(window.HTMLIFrameElement&&K instanceof window.HTMLIFrameElement)try{K=K.contentDocument.head}catch{K=null}O[U]=K}return O[U]}}(),c=[];function h(O){for(var U=-1,K=0;K<c.length;K++)if(c[K].identifier===O){U=K;break}return U}function g(O,U){for(var K={},q=[],Q=0;Q<O.length;Q++){var ne=O[Q],X=U.base?ne[0]+U.base:ne[0],se=K[X]||0,fe="".concat(X," ").concat(se);K[X]=se+1;var Oe=h(fe),_e={css:ne[1],media:ne[2],sourceMap:ne[3]};Oe!==-1?(c[Oe].references++,c[Oe].updater(_e)):c.push({identifier:fe,updater:V(_e,U),references:1}),q.push(fe)}return q}function b(O){var U=document.createElement("style"),K=O.attributes||{};if(K.nonce===void 0){var q=r.nc;q&&(K.nonce=q)}if(Object.keys(K).forEach(function(ne){U.setAttribute(ne,K[ne])}),typeof O.insert=="function")O.insert(U);else{var Q=l(O.insert||"head");if(!Q)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");Q.appendChild(U)}return U}var y,k=(y=[],function(O,U){return y[O]=U,y.filter(Boolean).join(`
`)});function x(O,U,K,q){var Q=K?"":q.media?"@media ".concat(q.media," {").concat(q.css,"}"):q.css;if(O.styleSheet)O.styleSheet.cssText=k(U,Q);else{var ne=document.createTextNode(Q),X=O.childNodes;X[U]&&O.removeChild(X[U]),X.length?O.insertBefore(ne,X[U]):O.appendChild(ne)}}function D(O,U,K){var q=K.css,Q=K.media,ne=K.sourceMap;if(Q?O.setAttribute("media",Q):O.removeAttribute("media"),ne&&typeof btoa<"u"&&(q+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(ne))))," */")),O.styleSheet)O.styleSheet.cssText=q;else{for(;O.firstChild;)O.removeChild(O.firstChild);O.appendChild(document.createTextNode(q))}}var L=null,M=0;function V(O,U){var K,q,Q;if(U.singleton){var ne=M++;K=L||(L=b(U)),q=x.bind(null,K,ne,!1),Q=x.bind(null,K,ne,!0)}else K=b(U),q=D.bind(null,K,U),Q=function(){(function(X){if(X.parentNode===null)return!1;X.parentNode.removeChild(X)})(K)};return q(O),function(X){if(X){if(X.css===O.css&&X.media===O.media&&X.sourceMap===O.sourceMap)return;q(O=X)}else Q()}}t.exports=function(O,U){(U=U||{}).singleton||typeof U.singleton=="boolean"||(U.singleton=s());var K=g(O=O||[],U);return function(q){if(q=q||[],Object.prototype.toString.call(q)==="[object Array]"){for(var Q=0;Q<K.length;Q++){var ne=h(K[Q]);c[ne].references--}for(var X=g(q,U),se=0;se<K.length;se++){var fe=h(K[se]);c[fe].references===0&&(c[fe].updater(),c.splice(fe,1))}K=X}}}},function(t,n,r){t.exports=function(o){var s=[];return s.toString=function(){return this.map(function(l){var c=function(h,g){var b=h[1]||"",y=h[3];if(!y)return b;if(g&&typeof btoa=="function"){var k=(D=y,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(D))))+" */"),x=y.sources.map(function(L){return"/*# sourceURL="+y.sourceRoot+L+" */"});return[b].concat(x).concat([k]).join(`
`)}var D;return[b].join(`
`)}(l,o);return l[2]?"@media "+l[2]+"{"+c+"}":c}).join("")},s.i=function(l,c){typeof l=="string"&&(l=[[null,l,""]]);for(var h={},g=0;g<this.length;g++){var b=this[g][0];b!=null&&(h[b]=!0)}for(g=0;g<l.length;g++){var y=l[g];y[0]!=null&&h[y[0]]||(c&&!y[2]?y[2]=c:c&&(y[2]="("+y[2]+") and ("+c+")"),s.push(y))}},s}},function(t,n,r){r.d(n,"c",function(){return l}),r.d(n,"b",function(){return c}),r.d(n,"a",function(){return h});var o=r(3);let s=0;function l(g){const b={editors:{},options:{}};if(typeof g[0]=="string")o.a.warn(`[CKEditorInspector] The CKEditorInspector.attach( '${g[0]}', editor ) syntax has been deprecated and will be removed in the near future. To pass a name of an editor instance, use CKEditorInspector.attach( { '${g[0]}': editor } ) instead. Learn more in https://github.com/ckeditor/ckeditor5-inspector/blob/master/README.md.`),b.editors[g[0]]=g[1];else{if((y=g[0]).model&&y.editing)b.editors["editor-"+ ++s]=g[0];else for(const k in g[0])b.editors[k]=g[0][k];b.options=g[1]||b.options}var y;return b}function c(g){return[...g][0][0]||""}function h(g,b){const y=Math.min(g.length,b.length);for(let k=0;k<y;k++)if(g[k]!=b[k])return k;return g.length==b.length?"same":g.length<b.length?"prefix":"extension"}},function(t,n,r){r.d(n,"a",function(){return c}),r.d(n,"d",function(){return b}),r.d(n,"c",function(){return y}),r.d(n,"e",function(){return k}),r.d(n,"b",function(){return x});var o=r(2),s=r(8),l=r(1);const c="https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view",h=`&lt;!--The View UI element content has been skipped. <a href="${c}_uielement-UIElement.html" target="_blank">Find out why</a>. --&gt;`,g=`&lt;!--The View raw element content has been skipped. <a href="${c}_rawelement-RawElement.html" target="_blank">Find out why</a>. --&gt;`;function b(O){return O?[...O.editing.view.document.roots]:[]}function y(O,U){if(!O)return[];const K=[],q=O.editing.view.document.selection;for(const Q of q.getRanges())Q.root.rootName===U&&K.push({type:"selection",start:Object(o.a)(Q.start),end:Object(o.a)(Q.end)});return K}function k({currentEditor:O,currentRootName:U,ranges:K}){return!O||!U?null:[D(O.editing.view.document.getRoot(U),[...K])]}function x(O){const U={editorNode:O,properties:{},attributes:{},customProperties:{}};if(Object(o.d)(O)){Object(o.g)(O)?(U.type="RootEditableElement",U.name=O.rootName,U.url=c+"_rooteditableelement-RootEditableElement.html"):(U.name=O.name,Object(o.b)(O)?(U.type="AttributeElement",U.url=c+"_attributeelement-AttributeElement.html"):Object(o.e)(O)?(U.type="EmptyElement",U.url=c+"_emptyelement-EmptyElement.html"):Object(o.h)(O)?(U.type="UIElement",U.url=c+"_uielement-UIElement.html"):Object(o.f)(O)?(U.type="RawElement",U.url=c+"_rawelement-RawElement.html"):Object(o.c)(O)?(U.type="EditableElement",U.url=c+"_editableelement-EditableElement.html"):(U.type="ContainerElement",U.url=c+"_containerelement-ContainerElement.html")),V(O).forEach(([K,q])=>{U.attributes[K]={value:q}}),U.properties={index:{value:O.index},isEmpty:{value:O.isEmpty},childCount:{value:O.childCount}};for(let[K,q]of O.getCustomProperties())typeof K=="symbol"&&(K=K.toString()),U.customProperties[K]={value:q}}else U.name=O.data,U.type="Text",U.url=c+"_text-Text.html",U.properties={index:{value:O.index}};return U.properties=Object(l.b)(U.properties),U.customProperties=Object(l.b)(U.customProperties),U.attributes=Object(l.b)(U.attributes),U}function D(O,U){const K={};return Object.assign(K,{index:O.index,path:O.getPath(),node:O,positionsBefore:[],positionsAfter:[]}),Object(o.d)(O)?function(q,Q){const ne=q.node;Object.assign(q,{type:"element",children:[],positions:[]}),q.name=ne.name,Object(o.b)(ne)?q.elementType="attribute":Object(o.g)(ne)?q.elementType="root":Object(o.e)(ne)?q.elementType="empty":Object(o.h)(ne)?q.elementType="ui":Object(o.f)(ne)?q.elementType="raw":q.elementType="container",Object(o.e)(ne)?q.presentation={isEmpty:!0}:Object(o.h)(ne)?q.children.push({type:"comment",text:h}):Object(o.f)(ne)&&q.children.push({type:"comment",text:g});for(const X of ne.getChildren())q.children.push(D(X,Q));(function(X,se){for(const fe of se){const Oe=L(X,fe);for(const _e of Oe){const Ie=_e.offset;if(Ie===0){const re=X.children[0];re?re.positionsBefore.push(_e):X.positions.push(_e)}else if(Ie===X.children.length){const re=X.children[X.children.length-1];re?re.positionsAfter.push(_e):X.positions.push(_e)}else{let re=_e.isEnd?0:X.children.length-1,ae=X.children[re];for(;ae;){if(ae.index===Ie){ae.positionsBefore.push(_e);break}if(ae.index+1===Ie){ae.positionsAfter.push(_e);break}re+=_e.isEnd?1:-1,ae=X.children[re]}}}}})(q,Q),q.attributes=function(X){const se=V(X).map(([fe,Oe])=>[fe,Object(l.a)(Oe,!1)]);return new Map(se)}(ne)}(K,U):function(q,Q){Object.assign(q,{type:"text",startOffset:0,text:q.node.data,positions:[]});for(const ne of Q){const X=L(q,ne);q.positions.push(...X)}}(K,U),K}function L(O,U){const K=O.path,q=U.start.path,Q=U.end.path,ne=[];return M(K,q)&&ne.push({offset:q[q.length-1],isEnd:!1,presentation:U.presentation||null,type:U.type,name:U.name||null}),M(K,Q)&&ne.push({offset:Q[Q.length-1],isEnd:!0,presentation:U.presentation||null,type:U.type,name:U.name||null}),ne}function M(O,U){return O.length===U.length-1&&Object(s.a)(O,U)==="prefix"}function V(O){return[...O.getAttributes()].sort(([U],[K])=>U.toUpperCase()<K.toUpperCase()?-1:1)}},function(t,n,r){r.d(n,"d",function(){return g}),r.d(n,"c",function(){return b}),r.d(n,"a",function(){return y}),r.d(n,"e",function(){return k}),r.d(n,"b",function(){return x});var o=r(4),s=r(8),l=r(1);const c="https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_",h=["#03a9f4","#fb8c00","#009688","#e91e63","#4caf50","#00bcd4","#607d8b","#cddc39","#9c27b0","#f44336","#6d4c41","#8bc34a","#3f51b5","#2196f3","#f4511e","#673ab7","#ffb300"];function g(U){if(!U)return[];const K=[...U.model.document.roots];return K.filter(({rootName:q})=>q!=="$graveyard").concat(K.filter(({rootName:q})=>q==="$graveyard"))}function b(U,K){if(!U)return[];const q=[],Q=U.model;for(const ne of Q.document.selection.getRanges())ne.root.rootName===K&&q.push({type:"selection",start:Object(o.a)(ne.start),end:Object(o.a)(ne.end)});return q}function y(U,K){if(!U)return[];const q=[],Q=U.model;let ne=0;for(const X of Q.markers){const{name:se,affectsData:fe,managedUsingOperations:Oe}=X,_e=X.getStart(),Ie=X.getEnd();_e.root.rootName===K&&q.push({type:"marker",marker:X,name:se,affectsData:fe,managedUsingOperations:Oe,presentation:{color:h[ne++%(h.length-1)]},start:Object(o.a)(_e),end:Object(o.a)(Ie)})}return q}function k({currentEditor:U,currentRootName:K,ranges:q,markers:Q}){return U?[D(U.model.document.getRoot(K),[...q,...Q])]:[]}function x(U,K){const q={editorNode:K,properties:{},attributes:{}};Object(o.c)(K)?(Object(o.d)(K)?(q.type="RootElement",q.name=K.rootName,q.url=c+"rootelement-RootElement.html"):(q.type="Element",q.name=K.name,q.url=c+"element-Element.html"),q.properties={childCount:{value:K.childCount},startOffset:{value:K.startOffset},endOffset:{value:K.endOffset},maxOffset:{value:K.maxOffset}}):(q.name=K.data,q.type="Text",q.url=c+"text-Text.html",q.properties={startOffset:{value:K.startOffset},endOffset:{value:K.endOffset},offsetSize:{value:K.offsetSize}}),q.properties.path={value:Object(o.b)(K)},M(K).forEach(([Q,ne])=>{q.attributes[Q]={value:ne}}),q.properties=Object(l.b)(q.properties),q.attributes=Object(l.b)(q.attributes);for(const Q in q.attributes){const ne={},X=U.model.schema.getAttributeProperties(Q);for(const se in X)ne[se]={value:X[se]};q.attributes[Q].subProperties=Object(l.b)(ne)}return q}function D(U,K){const q={},{startOffset:Q,endOffset:ne}=U;return Object.assign(q,{startOffset:Q,endOffset:ne,node:U,path:U.getPath(),positionsBefore:[],positionsAfter:[]}),Object(o.c)(U)?function(X,se){const fe=X.node;Object.assign(X,{type:"element",name:fe.name,children:[],maxOffset:fe.maxOffset,positions:[]});for(const Oe of fe.getChildren())X.children.push(D(Oe,se));(function(Oe,_e){for(const Ie of _e){const re=V(Oe,Ie);for(const ae of re){const pe=ae.offset;if(pe===0){const Z=Oe.children[0];Z?Z.positionsBefore.push(ae):Oe.positions.push(ae)}else if(pe===Oe.maxOffset){const Z=Oe.children[Oe.children.length-1];Z?Z.positionsAfter.push(ae):Oe.positions.push(ae)}else{let Z=ae.isEnd?0:Oe.children.length-1,Pe=Oe.children[Z];for(;Pe;){if(Pe.startOffset===pe){Pe.positionsBefore.push(ae);break}if(Pe.endOffset===pe){const je=Oe.children[Z+1],wt=Pe.type==="text"&&je&&je.type==="element",oe=Pe.type==="element"&&je&&je.type==="text",z=Pe.type==="text"&&je&&je.type==="text";ae.isEnd&&(wt||oe||z)?je.positionsBefore.push(ae):Pe.positionsAfter.push(ae);break}if(Pe.startOffset<pe&&Pe.endOffset>pe){Pe.positions.push(ae);break}Z+=ae.isEnd?1:-1,Pe=Oe.children[Z]}}}}})(X,se),X.attributes=L(fe)}(q,K):function(X){const se=X.node;Object.assign(X,{type:"text",text:se.data,positions:[],presentation:{dontRenderAttributeValue:!0}}),X.attributes=L(se)}(q),q}function L(U){const K=M(U).map(([q,Q])=>[q,Object(l.a)(Q,!1)]);return new Map(K)}function M(U){return[...U.getAttributes()].sort(([K],[q])=>K<q?-1:1)}function V(U,K){const q=U.path,Q=K.start.path,ne=K.end.path,X=[];return O(q,Q)&&X.push({offset:Q[Q.length-1],isEnd:!1,presentation:K.presentation||null,type:K.type,name:K.name||null}),O(q,ne)&&X.push({offset:ne[ne.length-1],isEnd:!0,presentation:K.presentation||null,type:K.type,name:K.name||null}),X}function O(U,K){return U.length===K.length-1&&Object(s.a)(U,K)==="prefix"}},function(t,n,r){r.d(n,"a",function(){return M});var o=r(0),s=r.n(o),l=r(5),c=r.n(l);class h extends o.Component{constructor(O){super(O),this.handleClick=this.handleClick.bind(this)}handleClick(O){this.globalTreeProps.onClick(O,this.definition.node)}getChildren(){return this.definition.children.map((O,U)=>L(O,U,this.props.globalTreeProps))}get definition(){return this.props.definition}get globalTreeProps(){return this.props.globalTreeProps||{}}get isActive(){return this.definition.node===this.globalTreeProps.activeNode}shouldComponentUpdate(O){return!c()(this.props,O)}}var g=r(1);class b extends o.PureComponent{render(){let O;const U=Object(g.c)(this.props.value,500);return this.props.dontRenderValue||(O=s.a.createElement("span",{className:"ck-inspector-tree-node__attribute__value"},U)),s.a.createElement("span",{className:"ck-inspector-tree-node__attribute"},s.a.createElement("span",{className:"ck-inspector-tree-node__attribute__name",title:U},this.props.name),O)}}class y extends o.Component{render(){const O=this.props.definition,U={className:["ck-inspector-tree__position",O.type==="selection"?"ck-inspector-tree__position_selection":"",O.type==="marker"?"ck-inspector-tree__position_marker":"",O.isEnd?"ck-inspector-tree__position_end":""].join(" "),style:{}};return O.presentation&&O.presentation.color&&(U.style["--ck-inspector-color-tree-position"]=O.presentation.color),O.type==="marker"&&(U["data-marker-name"]=O.name),s.a.createElement("span",U,"​")}shouldComponentUpdate(O){return!c()(this.props,O)}}class k extends h{render(){const O=this.definition,U=O.presentation,K=U&&U.isEmpty,q=U&&U.cssClass,Q=this.getChildren(),ne=["ck-inspector-code","ck-inspector-tree-node",this.isActive?"ck-inspector-tree-node_active":"",K?"ck-inspector-tree-node_empty":"",q],X=[],se=[];O.positionsBefore&&O.positionsBefore.forEach((Oe,_e)=>{X.push(s.a.createElement(y,{key:"position-before:"+_e,definition:Oe}))}),O.positionsAfter&&O.positionsAfter.forEach((Oe,_e)=>{se.push(s.a.createElement(y,{key:"position-after:"+_e,definition:Oe}))}),O.positions&&O.positions.forEach((Oe,_e)=>{Q.push(s.a.createElement(y,{key:"position"+_e,definition:Oe}))});let fe=O.name;return this.globalTreeProps.showElementTypes&&(fe=O.elementType+":"+fe),s.a.createElement("div",{className:ne.join(" "),onClick:this.handleClick},X,s.a.createElement("span",{className:"ck-inspector-tree-node__name"},s.a.createElement("span",{className:"ck-inspector-tree-node__name__bracket ck-inspector-tree-node__name__bracket_open"}),fe,this.getAttributes(),K?"":s.a.createElement("span",{className:"ck-inspector-tree-node__name__bracket ck-inspector-tree-node__name__bracket_close"})),s.a.createElement("div",{className:"ck-inspector-tree-node__content"},Q),K?"":s.a.createElement("span",{className:"ck-inspector-tree-node__name ck-inspector-tree-node__name_close"},s.a.createElement("span",{className:"ck-inspector-tree-node__name__bracket ck-inspector-tree-node__name__bracket_open"}),"/",fe,s.a.createElement("span",{className:"ck-inspector-tree-node__name__bracket ck-inspector-tree-node__name__bracket_close"}),se))}getAttributes(){const O=[],U=this.definition;for(const[K,q]of U.attributes)O.push(s.a.createElement(b,{key:K,name:K,value:q}));return O}shouldComponentUpdate(O){return!c()(this.props,O)}}class x extends h{render(){const O=this.definition,U=["ck-inspector-tree-text",this.isActive?"ck-inspector-tree-node_active":""].join(" ");let K=this.definition.text;O.positions&&O.positions.length&&(K=K.split(""),Array.from(O.positions).sort((Q,ne)=>Q.offset<ne.offset?-1:Q.offset===ne.offset?0:1).reverse().forEach((Q,ne)=>{K.splice(Q.offset-O.startOffset,0,s.a.createElement(y,{key:"position"+ne,definition:Q}))}));const q=[K];return O.positionsBefore&&O.positionsBefore.length&&O.positionsBefore.forEach((Q,ne)=>{q.unshift(s.a.createElement(y,{key:"position-before:"+ne,definition:Q}))}),O.positionsAfter&&O.positionsAfter.length&&O.positionsAfter.forEach((Q,ne)=>{q.push(s.a.createElement(y,{key:"position-after:"+ne,definition:Q}))}),s.a.createElement("span",{className:U,onClick:this.handleClick},s.a.createElement("span",{className:"ck-inspector-tree-node__content"},this.globalTreeProps.showCompactText?"":this.getAttributes(),this.globalTreeProps.showCompactText?"":'"',q,this.globalTreeProps.showCompactText?"":'"'))}getAttributes(){const O=[],U=this.definition,K=U.presentation,q=K&&K.dontRenderAttributeValue;for(const[Q,ne]of U.attributes)O.push(s.a.createElement(b,{key:Q,name:Q,value:ne,dontRenderValue:q}));return s.a.createElement("span",{className:"ck-inspector-tree-text__attributes"},O)}shouldComponentUpdate(O){return!c()(this.props,O)}}class D extends o.Component{render(){return s.a.createElement("span",{className:"ck-inspector-tree-comment",dangerouslySetInnerHTML:{__html:this.props.definition.text}})}}function L(V,O,U){return V.type==="element"?s.a.createElement(k,{key:O,definition:V,globalTreeProps:U}):V.type==="text"?s.a.createElement(x,{key:O,definition:V,globalTreeProps:U}):V.type==="comment"?s.a.createElement(D,{key:O,definition:V}):void 0}r(34);class M extends o.Component{render(){let O;return O=this.props.definition?this.props.definition.map((U,K)=>L(U,K,{onClick:this.props.onClick,showCompactText:this.props.showCompactText,showElementTypes:this.props.showElementTypes,activeNode:this.props.activeNode})):"Nothing to show.",s.a.createElement("div",{className:["ck-inspector-tree",...this.props.className||[],this.props.textDirection?"ck-inspector-tree_text-direction_"+this.props.textDirection:"",this.props.showCompactText?"ck-inspector-tree_compact-text":""].join(" ")},O)}}},function(t,n,r){(function o(){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE=="function")try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}})(),t.exports=r(22)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.stringifyPath=n.quoteKey=n.isValidVariableName=n.IS_VALID_IDENTIFIER=n.quoteString=void 0;const o=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s=new Map([["\b","\\b"],["	","\\t"],[`
`,"\\n"],["\f","\\f"],["\r","\\r"],["'","\\'"],['"','\\"'],["\\","\\\\"]]);function l(g){return s.get(g)||"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)}n.quoteString=function(g){return`'${g.replace(o,l)}'`};const c=new Set("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "));function h(g){return typeof g=="string"&&!c.has(g)&&n.IS_VALID_IDENTIFIER.test(g)}n.IS_VALID_IDENTIFIER=/^[A-Za-z_$][A-Za-z0-9_$]*$/,n.isValidVariableName=h,n.quoteKey=function(g,b){return h(g)?g:b(g)},n.stringifyPath=function(g,b){let y="";for(const k of g)h(k)?y+="."+k:y+=`[${b(k)}]`;return y}},function(t,n){function r(b,y,k,x){var D,L=(D=x)==null||typeof D=="number"||typeof D=="boolean"?x:k(x),M=y.get(L);return M===void 0&&(M=b.call(this,x),y.set(L,M)),M}function o(b,y,k){var x=Array.prototype.slice.call(arguments,3),D=k(x),L=y.get(D);return L===void 0&&(L=b.apply(this,x),y.set(D,L)),L}function s(b,y,k,x,D){return k.bind(y,b,x,D)}function l(b,y){return s(b,this,b.length===1?r:o,y.cache.create(),y.serializer)}function c(){return JSON.stringify(arguments)}function h(){this.cache=Object.create(null)}h.prototype.has=function(b){return b in this.cache},h.prototype.get=function(b){return this.cache[b]},h.prototype.set=function(b,y){this.cache[b]=y};var g={create:function(){return new h}};t.exports=function(b,y){var k=y&&y.cache?y.cache:g,x=y&&y.serializer?y.serializer:c;return(y&&y.strategy?y.strategy:l)(b,{cache:k,serializer:x})},t.exports.strategies={variadic:function(b,y){return s(b,this,o,y.cache.create(),y.serializer)},monadic:function(b,y){return s(b,this,r,y.cache.create(),y.serializer)}}},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}t.exports=r},function(t,n,r){var o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;function c(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}t.exports=function(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var g={},b=0;b<10;b++)g["_"+String.fromCharCode(b)]=b;if(Object.getOwnPropertyNames(g).map(function(k){return g[k]}).join("")!=="0123456789")return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(k){y[k]=k}),Object.keys(Object.assign({},y)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(h,g){for(var b,y,k=c(h),x=1;x<arguments.length;x++){for(var D in b=Object(arguments[x]))s.call(b,D)&&(k[D]=b[D]);if(o){y=o(b);for(var L=0;L<y.length;L++)l.call(b,y[L])&&(k[y[L]]=b[y[L]])}}return k}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FunctionParser=n.dedentFunction=n.functionToString=n.USED_METHOD_KEY=void 0;const o=r(13),s={" "(){}}[" "].toString().charAt(0)==='"',l={Function:"function ",GeneratorFunction:"function* ",AsyncFunction:"async function ",AsyncGeneratorFunction:"async function* "},c={Function:"",GeneratorFunction:"*",AsyncFunction:"async ",AsyncGeneratorFunction:"async *"},h=new Set("case delete else in instanceof new return throw typeof void , ; : + - ! ~ & | ^ * / % < > ? =".split(" "));n.USED_METHOD_KEY=new WeakSet;function g(y){let k;for(const x of y.split(`
`).slice(1)){const D=/^[\s\t]+/.exec(x);if(!D)return y;const[L]=D;(k===void 0||L.length<k.length)&&(k=L)}return k?y.split(`
`+k).join(`
`):y}n.functionToString=(y,k,x,D)=>{const L=typeof D=="string"?D:void 0;return L!==void 0&&n.USED_METHOD_KEY.add(y),new b(y,k,x,L).stringify()},n.dedentFunction=g;class b{constructor(k,x,D,L){this.fn=k,this.indent=x,this.next=D,this.key=L,this.pos=0,this.hadKeyword=!1,this.fnString=Function.prototype.toString.call(k),this.fnType=k.constructor.name,this.keyQuote=L===void 0?"":o.quoteKey(L,D),this.keyPrefix=L===void 0?"":`${this.keyQuote}:${x?" ":""}`,this.isMethodCandidate=L!==void 0&&(this.fn.name===""||this.fn.name===L)}stringify(){const k=this.tryParse();return k?g(k):`${this.keyPrefix}void ${this.next(this.fnString)}`}getPrefix(){return this.isMethodCandidate&&!this.hadKeyword?c[this.fnType]+this.keyQuote:this.keyPrefix+l[this.fnType]}tryParse(){if(this.fnString[this.fnString.length-1]!=="}")return this.keyPrefix+this.fnString;if(this.fn.name){const x=this.tryStrippingName();if(x)return x}const k=this.pos;if(this.consumeSyntax()==="class")return this.fnString;if(this.pos=k,this.tryParsePrefixTokens()){const x=this.tryStrippingName();if(x)return x;let D=this.pos;switch(this.consumeSyntax("WORD_LIKE")){case"WORD_LIKE":this.isMethodCandidate&&!this.hadKeyword&&(D=this.pos);case"()":if(this.fnString.substr(this.pos,2)==="=>")return this.keyPrefix+this.fnString;this.pos=D;case'"':case"'":case"[]":return this.getPrefix()+this.fnString.substr(this.pos)}}}tryStrippingName(){if(s)return;let k=this.pos;const x=this.fnString.substr(this.pos,this.fn.name.length);if(x===this.fn.name&&(this.pos+=x.length,this.consumeSyntax()==="()"&&this.consumeSyntax()==="{}"&&this.pos===this.fnString.length))return!this.isMethodCandidate&&o.isValidVariableName(x)||(k+=x.length),this.getPrefix()+this.fnString.substr(k);this.pos=k}tryParsePrefixTokens(){let k=this.pos;switch(this.hadKeyword=!1,this.fnType){case"AsyncFunction":if(this.consumeSyntax()!=="async")return!1;k=this.pos;case"Function":return this.consumeSyntax()==="function"?this.hadKeyword=!0:this.pos=k,!0;case"AsyncGeneratorFunction":if(this.consumeSyntax()!=="async")return!1;case"GeneratorFunction":let x=this.consumeSyntax();return x==="function"&&(x=this.consumeSyntax(),this.hadKeyword=!0),x==="*"}}consumeSyntax(k){const x=this.consumeMatch(/^(?:([A-Za-z_0-9$\xA0-\uFFFF]+)|=>|\+\+|\-\-|.)/);if(!x)return;const[D,L]=x;if(this.consumeWhitespace(),L)return k||L;switch(D){case"(":return this.consumeSyntaxUntil("(",")");case"[":return this.consumeSyntaxUntil("[","]");case"{":return this.consumeSyntaxUntil("{","}");case"`":return this.consumeTemplate();case'"':return this.consumeRegExp(/^(?:[^\\"]|\\.)*"/,'"');case"'":return this.consumeRegExp(/^(?:[^\\']|\\.)*'/,"'")}return D}consumeSyntaxUntil(k,x){let D=!0;for(;;){const L=this.consumeSyntax();if(L===x)return k+x;if(!L||L===")"||L==="]"||L==="}")return;L==="/"&&D&&this.consumeMatch(/^(?:\\.|[^\\\/\n[]|\[(?:\\.|[^\]])*\])+\/[a-z]*/)?(D=!1,this.consumeWhitespace()):D=h.has(L)}}consumeMatch(k){const x=k.exec(this.fnString.substr(this.pos));return x&&(this.pos+=x[0].length),x}consumeRegExp(k,x){const D=k.exec(this.fnString.substr(this.pos));if(D)return this.pos+=D[0].length,this.consumeWhitespace(),x}consumeTemplate(){for(;;){if(this.consumeMatch(/^(?:[^`$\\]|\\.|\$(?!{))*/),this.fnString[this.pos]==="`")return this.pos++,this.consumeWhitespace(),"`";if(this.fnString.substr(this.pos,2)!=="${"||(this.pos+=2,this.consumeWhitespace(),!this.consumeSyntaxUntil("{","}")))return}}consumeWhitespace(){this.consumeMatch(/^(?:\s|\/\/.*|\/\*[^]*?\*\/)*/)}}n.FunctionParser=b},function(t,n,r){t.exports=r(53)()},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.stringify=void 0;const o=r(25),s=r(13),l=Symbol("root");n.stringify=function(c,h,g,b={}){const y=typeof g=="string"?g:" ".repeat(g||0),k=[],x=new Set,D=new Map,L=new Map;let M=0;const{maxDepth:V=100,references:O=!1,skipUndefinedProperties:U=!1,maxValues:K=1e5}=b,q=function(se){return se?(fe,Oe,_e,Ie)=>se(fe,Oe,re=>o.toString(re,Oe,_e,Ie),Ie):o.toString}(h),Q=(se,fe)=>{if(++M>K||U&&se===void 0||k.length>V)return;if(fe===void 0)return q(se,y,Q,fe);k.push(fe);const Oe=ne(se,fe===l?void 0:fe);return k.pop(),Oe},ne=O?(se,fe)=>{if(se!==null&&(typeof se=="object"||typeof se=="function"||typeof se=="symbol")){if(D.has(se))return L.set(k.slice(1),D.get(se)),q(void 0,y,Q,fe);D.set(se,k.slice(1))}return q(se,y,Q,fe)}:(se,fe)=>{if(x.has(se))return;x.add(se);const Oe=q(se,y,Q,fe);return x.delete(se),Oe},X=Q(c,l);if(L.size){const se=y?" ":"",fe=y?`
`:"";let Oe=`var x${se}=${se}${X};${fe}`;for(const[_e,Ie]of L.entries())Oe+=`x${s.stringifyPath(_e,Q)}${se}=${se}x${s.stringifyPath(Ie,Q)};${fe}`;return`(function${se}()${se}{${fe}${Oe}return x;${fe}}())`}return X}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.findInArray=function(o,s){for(var l=0,c=o.length;l<c;l++)if(s.apply(s,[o[l],l,o]))return o[l]},n.isFunction=function(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"},n.isNum=function(o){return typeof o=="number"&&!isNaN(o)},n.int=function(o){return parseInt(o,10)},n.dontSetMe=function(o,s,l){if(o[s])return new Error("Invalid prop ".concat(s," passed to ").concat(l," - do not set this, set it on the child."))}},function(t,n,r){var o=r(16),s=typeof Symbol=="function"&&Symbol.for,l=s?Symbol.for("react.element"):60103,c=s?Symbol.for("react.portal"):60106,h=s?Symbol.for("react.fragment"):60107,g=s?Symbol.for("react.strict_mode"):60108,b=s?Symbol.for("react.profiler"):60114,y=s?Symbol.for("react.provider"):60109,k=s?Symbol.for("react.context"):60110,x=s?Symbol.for("react.forward_ref"):60112,D=s?Symbol.for("react.suspense"):60113,L=s?Symbol.for("react.memo"):60115,M=s?Symbol.for("react.lazy"):60116,V=typeof Symbol=="function"&&Symbol.iterator;function O(Ee){for(var xe="https://reactjs.org/docs/error-decoder.html?invariant="+Ee,Ue=1;Ue<arguments.length;Ue++)xe+="&args[]="+encodeURIComponent(arguments[Ue]);return"Minified React error #"+Ee+"; visit "+xe+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K={};function q(Ee,xe,Ue){this.props=Ee,this.context=xe,this.refs=K,this.updater=Ue||U}function Q(){}function ne(Ee,xe,Ue){this.props=Ee,this.context=xe,this.refs=K,this.updater=Ue||U}q.prototype.isReactComponent={},q.prototype.setState=function(Ee,xe){if(typeof Ee!="object"&&typeof Ee!="function"&&Ee!=null)throw Error(O(85));this.updater.enqueueSetState(this,Ee,xe,"setState")},q.prototype.forceUpdate=function(Ee){this.updater.enqueueForceUpdate(this,Ee,"forceUpdate")},Q.prototype=q.prototype;var X=ne.prototype=new Q;X.constructor=ne,o(X,q.prototype),X.isPureReactComponent=!0;var se={current:null},fe=Object.prototype.hasOwnProperty,Oe={key:!0,ref:!0,__self:!0,__source:!0};function _e(Ee,xe,Ue){var P,R={},W=null,he=null;if(xe!=null)for(P in xe.ref!==void 0&&(he=xe.ref),xe.key!==void 0&&(W=""+xe.key),xe)fe.call(xe,P)&&!Oe.hasOwnProperty(P)&&(R[P]=xe[P]);var ge=arguments.length-2;if(ge===1)R.children=Ue;else if(1<ge){for(var ce=Array(ge),$e=0;$e<ge;$e++)ce[$e]=arguments[$e+2];R.children=ce}if(Ee&&Ee.defaultProps)for(P in ge=Ee.defaultProps)R[P]===void 0&&(R[P]=ge[P]);return{$$typeof:l,type:Ee,key:W,ref:he,props:R,_owner:se.current}}function Ie(Ee){return typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===l}var re=/\/+/g,ae=[];function pe(Ee,xe,Ue,P){if(ae.length){var R=ae.pop();return R.result=Ee,R.keyPrefix=xe,R.func=Ue,R.context=P,R.count=0,R}return{result:Ee,keyPrefix:xe,func:Ue,context:P,count:0}}function Z(Ee){Ee.result=null,Ee.keyPrefix=null,Ee.func=null,Ee.context=null,Ee.count=0,10>ae.length&&ae.push(Ee)}function Pe(Ee,xe,Ue){return Ee==null?0:function P(R,W,he,ge){var ce=typeof R;ce!=="undefined"&&ce!=="boolean"||(R=null);var $e=!1;if(R===null)$e=!0;else switch(ce){case"string":case"number":$e=!0;break;case"object":switch(R.$$typeof){case l:case c:$e=!0}}if($e)return he(ge,R,W===""?"."+je(R,0):W),1;if($e=0,W=W===""?".":W+":",Array.isArray(R))for(var At=0;At<R.length;At++){var Ct=W+je(ce=R[At],At);$e+=P(ce,Ct,he,ge)}else if(R===null||typeof R!="object"?Ct=null:Ct=typeof(Ct=V&&R[V]||R["@@iterator"])=="function"?Ct:null,typeof Ct=="function")for(R=Ct.call(R),At=0;!(ce=R.next()).done;)$e+=P(ce=ce.value,Ct=W+je(ce,At++),he,ge);else if(ce==="object")throw he=""+R,Error(O(31,he==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":he,""));return $e}(Ee,"",xe,Ue)}function je(Ee,xe){return typeof Ee=="object"&&Ee!==null&&Ee.key!=null?function(Ue){var P={"=":"=0",":":"=2"};return"$"+(""+Ue).replace(/[=:]/g,function(R){return P[R]})}(Ee.key):xe.toString(36)}function wt(Ee,xe){Ee.func.call(Ee.context,xe,Ee.count++)}function oe(Ee,xe,Ue){var P=Ee.result,R=Ee.keyPrefix;Ee=Ee.func.call(Ee.context,xe,Ee.count++),Array.isArray(Ee)?z(Ee,P,Ue,function(W){return W}):Ee!=null&&(Ie(Ee)&&(Ee=function(W,he){return{$$typeof:l,type:W.type,key:he,ref:W.ref,props:W.props,_owner:W._owner}}(Ee,R+(!Ee.key||xe&&xe.key===Ee.key?"":(""+Ee.key).replace(re,"$&/")+"/")+Ue)),P.push(Ee))}function z(Ee,xe,Ue,P,R){var W="";Ue!=null&&(W=(""+Ue).replace(re,"$&/")+"/"),Pe(Ee,oe,xe=pe(xe,W,P,R)),Z(xe)}var ke={current:null};function at(){var Ee=ke.current;if(Ee===null)throw Error(O(321));return Ee}var lt={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:se,IsSomeRendererActing:{current:!1},assign:o};n.Children={map:function(Ee,xe,Ue){if(Ee==null)return Ee;var P=[];return z(Ee,P,null,xe,Ue),P},forEach:function(Ee,xe,Ue){if(Ee==null)return Ee;Pe(Ee,wt,xe=pe(null,null,xe,Ue)),Z(xe)},count:function(Ee){return Pe(Ee,function(){return null},null)},toArray:function(Ee){var xe=[];return z(Ee,xe,null,function(Ue){return Ue}),xe},only:function(Ee){if(!Ie(Ee))throw Error(O(143));return Ee}},n.Component=q,n.Fragment=h,n.Profiler=b,n.PureComponent=ne,n.StrictMode=g,n.Suspense=D,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lt,n.cloneElement=function(Ee,xe,Ue){if(Ee==null)throw Error(O(267,Ee));var P=o({},Ee.props),R=Ee.key,W=Ee.ref,he=Ee._owner;if(xe!=null){if(xe.ref!==void 0&&(W=xe.ref,he=se.current),xe.key!==void 0&&(R=""+xe.key),Ee.type&&Ee.type.defaultProps)var ge=Ee.type.defaultProps;for(ce in xe)fe.call(xe,ce)&&!Oe.hasOwnProperty(ce)&&(P[ce]=xe[ce]===void 0&&ge!==void 0?ge[ce]:xe[ce])}var ce=arguments.length-2;if(ce===1)P.children=Ue;else if(1<ce){ge=Array(ce);for(var $e=0;$e<ce;$e++)ge[$e]=arguments[$e+2];P.children=ge}return{$$typeof:l,type:Ee.type,key:R,ref:W,props:P,_owner:he}},n.createContext=function(Ee,xe){return xe===void 0&&(xe=null),(Ee={$$typeof:k,_calculateChangedBits:xe,_currentValue:Ee,_currentValue2:Ee,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:y,_context:Ee},Ee.Consumer=Ee},n.createElement=_e,n.createFactory=function(Ee){var xe=_e.bind(null,Ee);return xe.type=Ee,xe},n.createRef=function(){return{current:null}},n.forwardRef=function(Ee){return{$$typeof:x,render:Ee}},n.isValidElement=Ie,n.lazy=function(Ee){return{$$typeof:M,_ctor:Ee,_status:-1,_result:null}},n.memo=function(Ee,xe){return{$$typeof:L,type:Ee,compare:xe===void 0?null:xe}},n.useCallback=function(Ee,xe){return at().useCallback(Ee,xe)},n.useContext=function(Ee,xe){return at().useContext(Ee,xe)},n.useDebugValue=function(){},n.useEffect=function(Ee,xe){return at().useEffect(Ee,xe)},n.useImperativeHandle=function(Ee,xe,Ue){return at().useImperativeHandle(Ee,xe,Ue)},n.useLayoutEffect=function(Ee,xe){return at().useLayoutEffect(Ee,xe)},n.useMemo=function(Ee,xe){return at().useMemo(Ee,xe)},n.useReducer=function(Ee,xe,Ue){return at().useReducer(Ee,xe,Ue)},n.useRef=function(Ee){return at().useRef(Ee)},n.useState=function(Ee){return at().useState(Ee)},n.version="16.14.0"},function(t,n,r){var o=r(0),s=r(16),l=r(23);function c(d){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)f+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!o)throw Error(c(227));function h(d,f,w,C,S,B,j,te,Re){var De=Array.prototype.slice.call(arguments,3);try{f.apply(w,De)}catch(Je){this.onError(Je)}}var g=!1,b=null,y=!1,k=null,x={onError:function(d){g=!0,b=d}};function D(d,f,w,C,S,B,j,te,Re){g=!1,b=null,h.apply(x,arguments)}var L=null,M=null,V=null;function O(d,f,w){var C=d.type||"unknown-event";d.currentTarget=V(w),function(S,B,j,te,Re,De,Je,vt,Gt){if(D.apply(this,arguments),g){if(!g)throw Error(c(198));var wn=b;g=!1,b=null,y||(y=!0,k=wn)}}(C,f,void 0,d),d.currentTarget=null}var U=null,K={};function q(){if(U)for(var d in K){var f=K[d],w=U.indexOf(d);if(!(-1<w))throw Error(c(96,d));if(!ne[w]){if(!f.extractEvents)throw Error(c(97,d));for(var C in ne[w]=f,w=f.eventTypes){var S=void 0,B=w[C],j=f,te=C;if(X.hasOwnProperty(te))throw Error(c(99,te));X[te]=B;var Re=B.phasedRegistrationNames;if(Re){for(S in Re)Re.hasOwnProperty(S)&&Q(Re[S],j,te);S=!0}else B.registrationName?(Q(B.registrationName,j,te),S=!0):S=!1;if(!S)throw Error(c(98,C,d))}}}}function Q(d,f,w){if(se[d])throw Error(c(100,d));se[d]=f,fe[d]=f.eventTypes[w].dependencies}var ne=[],X={},se={},fe={};function Oe(d){var f,w=!1;for(f in d)if(d.hasOwnProperty(f)){var C=d[f];if(!K.hasOwnProperty(f)||K[f]!==C){if(K[f])throw Error(c(102,f));K[f]=C,w=!0}}w&&q()}var _e=!(typeof window>"u"||window.document===void 0||window.document.createElement===void 0),Ie=null,re=null,ae=null;function pe(d){if(d=M(d)){if(typeof Ie!="function")throw Error(c(280));var f=d.stateNode;f&&(f=L(f),Ie(d.stateNode,d.type,f))}}function Z(d){re?ae?ae.push(d):ae=[d]:re=d}function Pe(){if(re){var d=re,f=ae;if(ae=re=null,pe(d),f)for(d=0;d<f.length;d++)pe(f[d])}}function je(d,f){return d(f)}function wt(d,f,w,C,S){return d(f,w,C,S)}function oe(){}var z=je,ke=!1,at=!1;function lt(){re===null&&ae===null||(oe(),Pe())}function Ee(d,f,w){if(at)return d(f,w);at=!0;try{return z(d,f,w)}finally{at=!1,lt()}}var xe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ue=Object.prototype.hasOwnProperty,P={},R={};function W(d,f,w,C,S,B){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=C,this.attributeNamespace=S,this.mustUseProperty=w,this.propertyName=d,this.type=f,this.sanitizeURL=B}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){he[d]=new W(d,0,!1,d,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var f=d[0];he[f]=new W(f,1,!1,d[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){he[d]=new W(d,2,!1,d.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){he[d]=new W(d,2,!1,d,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){he[d]=new W(d,3,!1,d.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(d){he[d]=new W(d,3,!0,d,null,!1)}),["capture","download"].forEach(function(d){he[d]=new W(d,4,!1,d,null,!1)}),["cols","rows","size","span"].forEach(function(d){he[d]=new W(d,6,!1,d,null,!1)}),["rowSpan","start"].forEach(function(d){he[d]=new W(d,5,!1,d.toLowerCase(),null,!1)});var ge=/[\-:]([a-z])/g;function ce(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var f=d.replace(ge,ce);he[f]=new W(f,1,!1,d,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var f=d.replace(ge,ce);he[f]=new W(f,1,!1,d,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var f=d.replace(ge,ce);he[f]=new W(f,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(d){he[d]=new W(d,1,!1,d.toLowerCase(),null,!1)}),he.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(d){he[d]=new W(d,1,!1,d.toLowerCase(),null,!0)});var $e=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function At(d,f,w,C){var S=he.hasOwnProperty(f)?he[f]:null;(S!==null?S.type===0:!C&&2<f.length&&(f[0]==="o"||f[0]==="O")&&(f[1]==="n"||f[1]==="N"))||(function(B,j,te,Re){if(j==null||function(De,Je,vt,Gt){if(vt!==null&&vt.type===0)return!1;switch(typeof Je){case"function":case"symbol":return!0;case"boolean":return!Gt&&(vt!==null?!vt.acceptsBooleans:(De=De.toLowerCase().slice(0,5))!=="data-"&&De!=="aria-");default:return!1}}(B,j,te,Re))return!0;if(Re)return!1;if(te!==null)switch(te.type){case 3:return!j;case 4:return j===!1;case 5:return isNaN(j);case 6:return isNaN(j)||1>j}return!1}(f,w,S,C)&&(w=null),C||S===null?function(B){return!!Ue.call(R,B)||!Ue.call(P,B)&&(xe.test(B)?R[B]=!0:(P[B]=!0,!1))}(f)&&(w===null?d.removeAttribute(f):d.setAttribute(f,""+w)):S.mustUseProperty?d[S.propertyName]=w===null?S.type!==3&&"":w:(f=S.attributeName,C=S.attributeNamespace,w===null?d.removeAttribute(f):(w=(S=S.type)===3||S===4&&w===!0?"":""+w,C?d.setAttributeNS(C,f,w):d.setAttribute(f,w))))}$e.hasOwnProperty("ReactCurrentDispatcher")||($e.ReactCurrentDispatcher={current:null}),$e.hasOwnProperty("ReactCurrentBatchConfig")||($e.ReactCurrentBatchConfig={suspense:null});var Ct=/^(.*)[\\\/]/,jt=typeof Symbol=="function"&&Symbol.for,ct=jt?Symbol.for("react.element"):60103,En=jt?Symbol.for("react.portal"):60106,Sn=jt?Symbol.for("react.fragment"):60107,Di=jt?Symbol.for("react.strict_mode"):60108,Te=jt?Symbol.for("react.profiler"):60114,Ae=jt?Symbol.for("react.provider"):60109,we=jt?Symbol.for("react.context"):60110,$=jt?Symbol.for("react.concurrent_mode"):60111,Y=jt?Symbol.for("react.forward_ref"):60112,de=jt?Symbol.for("react.suspense"):60113,ue=jt?Symbol.for("react.suspense_list"):60120,ve=jt?Symbol.for("react.memo"):60115,et=jt?Symbol.for("react.lazy"):60116,ht=jt?Symbol.for("react.block"):60121,ft=typeof Symbol=="function"&&Symbol.iterator;function ut(d){return d===null||typeof d!="object"?null:typeof(d=ft&&d[ft]||d["@@iterator"])=="function"?d:null}function Et(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case Sn:return"Fragment";case En:return"Portal";case Te:return"Profiler";case Di:return"StrictMode";case de:return"Suspense";case ue:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case we:return"Context.Consumer";case Ae:return"Context.Provider";case Y:var f=d.render;return f=f.displayName||f.name||"",d.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case ve:return Et(d.type);case ht:return Et(d.render);case et:if(d=d._status===1?d._result:null)return Et(d)}return null}function rt(d){var f="";do{e:switch(d.tag){case 3:case 4:case 6:case 7:case 10:case 9:var w="";break e;default:var C=d._debugOwner,S=d._debugSource,B=Et(d.type);w=null,C&&(w=Et(C.type)),C=B,B="",S?B=" (at "+S.fileName.replace(Ct,"")+":"+S.lineNumber+")":w&&(B=" (created by "+w+")"),w=`
    in `+(C||"Unknown")+B}f+=w,d=d.return}while(d);return f}function xt(d){switch(typeof d){case"boolean":case"number":case"object":case"string":case"undefined":return d;default:return""}}function Ne(d){var f=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function dn(d){d._valueTracker||(d._valueTracker=function(f){var w=Ne(f)?"checked":"value",C=Object.getOwnPropertyDescriptor(f.constructor.prototype,w),S=""+f[w];if(!f.hasOwnProperty(w)&&C!==void 0&&typeof C.get=="function"&&typeof C.set=="function"){var B=C.get,j=C.set;return Object.defineProperty(f,w,{configurable:!0,get:function(){return B.call(this)},set:function(te){S=""+te,j.call(this,te)}}),Object.defineProperty(f,w,{enumerable:C.enumerable}),{getValue:function(){return S},setValue:function(te){S=""+te},stopTracking:function(){f._valueTracker=null,delete f[w]}}}}(d))}function Bt(d){if(!d)return!1;var f=d._valueTracker;if(!f)return!0;var w=f.getValue(),C="";return d&&(C=Ne(d)?d.checked?"true":"false":d.value),(d=C)!==w&&(f.setValue(d),!0)}function ln(d,f){var w=f.checked;return s({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??d._wrapperState.initialChecked})}function Nt(d,f){var w=f.defaultValue==null?"":f.defaultValue,C=f.checked!=null?f.checked:f.defaultChecked;w=xt(f.value!=null?f.value:w),d._wrapperState={initialChecked:C,initialValue:w,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function zn(d,f){(f=f.checked)!=null&&At(d,"checked",f,!1)}function Wn(d,f){zn(d,f);var w=xt(f.value),C=f.type;if(w!=null)C==="number"?(w===0&&d.value===""||d.value!=w)&&(d.value=""+w):d.value!==""+w&&(d.value=""+w);else if(C==="submit"||C==="reset")return void d.removeAttribute("value");f.hasOwnProperty("value")?mn(d,f.type,w):f.hasOwnProperty("defaultValue")&&mn(d,f.type,xt(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(d.defaultChecked=!!f.defaultChecked)}function Ri(d,f,w){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var C=f.type;if(!(C!=="submit"&&C!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+d._wrapperState.initialValue,w||f===d.value||(d.value=f),d.defaultValue=f}(w=d.name)!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,w!==""&&(d.name=w)}function mn(d,f,w){f==="number"&&d.ownerDocument.activeElement===d||(w==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+w&&(d.defaultValue=""+w))}function ur(d,f){return d=s({children:void 0},f),(f=function(w){var C="";return o.Children.forEach(w,function(S){S!=null&&(C+=S)}),C}(f.children))&&(d.children=f),d}function Oi(d,f,w,C){if(d=d.options,f){f={};for(var S=0;S<w.length;S++)f["$"+w[S]]=!0;for(w=0;w<d.length;w++)S=f.hasOwnProperty("$"+d[w].value),d[w].selected!==S&&(d[w].selected=S),S&&C&&(d[w].defaultSelected=!0)}else{for(w=""+xt(w),f=null,S=0;S<d.length;S++){if(d[S].value===w)return d[S].selected=!0,void(C&&(d[S].defaultSelected=!0));f!==null||d[S].disabled||(f=d[S])}f!==null&&(f.selected=!0)}}function ji(d,f){if(f.dangerouslySetInnerHTML!=null)throw Error(c(91));return s({},f,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function gr(d,f){var w=f.value;if(w==null){if(w=f.children,f=f.defaultValue,w!=null){if(f!=null)throw Error(c(92));if(Array.isArray(w)){if(!(1>=w.length))throw Error(c(93));w=w[0]}f=w}f==null&&(f=""),w=f}d._wrapperState={initialValue:xt(w)}}function $r(d,f){var w=xt(f.value),C=xt(f.defaultValue);w!=null&&((w=""+w)!==d.value&&(d.value=w),f.defaultValue==null&&d.defaultValue!==w&&(d.defaultValue=w)),C!=null&&(d.defaultValue=""+C)}function Ia(d){var f=d.textContent;f===d._wrapperState.initialValue&&f!==""&&f!==null&&(d.value=f)}var Se="http://www.w3.org/1999/xhtml",He="http://www.w3.org/2000/svg";function nt(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(d,f){return d==null||d==="http://www.w3.org/1999/xhtml"?nt(f):d==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var yn,rn=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,w,C,S){MSApp.execUnsafeLocalFunction(function(){return d(f,w)})}:d}(function(d,f){if(d.namespaceURI!==He||"innerHTML"in d)d.innerHTML=f;else{for((yn=yn||document.createElement("div")).innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=yn.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;f.firstChild;)d.appendChild(f.firstChild)}});function Tn(d,f){if(f){var w=d.firstChild;if(w&&w===d.lastChild&&w.nodeType===3)return void(w.nodeValue=f)}d.textContent=f}function pn(d,f){var w={};return w[d.toLowerCase()]=f.toLowerCase(),w["Webkit"+d]="webkit"+f,w["Moz"+d]="moz"+f,w}var Fi={animationend:pn("Animation","AnimationEnd"),animationiteration:pn("Animation","AnimationIteration"),animationstart:pn("Animation","AnimationStart"),transitionend:pn("Transition","TransitionEnd")},gn={},In={};function Mi(d){if(gn[d])return gn[d];if(!Fi[d])return d;var f,w=Fi[d];for(f in w)if(w.hasOwnProperty(f)&&f in In)return gn[d]=w[f];return d}_e&&(In=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);var Fr=Mi("animationend"),Bn=Mi("animationiteration"),$i=Mi("animationstart"),dr=Mi("transitionend"),Dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qi=new(typeof WeakMap=="function"?WeakMap:Map);function br(d){var f=qi.get(d);return f===void 0&&(f=new Map,qi.set(d,f)),f}function oo(d){var f=d,w=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do 1026&(f=d).effectTag&&(w=f.return),d=f.return;while(d)}return f.tag===3?w:null}function jn(d){if(d.tag===13){var f=d.memoizedState;if(f===null&&(d=d.alternate)!==null&&(f=d.memoizedState),f!==null)return f.dehydrated}return null}function St(d){if(oo(d)!==d)throw Error(c(188))}function cn(d){if(!(d=function(w){var C=w.alternate;if(!C){if((C=oo(w))===null)throw Error(c(188));return C!==w?null:w}for(var S=w,B=C;;){var j=S.return;if(j===null)break;var te=j.alternate;if(te===null){if((B=j.return)!==null){S=B;continue}break}if(j.child===te.child){for(te=j.child;te;){if(te===S)return St(j),w;if(te===B)return St(j),C;te=te.sibling}throw Error(c(188))}if(S.return!==B.return)S=j,B=te;else{for(var Re=!1,De=j.child;De;){if(De===S){Re=!0,S=j,B=te;break}if(De===B){Re=!0,B=j,S=te;break}De=De.sibling}if(!Re){for(De=te.child;De;){if(De===S){Re=!0,S=te,B=j;break}if(De===B){Re=!0,B=te,S=j;break}De=De.sibling}if(!Re)throw Error(c(189))}}if(S.alternate!==B)throw Error(c(190))}if(S.tag!==3)throw Error(c(188));return S.stateNode.current===S?w:C}(d)))return null;for(var f=d;;){if(f.tag===5||f.tag===6)return f;if(f.child)f.child.return=f,f=f.child;else{if(f===d)break;for(;!f.sibling;){if(!f.return||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}}return null}function $t(d,f){if(f==null)throw Error(c(30));return d==null?f:Array.isArray(d)?Array.isArray(f)?(d.push.apply(d,f),d):(d.push(f),d):Array.isArray(f)?[d].concat(f):[d,f]}function Gi(d,f,w){Array.isArray(d)?d.forEach(f,w):d&&f.call(w,d)}var Xt=null;function qr(d){if(d){var f=d._dispatchListeners,w=d._dispatchInstances;if(Array.isArray(f))for(var C=0;C<f.length&&!d.isPropagationStopped();C++)O(d,f[C],w[C]);else f&&O(d,f,w);d._dispatchListeners=null,d._dispatchInstances=null,d.isPersistent()||d.constructor.release(d)}}function ni(d){if(d!==null&&(Xt=$t(Xt,d)),d=Xt,Xt=null,d){if(Gi(d,qr),Xt)throw Error(c(95));if(y)throw d=k,y=!1,k=null,d}}function hr(d){return(d=d.target||d.srcElement||window).correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}function Ke(d){if(!_e)return!1;var f=(d="on"+d)in document;return f||((f=document.createElement("div")).setAttribute(d,"return;"),f=typeof f[d]=="function"),f}var Rt=[];function No(d){d.topLevelType=null,d.nativeEvent=null,d.targetInst=null,d.ancestors.length=0,10>Rt.length&&Rt.push(d)}function Gr(d,f,w,C){if(Rt.length){var S=Rt.pop();return S.topLevelType=d,S.eventSystemFlags=C,S.nativeEvent=f,S.targetInst=w,S}return{topLevelType:d,eventSystemFlags:C,nativeEvent:f,targetInst:w,ancestors:[]}}function er(d){var f=d.targetInst,w=f;do{if(!w){d.ancestors.push(w);break}var C=w;if(C.tag===3)C=C.stateNode.containerInfo;else{for(;C.return;)C=C.return;C=C.tag!==3?null:C.stateNode.containerInfo}if(!C)break;(f=w.tag)!==5&&f!==6||d.ancestors.push(w),w=Ho(C)}while(w);for(w=0;w<d.ancestors.length;w++){f=d.ancestors[w];var S=hr(d.nativeEvent);C=d.topLevelType;var B=d.nativeEvent,j=d.eventSystemFlags;w===0&&(j|=64);for(var te=null,Re=0;Re<ne.length;Re++){var De=ne[Re];De&&(De=De.extractEvents(C,f,B,S,j))&&(te=$t(te,De))}ni(te)}}function Hn(d,f,w){if(!w.has(d)){switch(d){case"scroll":rs(f,"scroll",!0);break;case"focus":case"blur":rs(f,"focus",!0),rs(f,"blur",!0),w.set("blur",null),w.set("focus",null);break;case"cancel":case"close":Ke(d)&&rs(f,d,!0);break;case"invalid":case"submit":case"reset":break;default:Dn.indexOf(d)===-1&&qn(d,f)}w.set(d,null)}}var hi,Vt,As,Kr=!1,wi=[],$n=null,vr=null,Vo=null,so=new Map,Ps=new Map,Is=[],ao="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Da(d,f,w,C,S){return{blockedOn:d,topLevelType:f,eventSystemFlags:32|w,nativeEvent:S,container:C}}function Zr(d,f){switch(d){case"focus":case"blur":$n=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":Vo=null;break;case"pointerover":case"pointerout":so.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(f.pointerId)}}function Ds(d,f,w,C,S,B){return d===null||d.nativeEvent!==B?(d=Da(f,w,C,S,B),f!==null&&(f=wo(f))!==null&&Vt(f),d):(d.eventSystemFlags|=C,d)}function eh(d){var f=Ho(d.target);if(f!==null){var w=oo(f);if(w!==null){if((f=w.tag)===13){if((f=jn(w))!==null)return d.blockedOn=f,void l.unstable_runWithPriority(d.priority,function(){As(w)})}else if(f===3&&w.stateNode.hydrate)return void(d.blockedOn=w.tag===3?w.stateNode.containerInfo:null)}}d.blockedOn=null}function Tl(d){if(d.blockedOn!==null)return!1;var f=Os(d.topLevelType,d.eventSystemFlags,d.container,d.nativeEvent);if(f!==null){var w=wo(f);return w!==null&&Vt(w),d.blockedOn=f,!1}return!0}function Sc(d,f,w){Tl(d)&&w.delete(f)}function vo(){for(Kr=!1;0<wi.length;){var d=wi[0];if(d.blockedOn!==null){(d=wo(d.blockedOn))!==null&&hi(d);break}var f=Os(d.topLevelType,d.eventSystemFlags,d.container,d.nativeEvent);f!==null?d.blockedOn=f:wi.shift()}$n!==null&&Tl($n)&&($n=null),vr!==null&&Tl(vr)&&(vr=null),Vo!==null&&Tl(Vo)&&(Vo=null),so.forEach(Sc),Ps.forEach(Sc)}function Xs(d,f){d.blockedOn===f&&(d.blockedOn=null,Kr||(Kr=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,vo)))}function Rs(d){function f(S){return Xs(S,d)}if(0<wi.length){Xs(wi[0],d);for(var w=1;w<wi.length;w++){var C=wi[w];C.blockedOn===d&&(C.blockedOn=null)}}for($n!==null&&Xs($n,d),vr!==null&&Xs(vr,d),Vo!==null&&Xs(Vo,d),so.forEach(f),Ps.forEach(f),w=0;w<Is.length;w++)(C=Is[w]).blockedOn===d&&(C.blockedOn=null);for(;0<Is.length&&(w=Is[0]).blockedOn===null;)eh(w),w.blockedOn===null&&Is.shift()}var Ra={},Qs=new Map,ea=new Map,th=["abort","abort",Fr,"animationEnd",Bn,"animationIteration",$i,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",dr,"transitionEnd","waiting","waiting"];function Tc(d,f){for(var w=0;w<d.length;w+=2){var C=d[w],S=d[w+1],B="on"+(S[0].toUpperCase()+S.slice(1));B={phasedRegistrationNames:{bubbled:B,captured:B+"Capture"},dependencies:[C],eventPriority:f},ea.set(C,f),Qs.set(C,B),Ra[S]=B}}Tc("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Tc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Tc(th,2);for(var Fu="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Oa=0;Oa<Fu.length;Oa++)ea.set(Fu[Oa],0);var Mu=l.unstable_UserBlockingPriority,nh=l.unstable_runWithPriority,Fa=!0;function qn(d,f){rs(f,d,!1)}function rs(d,f,w){var C=ea.get(f);switch(C===void 0?2:C){case 0:C=os.bind(null,f,1,d);break;case 1:C=Ac.bind(null,f,1,d);break;default:C=Ma.bind(null,f,1,d)}w?d.addEventListener(f,C,!0):d.addEventListener(f,C,!1)}function os(d,f,w,C){ke||oe();var S=Ma,B=ke;ke=!0;try{wt(S,d,f,w,C)}finally{(ke=B)||lt()}}function Ac(d,f,w,C){nh(Mu,Ma.bind(null,d,f,w,C))}function Ma(d,f,w,C){if(Fa)if(0<wi.length&&-1<ao.indexOf(d))d=Da(null,d,f,w,C),wi.push(d);else{var S=Os(d,f,w,C);if(S===null)Zr(d,C);else if(-1<ao.indexOf(d))d=Da(S,d,f,w,C),wi.push(d);else if(!function(B,j,te,Re,De){switch(j){case"focus":return $n=Ds($n,B,j,te,Re,De),!0;case"dragenter":return vr=Ds(vr,B,j,te,Re,De),!0;case"mouseover":return Vo=Ds(Vo,B,j,te,Re,De),!0;case"pointerover":var Je=De.pointerId;return so.set(Je,Ds(so.get(Je)||null,B,j,te,Re,De)),!0;case"gotpointercapture":return Je=De.pointerId,Ps.set(Je,Ds(Ps.get(Je)||null,B,j,te,Re,De)),!0}return!1}(S,d,f,w,C)){Zr(d,C),d=Gr(d,C,null,f);try{Ee(er,d)}finally{No(d)}}}}function Os(d,f,w,C){if((w=Ho(w=hr(C)))!==null){var S=oo(w);if(S===null)w=null;else{var B=S.tag;if(B===13){if((w=jn(S))!==null)return w;w=null}else if(B===3){if(S.stateNode.hydrate)return S.tag===3?S.stateNode.containerInfo:null;w=null}else S!==w&&(w=null)}}d=Gr(d,C,w,f);try{Ee(er,d)}finally{No(d)}return null}var ss={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ih=["Webkit","ms","Moz","O"];function Pc(d,f,w){return f==null||typeof f=="boolean"||f===""?"":w||typeof f!="number"||f===0||ss.hasOwnProperty(d)&&ss[d]?(""+f).trim():f+"px"}function Yr(d,f){for(var w in d=d.style,f)if(f.hasOwnProperty(w)){var C=w.indexOf("--")===0,S=Pc(w,f[w],C);w==="float"&&(w="cssFloat"),C?d.setProperty(w,S):d[w]=S}}Object.keys(ss).forEach(function(d){ih.forEach(function(f){f=f+d.charAt(0).toUpperCase()+d.substring(1),ss[f]=ss[d]})});var Lu=s({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ic(d,f){if(f){if(Lu[d]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(c(137,d,""));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(c(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(c(61))}if(f.style!=null&&typeof f.style!="object")throw Error(c(62,""))}}function La(d,f){if(d.indexOf("-")===-1)return typeof f.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dc=Se;function tr(d,f){var w=br(d=d.nodeType===9||d.nodeType===11?d:d.ownerDocument);f=fe[f];for(var C=0;C<f.length;C++)Hn(f[C],d,w)}function ta(){}function lo(d){if((d=d||(typeof document<"u"?document:void 0))===void 0)return null;try{return d.activeElement||d.body}catch{return d.body}}function Ba(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Al(d,f){var w,C=Ba(d);for(d=0;C;){if(C.nodeType===3){if(w=d+C.textContent.length,d<=f&&w>=f)return{node:C,offset:f-d};d=w}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=Ba(C)}}function Fs(){for(var d=window,f=lo();f instanceof d.HTMLIFrameElement;){try{var w=typeof f.contentWindow.location.href=="string"}catch{w=!1}if(!w)break;f=lo((d=f.contentWindow).document)}return f}function Rc(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f&&(f==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||f==="textarea"||d.contentEditable==="true")}var Oc=null,Fc=null;function Bu(d,f){switch(d){case"button":case"input":case"select":case"textarea":return!!f.autoFocus}return!1}function Pl(d,f){return d==="textarea"||d==="option"||d==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Il=typeof setTimeout=="function"?setTimeout:void 0,Nu=typeof clearTimeout=="function"?clearTimeout:void 0;function na(d){for(;d!=null;d=d.nextSibling){var f=d.nodeType;if(f===1||f===3)break}return d}function Vu(d){d=d.previousSibling;for(var f=0;d;){if(d.nodeType===8){var w=d.data;if(w==="$"||w==="$!"||w==="$?"){if(f===0)return d;f--}else w==="/$"&&f++}d=d.previousSibling}return null}var Dl=Math.random().toString(36).slice(2),zo="__reactInternalInstance$"+Dl,Na="__reactEventHandlers$"+Dl,ia="__reactContainere$"+Dl;function Ho(d){var f=d[zo];if(f)return f;for(var w=d.parentNode;w;){if(f=w[ia]||w[zo]){if(w=f.alternate,f.child!==null||w!==null&&w.child!==null)for(d=Vu(d);d!==null;){if(w=d[zo])return w;d=Vu(d)}return f}w=(d=w).parentNode}return null}function wo(d){return!(d=d[zo]||d[ia])||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function as(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(c(33))}function Mc(d){return d[Na]||null}function yo(d){do d=d.return;while(d&&d.tag!==5);return d||null}function ra(d,f){var w=d.stateNode;if(!w)return null;var C=L(w);if(!C)return null;w=C[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(C=!((d=d.type)==="button"||d==="input"||d==="select"||d==="textarea")),d=!C;break e;default:d=!1}if(d)return null;if(w&&typeof w!="function")throw Error(c(231,f,typeof w));return w}function fi(d,f,w){(f=ra(d,w.dispatchConfig.phasedRegistrationNames[f]))&&(w._dispatchListeners=$t(w._dispatchListeners,f),w._dispatchInstances=$t(w._dispatchInstances,d))}function rh(d){if(d&&d.dispatchConfig.phasedRegistrationNames){for(var f=d._targetInst,w=[];f;)w.push(f),f=yo(f);for(f=w.length;0<f--;)fi(w[f],"captured",d);for(f=0;f<w.length;f++)fi(w[f],"bubbled",d)}}function Va(d,f,w){d&&w&&w.dispatchConfig.registrationName&&(f=ra(d,w.dispatchConfig.registrationName))&&(w._dispatchListeners=$t(w._dispatchListeners,f),w._dispatchInstances=$t(w._dispatchInstances,d))}function za(d){d&&d.dispatchConfig.registrationName&&Va(d._targetInst,null,d)}function oa(d){Gi(d,rh)}var ls=null,Lc=null,sa=null;function Bc(){if(sa)return sa;var d,f,w=Lc,C=w.length,S="value"in ls?ls.value:ls.textContent,B=S.length;for(d=0;d<C&&w[d]===S[d];d++);var j=C-d;for(f=1;f<=j&&w[C-f]===S[B-f];f++);return sa=S.slice(d,1<f?1-f:void 0)}function Rl(){return!0}function Ol(){return!1}function wr(d,f,w,C){for(var S in this.dispatchConfig=d,this._targetInst=f,this.nativeEvent=w,d=this.constructor.Interface)d.hasOwnProperty(S)&&((f=d[S])?this[S]=f(w):S==="target"?this.target=C:this[S]=w[S]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Rl:Ol,this.isPropagationStopped=Ol,this}function Nc(d,f,w,C){if(this.eventPool.length){var S=this.eventPool.pop();return this.call(S,d,f,w,C),S}return new this(d,f,w,C)}function tn(d){if(!(d instanceof this))throw Error(c(279));d.destructor(),10>this.eventPool.length&&this.eventPool.push(d)}function G(d){d.eventPool=[],d.getPooled=Nc,d.release=tn}s(wr.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){this.isPersistent=Rl},isPersistent:Ol,destructor:function(){var d,f=this.constructor.Interface;for(d in f)this[d]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Ol,this._dispatchInstances=this._dispatchListeners=null}}),wr.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},wr.extend=function(d){function f(){}function w(){return C.apply(this,arguments)}var C=this;f.prototype=C.prototype;var S=new f;return s(S,w.prototype),w.prototype=S,w.prototype.constructor=w,w.Interface=s({},C.Interface,d),w.extend=C.extend,G(w),w},G(wr);var A=wr.extend({data:null}),F=wr.extend({data:null}),N=[9,13,27,32],J=_e&&"CompositionEvent"in window,ee=null;_e&&"documentMode"in document&&(ee=document.documentMode);var me=_e&&"TextEvent"in window&&!ee,Le=_e&&(!J||ee&&8<ee&&11>=ee),Ze=" ",Ye={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pt=!1;function Ot(d,f){switch(d){case"keyup":return N.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Kt(d){return typeof(d=d.detail)=="object"&&"data"in d?d.data:null}var Pt=!1,Ut={eventTypes:Ye,extractEvents:function(d,f,w,C){var S;if(J)e:{switch(d){case"compositionstart":var B=Ye.compositionStart;break e;case"compositionend":B=Ye.compositionEnd;break e;case"compositionupdate":B=Ye.compositionUpdate;break e}B=void 0}else Pt?Ot(d,w)&&(B=Ye.compositionEnd):d==="keydown"&&w.keyCode===229&&(B=Ye.compositionStart);return B?(Le&&w.locale!=="ko"&&(Pt||B!==Ye.compositionStart?B===Ye.compositionEnd&&Pt&&(S=Bc()):(Lc="value"in(ls=C)?ls.value:ls.textContent,Pt=!0)),B=A.getPooled(B,f,w,C),(S||(S=Kt(w))!==null)&&(B.data=S),oa(B),S=B):S=null,(d=me?function(j,te){switch(j){case"compositionend":return Kt(te);case"keypress":return te.which!==32?null:(pt=!0,Ze);case"textInput":return(j=te.data)===Ze&&pt?null:j;default:return null}}(d,w):function(j,te){if(Pt)return j==="compositionend"||!J&&Ot(j,te)?(j=Bc(),sa=Lc=ls=null,Pt=!1,j):null;switch(j){case"paste":return null;case"keypress":if(!(te.ctrlKey||te.altKey||te.metaKey)||te.ctrlKey&&te.altKey){if(te.char&&1<te.char.length)return te.char;if(te.which)return String.fromCharCode(te.which)}return null;case"compositionend":return Le&&te.locale!=="ko"?null:te.data;default:return null}}(d,w))?((f=F.getPooled(Ye.beforeInput,f,w,C)).data=d,oa(f)):f=null,S===null?f:f===null?S:[S,f]}},zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zt(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f==="input"?!!zt[d.type]:f==="textarea"}var bn={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function nn(d,f,w){return(d=wr.getPooled(bn.change,d,f,w)).type="change",Z(w),oa(d),d}var qt=null,Un=null;function _i(d){ni(d)}function ii(d){if(Bt(as(d)))return d}function Li(d,f){if(d==="change")return f}var mi=!1;function ki(){qt&&(qt.detachEvent("onpropertychange",Rn),Un=qt=null)}function Rn(d){if(d.propertyName==="value"&&ii(Un))if(d=nn(Un,d,hr(d)),ke)ni(d);else{ke=!0;try{je(_i,d)}finally{ke=!1,lt()}}}function co(d,f,w){d==="focus"?(ki(),Un=w,(qt=f).attachEvent("onpropertychange",Rn)):d==="blur"&&ki()}function _n(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return ii(Un)}function pi(d,f){if(d==="click")return ii(f)}function _o(d,f){if(d==="input"||d==="change")return ii(f)}_e&&(mi=Ke("input")&&(!document.documentMode||9<document.documentMode));var cs={eventTypes:bn,_isInputEventSupported:mi,extractEvents:function(d,f,w,C){var S=f?as(f):window,B=S.nodeName&&S.nodeName.toLowerCase();if(B==="select"||B==="input"&&S.type==="file")var j=Li;else if(Zt(S))if(mi)j=_o;else{j=_n;var te=co}else(B=S.nodeName)&&B.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(j=pi);if(j&&(j=j(d,f)))return nn(j,w,C);te&&te(d,S,f),d==="blur"&&(d=S._wrapperState)&&d.controlled&&S.type==="number"&&mn(S,"number",S.value)}},ri=wr.extend({view:null,detail:null}),aa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uo(d){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(d):!!(d=aa[d])&&!!f[d]}function Ki(){return uo}var Jr=0,us=0,yr=!1,Bi=!1,ho=ri.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ki,button:null,buttons:null,relatedTarget:function(d){return d.relatedTarget||(d.fromElement===d.srcElement?d.toElement:d.fromElement)},movementX:function(d){if("movementX"in d)return d.movementX;var f=Jr;return Jr=d.screenX,yr?d.type==="mousemove"?d.screenX-f:0:(yr=!0,0)},movementY:function(d){if("movementY"in d)return d.movementY;var f=us;return us=d.screenY,Bi?d.type==="mousemove"?d.screenY-f:0:(Bi=!0,0)}}),ds=ho.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),hs={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},la={eventTypes:hs,extractEvents:function(d,f,w,C,S){var B=d==="mouseover"||d==="pointerover",j=d==="mouseout"||d==="pointerout";if(B&&!(32&S)&&(w.relatedTarget||w.fromElement)||!j&&!B||(B=C.window===C?C:(B=C.ownerDocument)?B.defaultView||B.parentWindow:window,j?(j=f,(f=(f=w.relatedTarget||w.toElement)?Ho(f):null)!==null&&(f!==oo(f)||f.tag!==5&&f.tag!==6)&&(f=null)):j=null,j===f))return null;if(d==="mouseout"||d==="mouseover")var te=ho,Re=hs.mouseLeave,De=hs.mouseEnter,Je="mouse";else d!=="pointerout"&&d!=="pointerover"||(te=ds,Re=hs.pointerLeave,De=hs.pointerEnter,Je="pointer");if(d=j==null?B:as(j),B=f==null?B:as(f),(Re=te.getPooled(Re,j,w,C)).type=Je+"leave",Re.target=d,Re.relatedTarget=B,(w=te.getPooled(De,f,w,C)).type=Je+"enter",w.target=B,w.relatedTarget=d,Je=f,(C=j)&&Je)e:{for(De=Je,j=0,d=te=C;d;d=yo(d))j++;for(d=0,f=De;f;f=yo(f))d++;for(;0<j-d;)te=yo(te),j--;for(;0<d-j;)De=yo(De),d--;for(;j--;){if(te===De||te===De.alternate)break e;te=yo(te),De=yo(De)}te=null}else te=null;for(De=te,te=[];C&&C!==De&&((j=C.alternate)===null||j!==De);)te.push(C),C=yo(C);for(C=[];Je&&Je!==De&&((j=Je.alternate)===null||j!==De);)C.push(Je),Je=yo(Je);for(Je=0;Je<te.length;Je++)Va(te[Je],"bubbled",Re);for(Je=C.length;0<Je--;)Va(C[Je],"captured",w);return 64&S?[Re,w]:[Re]}},fs=typeof Object.is=="function"?Object.is:function(d,f){return d===f&&(d!==0||1/d==1/f)||d!=d&&f!=f},Fl=Object.prototype.hasOwnProperty;function Mr(d,f){if(fs(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var w=Object.keys(d),C=Object.keys(f);if(w.length!==C.length)return!1;for(C=0;C<w.length;C++)if(!Fl.call(f,w[C])||!fs(d[w[C]],f[w[C]]))return!1;return!0}var ko=_e&&"documentMode"in document&&11>=document.documentMode,Zi={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},fr=null,Xr=null,_r=null,Ha=!1;function oh(d,f){var w=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;return Ha||fr==null||fr!==lo(w)?null:("selectionStart"in(w=fr)&&Rc(w)?w={start:w.selectionStart,end:w.selectionEnd}:w={anchorNode:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset},_r&&Mr(_r,w)?null:(_r=w,(d=wr.getPooled(Zi.select,Xr,d,f)).type="select",d.target=fr,oa(d),d))}var Vc={eventTypes:Zi,extractEvents:function(d,f,w,C,S,B){if(!(B=!(S=B||(C.window===C?C.document:C.nodeType===9?C:C.ownerDocument)))){e:{S=br(S),B=fe.onSelect;for(var j=0;j<B.length;j++)if(!S.has(B[j])){S=!1;break e}S=!0}B=!S}if(B)return null;switch(S=f?as(f):window,d){case"focus":(Zt(S)||S.contentEditable==="true")&&(fr=S,Xr=f,_r=null);break;case"blur":_r=Xr=fr=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ha=!1,oh(w,C);case"selectionchange":if(ko)break;case"keydown":case"keyup":return oh(w,C)}return null}},nm=wr.extend({animationName:null,elapsedTime:null,pseudoElement:null}),sh=wr.extend({clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),zu=ri.extend({relatedTarget:null});function Hu(d){var f=d.keyCode;return"charCode"in d?(d=d.charCode)===0&&f===13&&(d=13):d=f,d===10&&(d=13),32<=d||d===13?d:0}var ah={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},im={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lh=ri.extend({key:function(d){if(d.key){var f=ah[d.key]||d.key;if(f!=="Unidentified")return f}return d.type==="keypress"?(d=Hu(d))===13?"Enter":String.fromCharCode(d):d.type==="keydown"||d.type==="keyup"?im[d.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ki,charCode:function(d){return d.type==="keypress"?Hu(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Hu(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),ch=ho.extend({dataTransfer:null}),Ml=ri.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ki}),Uu=wr.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),rm=ho.extend({deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:null,deltaMode:null}),Wu={eventTypes:Ra,extractEvents:function(d,f,w,C){var S=Qs.get(d);if(!S)return null;switch(d){case"keypress":if(Hu(w)===0)return null;case"keydown":case"keyup":d=lh;break;case"blur":case"focus":d=zu;break;case"click":if(w.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=ho;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=ch;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Ml;break;case Fr:case Bn:case $i:d=nm;break;case dr:d=Uu;break;case"scroll":d=ri;break;case"wheel":d=rm;break;case"copy":case"cut":case"paste":d=sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=ds;break;default:d=wr}return oa(f=d.getPooled(S,f,w,C)),f}};if(U)throw Error(c(101));U=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),q(),L=Mc,M=wo,V=as,Oe({SimpleEventPlugin:Wu,EnterLeaveEventPlugin:la,ChangeEventPlugin:cs,SelectEventPlugin:Vc,BeforeInputEventPlugin:Ut});var uh=[],Ll=-1;function oi(d){0>Ll||(d.current=uh[Ll],uh[Ll]=null,Ll--)}function si(d,f){Ll++,uh[Ll]=d.current,d.current=f}var ms={},Ci={current:ms},nr={current:!1},Ua=ms;function Ms(d,f){var w=d.type.contextTypes;if(!w)return ms;var C=d.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===f)return C.__reactInternalMemoizedMaskedChildContext;var S,B={};for(S in w)B[S]=f[S];return C&&((d=d.stateNode).__reactInternalMemoizedUnmaskedChildContext=f,d.__reactInternalMemoizedMaskedChildContext=B),B}function Lr(d){return(d=d.childContextTypes)!=null}function ca(){oi(nr),oi(Ci)}function dh(d,f,w){if(Ci.current!==ms)throw Error(c(168));si(Ci,f),si(nr,w)}function ua(d,f,w){var C=d.stateNode;if(d=f.childContextTypes,typeof C.getChildContext!="function")return w;for(var S in C=C.getChildContext())if(!(S in d))throw Error(c(108,Et(f)||"Unknown",S));return s({},w,{},C)}function da(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||ms,Ua=Ci.current,si(Ci,d),si(nr,nr.current),!0}function ha(d,f,w){var C=d.stateNode;if(!C)throw Error(c(169));w?(d=ua(d,f,Ua),C.__reactInternalMemoizedMergedChildContext=d,oi(nr),oi(Ci),si(Ci,d)):oi(nr),si(nr,w)}var zc=l.unstable_runWithPriority,fa=l.unstable_scheduleCallback,hh=l.unstable_cancelCallback,fh=l.unstable_requestPaint,ju=l.unstable_now,Rg=l.unstable_getCurrentPriorityLevel,ps=l.unstable_ImmediatePriority,ma=l.unstable_UserBlockingPriority,om=l.unstable_NormalPriority,sm=l.unstable_LowPriority,am=l.unstable_IdlePriority,lm={},Og=l.unstable_shouldYield,Fg=fh!==void 0?fh:function(){},gi=null,bi=null,ir=!1,Ni=ju(),kr=1e4>Ni?ju:function(){return ju()-Ni};function $u(){switch(Rg()){case ps:return 99;case ma:return 98;case om:return 97;case sm:return 96;case am:return 95;default:throw Error(c(332))}}function Hc(d){switch(d){case 99:return ps;case 98:return ma;case 97:return om;case 96:return sm;case 95:return am;default:throw Error(c(332))}}function pa(d,f){return d=Hc(d),zc(d,f)}function cm(d,f,w){return d=Hc(d),fa(d,f,w)}function um(d){return gi===null?(gi=[d],bi=fa(ps,mh)):gi.push(d),lm}function Co(){if(bi!==null){var d=bi;bi=null,hh(d)}mh()}function mh(){if(!ir&&gi!==null){ir=!0;var d=0;try{var f=gi;pa(99,function(){for(;d<f.length;d++){var w=f[d];do w=w(!0);while(w!==null)}}),gi=null}catch(w){throw gi!==null&&(gi=gi.slice(d+1)),fa(ps,Co),w}finally{ir=!1}}}function Bl(d,f,w){return 1073741821-(1+((1073741821-d+f/10)/(w/=10)|0))*w}function Uo(d,f){if(d&&d.defaultProps)for(var w in f=s({},f),d=d.defaultProps)f[w]===void 0&&(f[w]=d[w]);return f}var Nl={current:null},Vl=null,Wa=null,Uc=null;function Wc(){Uc=Wa=Vl=null}function qu(d){var f=Nl.current;oi(Nl),d.type._context._currentValue=f}function zl(d,f){for(;d!==null;){var w=d.alternate;if(d.childExpirationTime<f)d.childExpirationTime=f,w!==null&&w.childExpirationTime<f&&(w.childExpirationTime=f);else{if(!(w!==null&&w.childExpirationTime<f))break;w.childExpirationTime=f}d=d.return}}function Hl(d,f){Vl=d,Uc=Wa=null,(d=d.dependencies)!==null&&d.firstContext!==null&&(d.expirationTime>=f&&(gs=!0),d.firstContext=null)}function Br(d,f){if(Uc!==d&&f!==!1&&f!==0)if(typeof f=="number"&&f!==1073741823||(Uc=d,f=1073741823),f={context:d,observedBits:f,next:null},Wa===null){if(Vl===null)throw Error(c(308));Wa=f,Vl.dependencies={expirationTime:0,firstContext:f,responders:null}}else Wa=Wa.next=f;return d._currentValue}var Cr=!1;function Gu(d){d.updateQueue={baseState:d.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ph(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,baseQueue:d.baseQueue,shared:d.shared,effects:d.effects})}function Ls(d,f){return(d={expirationTime:d,suspenseConfig:f,tag:0,payload:null,callback:null,next:null}).next=d}function Vi(d,f){if((d=d.updateQueue)!==null){var w=(d=d.shared).pending;w===null?f.next=f:(f.next=w.next,w.next=f),d.pending=f}}function kn(d,f){var w=d.alternate;w!==null&&ph(w,d),(w=(d=d.updateQueue).baseQueue)===null?(d.baseQueue=f.next=f,f.next=f):(f.next=w.next,w.next=f)}function Nr(d,f,w,C){var S=d.updateQueue;Cr=!1;var B=S.baseQueue,j=S.shared.pending;if(j!==null){if(B!==null){var te=B.next;B.next=j.next,j.next=te}B=j,S.shared.pending=null,(te=d.alternate)!==null&&(te=te.updateQueue)!==null&&(te.baseQueue=j)}if(B!==null){te=B.next;var Re=S.baseState,De=0,Je=null,vt=null,Gt=null;if(te!==null)for(var wn=te;;){if((j=wn.expirationTime)<C){var ys={expirationTime:wn.expirationTime,suspenseConfig:wn.suspenseConfig,tag:wn.tag,payload:wn.payload,callback:wn.callback,next:null};Gt===null?(vt=Gt=ys,Je=Re):Gt=Gt.next=ys,j>De&&(De=j)}else{Gt!==null&&(Gt=Gt.next={expirationTime:1073741823,suspenseConfig:wn.suspenseConfig,tag:wn.tag,payload:wn.payload,callback:wn.callback,next:null}),rl(j,wn.suspenseConfig);e:{var po=d,Be=wn;switch(j=f,ys=w,Be.tag){case 1:if(typeof(po=Be.payload)=="function"){Re=po.call(ys,Re,j);break e}Re=po;break e;case 3:po.effectTag=-4097&po.effectTag|64;case 0:if((j=typeof(po=Be.payload)=="function"?po.call(ys,Re,j):po)==null)break e;Re=s({},Re,j);break e;case 2:Cr=!0}}wn.callback!==null&&(d.effectTag|=32,(j=S.effects)===null?S.effects=[wn]:j.push(wn))}if((wn=wn.next)===null||wn===te){if((j=S.shared.pending)===null)break;wn=B.next=j.next,j.next=te,S.baseQueue=B=j,S.shared.pending=null}}Gt===null?Je=Re:Gt.next=vt,S.baseState=Je,S.baseQueue=Gt,dd(De),d.expirationTime=De,d.memoizedState=Re}}function Bs(d,f,w){if(d=f.effects,f.effects=null,d!==null)for(f=0;f<d.length;f++){var C=d[f],S=C.callback;if(S!==null){if(C.callback=null,C=S,S=w,typeof C!="function")throw Error(c(191,C));C.call(S)}}}var xo=$e.ReactCurrentBatchConfig,gh=new o.Component().refs;function Ul(d,f,w,C){w=(w=w(C,f=d.memoizedState))==null?f:s({},f,w),d.memoizedState=w,d.expirationTime===0&&(d.updateQueue.baseState=w)}var jc={isMounted:function(d){return!!(d=d._reactInternalFiber)&&oo(d)===d},enqueueSetState:function(d,f,w){d=d._reactInternalFiber;var C=mo(),S=xo.suspense;(S=Ls(C=Hs(C,d,S),S)).payload=f,w!=null&&(S.callback=w),Vi(d,S),Us(d,C)},enqueueReplaceState:function(d,f,w){d=d._reactInternalFiber;var C=mo(),S=xo.suspense;(S=Ls(C=Hs(C,d,S),S)).tag=1,S.payload=f,w!=null&&(S.callback=w),Vi(d,S),Us(d,C)},enqueueForceUpdate:function(d,f){d=d._reactInternalFiber;var w=mo(),C=xo.suspense;(C=Ls(w=Hs(w,d,C),C)).tag=2,f!=null&&(C.callback=f),Vi(d,C),Us(d,w)}};function dm(d,f,w,C,S,B,j){return typeof(d=d.stateNode).shouldComponentUpdate=="function"?d.shouldComponentUpdate(C,B,j):!f.prototype||!f.prototype.isPureReactComponent||!Mr(w,C)||!Mr(S,B)}function Ku(d,f,w){var C=!1,S=ms,B=f.contextType;return typeof B=="object"&&B!==null?B=Br(B):(S=Lr(f)?Ua:Ci.current,B=(C=(C=f.contextTypes)!=null)?Ms(d,S):ms),f=new f(w,B),d.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=jc,d.stateNode=f,f._reactInternalFiber=d,C&&((d=d.stateNode).__reactInternalMemoizedUnmaskedChildContext=S,d.__reactInternalMemoizedMaskedChildContext=B),f}function Wl(d,f,w,C){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(w,C),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(w,C),f.state!==d&&jc.enqueueReplaceState(f,f.state,null)}function Zu(d,f,w,C){var S=d.stateNode;S.props=w,S.state=d.memoizedState,S.refs=gh,Gu(d);var B=f.contextType;typeof B=="object"&&B!==null?S.context=Br(B):(B=Lr(f)?Ua:Ci.current,S.context=Ms(d,B)),Nr(d,w,S,C),S.state=d.memoizedState,typeof(B=f.getDerivedStateFromProps)=="function"&&(Ul(d,f,B,w),S.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(f=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),f!==S.state&&jc.enqueueReplaceState(S,S.state,null),Nr(d,w,S,C),S.state=d.memoizedState),typeof S.componentDidMount=="function"&&(d.effectTag|=4)}var jl=Array.isArray;function Eo(d,f,w){if((d=w.ref)!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner){if(w.tag!==1)throw Error(c(309));var C=w.stateNode}if(!C)throw Error(c(147,d));var S=""+d;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===S?f.ref:((f=function(B){var j=C.refs;j===gh&&(j=C.refs={}),B===null?delete j[S]:j[S]=B})._stringRef=S,f)}if(typeof d!="string")throw Error(c(284));if(!w._owner)throw Error(c(290,d))}return d}function $c(d,f){if(d.type!=="textarea")throw Error(c(31,Object.prototype.toString.call(f)==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":f,""))}function bh(d){function f(Be,Me){if(d){var Ge=Be.lastEffect;Ge!==null?(Ge.nextEffect=Me,Be.lastEffect=Me):Be.firstEffect=Be.lastEffect=Me,Me.nextEffect=null,Me.effectTag=8}}function w(Be,Me){if(!d)return null;for(;Me!==null;)f(Be,Me),Me=Me.sibling;return null}function C(Be,Me){for(Be=new Map;Me!==null;)Me.key!==null?Be.set(Me.key,Me):Be.set(Me.index,Me),Me=Me.sibling;return Be}function S(Be,Me){return(Be=Ce(Be,Me)).index=0,Be.sibling=null,Be}function B(Be,Me,Ge){return Be.index=Ge,d?(Ge=Be.alternate)!==null?(Ge=Ge.index)<Me?(Be.effectTag=2,Me):Ge:(Be.effectTag=2,Me):Me}function j(Be){return d&&Be.alternate===null&&(Be.effectTag=2),Be}function te(Be,Me,Ge,st){return Me===null||Me.tag!==6?((Me=qe(Ge,Be.mode,st)).return=Be,Me):((Me=S(Me,Ge)).return=Be,Me)}function Re(Be,Me,Ge,st){return Me!==null&&Me.elementType===Ge.type?((st=S(Me,Ge.props)).ref=Eo(Be,Me,Ge),st.return=Be,st):((st=ye(Ge.type,Ge.key,Ge.props,null,Be.mode,st)).ref=Eo(Be,Me,Ge),st.return=Be,st)}function De(Be,Me,Ge,st){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Ge.containerInfo||Me.stateNode.implementation!==Ge.implementation?((Me=Qe(Ge,Be.mode,st)).return=Be,Me):((Me=S(Me,Ge.children||[])).return=Be,Me)}function Je(Be,Me,Ge,st,yt){return Me===null||Me.tag!==7?((Me=Ve(Ge,Be.mode,st,yt)).return=Be,Me):((Me=S(Me,Ge)).return=Be,Me)}function vt(Be,Me,Ge){if(typeof Me=="string"||typeof Me=="number")return(Me=qe(""+Me,Be.mode,Ge)).return=Be,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case ct:return(Ge=ye(Me.type,Me.key,Me.props,null,Be.mode,Ge)).ref=Eo(Be,null,Me),Ge.return=Be,Ge;case En:return(Me=Qe(Me,Be.mode,Ge)).return=Be,Me}if(jl(Me)||ut(Me))return(Me=Ve(Me,Be.mode,Ge,null)).return=Be,Me;$c(Be,Me)}return null}function Gt(Be,Me,Ge,st){var yt=Me!==null?Me.key:null;if(typeof Ge=="string"||typeof Ge=="number")return yt!==null?null:te(Be,Me,""+Ge,st);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case ct:return Ge.key===yt?Ge.type===Sn?Je(Be,Me,Ge.props.children,st,yt):Re(Be,Me,Ge,st):null;case En:return Ge.key===yt?De(Be,Me,Ge,st):null}if(jl(Ge)||ut(Ge))return yt!==null?null:Je(Be,Me,Ge,st,null);$c(Be,Ge)}return null}function wn(Be,Me,Ge,st,yt){if(typeof st=="string"||typeof st=="number")return te(Me,Be=Be.get(Ge)||null,""+st,yt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case ct:return Be=Be.get(st.key===null?Ge:st.key)||null,st.type===Sn?Je(Me,Be,st.props.children,yt,st.key):Re(Me,Be,st,yt);case En:return De(Me,Be=Be.get(st.key===null?Ge:st.key)||null,st,yt)}if(jl(st)||ut(st))return Je(Me,Be=Be.get(Ge)||null,st,yt,null);$c(Me,st)}return null}function ys(Be,Me,Ge,st){for(var yt=null,Ft=null,Qt=Me,Ln=Me=0,ar=null;Qt!==null&&Ln<Ge.length;Ln++){Qt.index>Ln?(ar=Qt,Qt=null):ar=Qt.sibling;var hn=Gt(Be,Qt,Ge[Ln],st);if(hn===null){Qt===null&&(Qt=ar);break}d&&Qt&&hn.alternate===null&&f(Be,Qt),Me=B(hn,Me,Ln),Ft===null?yt=hn:Ft.sibling=hn,Ft=hn,Qt=ar}if(Ln===Ge.length)return w(Be,Qt),yt;if(Qt===null){for(;Ln<Ge.length;Ln++)(Qt=vt(Be,Ge[Ln],st))!==null&&(Me=B(Qt,Me,Ln),Ft===null?yt=Qt:Ft.sibling=Qt,Ft=Qt);return yt}for(Qt=C(Be,Qt);Ln<Ge.length;Ln++)(ar=wn(Qt,Be,Ln,Ge[Ln],st))!==null&&(d&&ar.alternate!==null&&Qt.delete(ar.key===null?Ln:ar.key),Me=B(ar,Me,Ln),Ft===null?yt=ar:Ft.sibling=ar,Ft=ar);return d&&Qt.forEach(function(Tr){return f(Be,Tr)}),yt}function po(Be,Me,Ge,st){var yt=ut(Ge);if(typeof yt!="function")throw Error(c(150));if((Ge=yt.call(Ge))==null)throw Error(c(151));for(var Ft=yt=null,Qt=Me,Ln=Me=0,ar=null,hn=Ge.next();Qt!==null&&!hn.done;Ln++,hn=Ge.next()){Qt.index>Ln?(ar=Qt,Qt=null):ar=Qt.sibling;var Tr=Gt(Be,Qt,hn.value,st);if(Tr===null){Qt===null&&(Qt=ar);break}d&&Qt&&Tr.alternate===null&&f(Be,Qt),Me=B(Tr,Me,Ln),Ft===null?yt=Tr:Ft.sibling=Tr,Ft=Tr,Qt=ar}if(hn.done)return w(Be,Qt),yt;if(Qt===null){for(;!hn.done;Ln++,hn=Ge.next())(hn=vt(Be,hn.value,st))!==null&&(Me=B(hn,Me,Ln),Ft===null?yt=hn:Ft.sibling=hn,Ft=hn);return yt}for(Qt=C(Be,Qt);!hn.done;Ln++,hn=Ge.next())(hn=wn(Qt,Be,Ln,hn.value,st))!==null&&(d&&hn.alternate!==null&&Qt.delete(hn.key===null?Ln:hn.key),Me=B(hn,Me,Ln),Ft===null?yt=hn:Ft.sibling=hn,Ft=hn);return d&&Qt.forEach(function(sl){return f(Be,sl)}),yt}return function(Be,Me,Ge,st){var yt=typeof Ge=="object"&&Ge!==null&&Ge.type===Sn&&Ge.key===null;yt&&(Ge=Ge.props.children);var Ft=typeof Ge=="object"&&Ge!==null;if(Ft)switch(Ge.$$typeof){case ct:e:{for(Ft=Ge.key,yt=Me;yt!==null;){if(yt.key===Ft){switch(yt.tag){case 7:if(Ge.type===Sn){w(Be,yt.sibling),(Me=S(yt,Ge.props.children)).return=Be,Be=Me;break e}break;default:if(yt.elementType===Ge.type){w(Be,yt.sibling),(Me=S(yt,Ge.props)).ref=Eo(Be,yt,Ge),Me.return=Be,Be=Me;break e}}w(Be,yt);break}f(Be,yt),yt=yt.sibling}Ge.type===Sn?((Me=Ve(Ge.props.children,Be.mode,st,Ge.key)).return=Be,Be=Me):((st=ye(Ge.type,Ge.key,Ge.props,null,Be.mode,st)).ref=Eo(Be,Me,Ge),st.return=Be,Be=st)}return j(Be);case En:e:{for(yt=Ge.key;Me!==null;){if(Me.key===yt){if(Me.tag===4&&Me.stateNode.containerInfo===Ge.containerInfo&&Me.stateNode.implementation===Ge.implementation){w(Be,Me.sibling),(Me=S(Me,Ge.children||[])).return=Be,Be=Me;break e}w(Be,Me);break}f(Be,Me),Me=Me.sibling}(Me=Qe(Ge,Be.mode,st)).return=Be,Be=Me}return j(Be)}if(typeof Ge=="string"||typeof Ge=="number")return Ge=""+Ge,Me!==null&&Me.tag===6?(w(Be,Me.sibling),(Me=S(Me,Ge)).return=Be,Be=Me):(w(Be,Me),(Me=qe(Ge,Be.mode,st)).return=Be,Be=Me),j(Be);if(jl(Ge))return ys(Be,Me,Ge,st);if(ut(Ge))return po(Be,Me,Ge,st);if(Ft&&$c(Be,Ge),Ge===void 0&&!yt)switch(Be.tag){case 1:case 0:throw Be=Be.type,Error(c(152,Be.displayName||Be.name||"Component"))}return w(Be,Me)}}var $l=bh(!0),ql=bh(!1),ja={},Wo={current:ja},qc={current:ja},Gl={current:ja};function $a(d){if(d===ja)throw Error(c(174));return d}function vh(d,f){switch(si(Gl,f),si(qc,d),si(Wo,ja),d=f.nodeType){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:Tt(null,"");break;default:f=Tt(f=(d=d===8?f.parentNode:f).namespaceURI||null,d=d.tagName)}oi(Wo),si(Wo,f)}function Ns(){oi(Wo),oi(qc),oi(Gl)}function wh(d){$a(Gl.current);var f=$a(Wo.current),w=Tt(f,d.type);f!==w&&(si(qc,d),si(Wo,w))}function yh(d){qc.current===d&&(oi(Wo),oi(qc))}var xi={current:0};function Gc(d){for(var f=d;f!==null;){if(f.tag===13){var w=f.memoizedState;if(w!==null&&((w=w.dehydrated)===null||w.data==="$?"||w.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(64&f.effectTag)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function ga(d,f){return{responder:d,props:f}}var Kl=$e.ReactCurrentDispatcher,Vr=$e.ReactCurrentBatchConfig,Vs=0,Ei=null,xr=null,Er=null,Kc=!1;function On(){throw Error(c(321))}function Zl(d,f){if(f===null)return!1;for(var w=0;w<f.length&&w<d.length;w++)if(!fs(d[w],f[w]))return!1;return!0}function Yu(d,f,w,C,S,B){if(Vs=B,Ei=f,f.memoizedState=null,f.updateQueue=null,f.expirationTime=0,Kl.current=d===null||d.memoizedState===null?Mg:fm,d=w(C,S),f.expirationTime===Vs){B=0;do{if(f.expirationTime=0,!(25>B))throw Error(c(301));B+=1,Er=xr=null,f.updateQueue=null,Kl.current=wa,d=w(C,S)}while(f.expirationTime===Vs)}if(Kl.current=Yc,f=xr!==null&&xr.next!==null,Vs=0,Er=xr=Ei=null,Kc=!1,f)throw Error(c(300));return d}function qa(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?Ei.memoizedState=Er=d:Er=Er.next=d,Er}function Ga(){if(xr===null){var d=Ei.alternate;d=d!==null?d.memoizedState:null}else d=xr.next;var f=Er===null?Ei.memoizedState:Er.next;if(f!==null)Er=f,xr=d;else{if(d===null)throw Error(c(310));d={memoizedState:(xr=d).memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Er===null?Ei.memoizedState=Er=d:Er=Er.next=d}return Er}function So(d,f){return typeof f=="function"?f(d):f}function Ka(d){var f=Ga(),w=f.queue;if(w===null)throw Error(c(311));w.lastRenderedReducer=d;var C=xr,S=C.baseQueue,B=w.pending;if(B!==null){if(S!==null){var j=S.next;S.next=B.next,B.next=j}C.baseQueue=S=B,w.pending=null}if(S!==null){S=S.next,C=C.baseState;var te=j=B=null,Re=S;do{var De=Re.expirationTime;if(De<Vs){var Je={expirationTime:Re.expirationTime,suspenseConfig:Re.suspenseConfig,action:Re.action,eagerReducer:Re.eagerReducer,eagerState:Re.eagerState,next:null};te===null?(j=te=Je,B=C):te=te.next=Je,De>Ei.expirationTime&&(Ei.expirationTime=De,dd(De))}else te!==null&&(te=te.next={expirationTime:1073741823,suspenseConfig:Re.suspenseConfig,action:Re.action,eagerReducer:Re.eagerReducer,eagerState:Re.eagerState,next:null}),rl(De,Re.suspenseConfig),C=Re.eagerReducer===d?Re.eagerState:d(C,Re.action);Re=Re.next}while(Re!==null&&Re!==S);te===null?B=C:te.next=j,fs(C,f.memoizedState)||(gs=!0),f.memoizedState=C,f.baseState=B,f.baseQueue=te,w.lastRenderedState=C}return[f.memoizedState,w.dispatch]}function Zc(d){var f=Ga(),w=f.queue;if(w===null)throw Error(c(311));w.lastRenderedReducer=d;var C=w.dispatch,S=w.pending,B=f.memoizedState;if(S!==null){w.pending=null;var j=S=S.next;do B=d(B,j.action),j=j.next;while(j!==S);fs(B,f.memoizedState)||(gs=!0),f.memoizedState=B,f.baseQueue===null&&(f.baseState=B),w.lastRenderedState=B}return[B,C]}function Ju(d){var f=qa();return typeof d=="function"&&(d=d()),f.memoizedState=f.baseState=d,d=(d=f.queue={pending:null,dispatch:null,lastRenderedReducer:So,lastRenderedState:d}).dispatch=Xl.bind(null,Ei,d),[f.memoizedState,d]}function Xu(d,f,w,C){return d={tag:d,create:f,destroy:w,deps:C,next:null},(f=Ei.updateQueue)===null?(f={lastEffect:null},Ei.updateQueue=f,f.lastEffect=d.next=d):(w=f.lastEffect)===null?f.lastEffect=d.next=d:(C=w.next,w.next=d,d.next=C,f.lastEffect=d),d}function Za(){return Ga().memoizedState}function Qu(d,f,w,C){var S=qa();Ei.effectTag|=d,S.memoizedState=Xu(1|f,w,void 0,C===void 0?null:C)}function Yl(d,f,w,C){var S=Ga();C=C===void 0?null:C;var B=void 0;if(xr!==null){var j=xr.memoizedState;if(B=j.destroy,C!==null&&Zl(C,j.deps))return void Xu(f,w,B,C)}Ei.effectTag|=d,S.memoizedState=Xu(1|f,w,B,C)}function _h(d,f){return Qu(516,4,d,f)}function ba(d,f){return Yl(516,4,d,f)}function hm(d,f){return Yl(4,2,d,f)}function Ya(d,f){return typeof f=="function"?(d=d(),f(d),function(){f(null)}):f!=null?(d=d(),f.current=d,function(){f.current=null}):void 0}function kh(d,f,w){return w=w!=null?w.concat([d]):null,Yl(4,2,Ya.bind(null,f,d),w)}function ed(){}function Ch(d,f){return qa().memoizedState=[d,f===void 0?null:f],d}function va(d,f){var w=Ga();f=f===void 0?null:f;var C=w.memoizedState;return C!==null&&f!==null&&Zl(f,C[1])?C[0]:(w.memoizedState=[d,f],d)}function Jl(d,f){var w=Ga();f=f===void 0?null:f;var C=w.memoizedState;return C!==null&&f!==null&&Zl(f,C[1])?C[0]:(d=d(),w.memoizedState=[d,f],d)}function Ja(d,f,w){var C=$u();pa(98>C?98:C,function(){d(!0)}),pa(97<C?97:C,function(){var S=Vr.suspense;Vr.suspense=f===void 0?null:f;try{d(!1),w()}finally{Vr.suspense=S}})}function Xl(d,f,w){var C=mo(),S=xo.suspense;S={expirationTime:C=Hs(C,d,S),suspenseConfig:S,action:w,eagerReducer:null,eagerState:null,next:null};var B=f.pending;if(B===null?S.next=S:(S.next=B.next,B.next=S),f.pending=S,B=d.alternate,d===Ei||B!==null&&B===Ei)Kc=!0,S.expirationTime=Vs,Ei.expirationTime=Vs;else{if(d.expirationTime===0&&(B===null||B.expirationTime===0)&&(B=f.lastRenderedReducer)!==null)try{var j=f.lastRenderedState,te=B(j,w);if(S.eagerReducer=B,S.eagerState=te,fs(te,j))return}catch{}Us(d,C)}}var Yc={readContext:Br,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useResponder:On,useDeferredValue:On,useTransition:On},Mg={readContext:Br,useCallback:Ch,useContext:Br,useEffect:_h,useImperativeHandle:function(d,f,w){return w=w!=null?w.concat([d]):null,Qu(4,2,Ya.bind(null,f,d),w)},useLayoutEffect:function(d,f){return Qu(4,2,d,f)},useMemo:function(d,f){var w=qa();return f=f===void 0?null:f,d=d(),w.memoizedState=[d,f],d},useReducer:function(d,f,w){var C=qa();return f=w!==void 0?w(f):f,C.memoizedState=C.baseState=f,d=(d=C.queue={pending:null,dispatch:null,lastRenderedReducer:d,lastRenderedState:f}).dispatch=Xl.bind(null,Ei,d),[C.memoizedState,d]},useRef:function(d){return d={current:d},qa().memoizedState=d},useState:Ju,useDebugValue:ed,useResponder:ga,useDeferredValue:function(d,f){var w=Ju(d),C=w[0],S=w[1];return _h(function(){var B=Vr.suspense;Vr.suspense=f===void 0?null:f;try{S(d)}finally{Vr.suspense=B}},[d,f]),C},useTransition:function(d){var f=Ju(!1),w=f[0];return f=f[1],[Ch(Ja.bind(null,f,d),[f,d]),w]}},fm={readContext:Br,useCallback:va,useContext:Br,useEffect:ba,useImperativeHandle:kh,useLayoutEffect:hm,useMemo:Jl,useReducer:Ka,useRef:Za,useState:function(){return Ka(So)},useDebugValue:ed,useResponder:ga,useDeferredValue:function(d,f){var w=Ka(So),C=w[0],S=w[1];return ba(function(){var B=Vr.suspense;Vr.suspense=f===void 0?null:f;try{S(d)}finally{Vr.suspense=B}},[d,f]),C},useTransition:function(d){var f=Ka(So),w=f[0];return f=f[1],[va(Ja.bind(null,f,d),[f,d]),w]}},wa={readContext:Br,useCallback:va,useContext:Br,useEffect:ba,useImperativeHandle:kh,useLayoutEffect:hm,useMemo:Jl,useReducer:Zc,useRef:Za,useState:function(){return Zc(So)},useDebugValue:ed,useResponder:ga,useDeferredValue:function(d,f){var w=Zc(So),C=w[0],S=w[1];return ba(function(){var B=Vr.suspense;Vr.suspense=f===void 0?null:f;try{S(d)}finally{Vr.suspense=B}},[d,f]),C},useTransition:function(d){var f=Zc(So),w=f[0];return f=f[1],[va(Ja.bind(null,f,d),[f,d]),w]}},Qr=null,To=null,Xa=!1;function xh(d,f){var w=ie(5,null,null,0);w.elementType="DELETED",w.type="DELETED",w.stateNode=f,w.return=d,w.effectTag=8,d.lastEffect!==null?(d.lastEffect.nextEffect=w,d.lastEffect=w):d.firstEffect=d.lastEffect=w}function mm(d,f){switch(d.tag){case 5:var w=d.type;return(f=f.nodeType!==1||w.toLowerCase()!==f.nodeName.toLowerCase()?null:f)!==null&&(d.stateNode=f,!0);case 6:return(f=d.pendingProps===""||f.nodeType!==3?null:f)!==null&&(d.stateNode=f,!0);case 13:default:return!1}}function Eh(d){if(Xa){var f=To;if(f){var w=f;if(!mm(d,f)){if(!(f=na(w.nextSibling))||!mm(d,f))return d.effectTag=-1025&d.effectTag|2,Xa=!1,void(Qr=d);xh(Qr,w)}Qr=d,To=na(f.firstChild)}else d.effectTag=-1025&d.effectTag|2,Xa=!1,Qr=d}}function pm(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Qr=d}function rr(d){if(d!==Qr)return!1;if(!Xa)return pm(d),Xa=!0,!1;var f=d.type;if(d.tag!==5||f!=="head"&&f!=="body"&&!Pl(f,d.memoizedProps))for(f=To;f;)xh(d,f),f=na(f.nextSibling);if(pm(d),d.tag===13){if(!(d=(d=d.memoizedState)!==null?d.dehydrated:null))throw Error(c(317));e:{for(d=d.nextSibling,f=0;d;){if(d.nodeType===8){var w=d.data;if(w==="/$"){if(f===0){To=na(d.nextSibling);break e}f--}else w!=="$"&&w!=="$!"&&w!=="$?"||f++}d=d.nextSibling}To=null}}else To=Qr?na(d.stateNode.nextSibling):null;return!0}function td(){To=Qr=null,Xa=!1}var Lg=$e.ReactCurrentOwner,gs=!1;function Ao(d,f,w,C){f.child=d===null?ql(f,null,w,C):$l(f,d.child,w,C)}function Sh(d,f,w,C,S){w=w.render;var B=f.ref;return Hl(f,S),C=Yu(d,f,w,C,B,S),d===null||gs?(f.effectTag|=1,Ao(d,f,C,S),f.child):(f.updateQueue=d.updateQueue,f.effectTag&=-517,d.expirationTime<=S&&(d.expirationTime=0),ws(d,f,S))}function Th(d,f,w,C,S,B){if(d===null){var j=w.type;return typeof j!="function"||le(j)||j.defaultProps!==void 0||w.compare!==null||w.defaultProps!==void 0?((d=ye(w.type,null,C,null,f.mode,B)).ref=f.ref,d.return=f,f.child=d):(f.tag=15,f.type=j,Ah(d,f,j,C,S,B))}return j=d.child,S<B&&(S=j.memoizedProps,(w=(w=w.compare)!==null?w:Mr)(S,C)&&d.ref===f.ref)?ws(d,f,B):(f.effectTag|=1,(d=Ce(j,C)).ref=f.ref,d.return=f,f.child=d)}function Ah(d,f,w,C,S,B){return d!==null&&Mr(d.memoizedProps,C)&&d.ref===f.ref&&(gs=!1,S<B)?(f.expirationTime=d.expirationTime,ws(d,f,B)):Ph(d,f,w,C,B)}function gm(d,f){var w=f.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(f.effectTag|=128)}function Ph(d,f,w,C,S){var B=Lr(w)?Ua:Ci.current;return B=Ms(f,B),Hl(f,S),w=Yu(d,f,w,C,B,S),d===null||gs?(f.effectTag|=1,Ao(d,f,w,S),f.child):(f.updateQueue=d.updateQueue,f.effectTag&=-517,d.expirationTime<=S&&(d.expirationTime=0),ws(d,f,S))}function bm(d,f,w,C,S){if(Lr(w)){var B=!0;da(f)}else B=!1;if(Hl(f,S),f.stateNode===null)d!==null&&(d.alternate=null,f.alternate=null,f.effectTag|=2),Ku(f,w,C),Zu(f,w,C,S),C=!0;else if(d===null){var j=f.stateNode,te=f.memoizedProps;j.props=te;var Re=j.context,De=w.contextType;typeof De=="object"&&De!==null?De=Br(De):De=Ms(f,De=Lr(w)?Ua:Ci.current);var Je=w.getDerivedStateFromProps,vt=typeof Je=="function"||typeof j.getSnapshotBeforeUpdate=="function";vt||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(te!==C||Re!==De)&&Wl(f,j,C,De),Cr=!1;var Gt=f.memoizedState;j.state=Gt,Nr(f,C,j,S),Re=f.memoizedState,te!==C||Gt!==Re||nr.current||Cr?(typeof Je=="function"&&(Ul(f,w,Je,C),Re=f.memoizedState),(te=Cr||dm(f,w,te,C,Gt,Re,De))?(vt||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(f.effectTag|=4)):(typeof j.componentDidMount=="function"&&(f.effectTag|=4),f.memoizedProps=C,f.memoizedState=Re),j.props=C,j.state=Re,j.context=De,C=te):(typeof j.componentDidMount=="function"&&(f.effectTag|=4),C=!1)}else j=f.stateNode,ph(d,f),te=f.memoizedProps,j.props=f.type===f.elementType?te:Uo(f.type,te),Re=j.context,typeof(De=w.contextType)=="object"&&De!==null?De=Br(De):De=Ms(f,De=Lr(w)?Ua:Ci.current),(vt=typeof(Je=w.getDerivedStateFromProps)=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(te!==C||Re!==De)&&Wl(f,j,C,De),Cr=!1,Re=f.memoizedState,j.state=Re,Nr(f,C,j,S),Gt=f.memoizedState,te!==C||Re!==Gt||nr.current||Cr?(typeof Je=="function"&&(Ul(f,w,Je,C),Gt=f.memoizedState),(Je=Cr||dm(f,w,te,C,Re,Gt,De))?(vt||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(C,Gt,De),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(C,Gt,De)),typeof j.componentDidUpdate=="function"&&(f.effectTag|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(f.effectTag|=256)):(typeof j.componentDidUpdate!="function"||te===d.memoizedProps&&Re===d.memoizedState||(f.effectTag|=4),typeof j.getSnapshotBeforeUpdate!="function"||te===d.memoizedProps&&Re===d.memoizedState||(f.effectTag|=256),f.memoizedProps=C,f.memoizedState=Gt),j.props=C,j.state=Gt,j.context=De,C=Je):(typeof j.componentDidUpdate!="function"||te===d.memoizedProps&&Re===d.memoizedState||(f.effectTag|=4),typeof j.getSnapshotBeforeUpdate!="function"||te===d.memoizedProps&&Re===d.memoizedState||(f.effectTag|=256),C=!1);return bs(d,f,w,C,B,S)}function bs(d,f,w,C,S,B){gm(d,f);var j=(64&f.effectTag)!=0;if(!C&&!j)return S&&ha(f,w,!1),ws(d,f,B);C=f.stateNode,Lg.current=f;var te=j&&typeof w.getDerivedStateFromError!="function"?null:C.render();return f.effectTag|=1,d!==null&&j?(f.child=$l(f,d.child,null,B),f.child=$l(f,null,te,B)):Ao(d,f,te,B),f.memoizedState=C.state,S&&ha(f,w,!0),f.child}function Ql(d){var f=d.stateNode;f.pendingContext?dh(0,f.pendingContext,f.pendingContext!==f.context):f.context&&dh(0,f.context,!1),vh(d,f.containerInfo)}var Jc,ec,vs,Ih={dehydrated:null,retryTime:0};function vm(d,f,w){var C,S=f.mode,B=f.pendingProps,j=xi.current,te=!1;if((C=(64&f.effectTag)!=0)||(C=(2&j)!=0&&(d===null||d.memoizedState!==null)),C?(te=!0,f.effectTag&=-65):d!==null&&d.memoizedState===null||B.fallback===void 0||B.unstable_avoidThisFallback===!0||(j|=1),si(xi,1&j),d===null){if(B.fallback!==void 0&&Eh(f),te){if(te=B.fallback,(B=Ve(null,S,0,null)).return=f,(2&f.mode)==0)for(d=f.memoizedState!==null?f.child.child:f.child,B.child=d;d!==null;)d.return=B,d=d.sibling;return(w=Ve(te,S,w,null)).return=f,B.sibling=w,f.memoizedState=Ih,f.child=B,w}return S=B.children,f.memoizedState=null,f.child=ql(f,null,S,w)}if(d.memoizedState!==null){if(S=(d=d.child).sibling,te){if(B=B.fallback,(w=Ce(d,d.pendingProps)).return=f,(2&f.mode)==0&&(te=f.memoizedState!==null?f.child.child:f.child)!==d.child)for(w.child=te;te!==null;)te.return=w,te=te.sibling;return(S=Ce(S,B)).return=f,w.sibling=S,w.childExpirationTime=0,f.memoizedState=Ih,f.child=w,S}return w=$l(f,d.child,B.children,w),f.memoizedState=null,f.child=w}if(d=d.child,te){if(te=B.fallback,(B=Ve(null,S,0,null)).return=f,B.child=d,d!==null&&(d.return=B),(2&f.mode)==0)for(d=f.memoizedState!==null?f.child.child:f.child,B.child=d;d!==null;)d.return=B,d=d.sibling;return(w=Ve(te,S,w,null)).return=f,B.sibling=w,w.effectTag|=2,B.childExpirationTime=0,f.memoizedState=Ih,f.child=B,w}return f.memoizedState=null,f.child=$l(f,d,B.children,w)}function Qa(d,f){d.expirationTime<f&&(d.expirationTime=f);var w=d.alternate;w!==null&&w.expirationTime<f&&(w.expirationTime=f),zl(d.return,f)}function nd(d,f,w,C,S,B){var j=d.memoizedState;j===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:C,tail:w,tailExpiration:0,tailMode:S,lastEffect:B}:(j.isBackwards=f,j.rendering=null,j.renderingStartTime=0,j.last=C,j.tail=w,j.tailExpiration=0,j.tailMode=S,j.lastEffect=B)}function Dh(d,f,w){var C=f.pendingProps,S=C.revealOrder,B=C.tail;if(Ao(d,f,C.children,w),(2&(C=xi.current))!=0)C=1&C|2,f.effectTag|=64;else{if(d!==null&&64&d.effectTag)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Qa(d,w);else if(d.tag===19)Qa(d,w);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}C&=1}if(si(xi,C),(2&f.mode)==0)f.memoizedState=null;else switch(S){case"forwards":for(w=f.child,S=null;w!==null;)(d=w.alternate)!==null&&Gc(d)===null&&(S=w),w=w.sibling;(w=S)===null?(S=f.child,f.child=null):(S=w.sibling,w.sibling=null),nd(f,!1,S,w,B,f.lastEffect);break;case"backwards":for(w=null,S=f.child,f.child=null;S!==null;){if((d=S.alternate)!==null&&Gc(d)===null){f.child=S;break}d=S.sibling,S.sibling=w,w=S,S=d}nd(f,!0,w,null,B,f.lastEffect);break;case"together":nd(f,!1,null,null,void 0,f.lastEffect);break;default:f.memoizedState=null}return f.child}function ws(d,f,w){d!==null&&(f.dependencies=d.dependencies);var C=f.expirationTime;if(C!==0&&dd(C),f.childExpirationTime<w)return null;if(d!==null&&f.child!==d.child)throw Error(c(153));if(f.child!==null){for(w=Ce(d=f.child,d.pendingProps),f.child=w,w.return=f;d.sibling!==null;)d=d.sibling,(w=w.sibling=Ce(d,d.pendingProps)).return=f;w.sibling=null}return f.child}function el(d,f){switch(d.tailMode){case"hidden":f=d.tail;for(var w=null;f!==null;)f.alternate!==null&&(w=f),f=f.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var C=null;w!==null;)w.alternate!==null&&(C=w),w=w.sibling;C===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:C.sibling=null}}function tc(d,f,w){var C=f.pendingProps;switch(f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Lr(f.type)&&ca(),null;case 3:return Ns(),oi(nr),oi(Ci),(w=f.stateNode).pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),d!==null&&d.child!==null||!rr(f)||(f.effectTag|=4),null;case 5:yh(f),w=$a(Gl.current);var S=f.type;if(d!==null&&f.stateNode!=null)ec(d,f,S,C,w),d.ref!==f.ref&&(f.effectTag|=128);else{if(!C){if(f.stateNode===null)throw Error(c(166));return null}if(d=$a(Wo.current),rr(f)){C=f.stateNode,S=f.type;var B=f.memoizedProps;switch(C[zo]=f,C[Na]=B,S){case"iframe":case"object":case"embed":qn("load",C);break;case"video":case"audio":for(d=0;d<Dn.length;d++)qn(Dn[d],C);break;case"source":qn("error",C);break;case"img":case"image":case"link":qn("error",C),qn("load",C);break;case"form":qn("reset",C),qn("submit",C);break;case"details":qn("toggle",C);break;case"input":Nt(C,B),qn("invalid",C),tr(w,"onChange");break;case"select":C._wrapperState={wasMultiple:!!B.multiple},qn("invalid",C),tr(w,"onChange");break;case"textarea":gr(C,B),qn("invalid",C),tr(w,"onChange")}for(var j in Ic(S,B),d=null,B)if(B.hasOwnProperty(j)){var te=B[j];j==="children"?typeof te=="string"?C.textContent!==te&&(d=["children",te]):typeof te=="number"&&C.textContent!==""+te&&(d=["children",""+te]):se.hasOwnProperty(j)&&te!=null&&tr(w,j)}switch(S){case"input":dn(C),Ri(C,B,!0);break;case"textarea":dn(C),Ia(C);break;case"select":case"option":break;default:typeof B.onClick=="function"&&(C.onclick=ta)}w=d,f.updateQueue=w,w!==null&&(f.effectTag|=4)}else{switch(j=w.nodeType===9?w:w.ownerDocument,d===Dc&&(d=nt(S)),d===Dc?S==="script"?((d=j.createElement("div")).innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof C.is=="string"?d=j.createElement(S,{is:C.is}):(d=j.createElement(S),S==="select"&&(j=d,C.multiple?j.multiple=!0:C.size&&(j.size=C.size))):d=j.createElementNS(d,S),d[zo]=f,d[Na]=C,Jc(d,f),f.stateNode=d,j=La(S,C),S){case"iframe":case"object":case"embed":qn("load",d),te=C;break;case"video":case"audio":for(te=0;te<Dn.length;te++)qn(Dn[te],d);te=C;break;case"source":qn("error",d),te=C;break;case"img":case"image":case"link":qn("error",d),qn("load",d),te=C;break;case"form":qn("reset",d),qn("submit",d),te=C;break;case"details":qn("toggle",d),te=C;break;case"input":Nt(d,C),te=ln(d,C),qn("invalid",d),tr(w,"onChange");break;case"option":te=ur(d,C);break;case"select":d._wrapperState={wasMultiple:!!C.multiple},te=s({},C,{value:void 0}),qn("invalid",d),tr(w,"onChange");break;case"textarea":gr(d,C),te=ji(d,C),qn("invalid",d),tr(w,"onChange");break;default:te=C}Ic(S,te);var Re=te;for(B in Re)if(Re.hasOwnProperty(B)){var De=Re[B];B==="style"?Yr(d,De):B==="dangerouslySetInnerHTML"?(De=De?De.__html:void 0)!=null&&rn(d,De):B==="children"?typeof De=="string"?(S!=="textarea"||De!=="")&&Tn(d,De):typeof De=="number"&&Tn(d,""+De):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(se.hasOwnProperty(B)?De!=null&&tr(w,B):De!=null&&At(d,B,De,j))}switch(S){case"input":dn(d),Ri(d,C,!1);break;case"textarea":dn(d),Ia(d);break;case"option":C.value!=null&&d.setAttribute("value",""+xt(C.value));break;case"select":d.multiple=!!C.multiple,(w=C.value)!=null?Oi(d,!!C.multiple,w,!1):C.defaultValue!=null&&Oi(d,!!C.multiple,C.defaultValue,!0);break;default:typeof te.onClick=="function"&&(d.onclick=ta)}Bu(S,C)&&(f.effectTag|=4)}f.ref!==null&&(f.effectTag|=128)}return null;case 6:if(d&&f.stateNode!=null)vs(0,f,d.memoizedProps,C);else{if(typeof C!="string"&&f.stateNode===null)throw Error(c(166));w=$a(Gl.current),$a(Wo.current),rr(f)?(w=f.stateNode,C=f.memoizedProps,w[zo]=f,w.nodeValue!==C&&(f.effectTag|=4)):((w=(w.nodeType===9?w:w.ownerDocument).createTextNode(C))[zo]=f,f.stateNode=w)}return null;case 13:return oi(xi),C=f.memoizedState,64&f.effectTag?(f.expirationTime=w,f):(w=C!==null,C=!1,d===null?f.memoizedProps.fallback!==void 0&&rr(f):(C=(S=d.memoizedState)!==null,w||S===null||(S=d.child.sibling)!==null&&((B=f.firstEffect)!==null?(f.firstEffect=S,S.nextEffect=B):(f.firstEffect=f.lastEffect=S,S.nextEffect=null),S.effectTag=8)),w&&!C&&2&f.mode&&(d===null&&f.memoizedProps.unstable_avoidThisFallback!==!0||1&xi.current?Yi===jo&&(Yi=od):(Yi!==jo&&Yi!==od||(Yi=Qc),lc!==0&&fo!==null&&(tt(fo,eo),bt(fo,lc)))),(w||C)&&(f.effectTag|=4),null);case 4:return Ns(),null;case 10:return qu(f),null;case 17:return Lr(f.type)&&ca(),null;case 19:if(oi(xi),(C=f.memoizedState)===null)return null;if(S=(64&f.effectTag)!=0,(B=C.rendering)===null){if(S)el(C,!1);else if(Yi!==jo||d!==null&&64&d.effectTag)for(B=f.child;B!==null;){if((d=Gc(B))!==null){for(f.effectTag|=64,el(C,!1),(S=d.updateQueue)!==null&&(f.updateQueue=S,f.effectTag|=4),C.lastEffect===null&&(f.firstEffect=null),f.lastEffect=C.lastEffect,C=f.child;C!==null;)B=w,(S=C).effectTag&=2,S.nextEffect=null,S.firstEffect=null,S.lastEffect=null,(d=S.alternate)===null?(S.childExpirationTime=0,S.expirationTime=B,S.child=null,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null):(S.childExpirationTime=d.childExpirationTime,S.expirationTime=d.expirationTime,S.child=d.child,S.memoizedProps=d.memoizedProps,S.memoizedState=d.memoizedState,S.updateQueue=d.updateQueue,B=d.dependencies,S.dependencies=B===null?null:{expirationTime:B.expirationTime,firstContext:B.firstContext,responders:B.responders}),C=C.sibling;return si(xi,1&xi.current|2),f.child}B=B.sibling}}else{if(!S)if((d=Gc(B))!==null){if(f.effectTag|=64,S=!0,(w=d.updateQueue)!==null&&(f.updateQueue=w,f.effectTag|=4),el(C,!0),C.tail===null&&C.tailMode==="hidden"&&!B.alternate)return(f=f.lastEffect=C.lastEffect)!==null&&(f.nextEffect=null),null}else 2*kr()-C.renderingStartTime>C.tailExpiration&&1<w&&(f.effectTag|=64,S=!0,el(C,!1),f.expirationTime=f.childExpirationTime=w-1);C.isBackwards?(B.sibling=f.child,f.child=B):((w=C.last)!==null?w.sibling=B:f.child=B,C.last=B)}return C.tail!==null?(C.tailExpiration===0&&(C.tailExpiration=kr()+500),w=C.tail,C.rendering=w,C.tail=w.sibling,C.lastEffect=f.lastEffect,C.renderingStartTime=kr(),w.sibling=null,f=xi.current,si(xi,S?1&f|2:1&f),w):null}throw Error(c(156,f.tag))}function Rh(d){switch(d.tag){case 1:Lr(d.type)&&ca();var f=d.effectTag;return 4096&f?(d.effectTag=-4097&f|64,d):null;case 3:if(Ns(),oi(nr),oi(Ci),(64&(f=d.effectTag))!=0)throw Error(c(285));return d.effectTag=-4097&f|64,d;case 5:return yh(d),null;case 13:return oi(xi),4096&(f=d.effectTag)?(d.effectTag=-4097&f|64,d):null;case 19:return oi(xi),null;case 4:return Ns(),null;case 10:return qu(d),null;default:return null}}function Xc(d,f){return{value:d,source:f,stack:rt(f)}}Jc=function(d,f){for(var w=f.child;w!==null;){if(w.tag===5||w.tag===6)d.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===f)break;for(;w.sibling===null;){if(w.return===null||w.return===f)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},ec=function(d,f,w,C,S){var B=d.memoizedProps;if(B!==C){var j,te,Re=f.stateNode;switch($a(Wo.current),d=null,w){case"input":B=ln(Re,B),C=ln(Re,C),d=[];break;case"option":B=ur(Re,B),C=ur(Re,C),d=[];break;case"select":B=s({},B,{value:void 0}),C=s({},C,{value:void 0}),d=[];break;case"textarea":B=ji(Re,B),C=ji(Re,C),d=[];break;default:typeof B.onClick!="function"&&typeof C.onClick=="function"&&(Re.onclick=ta)}for(j in Ic(w,C),w=null,B)if(!C.hasOwnProperty(j)&&B.hasOwnProperty(j)&&B[j]!=null)if(j==="style")for(te in Re=B[j])Re.hasOwnProperty(te)&&(w||(w={}),w[te]="");else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(se.hasOwnProperty(j)?d||(d=[]):(d=d||[]).push(j,null));for(j in C){var De=C[j];if(Re=B?.[j],C.hasOwnProperty(j)&&De!==Re&&(De!=null||Re!=null))if(j==="style")if(Re){for(te in Re)!Re.hasOwnProperty(te)||De&&De.hasOwnProperty(te)||(w||(w={}),w[te]="");for(te in De)De.hasOwnProperty(te)&&Re[te]!==De[te]&&(w||(w={}),w[te]=De[te])}else w||(d||(d=[]),d.push(j,w)),w=De;else j==="dangerouslySetInnerHTML"?(De=De?De.__html:void 0,Re=Re?Re.__html:void 0,De!=null&&Re!==De&&(d=d||[]).push(j,De)):j==="children"?Re===De||typeof De!="string"&&typeof De!="number"||(d=d||[]).push(j,""+De):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(se.hasOwnProperty(j)?(De!=null&&tr(S,j),d||Re===De||(d=[])):(d=d||[]).push(j,De))}w&&(d=d||[]).push("style",w),S=d,(f.updateQueue=S)&&(f.effectTag|=4)}},vs=function(d,f,w,C){w!==C&&(f.effectTag|=4)};var Oh=typeof WeakSet=="function"?WeakSet:Set;function Fh(d,f){var w=f.source,C=f.stack;C===null&&w!==null&&(C=rt(w)),w!==null&&Et(w.type),f=f.value,d!==null&&d.tag===1&&Et(d.type);try{console.error(f)}catch(S){setTimeout(function(){throw S})}}function nc(d){var f=d.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(w){v(d,w)}else f.current=null}function wm(d,f){switch(f.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&f.effectTag&&d!==null){var w=d.memoizedProps,C=d.memoizedState;f=(d=f.stateNode).getSnapshotBeforeUpdate(f.elementType===f.type?w:Uo(f.type,w),C),d.__reactInternalSnapshotBeforeUpdate=f}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(c(163))}function ym(d,f){if((f=(f=f.updateQueue)!==null?f.lastEffect:null)!==null){var w=f=f.next;do{if((w.tag&d)===d){var C=w.destroy;w.destroy=void 0,C!==void 0&&C()}w=w.next}while(w!==f)}}function Mh(d,f){if((f=(f=f.updateQueue)!==null?f.lastEffect:null)!==null){var w=f=f.next;do{if((w.tag&d)===d){var C=w.create;w.destroy=C()}w=w.next}while(w!==f)}}function id(d,f,w){switch(w.tag){case 0:case 11:case 15:case 22:return void Mh(3,w);case 1:if(d=w.stateNode,4&w.effectTag)if(f===null)d.componentDidMount();else{var C=w.elementType===w.type?f.memoizedProps:Uo(w.type,f.memoizedProps);d.componentDidUpdate(C,f.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}return void((f=w.updateQueue)!==null&&Bs(w,f,d));case 3:if((f=w.updateQueue)!==null){if(d=null,w.child!==null)switch(w.child.tag){case 5:d=w.child.stateNode;break;case 1:d=w.child.stateNode}Bs(w,f,d)}return;case 5:return d=w.stateNode,void(f===null&&4&w.effectTag&&Bu(w.type,w.memoizedProps)&&d.focus());case 6:case 4:case 12:return;case 13:return void(w.memoizedState===null&&(w=w.alternate,w!==null&&(w=w.memoizedState,w!==null&&(w=w.dehydrated,w!==null&&Rs(w)))));case 19:case 17:case 20:case 21:return}throw Error(c(163))}function _m(d,f,w){switch(typeof I=="function"&&I(f),f.tag){case 0:case 11:case 14:case 15:case 22:if((d=f.updateQueue)!==null&&(d=d.lastEffect)!==null){var C=d.next;pa(97<w?97:w,function(){var S=C;do{var B=S.destroy;if(B!==void 0){var j=f;try{B()}catch(te){v(j,te)}}S=S.next}while(S!==C)})}break;case 1:nc(f),typeof(w=f.stateNode).componentWillUnmount=="function"&&function(S,B){try{B.props=S.memoizedProps,B.state=S.memoizedState,B.componentWillUnmount()}catch(j){v(S,j)}}(f,w);break;case 5:nc(f);break;case 4:Bh(d,f,w)}}function km(d){var f=d.alternate;d.return=null,d.child=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.alternate=null,d.firstEffect=null,d.lastEffect=null,d.pendingProps=null,d.memoizedProps=null,d.stateNode=null,f!==null&&km(f)}function ic(d){return d.tag===5||d.tag===3||d.tag===4}function Lh(d){e:{for(var f=d.return;f!==null;){if(ic(f)){var w=f;break e}f=f.return}throw Error(c(160))}switch(f=w.stateNode,w.tag){case 5:var C=!1;break;case 3:case 4:f=f.containerInfo,C=!0;break;default:throw Error(c(161))}16&w.effectTag&&(Tn(f,""),w.effectTag&=-17);e:t:for(w=d;;){for(;w.sibling===null;){if(w.return===null||ic(w.return)){w=null;break e}w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(2&w.effectTag||w.child===null||w.tag===4)continue t;w.child.return=w,w=w.child}if(!(2&w.effectTag)){w=w.stateNode;break e}}C?function S(B,j,te){var Re=B.tag,De=Re===5||Re===6;if(De)B=De?B.stateNode:B.stateNode.instance,j?te.nodeType===8?te.parentNode.insertBefore(B,j):te.insertBefore(B,j):(te.nodeType===8?(j=te.parentNode).insertBefore(B,te):(j=te).appendChild(B),(te=te._reactRootContainer)!==null&&te!==void 0||j.onclick!==null||(j.onclick=ta));else if(Re!==4&&(B=B.child)!==null)for(S(B,j,te),B=B.sibling;B!==null;)S(B,j,te),B=B.sibling}(d,w,f):function S(B,j,te){var Re=B.tag,De=Re===5||Re===6;if(De)B=De?B.stateNode:B.stateNode.instance,j?te.insertBefore(B,j):te.appendChild(B);else if(Re!==4&&(B=B.child)!==null)for(S(B,j,te),B=B.sibling;B!==null;)S(B,j,te),B=B.sibling}(d,w,f)}function Bh(d,f,w){for(var C,S,B=f,j=!1;;){if(!j){j=B.return;e:for(;;){if(j===null)throw Error(c(160));switch(C=j.stateNode,j.tag){case 5:S=!1;break e;case 3:case 4:C=C.containerInfo,S=!0;break e}j=j.return}j=!0}if(B.tag===5||B.tag===6){e:for(var te=d,Re=B,De=w,Je=Re;;)if(_m(te,Je,De),Je.child!==null&&Je.tag!==4)Je.child.return=Je,Je=Je.child;else{if(Je===Re)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===Re)break e;Je=Je.return}Je.sibling.return=Je.return,Je=Je.sibling}S?(te=C,Re=B.stateNode,te.nodeType===8?te.parentNode.removeChild(Re):te.removeChild(Re)):C.removeChild(B.stateNode)}else if(B.tag===4){if(B.child!==null){C=B.stateNode.containerInfo,S=!0,B.child.return=B,B=B.child;continue}}else if(_m(d,B,w),B.child!==null){B.child.return=B,B=B.child;continue}if(B===f)break;for(;B.sibling===null;){if(B.return===null||B.return===f)return;(B=B.return).tag===4&&(j=!1)}B.sibling.return=B.return,B=B.sibling}}function Nh(d,f){switch(f.tag){case 0:case 11:case 14:case 15:case 22:return void ym(3,f);case 1:return;case 5:var w=f.stateNode;if(w!=null){var C=f.memoizedProps,S=d!==null?d.memoizedProps:C;d=f.type;var B=f.updateQueue;if(f.updateQueue=null,B!==null){for(w[Na]=C,d==="input"&&C.type==="radio"&&C.name!=null&&zn(w,C),La(d,S),f=La(d,C),S=0;S<B.length;S+=2){var j=B[S],te=B[S+1];j==="style"?Yr(w,te):j==="dangerouslySetInnerHTML"?rn(w,te):j==="children"?Tn(w,te):At(w,j,te,f)}switch(d){case"input":Wn(w,C);break;case"textarea":$r(w,C);break;case"select":f=w._wrapperState.wasMultiple,w._wrapperState.wasMultiple=!!C.multiple,(d=C.value)!=null?Oi(w,!!C.multiple,d,!1):f!==!!C.multiple&&(C.defaultValue!=null?Oi(w,!!C.multiple,C.defaultValue,!0):Oi(w,!!C.multiple,C.multiple?[]:"",!1))}}}return;case 6:if(f.stateNode===null)throw Error(c(162));return void(f.stateNode.nodeValue=f.memoizedProps);case 3:return void((f=f.stateNode).hydrate&&(f.hydrate=!1,Rs(f.containerInfo)));case 12:return;case 13:if(w=f,f.memoizedState===null?C=!1:(C=!0,w=f.child,ld=kr()),w!==null)e:for(d=w;;){if(d.tag===5)B=d.stateNode,C?typeof(B=B.style).setProperty=="function"?B.setProperty("display","none","important"):B.display="none":(B=d.stateNode,S=(S=d.memoizedProps.style)!=null&&S.hasOwnProperty("display")?S.display:null,B.style.display=Pc("display",S));else if(d.tag===6)d.stateNode.nodeValue=C?"":d.memoizedProps;else{if(d.tag===13&&d.memoizedState!==null&&d.memoizedState.dehydrated===null){(B=d.child.sibling).return=d,d=B;continue}if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===w)break;for(;d.sibling===null;){if(d.return===null||d.return===w)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}return void rd(f);case 19:return void rd(f);case 17:return}throw Error(c(163))}function rd(d){var f=d.updateQueue;if(f!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new Oh),f.forEach(function(C){var S=E.bind(null,d,C);w.has(C)||(w.add(C),C.then(S,S))})}}var Cm=typeof WeakMap=="function"?WeakMap:Map;function xm(d,f,w){(w=Ls(w,null)).tag=3,w.payload={element:null};var C=f.value;return w.callback=function(){eu||(eu=!0,cc=C),Fh(d,f)},w}function Vh(d,f,w){(w=Ls(w,null)).tag=3;var C=d.type.getDerivedStateFromError;if(typeof C=="function"){var S=f.value;w.payload=function(){return Fh(d,f),C(S)}}var B=d.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(w.callback=function(){typeof C!="function"&&(ya===null?ya=new Set([this]):ya.add(this),Fh(d,f));var j=f.stack;this.componentDidCatch(f.value,{componentStack:j!==null?j:""})}),w}var zh,Bg=Math.ceil,rc=$e.ReactCurrentDispatcher,oc=$e.ReactCurrentOwner,jo=0,od=3,Qc=4,on=0,fo=null,sn=null,eo=0,Yi=jo,sd=null,zs=1073741823,sc=1073741823,ac=null,lc=0,ad=!1,ld=0,It=null,eu=!1,cc=null,ya=null,cd=!1,tu=null,Fn=90,tl=null,nl=0,il=null,to=0;function mo(){return 48&on?1073741821-(kr()/10|0):to!==0?to:to=1073741821-(kr()/10|0)}function Hs(d,f,w){if(!(2&(f=f.mode)))return 1073741823;var C=$u();if(!(4&f))return C===99?1073741823:1073741822;if(16&on)return eo;if(w!==null)d=Bl(d,0|w.timeoutMs||5e3,250);else switch(C){case 99:d=1073741823;break;case 98:d=Bl(d,150,100);break;case 97:case 96:d=Bl(d,5e3,250);break;case 95:d=2;break;default:throw Error(c(326))}return fo!==null&&d===eo&&--d,d}function Us(d,f){if(50<nl)throw nl=0,il=null,Error(c(185));if((d=nu(d,f))!==null){var w=$u();f===1073741823?8&on&&!(48&on)?Uh(d):(zr(d),on===0&&Co()):zr(d),!(4&on)||w!==98&&w!==99||(tl===null?tl=new Map([[d,f]]):((w=tl.get(d))===void 0||w>f)&&tl.set(d,f))}}function nu(d,f){d.expirationTime<f&&(d.expirationTime=f);var w=d.alternate;w!==null&&w.expirationTime<f&&(w.expirationTime=f);var C=d.return,S=null;if(C===null&&d.tag===3)S=d.stateNode;else for(;C!==null;){if(w=C.alternate,C.childExpirationTime<f&&(C.childExpirationTime=f),w!==null&&w.childExpirationTime<f&&(w.childExpirationTime=f),C.return===null&&C.tag===3){S=C.stateNode;break}C=C.return}return S!==null&&(fo===S&&(dd(f),Yi===Qc&&tt(S,eo)),bt(S,f)),S}function iu(d){var f=d.lastExpiredTime;if(f!==0||!dt(d,f=d.firstPendingTime))return f;var w=d.lastPingedTime;return 2>=(d=w>(d=d.nextKnownPendingLevel)?w:d)&&f!==d?0:d}function zr(d){if(d.lastExpiredTime!==0)d.callbackExpirationTime=1073741823,d.callbackPriority=99,d.callbackNode=um(Uh.bind(null,d));else{var f=iu(d),w=d.callbackNode;if(f===0)w!==null&&(d.callbackNode=null,d.callbackExpirationTime=0,d.callbackPriority=90);else{var C=mo();if(f===1073741823?C=99:f===1||f===2?C=95:C=0>=(C=10*(1073741821-f)-10*(1073741821-C))?99:250>=C?98:5250>=C?97:95,w!==null){var S=d.callbackPriority;if(d.callbackExpirationTime===f&&S>=C)return;w!==lm&&hh(w)}d.callbackExpirationTime=f,d.callbackPriority=C,f=f===1073741823?um(Uh.bind(null,d)):cm(C,Hh.bind(null,d),{timeout:10*(1073741821-f)-kr()}),d.callbackNode=f}}}function Hh(d,f){if(to=0,f)return Mt(d,f=mo()),zr(d),null;var w=iu(d);if(w!==0){if(f=d.callbackNode,(48&on)!=0)throw Error(c(327));if(u(),d===fo&&w===eo||fn(d,w),sn!==null){var C=on;on|=16;for(var S=Em();;)try{Ng();break}catch(te){jh(d,te)}if(Wc(),on=C,rc.current=S,Yi===1)throw f=sd,fn(d,w),tt(d,w),zr(d),f;if(sn===null)switch(S=d.finishedWork=d.current.alternate,d.finishedExpirationTime=w,C=Yi,fo=null,C){case jo:case 1:throw Error(c(345));case 2:Mt(d,2<w?2:w);break;case od:if(tt(d,w),w===(C=d.lastSuspendedTime)&&(d.nextKnownPendingLevel=$h(S)),zs===1073741823&&10<(S=ld+500-kr())){if(ad){var B=d.lastPingedTime;if(B===0||B>=w){d.lastPingedTime=w,fn(d,w);break}}if((B=iu(d))!==0&&B!==w)break;if(C!==0&&C!==w){d.lastPingedTime=C;break}d.timeoutHandle=Il(ol.bind(null,d),S);break}ol(d);break;case Qc:if(tt(d,w),w===(C=d.lastSuspendedTime)&&(d.nextKnownPendingLevel=$h(S)),ad&&((S=d.lastPingedTime)===0||S>=w)){d.lastPingedTime=w,fn(d,w);break}if((S=iu(d))!==0&&S!==w)break;if(C!==0&&C!==w){d.lastPingedTime=C;break}if(sc!==1073741823?C=10*(1073741821-sc)-kr():zs===1073741823?C=0:(C=10*(1073741821-zs)-5e3,0>(C=(S=kr())-C)&&(C=0),(w=10*(1073741821-w)-S)<(C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*Bg(C/1960))-C)&&(C=w)),10<C){d.timeoutHandle=Il(ol.bind(null,d),C);break}ol(d);break;case 5:if(zs!==1073741823&&ac!==null){B=zs;var j=ac;if(0>=(C=0|j.busyMinDurationMs)?C=0:(S=0|j.busyDelayMs,C=(B=kr()-(10*(1073741821-B)-(0|j.timeoutMs||5e3)))<=S?0:S+C-B),10<C){tt(d,w),d.timeoutHandle=Il(ol.bind(null,d),C);break}}ol(d);break;default:throw Error(c(329))}if(zr(d),d.callbackNode===f)return Hh.bind(null,d)}}return null}function Uh(d){var f=d.lastExpiredTime;if(f=f!==0?f:1073741823,(48&on)!=0)throw Error(c(327));if(u(),d===fo&&f===eo||fn(d,f),sn!==null){var w=on;on|=16;for(var C=Em();;)try{hd();break}catch(S){jh(d,S)}if(Wc(),on=w,rc.current=C,Yi===1)throw w=sd,fn(d,f),tt(d,f),zr(d),w;if(sn!==null)throw Error(c(261));d.finishedWork=d.current.alternate,d.finishedExpirationTime=f,fo=null,ol(d),zr(d)}return null}function ud(d,f){var w=on;on|=1;try{return d(f)}finally{(on=w)===0&&Co()}}function Wh(d,f){var w=on;on&=-2,on|=8;try{return d(f)}finally{(on=w)===0&&Co()}}function fn(d,f){d.finishedWork=null,d.finishedExpirationTime=0;var w=d.timeoutHandle;if(w!==-1&&(d.timeoutHandle=-1,Nu(w)),sn!==null)for(w=sn.return;w!==null;){var C=w;switch(C.tag){case 1:(C=C.type.childContextTypes)!=null&&ca();break;case 3:Ns(),oi(nr),oi(Ci);break;case 5:yh(C);break;case 4:Ns();break;case 13:case 19:oi(xi);break;case 10:qu(C)}w=w.return}fo=d,sn=Ce(d.current,null),eo=f,Yi=jo,sd=null,sc=zs=1073741823,ac=null,lc=0,ad=!1}function jh(d,f){for(;;){try{if(Wc(),Kl.current=Yc,Kc)for(var w=Ei.memoizedState;w!==null;){var C=w.queue;C!==null&&(C.pending=null),w=w.next}if(Vs=0,Er=xr=Ei=null,Kc=!1,sn===null||sn.return===null)return Yi=1,sd=f,sn=null;e:{var S=d,B=sn.return,j=sn,te=f;if(f=eo,j.effectTag|=2048,j.firstEffect=j.lastEffect=null,te!==null&&typeof te=="object"&&typeof te.then=="function"){var Re=te;if(!(2&j.mode)){var De=j.alternate;De?(j.updateQueue=De.updateQueue,j.memoizedState=De.memoizedState,j.expirationTime=De.expirationTime):(j.updateQueue=null,j.memoizedState=null)}var Je=(1&xi.current)!=0,vt=B;do{var Gt;if(Gt=vt.tag===13){var wn=vt.memoizedState;if(wn!==null)Gt=wn.dehydrated!==null;else{var ys=vt.memoizedProps;Gt=ys.fallback!==void 0&&(ys.unstable_avoidThisFallback!==!0||!Je)}}if(Gt){var po=vt.updateQueue;if(po===null){var Be=new Set;Be.add(Re),vt.updateQueue=Be}else po.add(Re);if(!(2&vt.mode)){if(vt.effectTag|=64,j.effectTag&=-2981,j.tag===1)if(j.alternate===null)j.tag=17;else{var Me=Ls(1073741823,null);Me.tag=2,Vi(j,Me)}j.expirationTime=1073741823;break e}te=void 0,j=f;var Ge=S.pingCache;if(Ge===null?(Ge=S.pingCache=new Cm,te=new Set,Ge.set(Re,te)):(te=Ge.get(Re))===void 0&&(te=new Set,Ge.set(Re,te)),!te.has(j)){te.add(j);var st=_.bind(null,S,Re,j);Re.then(st,st)}vt.effectTag|=4096,vt.expirationTime=f;break e}vt=vt.return}while(vt!==null);te=Error((Et(j.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+rt(j))}Yi!==5&&(Yi=2),te=Xc(te,j),vt=B;do{switch(vt.tag){case 3:Re=te,vt.effectTag|=4096,vt.expirationTime=f,kn(vt,xm(vt,Re,f));break e;case 1:Re=te;var yt=vt.type,Ft=vt.stateNode;if(!(64&vt.effectTag)&&(typeof yt.getDerivedStateFromError=="function"||Ft!==null&&typeof Ft.componentDidCatch=="function"&&(ya===null||!ya.has(Ft)))){vt.effectTag|=4096,vt.expirationTime=f,kn(vt,Vh(vt,Re,f));break e}}vt=vt.return}while(vt!==null)}sn=Sm(sn)}catch(Qt){f=Qt;continue}break}}function Em(){var d=rc.current;return rc.current=Yc,d===null?Yc:d}function rl(d,f){d<zs&&2<d&&(zs=d),f!==null&&d<sc&&2<d&&(sc=d,ac=f)}function dd(d){d>lc&&(lc=d)}function hd(){for(;sn!==null;)sn=ai(sn)}function Ng(){for(;sn!==null&&!Og();)sn=ai(sn)}function ai(d){var f=zh(d.alternate,d,eo);return d.memoizedProps=d.pendingProps,f===null&&(f=Sm(d)),oc.current=null,f}function Sm(d){sn=d;do{var f=sn.alternate;if(d=sn.return,(2048&sn.effectTag)==0){if(f=tc(f,sn,eo),eo===1||sn.childExpirationTime!==1){for(var w=0,C=sn.child;C!==null;){var S=C.expirationTime,B=C.childExpirationTime;S>w&&(w=S),B>w&&(w=B),C=C.sibling}sn.childExpirationTime=w}if(f!==null)return f;d!==null&&!(2048&d.effectTag)&&(d.firstEffect===null&&(d.firstEffect=sn.firstEffect),sn.lastEffect!==null&&(d.lastEffect!==null&&(d.lastEffect.nextEffect=sn.firstEffect),d.lastEffect=sn.lastEffect),1<sn.effectTag&&(d.lastEffect!==null?d.lastEffect.nextEffect=sn:d.firstEffect=sn,d.lastEffect=sn))}else{if((f=Rh(sn))!==null)return f.effectTag&=2047,f;d!==null&&(d.firstEffect=d.lastEffect=null,d.effectTag|=2048)}if((f=sn.sibling)!==null)return f;sn=d}while(sn!==null);return Yi===jo&&(Yi=5),null}function $h(d){var f=d.expirationTime;return f>(d=d.childExpirationTime)?f:d}function ol(d){var f=$u();return pa(99,fd.bind(null,d,f)),null}function fd(d,f){do u();while(tu!==null);if(48&on)throw Error(c(327));var w=d.finishedWork,C=d.finishedExpirationTime;if(w===null)return null;if(d.finishedWork=null,d.finishedExpirationTime=0,w===d.current)throw Error(c(177));d.callbackNode=null,d.callbackExpirationTime=0,d.callbackPriority=90,d.nextKnownPendingLevel=0;var S=$h(w);if(d.firstPendingTime=S,C<=d.lastSuspendedTime?d.firstSuspendedTime=d.lastSuspendedTime=d.nextKnownPendingLevel=0:C<=d.firstSuspendedTime&&(d.firstSuspendedTime=C-1),C<=d.lastPingedTime&&(d.lastPingedTime=0),C<=d.lastExpiredTime&&(d.lastExpiredTime=0),d===fo&&(sn=fo=null,eo=0),1<w.effectTag?w.lastEffect!==null?(w.lastEffect.nextEffect=w,S=w.firstEffect):S=w:S=w.firstEffect,S!==null){var B=on;on|=32,oc.current=null,Oc=Fa;var j=Fs();if(Rc(j)){if("selectionStart"in j)var te={start:j.selectionStart,end:j.selectionEnd};else e:{var Re=(te=(te=j.ownerDocument)&&te.defaultView||window).getSelection&&te.getSelection();if(Re&&Re.rangeCount!==0){te=Re.anchorNode;var De=Re.anchorOffset,Je=Re.focusNode;Re=Re.focusOffset;try{te.nodeType,Je.nodeType}catch{te=null;break e}var vt=0,Gt=-1,wn=-1,ys=0,po=0,Be=j,Me=null;t:for(;;){for(var Ge;Be!==te||De!==0&&Be.nodeType!==3||(Gt=vt+De),Be!==Je||Re!==0&&Be.nodeType!==3||(wn=vt+Re),Be.nodeType===3&&(vt+=Be.nodeValue.length),(Ge=Be.firstChild)!==null;)Me=Be,Be=Ge;for(;;){if(Be===j)break t;if(Me===te&&++ys===De&&(Gt=vt),Me===Je&&++po===Re&&(wn=vt),(Ge=Be.nextSibling)!==null)break;Me=(Be=Me).parentNode}Be=Ge}te=Gt===-1||wn===-1?null:{start:Gt,end:wn}}else te=null}te=te||{start:0,end:0}}else te=null;Fc={activeElementDetached:null,focusedElem:j,selectionRange:te},Fa=!1,It=S;do try{a()}catch(hn){if(It===null)throw Error(c(330));v(It,hn),It=It.nextEffect}while(It!==null);It=S;do try{for(j=d,te=f;It!==null;){var st=It.effectTag;if(16&st&&Tn(It.stateNode,""),128&st){var yt=It.alternate;if(yt!==null){var Ft=yt.ref;Ft!==null&&(typeof Ft=="function"?Ft(null):Ft.current=null)}}switch(1038&st){case 2:Lh(It),It.effectTag&=-3;break;case 6:Lh(It),It.effectTag&=-3,Nh(It.alternate,It);break;case 1024:It.effectTag&=-1025;break;case 1028:It.effectTag&=-1025,Nh(It.alternate,It);break;case 4:Nh(It.alternate,It);break;case 8:Bh(j,De=It,te),km(De)}It=It.nextEffect}}catch(hn){if(It===null)throw Error(c(330));v(It,hn),It=It.nextEffect}while(It!==null);if(Ft=Fc,yt=Fs(),st=Ft.focusedElem,te=Ft.selectionRange,yt!==st&&st&&st.ownerDocument&&function hn(Tr,sl){return!(!Tr||!sl)&&(Tr===sl||(!Tr||Tr.nodeType!==3)&&(sl&&sl.nodeType===3?hn(Tr,sl.parentNode):"contains"in Tr?Tr.contains(sl):!!Tr.compareDocumentPosition&&!!(16&Tr.compareDocumentPosition(sl))))}(st.ownerDocument.documentElement,st)){for(te!==null&&Rc(st)&&(yt=te.start,(Ft=te.end)===void 0&&(Ft=yt),"selectionStart"in st?(st.selectionStart=yt,st.selectionEnd=Math.min(Ft,st.value.length)):(Ft=(yt=st.ownerDocument||document)&&yt.defaultView||window).getSelection&&(Ft=Ft.getSelection(),De=st.textContent.length,j=Math.min(te.start,De),te=te.end===void 0?j:Math.min(te.end,De),!Ft.extend&&j>te&&(De=te,te=j,j=De),De=Al(st,j),Je=Al(st,te),De&&Je&&(Ft.rangeCount!==1||Ft.anchorNode!==De.node||Ft.anchorOffset!==De.offset||Ft.focusNode!==Je.node||Ft.focusOffset!==Je.offset)&&((yt=yt.createRange()).setStart(De.node,De.offset),Ft.removeAllRanges(),j>te?(Ft.addRange(yt),Ft.extend(Je.node,Je.offset)):(yt.setEnd(Je.node,Je.offset),Ft.addRange(yt))))),yt=[],Ft=st;Ft=Ft.parentNode;)Ft.nodeType===1&&yt.push({element:Ft,left:Ft.scrollLeft,top:Ft.scrollTop});for(typeof st.focus=="function"&&st.focus(),st=0;st<yt.length;st++)(Ft=yt[st]).element.scrollLeft=Ft.left,Ft.element.scrollTop=Ft.top}Fa=!!Oc,Fc=Oc=null,d.current=w,It=S;do try{for(st=d;It!==null;){var Qt=It.effectTag;if(36&Qt&&id(st,It.alternate,It),128&Qt){yt=void 0;var Ln=It.ref;if(Ln!==null){var ar=It.stateNode;switch(It.tag){case 5:yt=ar;break;default:yt=ar}typeof Ln=="function"?Ln(yt):Ln.current=yt}}It=It.nextEffect}}catch(hn){if(It===null)throw Error(c(330));v(It,hn),It=It.nextEffect}while(It!==null);It=null,Fg(),on=B}else d.current=w;if(cd)cd=!1,tu=d,Fn=f;else for(It=S;It!==null;)f=It.nextEffect,It.nextEffect=null,It=f;if((f=d.firstPendingTime)===0&&(ya=null),f===1073741823?d===il?nl++:(nl=0,il=d):nl=0,typeof T=="function"&&T(w.stateNode,C),zr(d),eu)throw eu=!1,d=cc,cc=null,d;return 8&on||Co(),null}function a(){for(;It!==null;){var d=It.effectTag;256&d&&wm(It.alternate,It),!(512&d)||cd||(cd=!0,cm(97,function(){return u(),null})),It=It.nextEffect}}function u(){if(Fn!==90){var d=97<Fn?97:Fn;return Fn=90,pa(d,p)}}function p(){if(tu===null)return!1;var d=tu;if(tu=null,(48&on)!=0)throw Error(c(331));var f=on;for(on|=32,d=d.current.firstEffect;d!==null;){try{var w=d;if(512&w.effectTag)switch(w.tag){case 0:case 11:case 15:case 22:ym(5,w),Mh(5,w)}}catch(C){if(d===null)throw Error(c(330));v(d,C)}w=d.nextEffect,d.nextEffect=null,d=w}return on=f,Co(),!0}function m(d,f,w){Vi(d,f=xm(d,f=Xc(w,f),1073741823)),(d=nu(d,1073741823))!==null&&zr(d)}function v(d,f){if(d.tag===3)m(d,d,f);else for(var w=d.return;w!==null;){if(w.tag===3){m(w,d,f);break}if(w.tag===1){var C=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(ya===null||!ya.has(C))){Vi(w,d=Vh(w,d=Xc(f,d),1073741823)),(w=nu(w,1073741823))!==null&&zr(w);break}}w=w.return}}function _(d,f,w){var C=d.pingCache;C!==null&&C.delete(f),fo===d&&eo===w?Yi===Qc||Yi===od&&zs===1073741823&&kr()-ld<500?fn(d,eo):ad=!0:dt(d,w)&&((f=d.lastPingedTime)!==0&&f<w||(d.lastPingedTime=w,zr(d)))}function E(d,f){var w=d.stateNode;w!==null&&w.delete(f),(f=0)==0&&(f=Hs(f=mo(),d,null)),(d=nu(d,f))!==null&&zr(d)}zh=function(d,f,w){var C=f.expirationTime;if(d!==null){var S=f.pendingProps;if(d.memoizedProps!==S||nr.current)gs=!0;else{if(C<w){switch(gs=!1,f.tag){case 3:Ql(f),td();break;case 5:if(wh(f),4&f.mode&&w!==1&&S.hidden)return f.expirationTime=f.childExpirationTime=1,null;break;case 1:Lr(f.type)&&da(f);break;case 4:vh(f,f.stateNode.containerInfo);break;case 10:C=f.memoizedProps.value,S=f.type._context,si(Nl,S._currentValue),S._currentValue=C;break;case 13:if(f.memoizedState!==null)return(C=f.child.childExpirationTime)!==0&&C>=w?vm(d,f,w):(si(xi,1&xi.current),(f=ws(d,f,w))!==null?f.sibling:null);si(xi,1&xi.current);break;case 19:if(C=f.childExpirationTime>=w,(64&d.effectTag)!=0){if(C)return Dh(d,f,w);f.effectTag|=64}if((S=f.memoizedState)!==null&&(S.rendering=null,S.tail=null),si(xi,xi.current),!C)return null}return ws(d,f,w)}gs=!1}}else gs=!1;switch(f.expirationTime=0,f.tag){case 2:if(C=f.type,d!==null&&(d.alternate=null,f.alternate=null,f.effectTag|=2),d=f.pendingProps,S=Ms(f,Ci.current),Hl(f,w),S=Yu(null,f,C,d,S,w),f.effectTag|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0){if(f.tag=1,f.memoizedState=null,f.updateQueue=null,Lr(C)){var B=!0;da(f)}else B=!1;f.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Gu(f);var j=C.getDerivedStateFromProps;typeof j=="function"&&Ul(f,C,j,d),S.updater=jc,f.stateNode=S,S._reactInternalFiber=f,Zu(f,C,d,w),f=bs(null,f,C,!0,B,w)}else f.tag=0,Ao(null,f,S,w),f=f.child;return f;case 16:e:{if(S=f.elementType,d!==null&&(d.alternate=null,f.alternate=null,f.effectTag|=2),d=f.pendingProps,function(Je){if(Je._status===-1){Je._status=0;var vt=Je._ctor;vt=vt(),Je._result=vt,vt.then(function(Gt){Je._status===0&&(Gt=Gt.default,Je._status=1,Je._result=Gt)},function(Gt){Je._status===0&&(Je._status=2,Je._result=Gt)})}}(S),S._status!==1)throw S._result;switch(S=S._result,f.type=S,B=f.tag=function(Je){if(typeof Je=="function")return le(Je)?1:0;if(Je!=null){if((Je=Je.$$typeof)===Y)return 11;if(Je===ve)return 14}return 2}(S),d=Uo(S,d),B){case 0:f=Ph(null,f,S,d,w);break e;case 1:f=bm(null,f,S,d,w);break e;case 11:f=Sh(null,f,S,d,w);break e;case 14:f=Th(null,f,S,Uo(S.type,d),C,w);break e}throw Error(c(306,S,""))}return f;case 0:return C=f.type,S=f.pendingProps,Ph(d,f,C,S=f.elementType===C?S:Uo(C,S),w);case 1:return C=f.type,S=f.pendingProps,bm(d,f,C,S=f.elementType===C?S:Uo(C,S),w);case 3:if(Ql(f),C=f.updateQueue,d===null||C===null)throw Error(c(282));if(C=f.pendingProps,S=(S=f.memoizedState)!==null?S.element:null,ph(d,f),Nr(f,C,null,w),(C=f.memoizedState.element)===S)td(),f=ws(d,f,w);else{if((S=f.stateNode.hydrate)&&(To=na(f.stateNode.containerInfo.firstChild),Qr=f,S=Xa=!0),S)for(w=ql(f,null,C,w),f.child=w;w;)w.effectTag=-3&w.effectTag|1024,w=w.sibling;else Ao(d,f,C,w),td();f=f.child}return f;case 5:return wh(f),d===null&&Eh(f),C=f.type,S=f.pendingProps,B=d!==null?d.memoizedProps:null,j=S.children,Pl(C,S)?j=null:B!==null&&Pl(C,B)&&(f.effectTag|=16),gm(d,f),4&f.mode&&w!==1&&S.hidden?(f.expirationTime=f.childExpirationTime=1,f=null):(Ao(d,f,j,w),f=f.child),f;case 6:return d===null&&Eh(f),null;case 13:return vm(d,f,w);case 4:return vh(f,f.stateNode.containerInfo),C=f.pendingProps,d===null?f.child=$l(f,null,C,w):Ao(d,f,C,w),f.child;case 11:return C=f.type,S=f.pendingProps,Sh(d,f,C,S=f.elementType===C?S:Uo(C,S),w);case 7:return Ao(d,f,f.pendingProps,w),f.child;case 8:case 12:return Ao(d,f,f.pendingProps.children,w),f.child;case 10:e:{C=f.type._context,S=f.pendingProps,j=f.memoizedProps,B=S.value;var te=f.type._context;if(si(Nl,te._currentValue),te._currentValue=B,j!==null)if(te=j.value,(B=fs(te,B)?0:0|(typeof C._calculateChangedBits=="function"?C._calculateChangedBits(te,B):1073741823))===0){if(j.children===S.children&&!nr.current){f=ws(d,f,w);break e}}else for((te=f.child)!==null&&(te.return=f);te!==null;){var Re=te.dependencies;if(Re!==null){j=te.child;for(var De=Re.firstContext;De!==null;){if(De.context===C&&De.observedBits&B){te.tag===1&&((De=Ls(w,null)).tag=2,Vi(te,De)),te.expirationTime<w&&(te.expirationTime=w),(De=te.alternate)!==null&&De.expirationTime<w&&(De.expirationTime=w),zl(te.return,w),Re.expirationTime<w&&(Re.expirationTime=w);break}De=De.next}}else j=te.tag===10&&te.type===f.type?null:te.child;if(j!==null)j.return=te;else for(j=te;j!==null;){if(j===f){j=null;break}if((te=j.sibling)!==null){te.return=j.return,j=te;break}j=j.return}te=j}Ao(d,f,S.children,w),f=f.child}return f;case 9:return S=f.type,C=(B=f.pendingProps).children,Hl(f,w),C=C(S=Br(S,B.unstable_observedBits)),f.effectTag|=1,Ao(d,f,C,w),f.child;case 14:return B=Uo(S=f.type,f.pendingProps),Th(d,f,S,B=Uo(S.type,B),C,w);case 15:return Ah(d,f,f.type,f.pendingProps,C,w);case 17:return C=f.type,S=f.pendingProps,S=f.elementType===C?S:Uo(C,S),d!==null&&(d.alternate=null,f.alternate=null,f.effectTag|=2),f.tag=1,Lr(C)?(d=!0,da(f)):d=!1,Hl(f,w),Ku(f,C,S),Zu(f,C,S,w),bs(null,f,C,!0,d,w);case 19:return Dh(d,f,w)}throw Error(c(156,f.tag))};var T=null,I=null;function H(d,f,w,C){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ie(d,f,w,C){return new H(d,f,w,C)}function le(d){return!(!(d=d.prototype)||!d.isReactComponent)}function Ce(d,f){var w=d.alternate;return w===null?((w=ie(d.tag,f,d.key,d.mode)).elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=f,w.effectTag=0,w.nextEffect=null,w.firstEffect=null,w.lastEffect=null),w.childExpirationTime=d.childExpirationTime,w.expirationTime=d.expirationTime,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,f=d.dependencies,w.dependencies=f===null?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function ye(d,f,w,C,S,B){var j=2;if(C=d,typeof d=="function")le(d)&&(j=1);else if(typeof d=="string")j=5;else e:switch(d){case Sn:return Ve(w.children,S,B,f);case $:j=8,S|=7;break;case Di:j=8,S|=1;break;case Te:return(d=ie(12,w,f,8|S)).elementType=Te,d.type=Te,d.expirationTime=B,d;case de:return(d=ie(13,w,f,S)).type=de,d.elementType=de,d.expirationTime=B,d;case ue:return(d=ie(19,w,f,S)).elementType=ue,d.expirationTime=B,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case Ae:j=10;break e;case we:j=9;break e;case Y:j=11;break e;case ve:j=14;break e;case et:j=16,C=null;break e;case ht:j=22;break e}throw Error(c(130,d==null?d:typeof d,""))}return(f=ie(j,w,f,S)).elementType=d,f.type=C,f.expirationTime=B,f}function Ve(d,f,w,C){return(d=ie(7,d,C,f)).expirationTime=w,d}function qe(d,f,w){return(d=ie(6,d,null,f)).expirationTime=w,d}function Qe(d,f,w){return(f=ie(4,d.children!==null?d.children:[],d.key,f)).expirationTime=w,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}function ot(d,f,w){this.tag=f,this.current=null,this.containerInfo=d,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=w,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function dt(d,f){var w=d.firstSuspendedTime;return d=d.lastSuspendedTime,w!==0&&w>=f&&d<=f}function tt(d,f){var w=d.firstSuspendedTime,C=d.lastSuspendedTime;w<f&&(d.firstSuspendedTime=f),(C>f||w===0)&&(d.lastSuspendedTime=f),f<=d.lastPingedTime&&(d.lastPingedTime=0),f<=d.lastExpiredTime&&(d.lastExpiredTime=0)}function bt(d,f){f>d.firstPendingTime&&(d.firstPendingTime=f);var w=d.firstSuspendedTime;w!==0&&(f>=w?d.firstSuspendedTime=d.lastSuspendedTime=d.nextKnownPendingLevel=0:f>=d.lastSuspendedTime&&(d.lastSuspendedTime=f+1),f>d.nextKnownPendingLevel&&(d.nextKnownPendingLevel=f))}function Mt(d,f){var w=d.lastExpiredTime;(w===0||w>f)&&(d.lastExpiredTime=f)}function Dt(d,f,w,C){var S=f.current,B=mo(),j=xo.suspense;B=Hs(B,S,j);e:if(w){t:{if(oo(w=w._reactInternalFiber)!==w||w.tag!==1)throw Error(c(170));var te=w;do{switch(te.tag){case 3:te=te.stateNode.context;break t;case 1:if(Lr(te.type)){te=te.stateNode.__reactInternalMemoizedMergedChildContext;break t}}te=te.return}while(te!==null);throw Error(c(171))}if(w.tag===1){var Re=w.type;if(Lr(Re)){w=ua(w,Re,te);break e}}w=te}else w=ms;return f.context===null?f.context=w:f.pendingContext=w,(f=Ls(B,j)).payload={element:d},(C=C===void 0?null:C)!==null&&(f.callback=C),Vi(S,f),Us(S,B),B}function en(d){if(!(d=d.current).child)return null;switch(d.child.tag){case 5:default:return d.child.stateNode}}function Mn(d,f){(d=d.memoizedState)!==null&&d.dehydrated!==null&&d.retryTime<f&&(d.retryTime=f)}function Si(d,f){Mn(d,f),(d=d.alternate)&&Mn(d,f)}function Gn(d,f,w){var C=new ot(d,f,w=w!=null&&w.hydrate===!0),S=ie(3,null,null,f===2?7:f===1?3:0);C.current=S,S.stateNode=C,Gu(S),d[ia]=C.current,w&&f!==0&&function(B,j){var te=br(j);ao.forEach(function(Re){Hn(Re,j,te)}),yi.forEach(function(Re){Hn(Re,j,te)})}(0,d.nodeType===9?d:d.ownerDocument),this._internalRoot=C}function or(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function sr(d,f,w,C,S){var B=w._reactRootContainer;if(B){var j=B._internalRoot;if(typeof S=="function"){var te=S;S=function(){var De=en(j);te.call(De)}}Dt(f,j,d,S)}else{if(B=w._reactRootContainer=function(De,Je){if(Je||(Je=!(!(Je=De?De.nodeType===9?De.documentElement:De.firstChild:null)||Je.nodeType!==1||!Je.hasAttribute("data-reactroot"))),!Je)for(var vt;vt=De.lastChild;)De.removeChild(vt);return new Gn(De,0,Je?{hydrate:!0}:void 0)}(w,C),j=B._internalRoot,typeof S=="function"){var Re=S;S=function(){var De=en(j);Re.call(De)}}Wh(function(){Dt(f,j,d,S)})}return en(j)}function Ti(d,f,w){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:En,key:C==null?null:""+C,children:d,containerInfo:f,implementation:w}}function Sr(d,f){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!or(f))throw Error(c(200));return Ti(d,f,null,w)}Gn.prototype.render=function(d){Dt(d,this._internalRoot,null,null)},Gn.prototype.unmount=function(){var d=this._internalRoot,f=d.containerInfo;Dt(null,d,null,function(){f[ia]=null})},hi=function(d){if(d.tag===13){var f=Bl(mo(),150,100);Us(d,f),Si(d,f)}},Vt=function(d){d.tag===13&&(Us(d,3),Si(d,3))},As=function(d){if(d.tag===13){var f=mo();Us(d,f=Hs(f,d,null)),Si(d,f)}},Ie=function(d,f,w){switch(f){case"input":if(Wn(d,w),f=w.name,w.type==="radio"&&f!=null){for(w=d;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<w.length;f++){var C=w[f];if(C!==d&&C.form===d.form){var S=Mc(C);if(!S)throw Error(c(90));Bt(C),Wn(C,S)}}}break;case"textarea":$r(d,w);break;case"select":(f=w.value)!=null&&Oi(d,!!w.multiple,f,!1)}},je=ud,wt=function(d,f,w,C,S){var B=on;on|=4;try{return pa(98,d.bind(null,f,w,C,S))}finally{(on=B)===0&&Co()}},oe=function(){!(49&on)&&(function(){if(tl!==null){var d=tl;tl=null,d.forEach(function(f,w){Mt(w,f),zr(w)}),Co()}}(),u())},z=function(d,f){var w=on;on|=2;try{return d(f)}finally{(on=w)===0&&Co()}};var Ji,vi,Ai={Events:[wo,as,Mc,Oe,X,oa,function(d){Gi(d,za)},Z,Pe,Ma,ni,u,{current:!1}]};vi=(Ji={findFiberByHostInstance:Ho,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(d){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)return!0;try{var w=f.inject(d);T=function(C){try{f.onCommitFiberRoot(w,C,void 0,(64&C.current.effectTag)==64)}catch{}},I=function(C){try{f.onCommitFiberUnmount(w,C)}catch{}}}catch{}}(s({},Ji,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$e.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return(d=cn(d))===null?null:d.stateNode},findFiberByHostInstance:function(d){return vi?vi(d):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ai,n.createPortal=Sr,n.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var f=d._reactInternalFiber;if(f===void 0)throw typeof d.render=="function"?Error(c(188)):Error(c(268,Object.keys(d)));return d=(d=cn(f))===null?null:d.stateNode},n.flushSync=function(d,f){if(48&on)throw Error(c(187));var w=on;on|=1;try{return pa(99,d.bind(null,f))}finally{on=w,Co()}},n.hydrate=function(d,f,w){if(!or(f))throw Error(c(200));return sr(null,d,f,!0,w)},n.render=function(d,f,w){if(!or(f))throw Error(c(200));return sr(null,d,f,!1,w)},n.unmountComponentAtNode=function(d){if(!or(d))throw Error(c(40));return!!d._reactRootContainer&&(Wh(function(){sr(null,null,d,!1,function(){d._reactRootContainer=null,d[ia]=null})}),!0)},n.unstable_batchedUpdates=ud,n.unstable_createPortal=function(d,f){return Sr(d,f,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)},n.unstable_renderSubtreeIntoContainer=function(d,f,w,C){if(!or(w))throw Error(c(200));if(d==null||d._reactInternalFiber===void 0)throw Error(c(38));return sr(d,f,w,!1,C)},n.version="16.14.0"},function(t,n,r){t.exports=r(24)},function(t,n,r){var o,s,l,c,h;if(typeof window>"u"||typeof MessageChannel!="function"){var g=null,b=null,y=function(){if(g!==null)try{var xe=n.unstable_now();g(!0,xe),g=null}catch(Ue){throw setTimeout(y,0),Ue}},k=Date.now();n.unstable_now=function(){return Date.now()-k},o=function(xe){g!==null?setTimeout(o,0,xe):(g=xe,setTimeout(y,0))},s=function(xe,Ue){b=setTimeout(xe,Ue)},l=function(){clearTimeout(b)},c=function(){return!1},h=n.unstable_forceFrameRate=function(){}}else{var x=window.performance,D=window.Date,L=window.setTimeout,M=window.clearTimeout;if(typeof console<"u"){var V=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof V!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof x=="object"&&typeof x.now=="function")n.unstable_now=function(){return x.now()};else{var O=D.now();n.unstable_now=function(){return D.now()-O}}var U=!1,K=null,q=-1,Q=5,ne=0;c=function(){return n.unstable_now()>=ne},h=function(){},n.unstable_forceFrameRate=function(xe){0>xe||125<xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):Q=0<xe?Math.floor(1e3/xe):5};var X=new MessageChannel,se=X.port2;X.port1.onmessage=function(){if(K!==null){var xe=n.unstable_now();ne=xe+Q;try{K(!0,xe)?se.postMessage(null):(U=!1,K=null)}catch(Ue){throw se.postMessage(null),Ue}}else U=!1},o=function(xe){K=xe,U||(U=!0,se.postMessage(null))},s=function(xe,Ue){q=L(function(){xe(n.unstable_now())},Ue)},l=function(){M(q),q=-1}}function fe(xe,Ue){var P=xe.length;xe.push(Ue);e:for(;;){var R=P-1>>>1,W=xe[R];if(!(W!==void 0&&0<Ie(W,Ue)))break e;xe[R]=Ue,xe[P]=W,P=R}}function Oe(xe){return(xe=xe[0])===void 0?null:xe}function _e(xe){var Ue=xe[0];if(Ue!==void 0){var P=xe.pop();if(P!==Ue){xe[0]=P;e:for(var R=0,W=xe.length;R<W;){var he=2*(R+1)-1,ge=xe[he],ce=he+1,$e=xe[ce];if(ge!==void 0&&0>Ie(ge,P))$e!==void 0&&0>Ie($e,ge)?(xe[R]=$e,xe[ce]=P,R=ce):(xe[R]=ge,xe[he]=P,R=he);else{if(!($e!==void 0&&0>Ie($e,P)))break e;xe[R]=$e,xe[ce]=P,R=ce}}}return Ue}return null}function Ie(xe,Ue){var P=xe.sortIndex-Ue.sortIndex;return P!==0?P:xe.id-Ue.id}var re=[],ae=[],pe=1,Z=null,Pe=3,je=!1,wt=!1,oe=!1;function z(xe){for(var Ue=Oe(ae);Ue!==null;){if(Ue.callback===null)_e(ae);else{if(!(Ue.startTime<=xe))break;_e(ae),Ue.sortIndex=Ue.expirationTime,fe(re,Ue)}Ue=Oe(ae)}}function ke(xe){if(oe=!1,z(xe),!wt)if(Oe(re)!==null)wt=!0,o(at);else{var Ue=Oe(ae);Ue!==null&&s(ke,Ue.startTime-xe)}}function at(xe,Ue){wt=!1,oe&&(oe=!1,l()),je=!0;var P=Pe;try{for(z(Ue),Z=Oe(re);Z!==null&&(!(Z.expirationTime>Ue)||xe&&!c());){var R=Z.callback;if(R!==null){Z.callback=null,Pe=Z.priorityLevel;var W=R(Z.expirationTime<=Ue);Ue=n.unstable_now(),typeof W=="function"?Z.callback=W:Z===Oe(re)&&_e(re),z(Ue)}else _e(re);Z=Oe(re)}if(Z!==null)var he=!0;else{var ge=Oe(ae);ge!==null&&s(ke,ge.startTime-Ue),he=!1}return he}finally{Z=null,Pe=P,je=!1}}function lt(xe){switch(xe){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Ee=h;n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(xe){xe.callback=null},n.unstable_continueExecution=function(){wt||je||(wt=!0,o(at))},n.unstable_getCurrentPriorityLevel=function(){return Pe},n.unstable_getFirstCallbackNode=function(){return Oe(re)},n.unstable_next=function(xe){switch(Pe){case 1:case 2:case 3:var Ue=3;break;default:Ue=Pe}var P=Pe;Pe=Ue;try{return xe()}finally{Pe=P}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=Ee,n.unstable_runWithPriority=function(xe,Ue){switch(xe){case 1:case 2:case 3:case 4:case 5:break;default:xe=3}var P=Pe;Pe=xe;try{return Ue()}finally{Pe=P}},n.unstable_scheduleCallback=function(xe,Ue,P){var R=n.unstable_now();if(typeof P=="object"&&P!==null){var W=P.delay;W=typeof W=="number"&&0<W?R+W:R,P=typeof P.timeout=="number"?P.timeout:lt(xe)}else P=lt(xe),W=R;return xe={id:pe++,callback:Ue,priorityLevel:xe,startTime:W,expirationTime:P=W+P,sortIndex:-1},W>R?(xe.sortIndex=W,fe(ae,xe),Oe(re)===null&&xe===Oe(ae)&&(oe?l():oe=!0,s(ke,W-R))):(xe.sortIndex=P,fe(re,xe),wt||je||(wt=!0,o(at))),xe},n.unstable_shouldYield=function(){var xe=n.unstable_now();z(xe);var Ue=Oe(re);return Ue!==Z&&Z!==null&&Ue!==null&&Ue.callback!==null&&Ue.startTime<=xe&&Ue.expirationTime<Z.expirationTime||c()},n.unstable_wrapCallback=function(xe){var Ue=Pe;return function(){var P=Pe;Pe=Ue;try{return xe.apply(this,arguments)}finally{Pe=P}}}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.toString=void 0;const o=r(13),s=r(26),l=r(17),c={string:o.quoteString,number:h=>Object.is(h,-0)?"-0":String(h),boolean:String,symbol:(h,g,b)=>{const y=Symbol.keyFor(h);return y!==void 0?`Symbol.for(${b(y)})`:`Symbol(${b(h.description)})`},bigint:(h,g,b)=>`BigInt(${b(String(h))})`,undefined:String,object:s.objectToString,function:l.functionToString};n.toString=(h,g,b,y)=>h===null?"null":c[typeof h](h,g,b,y)},function(t,n,r){(function(o,s){Object.defineProperty(n,"__esModule",{value:!0}),n.objectToString=void 0;const l=r(13),c=r(17),h=r(31);n.objectToString=(y,k,x,D)=>{if(typeof o=="function"&&o.isBuffer(y))return`Buffer.from(${x(y.toString("base64"))}, 'base64')`;if(typeof s=="object"&&y===s)return g(y,k,x);const L=b[Object.prototype.toString.call(y)];return L?L(y,k,x,D):void 0};const g=(y,k,x)=>`Function(${x("return this")})()`,b={"[object Array]":h.arrayToString,"[object Object]":(y,k,x,D)=>{const L=k?`
`:"",M=k?" ":"",V=Object.keys(y).reduce(function(O,U){const K=y[U],q=x(K,U);if(q===void 0)return O;const Q=q.split(`
`).join(`
`+k);return c.USED_METHOD_KEY.has(K)?(O.push(`${k}${Q}`),O):(O.push(`${k}${l.quoteKey(U,x)}:${M}${Q}`),O)},[]).join(","+L);return V===""?"{}":`{${L}${V}${L}}`},"[object Error]":(y,k,x)=>`new Error(${x(y.message)})`,"[object Date]":y=>`new Date(${y.getTime()})`,"[object String]":(y,k,x)=>`new String(${x(y.toString())})`,"[object Number]":y=>`new Number(${y})`,"[object Boolean]":y=>`new Boolean(${y})`,"[object Set]":(y,k,x)=>`new Set(${x(Array.from(y))})`,"[object Map]":(y,k,x)=>`new Map(${x(Array.from(y))})`,"[object RegExp]":String,"[object global]":g,"[object Window]":g}}).call(this,r(27).Buffer,r(15))},function(t,n,r){(function(o){var s=r(28),l=r(29),c=r(30);function h(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function g(P,R){if(h()<R)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(P=new Uint8Array(R)).__proto__=b.prototype:(P===null&&(P=new b(R)),P.length=R),P}function b(P,R,W){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(P,R,W);if(typeof P=="number"){if(typeof R=="string")throw new Error("If encoding is specified then the first argument must be a string");return x(this,P)}return y(this,P,R,W)}function y(P,R,W,he){if(typeof R=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&R instanceof ArrayBuffer?function(ge,ce,$e,At){if(ce.byteLength,$e<0||ce.byteLength<$e)throw new RangeError("'offset' is out of bounds");if(ce.byteLength<$e+(At||0))throw new RangeError("'length' is out of bounds");return ce=$e===void 0&&At===void 0?new Uint8Array(ce):At===void 0?new Uint8Array(ce,$e):new Uint8Array(ce,$e,At),b.TYPED_ARRAY_SUPPORT?(ge=ce).__proto__=b.prototype:ge=D(ge,ce),ge}(P,R,W,he):typeof R=="string"?function(ge,ce,$e){if(typeof $e=="string"&&$e!==""||($e="utf8"),!b.isEncoding($e))throw new TypeError('"encoding" must be a valid string encoding');var At=0|M(ce,$e),Ct=(ge=g(ge,At)).write(ce,$e);return Ct!==At&&(ge=ge.slice(0,Ct)),ge}(P,R,W):function(ge,ce){if(b.isBuffer(ce)){var $e=0|L(ce.length);return(ge=g(ge,$e)).length===0||ce.copy(ge,0,0,$e),ge}if(ce){if(typeof ArrayBuffer<"u"&&ce.buffer instanceof ArrayBuffer||"length"in ce)return typeof ce.length!="number"||(At=ce.length)!=At?g(ge,0):D(ge,ce);if(ce.type==="Buffer"&&c(ce.data))return D(ge,ce.data)}var At;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(P,R)}function k(P){if(typeof P!="number")throw new TypeError('"size" argument must be a number');if(P<0)throw new RangeError('"size" argument must not be negative')}function x(P,R){if(k(R),P=g(P,R<0?0:0|L(R)),!b.TYPED_ARRAY_SUPPORT)for(var W=0;W<R;++W)P[W]=0;return P}function D(P,R){var W=R.length<0?0:0|L(R.length);P=g(P,W);for(var he=0;he<W;he+=1)P[he]=255&R[he];return P}function L(P){if(P>=h())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h().toString(16)+" bytes");return 0|P}function M(P,R){if(b.isBuffer(P))return P.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(P)||P instanceof ArrayBuffer))return P.byteLength;typeof P!="string"&&(P=""+P);var W=P.length;if(W===0)return 0;for(var he=!1;;)switch(R){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":case void 0:return Ee(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*W;case"hex":return W>>>1;case"base64":return xe(P).length;default:if(he)return Ee(P).length;R=(""+R).toLowerCase(),he=!0}}function V(P,R,W){var he=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0)<=(R>>>=0))return"";for(P||(P="utf8");;)switch(P){case"hex":return ae(this,R,W);case"utf8":case"utf-8":return _e(this,R,W);case"ascii":return Ie(this,R,W);case"latin1":case"binary":return re(this,R,W);case"base64":return Oe(this,R,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,R,W);default:if(he)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),he=!0}}function O(P,R,W){var he=P[R];P[R]=P[W],P[W]=he}function U(P,R,W,he,ge){if(P.length===0)return-1;if(typeof W=="string"?(he=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,isNaN(W)&&(W=ge?0:P.length-1),W<0&&(W=P.length+W),W>=P.length){if(ge)return-1;W=P.length-1}else if(W<0){if(!ge)return-1;W=0}if(typeof R=="string"&&(R=b.from(R,he)),b.isBuffer(R))return R.length===0?-1:K(P,R,W,he,ge);if(typeof R=="number")return R&=255,b.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?ge?Uint8Array.prototype.indexOf.call(P,R,W):Uint8Array.prototype.lastIndexOf.call(P,R,W):K(P,[R],W,he,ge);throw new TypeError("val must be string, number or Buffer")}function K(P,R,W,he,ge){var ce,$e=1,At=P.length,Ct=R.length;if(he!==void 0&&((he=String(he).toLowerCase())==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(P.length<2||R.length<2)return-1;$e=2,At/=2,Ct/=2,W/=2}function jt(Di,Te){return $e===1?Di[Te]:Di.readUInt16BE(Te*$e)}if(ge){var ct=-1;for(ce=W;ce<At;ce++)if(jt(P,ce)===jt(R,ct===-1?0:ce-ct)){if(ct===-1&&(ct=ce),ce-ct+1===Ct)return ct*$e}else ct!==-1&&(ce-=ce-ct),ct=-1}else for(W+Ct>At&&(W=At-Ct),ce=W;ce>=0;ce--){for(var En=!0,Sn=0;Sn<Ct;Sn++)if(jt(P,ce+Sn)!==jt(R,Sn)){En=!1;break}if(En)return ce}return-1}function q(P,R,W,he){W=Number(W)||0;var ge=P.length-W;he?(he=Number(he))>ge&&(he=ge):he=ge;var ce=R.length;if(ce%2!=0)throw new TypeError("Invalid hex string");he>ce/2&&(he=ce/2);for(var $e=0;$e<he;++$e){var At=parseInt(R.substr(2*$e,2),16);if(isNaN(At))return $e;P[W+$e]=At}return $e}function Q(P,R,W,he){return Ue(Ee(R,P.length-W),P,W,he)}function ne(P,R,W,he){return Ue(function(ge){for(var ce=[],$e=0;$e<ge.length;++$e)ce.push(255&ge.charCodeAt($e));return ce}(R),P,W,he)}function X(P,R,W,he){return ne(P,R,W,he)}function se(P,R,W,he){return Ue(xe(R),P,W,he)}function fe(P,R,W,he){return Ue(function(ge,ce){for(var $e,At,Ct,jt=[],ct=0;ct<ge.length&&!((ce-=2)<0);++ct)$e=ge.charCodeAt(ct),At=$e>>8,Ct=$e%256,jt.push(Ct),jt.push(At);return jt}(R,P.length-W),P,W,he)}function Oe(P,R,W){return R===0&&W===P.length?s.fromByteArray(P):s.fromByteArray(P.slice(R,W))}function _e(P,R,W){W=Math.min(P.length,W);for(var he=[],ge=R;ge<W;){var ce,$e,At,Ct,jt=P[ge],ct=null,En=jt>239?4:jt>223?3:jt>191?2:1;if(ge+En<=W)switch(En){case 1:jt<128&&(ct=jt);break;case 2:(192&(ce=P[ge+1]))==128&&(Ct=(31&jt)<<6|63&ce)>127&&(ct=Ct);break;case 3:ce=P[ge+1],$e=P[ge+2],(192&ce)==128&&(192&$e)==128&&(Ct=(15&jt)<<12|(63&ce)<<6|63&$e)>2047&&(Ct<55296||Ct>57343)&&(ct=Ct);break;case 4:ce=P[ge+1],$e=P[ge+2],At=P[ge+3],(192&ce)==128&&(192&$e)==128&&(192&At)==128&&(Ct=(15&jt)<<18|(63&ce)<<12|(63&$e)<<6|63&At)>65535&&Ct<1114112&&(ct=Ct)}ct===null?(ct=65533,En=1):ct>65535&&(ct-=65536,he.push(ct>>>10&1023|55296),ct=56320|1023&ct),he.push(ct),ge+=En}return function(Sn){var Di=Sn.length;if(Di<=4096)return String.fromCharCode.apply(String,Sn);for(var Te="",Ae=0;Ae<Di;)Te+=String.fromCharCode.apply(String,Sn.slice(Ae,Ae+=4096));return Te}(he)}n.Buffer=b,n.SlowBuffer=function(P){return+P!=P&&(P=0),b.alloc(+P)},n.INSPECT_MAX_BYTES=50,b.TYPED_ARRAY_SUPPORT=o.TYPED_ARRAY_SUPPORT!==void 0?o.TYPED_ARRAY_SUPPORT:function(){try{var P=new Uint8Array(1);return P.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},P.foo()===42&&typeof P.subarray=="function"&&P.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=h(),b.poolSize=8192,b._augment=function(P){return P.__proto__=b.prototype,P},b.from=function(P,R,W){return y(null,P,R,W)},b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0})),b.alloc=function(P,R,W){return function(he,ge,ce,$e){return k(ge),ge<=0?g(he,ge):ce!==void 0?typeof $e=="string"?g(he,ge).fill(ce,$e):g(he,ge).fill(ce):g(he,ge)}(null,P,R,W)},b.allocUnsafe=function(P){return x(null,P)},b.allocUnsafeSlow=function(P){return x(null,P)},b.isBuffer=function(P){return!(P==null||!P._isBuffer)},b.compare=function(P,R){if(!b.isBuffer(P)||!b.isBuffer(R))throw new TypeError("Arguments must be Buffers");if(P===R)return 0;for(var W=P.length,he=R.length,ge=0,ce=Math.min(W,he);ge<ce;++ge)if(P[ge]!==R[ge]){W=P[ge],he=R[ge];break}return W<he?-1:he<W?1:0},b.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(P,R){if(!c(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return b.alloc(0);var W;if(R===void 0)for(R=0,W=0;W<P.length;++W)R+=P[W].length;var he=b.allocUnsafe(R),ge=0;for(W=0;W<P.length;++W){var ce=P[W];if(!b.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(he,ge),ge+=ce.length}return he},b.byteLength=M,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var P=this.length;if(P%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<P;R+=2)O(this,R,R+1);return this},b.prototype.swap32=function(){var P=this.length;if(P%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<P;R+=4)O(this,R,R+3),O(this,R+1,R+2);return this},b.prototype.swap64=function(){var P=this.length;if(P%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<P;R+=8)O(this,R,R+7),O(this,R+1,R+6),O(this,R+2,R+5),O(this,R+3,R+4);return this},b.prototype.toString=function(){var P=0|this.length;return P===0?"":arguments.length===0?_e(this,0,P):V.apply(this,arguments)},b.prototype.equals=function(P){if(!b.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P||b.compare(this,P)===0},b.prototype.inspect=function(){var P="",R=n.INSPECT_MAX_BYTES;return this.length>0&&(P=this.toString("hex",0,R).match(/.{2}/g).join(" "),this.length>R&&(P+=" ... ")),"<Buffer "+P+">"},b.prototype.compare=function(P,R,W,he,ge){if(!b.isBuffer(P))throw new TypeError("Argument must be a Buffer");if(R===void 0&&(R=0),W===void 0&&(W=P?P.length:0),he===void 0&&(he=0),ge===void 0&&(ge=this.length),R<0||W>P.length||he<0||ge>this.length)throw new RangeError("out of range index");if(he>=ge&&R>=W)return 0;if(he>=ge)return-1;if(R>=W)return 1;if(this===P)return 0;for(var ce=(ge>>>=0)-(he>>>=0),$e=(W>>>=0)-(R>>>=0),At=Math.min(ce,$e),Ct=this.slice(he,ge),jt=P.slice(R,W),ct=0;ct<At;++ct)if(Ct[ct]!==jt[ct]){ce=Ct[ct],$e=jt[ct];break}return ce<$e?-1:$e<ce?1:0},b.prototype.includes=function(P,R,W){return this.indexOf(P,R,W)!==-1},b.prototype.indexOf=function(P,R,W){return U(this,P,R,W,!0)},b.prototype.lastIndexOf=function(P,R,W){return U(this,P,R,W,!1)},b.prototype.write=function(P,R,W,he){if(R===void 0)he="utf8",W=this.length,R=0;else if(W===void 0&&typeof R=="string")he=R,W=this.length,R=0;else{if(!isFinite(R))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");R|=0,isFinite(W)?(W|=0,he===void 0&&(he="utf8")):(he=W,W=void 0)}var ge=this.length-R;if((W===void 0||W>ge)&&(W=ge),P.length>0&&(W<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");he||(he="utf8");for(var ce=!1;;)switch(he){case"hex":return q(this,P,R,W);case"utf8":case"utf-8":return Q(this,P,R,W);case"ascii":return ne(this,P,R,W);case"latin1":case"binary":return X(this,P,R,W);case"base64":return se(this,P,R,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,P,R,W);default:if(ce)throw new TypeError("Unknown encoding: "+he);he=(""+he).toLowerCase(),ce=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ie(P,R,W){var he="";W=Math.min(P.length,W);for(var ge=R;ge<W;++ge)he+=String.fromCharCode(127&P[ge]);return he}function re(P,R,W){var he="";W=Math.min(P.length,W);for(var ge=R;ge<W;++ge)he+=String.fromCharCode(P[ge]);return he}function ae(P,R,W){var he=P.length;(!R||R<0)&&(R=0),(!W||W<0||W>he)&&(W=he);for(var ge="",ce=R;ce<W;++ce)ge+=lt(P[ce]);return ge}function pe(P,R,W){for(var he=P.slice(R,W),ge="",ce=0;ce<he.length;ce+=2)ge+=String.fromCharCode(he[ce]+256*he[ce+1]);return ge}function Z(P,R,W){if(P%1!=0||P<0)throw new RangeError("offset is not uint");if(P+R>W)throw new RangeError("Trying to access beyond buffer length")}function Pe(P,R,W,he,ge,ce){if(!b.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>ge||R<ce)throw new RangeError('"value" argument is out of bounds');if(W+he>P.length)throw new RangeError("Index out of range")}function je(P,R,W,he){R<0&&(R=65535+R+1);for(var ge=0,ce=Math.min(P.length-W,2);ge<ce;++ge)P[W+ge]=(R&255<<8*(he?ge:1-ge))>>>8*(he?ge:1-ge)}function wt(P,R,W,he){R<0&&(R=4294967295+R+1);for(var ge=0,ce=Math.min(P.length-W,4);ge<ce;++ge)P[W+ge]=R>>>8*(he?ge:3-ge)&255}function oe(P,R,W,he,ge,ce){if(W+he>P.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function z(P,R,W,he,ge){return ge||oe(P,0,W,4),l.write(P,R,W,he,23,4),W+4}function ke(P,R,W,he,ge){return ge||oe(P,0,W,8),l.write(P,R,W,he,52,8),W+8}b.prototype.slice=function(P,R){var W,he=this.length;if((P=~~P)<0?(P+=he)<0&&(P=0):P>he&&(P=he),(R=R===void 0?he:~~R)<0?(R+=he)<0&&(R=0):R>he&&(R=he),R<P&&(R=P),b.TYPED_ARRAY_SUPPORT)(W=this.subarray(P,R)).__proto__=b.prototype;else{var ge=R-P;W=new b(ge,void 0);for(var ce=0;ce<ge;++ce)W[ce]=this[ce+P]}return W},b.prototype.readUIntLE=function(P,R,W){P|=0,R|=0,W||Z(P,R,this.length);for(var he=this[P],ge=1,ce=0;++ce<R&&(ge*=256);)he+=this[P+ce]*ge;return he},b.prototype.readUIntBE=function(P,R,W){P|=0,R|=0,W||Z(P,R,this.length);for(var he=this[P+--R],ge=1;R>0&&(ge*=256);)he+=this[P+--R]*ge;return he},b.prototype.readUInt8=function(P,R){return R||Z(P,1,this.length),this[P]},b.prototype.readUInt16LE=function(P,R){return R||Z(P,2,this.length),this[P]|this[P+1]<<8},b.prototype.readUInt16BE=function(P,R){return R||Z(P,2,this.length),this[P]<<8|this[P+1]},b.prototype.readUInt32LE=function(P,R){return R||Z(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+16777216*this[P+3]},b.prototype.readUInt32BE=function(P,R){return R||Z(P,4,this.length),16777216*this[P]+(this[P+1]<<16|this[P+2]<<8|this[P+3])},b.prototype.readIntLE=function(P,R,W){P|=0,R|=0,W||Z(P,R,this.length);for(var he=this[P],ge=1,ce=0;++ce<R&&(ge*=256);)he+=this[P+ce]*ge;return he>=(ge*=128)&&(he-=Math.pow(2,8*R)),he},b.prototype.readIntBE=function(P,R,W){P|=0,R|=0,W||Z(P,R,this.length);for(var he=R,ge=1,ce=this[P+--he];he>0&&(ge*=256);)ce+=this[P+--he]*ge;return ce>=(ge*=128)&&(ce-=Math.pow(2,8*R)),ce},b.prototype.readInt8=function(P,R){return R||Z(P,1,this.length),128&this[P]?-1*(255-this[P]+1):this[P]},b.prototype.readInt16LE=function(P,R){R||Z(P,2,this.length);var W=this[P]|this[P+1]<<8;return 32768&W?4294901760|W:W},b.prototype.readInt16BE=function(P,R){R||Z(P,2,this.length);var W=this[P+1]|this[P]<<8;return 32768&W?4294901760|W:W},b.prototype.readInt32LE=function(P,R){return R||Z(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},b.prototype.readInt32BE=function(P,R){return R||Z(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},b.prototype.readFloatLE=function(P,R){return R||Z(P,4,this.length),l.read(this,P,!0,23,4)},b.prototype.readFloatBE=function(P,R){return R||Z(P,4,this.length),l.read(this,P,!1,23,4)},b.prototype.readDoubleLE=function(P,R){return R||Z(P,8,this.length),l.read(this,P,!0,52,8)},b.prototype.readDoubleBE=function(P,R){return R||Z(P,8,this.length),l.read(this,P,!1,52,8)},b.prototype.writeUIntLE=function(P,R,W,he){P=+P,R|=0,W|=0,he||Pe(this,P,R,W,Math.pow(2,8*W)-1,0);var ge=1,ce=0;for(this[R]=255&P;++ce<W&&(ge*=256);)this[R+ce]=P/ge&255;return R+W},b.prototype.writeUIntBE=function(P,R,W,he){P=+P,R|=0,W|=0,he||Pe(this,P,R,W,Math.pow(2,8*W)-1,0);var ge=W-1,ce=1;for(this[R+ge]=255&P;--ge>=0&&(ce*=256);)this[R+ge]=P/ce&255;return R+W},b.prototype.writeUInt8=function(P,R,W){return P=+P,R|=0,W||Pe(this,P,R,1,255,0),b.TYPED_ARRAY_SUPPORT||(P=Math.floor(P)),this[R]=255&P,R+1},b.prototype.writeUInt16LE=function(P,R,W){return P=+P,R|=0,W||Pe(this,P,R,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[R]=255&P,this[R+1]=P>>>8):je(this,P,R,!0),R+2},b.prototype.writeUInt16BE=function(P,R,W){return P=+P,R|=0,W||Pe(this,P,R,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[R]=P>>>8,this[R+1]=255&P):je(this,P,R,!1),R+2},b.prototype.writeUInt32LE=function(P,R,W){return P=+P,R|=0,W||Pe(this,P,R,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[R+3]=P>>>24,this[R+2]=P>>>16,this[R+1]=P>>>8,this[R]=255&P):wt(this,P,R,!0),R+4},b.prototype.writeUInt32BE=function(P,R,W){return P=+P,R|=0,W||Pe(this,P,R,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[R]=P>>>24,this[R+1]=P>>>16,this[R+2]=P>>>8,this[R+3]=255&P):wt(this,P,R,!1),R+4},b.prototype.writeIntLE=function(P,R,W,he){if(P=+P,R|=0,!he){var ge=Math.pow(2,8*W-1);Pe(this,P,R,W,ge-1,-ge)}var ce=0,$e=1,At=0;for(this[R]=255&P;++ce<W&&($e*=256);)P<0&&At===0&&this[R+ce-1]!==0&&(At=1),this[R+ce]=(P/$e>>0)-At&255;return R+W},b.prototype.writeIntBE=function(P,R,W,he){if(P=+P,R|=0,!he){var ge=Math.pow(2,8*W-1);Pe(this,P,R,W,ge-1,-ge)}var ce=W-1,$e=1,At=0;for(this[R+ce]=255&P;--ce>=0&&($e*=256);)P<0&&At===0&&this[R+ce+1]!==0&&(At=1),this[R+ce]=(P/$e>>0)-At&255;return R+W},b.prototype.writeInt8=function(P,R,W){return P=+P,R|=0,W||Pe(this,P,R,1,127,-128),b.TYPED_ARRAY_SUPPORT||(P=Math.floor(P)),P<0&&(P=255+P+1),this[R]=255&P,R+1},b.prototype.writeInt16LE=function(P,R,W){return P=+P,R|=0,W||Pe(this,P,R,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[R]=255&P,this[R+1]=P>>>8):je(this,P,R,!0),R+2},b.prototype.writeInt16BE=function(P,R,W){return P=+P,R|=0,W||Pe(this,P,R,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[R]=P>>>8,this[R+1]=255&P):je(this,P,R,!1),R+2},b.prototype.writeInt32LE=function(P,R,W){return P=+P,R|=0,W||Pe(this,P,R,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[R]=255&P,this[R+1]=P>>>8,this[R+2]=P>>>16,this[R+3]=P>>>24):wt(this,P,R,!0),R+4},b.prototype.writeInt32BE=function(P,R,W){return P=+P,R|=0,W||Pe(this,P,R,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),b.TYPED_ARRAY_SUPPORT?(this[R]=P>>>24,this[R+1]=P>>>16,this[R+2]=P>>>8,this[R+3]=255&P):wt(this,P,R,!1),R+4},b.prototype.writeFloatLE=function(P,R,W){return z(this,P,R,!0,W)},b.prototype.writeFloatBE=function(P,R,W){return z(this,P,R,!1,W)},b.prototype.writeDoubleLE=function(P,R,W){return ke(this,P,R,!0,W)},b.prototype.writeDoubleBE=function(P,R,W){return ke(this,P,R,!1,W)},b.prototype.copy=function(P,R,W,he){if(W||(W=0),he||he===0||(he=this.length),R>=P.length&&(R=P.length),R||(R=0),he>0&&he<W&&(he=W),he===W||P.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("sourceStart out of bounds");if(he<0)throw new RangeError("sourceEnd out of bounds");he>this.length&&(he=this.length),P.length-R<he-W&&(he=P.length-R+W);var ge,ce=he-W;if(this===P&&W<R&&R<he)for(ge=ce-1;ge>=0;--ge)P[ge+R]=this[ge+W];else if(ce<1e3||!b.TYPED_ARRAY_SUPPORT)for(ge=0;ge<ce;++ge)P[ge+R]=this[ge+W];else Uint8Array.prototype.set.call(P,this.subarray(W,W+ce),R);return ce},b.prototype.fill=function(P,R,W,he){if(typeof P=="string"){if(typeof R=="string"?(he=R,R=0,W=this.length):typeof W=="string"&&(he=W,W=this.length),P.length===1){var ge=P.charCodeAt(0);ge<256&&(P=ge)}if(he!==void 0&&typeof he!="string")throw new TypeError("encoding must be a string");if(typeof he=="string"&&!b.isEncoding(he))throw new TypeError("Unknown encoding: "+he)}else typeof P=="number"&&(P&=255);if(R<0||this.length<R||this.length<W)throw new RangeError("Out of range index");if(W<=R)return this;var ce;if(R>>>=0,W=W===void 0?this.length:W>>>0,P||(P=0),typeof P=="number")for(ce=R;ce<W;++ce)this[ce]=P;else{var $e=b.isBuffer(P)?P:Ee(new b(P,he).toString()),At=$e.length;for(ce=0;ce<W-R;++ce)this[ce+R]=$e[ce%At]}return this};var at=/[^+\/0-9A-Za-z-_]/g;function lt(P){return P<16?"0"+P.toString(16):P.toString(16)}function Ee(P,R){var W;R=R||1/0;for(var he=P.length,ge=null,ce=[],$e=0;$e<he;++$e){if((W=P.charCodeAt($e))>55295&&W<57344){if(!ge){if(W>56319){(R-=3)>-1&&ce.push(239,191,189);continue}if($e+1===he){(R-=3)>-1&&ce.push(239,191,189);continue}ge=W;continue}if(W<56320){(R-=3)>-1&&ce.push(239,191,189),ge=W;continue}W=65536+(ge-55296<<10|W-56320)}else ge&&(R-=3)>-1&&ce.push(239,191,189);if(ge=null,W<128){if((R-=1)<0)break;ce.push(W)}else if(W<2048){if((R-=2)<0)break;ce.push(W>>6|192,63&W|128)}else if(W<65536){if((R-=3)<0)break;ce.push(W>>12|224,W>>6&63|128,63&W|128)}else{if(!(W<1114112))throw new Error("Invalid code point");if((R-=4)<0)break;ce.push(W>>18|240,W>>12&63|128,W>>6&63|128,63&W|128)}}return ce}function xe(P){return s.toByteArray(function(R){if((R=function(W){return W.trim?W.trim():W.replace(/^\s+|\s+$/g,"")}(R).replace(at,"")).length<2)return"";for(;R.length%4!=0;)R+="=";return R}(P))}function Ue(P,R,W,he){for(var ge=0;ge<he&&!(ge+W>=R.length||ge>=P.length);++ge)R[ge+W]=P[ge];return ge}}).call(this,r(15))},function(t,n,r){n.byteLength=function(k){var x=b(k),D=x[0],L=x[1];return 3*(D+L)/4-L},n.toByteArray=function(k){var x,D,L=b(k),M=L[0],V=L[1],O=new l(function(q,Q,ne){return 3*(Q+ne)/4-ne}(0,M,V)),U=0,K=V>0?M-4:M;for(D=0;D<K;D+=4)x=s[k.charCodeAt(D)]<<18|s[k.charCodeAt(D+1)]<<12|s[k.charCodeAt(D+2)]<<6|s[k.charCodeAt(D+3)],O[U++]=x>>16&255,O[U++]=x>>8&255,O[U++]=255&x;return V===2&&(x=s[k.charCodeAt(D)]<<2|s[k.charCodeAt(D+1)]>>4,O[U++]=255&x),V===1&&(x=s[k.charCodeAt(D)]<<10|s[k.charCodeAt(D+1)]<<4|s[k.charCodeAt(D+2)]>>2,O[U++]=x>>8&255,O[U++]=255&x),O},n.fromByteArray=function(k){for(var x,D=k.length,L=D%3,M=[],V=0,O=D-L;V<O;V+=16383)M.push(y(k,V,V+16383>O?O:V+16383));return L===1?(x=k[D-1],M.push(o[x>>2]+o[x<<4&63]+"==")):L===2&&(x=(k[D-2]<<8)+k[D-1],M.push(o[x>>10]+o[x>>4&63]+o[x<<2&63]+"=")),M.join("")};for(var o=[],s=[],l=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,g=c.length;h<g;++h)o[h]=c[h],s[c.charCodeAt(h)]=h;function b(k){var x=k.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var D=k.indexOf("=");return D===-1&&(D=x),[D,D===x?0:4-D%4]}function y(k,x,D){for(var L,M,V=[],O=x;O<D;O+=3)L=(k[O]<<16&16711680)+(k[O+1]<<8&65280)+(255&k[O+2]),V.push(o[(M=L)>>18&63]+o[M>>12&63]+o[M>>6&63]+o[63&M]);return V.join("")}s[45]=62,s[95]=63},function(t,n){n.read=function(r,o,s,l,c){var h,g,b=8*c-l-1,y=(1<<b)-1,k=y>>1,x=-7,D=s?c-1:0,L=s?-1:1,M=r[o+D];for(D+=L,h=M&(1<<-x)-1,M>>=-x,x+=b;x>0;h=256*h+r[o+D],D+=L,x-=8);for(g=h&(1<<-x)-1,h>>=-x,x+=l;x>0;g=256*g+r[o+D],D+=L,x-=8);if(h===0)h=1-k;else{if(h===y)return g?NaN:1/0*(M?-1:1);g+=Math.pow(2,l),h-=k}return(M?-1:1)*g*Math.pow(2,h-l)},n.write=function(r,o,s,l,c,h){var g,b,y,k=8*h-c-1,x=(1<<k)-1,D=x>>1,L=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=l?0:h-1,V=l?1:-1,O=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(b=isNaN(o)?1:0,g=x):(g=Math.floor(Math.log(o)/Math.LN2),o*(y=Math.pow(2,-g))<1&&(g--,y*=2),(o+=g+D>=1?L/y:L*Math.pow(2,1-D))*y>=2&&(g++,y/=2),g+D>=x?(b=0,g=x):g+D>=1?(b=(o*y-1)*Math.pow(2,c),g+=D):(b=o*Math.pow(2,D-1)*Math.pow(2,c),g=0));c>=8;r[s+M]=255&b,M+=V,b/=256,c-=8);for(g=g<<c|b,k+=c;k>0;r[s+M]=255&g,M+=V,g/=256,k-=8);r[s+M-V]|=128*O}},function(t,n){var r={}.toString;t.exports=Array.isArray||function(o){return r.call(o)=="[object Array]"}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.arrayToString=void 0,n.arrayToString=(o,s,l)=>{const c=o.map(function(g,b){const y=l(g,b);return y===void 0?String(y):s+y.split(`
`).join(`
`+s)}).join(s?`,
`:","),h=s&&c?`
`:"";return`[${h}${c}${h}]`}},function(t,n,r){function o(M){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(M)}Object.defineProperty(n,"__esModule",{value:!0}),n.matchesSelector=k,n.matchesSelectorAndParentsTo=function(M,V,O){var U=M;do{if(k(U,V))return!0;if(U===O)return!1;U=U.parentNode}while(U);return!1},n.addEvent=function(M,V,O,U){if(M){var K=g({capture:!0},U);M.addEventListener?M.addEventListener(V,O,K):M.attachEvent?M.attachEvent("on"+V,O):M["on"+V]=O}},n.removeEvent=function(M,V,O,U){if(M){var K=g({capture:!0},U);M.removeEventListener?M.removeEventListener(V,O,K):M.detachEvent?M.detachEvent("on"+V,O):M["on"+V]=null}},n.outerHeight=function(M){var V=M.clientHeight,O=M.ownerDocument.defaultView.getComputedStyle(M);return V+=(0,s.int)(O.borderTopWidth),V+=(0,s.int)(O.borderBottomWidth)},n.outerWidth=function(M){var V=M.clientWidth,O=M.ownerDocument.defaultView.getComputedStyle(M);return V+=(0,s.int)(O.borderLeftWidth),V+=(0,s.int)(O.borderRightWidth)},n.innerHeight=function(M){var V=M.clientHeight,O=M.ownerDocument.defaultView.getComputedStyle(M);return V-=(0,s.int)(O.paddingTop),V-=(0,s.int)(O.paddingBottom)},n.innerWidth=function(M){var V=M.clientWidth,O=M.ownerDocument.defaultView.getComputedStyle(M);return V-=(0,s.int)(O.paddingLeft),V-=(0,s.int)(O.paddingRight)},n.offsetXYFromParent=function(M,V,O){var U=V===V.ownerDocument.body?{left:0,top:0}:V.getBoundingClientRect(),K=(M.clientX+V.scrollLeft-U.left)/O,q=(M.clientY+V.scrollTop-U.top)/O;return{x:K,y:q}},n.createCSSTransform=function(M,V){var O=x(M,V,"px");return b({},(0,l.browserPrefixToKey)("transform",l.default),O)},n.createSVGTransform=function(M,V){return x(M,V,"")},n.getTranslation=x,n.getTouch=function(M,V){return M.targetTouches&&(0,s.findInArray)(M.targetTouches,function(O){return V===O.identifier})||M.changedTouches&&(0,s.findInArray)(M.changedTouches,function(O){return V===O.identifier})},n.getTouchIdentifier=function(M){if(M.targetTouches&&M.targetTouches[0])return M.targetTouches[0].identifier;if(M.changedTouches&&M.changedTouches[0])return M.changedTouches[0].identifier},n.addUserSelectStyles=function(M){if(M){var V=M.getElementById("react-draggable-style-el");V||((V=M.createElement("style")).type="text/css",V.id="react-draggable-style-el",V.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,V.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,M.getElementsByTagName("head")[0].appendChild(V)),M.body&&D(M.body,"react-draggable-transparent-selection")}},n.removeUserSelectStyles=function(M){if(M)try{if(M.body&&L(M.body,"react-draggable-transparent-selection"),M.selection)M.selection.empty();else{var V=(M.defaultView||window).getSelection();V&&V.type!=="Caret"&&V.removeAllRanges()}}catch{}},n.addClassName=D,n.removeClassName=L;var s=r(20),l=function(M){if(M&&M.__esModule)return M;if(M===null||o(M)!=="object"&&typeof M!="function")return{default:M};var V=c();if(V&&V.has(M))return V.get(M);var O={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in M)if(Object.prototype.hasOwnProperty.call(M,K)){var q=U?Object.getOwnPropertyDescriptor(M,K):null;q&&(q.get||q.set)?Object.defineProperty(O,K,q):O[K]=M[K]}return O.default=M,V&&V.set(M,O),O}(r(56));function c(){if(typeof WeakMap!="function")return null;var M=new WeakMap;return c=function(){return M},M}function h(M,V){var O=Object.keys(M);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(M);V&&(U=U.filter(function(K){return Object.getOwnPropertyDescriptor(M,K).enumerable})),O.push.apply(O,U)}return O}function g(M){for(var V=1;V<arguments.length;V++){var O=arguments[V]!=null?arguments[V]:{};V%2?h(Object(O),!0).forEach(function(U){b(M,U,O[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(O)):h(Object(O)).forEach(function(U){Object.defineProperty(M,U,Object.getOwnPropertyDescriptor(O,U))})}return M}function b(M,V,O){return V in M?Object.defineProperty(M,V,{value:O,enumerable:!0,configurable:!0,writable:!0}):M[V]=O,M}var y="";function k(M,V){return y||(y=(0,s.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(O){return(0,s.isFunction)(M[O])})),!!(0,s.isFunction)(M[y])&&M[y](V)}function x(M,V,O){var U=M.x,K=M.y,q="translate(".concat(U).concat(O,",").concat(K).concat(O,")");if(V){var Q="".concat(typeof V.x=="string"?V.x:V.x+O),ne="".concat(typeof V.y=="string"?V.y:V.y+O);q="translate(".concat(Q,", ").concat(ne,")")+q}return q}function D(M,V){M.classList?M.classList.add(V):M.className.match(new RegExp("(?:^|\\s)".concat(V,"(?!\\S)")))||(M.className+=" ".concat(V))}function L(M,V){M.classList?M.classList.remove(V):M.className=M.className.replace(new RegExp("(?:^|\\s)".concat(V,"(?!\\S)"),"g"),"")}},function(t,n){t.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(t,n,r){var o=r(6),s=r(35);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,`.ck-inspector{--ck-inspector-color-tree-node-hover:#eaf2fb;--ck-inspector-color-tree-node-name:#882680;--ck-inspector-color-tree-node-attribute-name:#8a8a8a;--ck-inspector-color-tree-node-tag:#aaa;--ck-inspector-color-tree-node-attribute:#9a4819;--ck-inspector-color-tree-node-attribute-value:#2a43ac;--ck-inspector-color-tree-text-border:#b7b7b7;--ck-inspector-color-tree-node-border-hover:#b0c6e0;--ck-inspector-color-tree-content-delimiter:#ddd;--ck-inspector-color-tree-node-active-bg:#f5faff;--ck-inspector-color-tree-node-name-active-bg:#2b98f0;--ck-inspector-color-tree-node-inactive:#8a8a8a;--ck-inspector-color-tree-selection:#ff1744;--ck-inspector-color-tree-position:#000;--ck-inspector-color-comment:green}.ck-inspector .ck-inspector-tree{background:var(--ck-inspector-color-white);padding:1em;width:100%;height:100%;overflow:auto;user-select:none}.ck-inspector-tree .ck-inspector-tree-node__attribute{font:inherit;margin-left:.4em;color:var(--ck-inspector-color-tree-node-tag)}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__name{color:var(--ck-inspector-color-tree-node-attribute)}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__value{color:var(--ck-inspector-color-tree-node-attribute-value)}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__value:before{content:'="'}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__value:after{content:'"'}.ck-inspector-tree .ck-inspector-tree-node .ck-inspector-tree-node__name{color:var(--ck-inspector-color-tree-node-name);display:inline-block;width:100%;padding:0 .1em;border-left:1px solid transparent}.ck-inspector-tree .ck-inspector-tree-node .ck-inspector-tree-node__name:hover{background:var(--ck-inspector-color-tree-node-hover)}.ck-inspector-tree .ck-inspector-tree-node .ck-inspector-tree-node__content{padding:1px .5em 1px 1.5em;border-left:1px solid var(--ck-inspector-color-tree-content-delimiter);white-space:pre-wrap}.ck-inspector-tree .ck-inspector-tree-node:not(.ck-inspector-tree-node_tagless) .ck-inspector-tree-node__name>.ck-inspector-tree-node__name__bracket_open:after{content:"<";color:var(--ck-inspector-color-tree-node-tag)}.ck-inspector-tree .ck-inspector-tree-node:not(.ck-inspector-tree-node_tagless) .ck-inspector-tree-node__name .ck-inspector-tree-node__name__bracket_close:after{content:">";color:var(--ck-inspector-color-tree-node-tag)}.ck-inspector-tree .ck-inspector-tree-node:not(.ck-inspector-tree-node_tagless).ck-inspector-tree-node_empty .ck-inspector-tree-node__name:after{content:" />"}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_tagless .ck-inspector-tree-node__content{display:none}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:not(.ck-inspector-tree-node__name_close),.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:not(.ck-inspector-tree-node__name_close) :not(.ck-inspector-tree__position),.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:not(.ck-inspector-tree-node__name_close)>.ck-inspector-tree-node__name__bracket:after{background:var(--ck-inspector-color-tree-node-name-active-bg);color:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__content,.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name_close{background:var(--ck-inspector-color-tree-node-active-bg)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__content{border-left-color:var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name{border-left:1px solid var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_disabled{opacity:.8}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_disabled .ck-inspector-tree-node__name,.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_disabled .ck-inspector-tree-node__name *{color:var(--ck-inspector-color-tree-node-inactive)}.ck-inspector-tree .ck-inspector-tree-text{display:block;margin-bottom:1px}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-node__content{border:1px dotted var(--ck-inspector-color-tree-text-border);border-radius:2px;padding:0 1px;margin-right:1px;display:inline-block;word-break:break-all}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes:not(:empty){margin-right:.5em}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute{background:var(--ck-inspector-color-tree-node-attribute-name);border-radius:2px;padding:0 .5em}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute+.ck-inspector-tree-node__attribute{margin-left:.2em}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute>*{color:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute:first-child{margin-left:0}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active .ck-inspector-tree-node__content{border-style:solid;border-color:var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active .ck-inspector-tree-node__attribute{background:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active .ck-inspector-tree-node__attribute>*{color:var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active>.ck-inspector-tree-node__content{background:var(--ck-inspector-color-tree-node-name-active-bg);color:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-text:not(.ck-inspector-tree-node_active) .ck-inspector-tree-node__content:hover{background:var(--ck-inspector-color-tree-node-hover);border-style:solid;border-color:var(--ck-inspector-color-tree-node-border-hover)}.ck-inspector-tree.ck-inspector-tree_text-direction_ltr .ck-inspector-tree-node__content{direction:ltr}.ck-inspector-tree.ck-inspector-tree_text-direction_rtl .ck-inspector-tree-node__content{direction:rtl}.ck-inspector-tree.ck-inspector-tree_text-direction_rtl .ck-inspector-tree-node__content .ck-inspector-tree-node__name{direction:ltr}.ck-inspector-tree.ck-inspector-tree_text-direction_rtl .ck-inspector-tree__position{transform:rotate(180deg)}.ck-inspector-tree .ck-inspector-tree-comment{color:var(--ck-inspector-color-comment);font-style:italic}.ck-inspector-tree .ck-inspector-tree-comment a{color:inherit;text-decoration:underline}.ck-inspector-tree_compact-text .ck-inspector-tree-text,.ck-inspector-tree_compact-text .ck-inspector-tree-text .ck-inspector-tree-node__content{display:inline}.ck-inspector .ck-inspector__tree__navigation{padding:.5em 1em;border-bottom:1px solid var(--ck-inspector-color-border)}.ck-inspector .ck-inspector__tree__navigation label{margin-right:.5em}.ck-inspector-tree .ck-inspector-tree__position{display:inline-block;position:relative;cursor:default;height:100%;pointer-events:none;vertical-align:top}.ck-inspector-tree .ck-inspector-tree__position:after{content:"";position:absolute;border:1px solid var(--ck-inspector-color-tree-position);width:0;top:0;bottom:0;margin-left:-1px}.ck-inspector-tree .ck-inspector-tree__position:before{margin-left:-1px}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_selection{z-index:2;--ck-inspector-color-tree-position:var(--ck-inspector-color-tree-selection)}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_selection:before{content:"";position:absolute;top:-1px;bottom:-1px;left:0;border-top:2px solid var(--ck-inspector-color-tree-position);border-bottom:2px solid var(--ck-inspector-color-tree-position);width:8px}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_selection.ck-inspector-tree__position_end:before{right:-1px;left:auto}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_marker{z-index:1}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_marker:before{content:"";display:block;position:absolute;left:0;top:-1px;cursor:default;width:0;height:0;border-left:0 solid transparent;border-bottom:0 solid transparent;border-right:7px solid transparent;border-top:7px solid var(--ck-inspector-color-tree-position)}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_marker.ck-inspector-tree__position_end:before{border-width:0 7px 7px 0;border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-inspector-color-tree-position);border-top-color:transparent;left:-5px}`,""])},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.canUseDOM=n.SafeNodeList=n.SafeHTMLCollection=void 0;var o,s=r(82),l=((o=s)&&o.__esModule?o:{default:o}).default,c=l.canUseDOM?window.HTMLElement:{};n.SafeHTMLCollection=l.canUseDOM?window.HTMLCollection:{},n.SafeNodeList=l.canUseDOM?window.NodeList:{},n.canUseDOM=l.canUseDOM,n.default=c},function(t,n,r){var o=r(6),s=r(38);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,`.ck-inspector,.ck-inspector-portal{--ck-inspector-color-white:#fff;--ck-inspector-color-black:#000;--ck-inspector-color-background:#f3f3f3;--ck-inspector-color-link:#005cc6;--ck-inspector-code-font-size:11px;--ck-inspector-code-font-family:monaco,Consolas,Lucida Console,monospace;--ck-inspector-color-border:#d0d0d0}.ck-inspector,.ck-inspector-portal,.ck-inspector-portal :not(select),.ck-inspector :not(select){box-sizing:border-box;width:auto;height:auto;position:static;margin:0;padding:0;border:0;background:transparent;text-decoration:none;transition:none;word-wrap:break-word;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:12px;line-height:17px;font-weight:400;-webkit-font-smoothing:auto}.ck-inspector{overflow:hidden;border-collapse:collapse;color:var(--ck-inspector-color-black);text-align:left;white-space:normal;cursor:auto;float:none;background:var(--ck-inspector-color-background);border-top:1px solid var(--ck-inspector-color-border);z-index:9999}.ck-inspector.ck-inspector_collapsed>.ck-inspector-navbox>.ck-inspector-navbox__navigation .ck-inspector-horizontal-nav{display:none}.ck-inspector .ck-inspector-navbox__navigation__logo{background-size:contain;background-repeat:no-repeat;background-position:50%;display:block;overflow:hidden;text-indent:100px;align-self:center;white-space:nowrap;margin-right:1em;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='68' height='64' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M43.71 11.025a11.508 11.508 0 00-1.213 5.159c0 6.42 5.244 11.625 11.713 11.625.083 0 .167 0 .25-.002v16.282a5.464 5.464 0 01-2.756 4.739L30.986 60.7a5.548 5.548 0 01-5.512 0L4.756 48.828A5.464 5.464 0 012 44.089V20.344c0-1.955 1.05-3.76 2.756-4.738L25.474 3.733a5.548 5.548 0 015.512 0l12.724 7.292z' fill='%23FFF'/%3E%3Cpath d='M45.684 8.79a12.604 12.604 0 00-1.329 5.65c0 7.032 5.744 12.733 12.829 12.733.091 0 .183-.001.274-.003v17.834a5.987 5.987 0 01-3.019 5.19L31.747 63.196a6.076 6.076 0 01-6.037 0L3.02 50.193A5.984 5.984 0 010 45.003V18.997c0-2.14 1.15-4.119 3.019-5.19L25.71.804a6.076 6.076 0 016.037 0L45.684 8.79zm-29.44 11.89c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h25.489c.833 0 1.51-.67 1.51-1.498v-.715c0-.827-.677-1.498-1.51-1.498h-25.49zm0 9.227c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h18.479c.833 0 1.509-.67 1.509-1.498v-.715c0-.827-.676-1.498-1.51-1.498H16.244zm0 9.227c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h25.489c.833 0 1.51-.67 1.51-1.498v-.715c0-.827-.677-1.498-1.51-1.498h-25.49zm41.191-14.459c-5.835 0-10.565-4.695-10.565-10.486 0-5.792 4.73-10.487 10.565-10.487C63.27 3.703 68 8.398 68 14.19c0 5.791-4.73 10.486-10.565 10.486zm3.422-8.68c0-.467-.084-.875-.251-1.225a2.547 2.547 0 00-.686-.88 2.888 2.888 0 00-1.026-.531 4.418 4.418 0 00-1.259-.175c-.134 0-.283.006-.447.018a2.72 2.72 0 00-.446.07l.075-1.4h3.587v-1.8h-5.462l-.214 5.06c.319-.116.682-.21 1.089-.28.406-.071.77-.107 1.088-.107.218 0 .437.021.655.063.218.041.413.114.585.218s.313.244.422.419c.109.175.163.391.163.65 0 .424-.132.745-.396.961a1.434 1.434 0 01-.938.325c-.352 0-.656-.1-.912-.3-.256-.2-.43-.453-.523-.762l-1.925.588c.1.35.258.664.472.943.214.279.47.514.767.706.298.191.63.339.995.443.365.104.749.156 1.151.156.437 0 .86-.064 1.272-.193.41-.13.778-.323 1.1-.581a2.8 2.8 0 00.775-.981c.193-.396.29-.864.29-1.405z' fill='%231EBC61' fill-rule='nonzero'/%3E%3C/g%3E%3C/svg%3E");width:1.8em;height:1.8em;margin-left:1em}.ck-inspector .ck-inspector-navbox__navigation__toggle{margin-right:1em}.ck-inspector .ck-inspector-navbox__navigation__toggle.ck-inspector-navbox__navigation__toggle_up{transform:rotate(180deg)}.ck-inspector .ck-inspector-editor-selector{margin-left:auto;margin-right:.3em}@media screen and (max-width:680px){.ck-inspector .ck-inspector-editor-selector label{display:none}}.ck-inspector .ck-inspector-editor-selector select{margin-left:.5em}.ck-inspector .ck-inspector-code,.ck-inspector .ck-inspector-code *{font-size:var(--ck-inspector-code-font-size);font-family:var(--ck-inspector-code-font-family);cursor:default}.ck-inspector a{color:var(--ck-inspector-color-link);text-decoration:none}.ck-inspector a:hover{text-decoration:underline;cursor:pointer}.ck-inspector button{outline:0}.ck-inspector .ck-inspector-separator{border-right:1px solid var(--ck-inspector-color-border);display:inline-block;width:0;height:20px;margin:0 .5em;vertical-align:middle}`,""])},function(t,n,r){var o=r(49),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},l={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},c={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},h={};function g(M){return o.isMemo(M)?c:h[M.$$typeof]||s}h[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},h[o.Memo]=c;var b=Object.defineProperty,y=Object.getOwnPropertyNames,k=Object.getOwnPropertySymbols,x=Object.getOwnPropertyDescriptor,D=Object.getPrototypeOf,L=Object.prototype;t.exports=function M(V,O,U){if(typeof O!="string"){if(L){var K=D(O);K&&K!==L&&M(V,K,U)}var q=y(O);k&&(q=q.concat(k(O)));for(var Q=g(V),ne=g(O),X=0;X<q.length;++X){var se=q[X];if(!(l[se]||U&&U[se]||ne&&ne[se]||Q&&Q[se])){var fe=x(O,se);try{b(V,se,fe)}catch{}}}}return V}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getBoundPosition=function(c,h,g){if(!c.props.bounds)return[h,g];var b=c.props.bounds;b=typeof b=="string"?b:function(V){return{left:V.left,top:V.top,right:V.right,bottom:V.bottom}}(b);var y=l(c);if(typeof b=="string"){var k,x=y.ownerDocument,D=x.defaultView;if(!((k=b==="parent"?y.parentNode:x.querySelector(b))instanceof D.HTMLElement))throw new Error('Bounds selector "'+b+'" could not find an element.');var L=D.getComputedStyle(y),M=D.getComputedStyle(k);b={left:-y.offsetLeft+(0,o.int)(M.paddingLeft)+(0,o.int)(L.marginLeft),top:-y.offsetTop+(0,o.int)(M.paddingTop)+(0,o.int)(L.marginTop),right:(0,s.innerWidth)(k)-(0,s.outerWidth)(y)-y.offsetLeft+(0,o.int)(M.paddingRight)-(0,o.int)(L.marginRight),bottom:(0,s.innerHeight)(k)-(0,s.outerHeight)(y)-y.offsetTop+(0,o.int)(M.paddingBottom)-(0,o.int)(L.marginBottom)}}return(0,o.isNum)(b.right)&&(h=Math.min(h,b.right)),(0,o.isNum)(b.bottom)&&(g=Math.min(g,b.bottom)),(0,o.isNum)(b.left)&&(h=Math.max(h,b.left)),(0,o.isNum)(b.top)&&(g=Math.max(g,b.top)),[h,g]},n.snapToGrid=function(c,h,g){var b=Math.round(h/c[0])*c[0],y=Math.round(g/c[1])*c[1];return[b,y]},n.canDragX=function(c){return c.props.axis==="both"||c.props.axis==="x"},n.canDragY=function(c){return c.props.axis==="both"||c.props.axis==="y"},n.getControlPosition=function(c,h,g){var b=typeof h=="number"?(0,s.getTouch)(c,h):null;if(typeof h=="number"&&!b)return null;var y=l(g),k=g.props.offsetParent||y.offsetParent||y.ownerDocument.body;return(0,s.offsetXYFromParent)(b||c,k,g.props.scale)},n.createCoreData=function(c,h,g){var b=c.state,y=!(0,o.isNum)(b.lastX),k=l(c);return y?{node:k,deltaX:0,deltaY:0,lastX:h,lastY:g,x:h,y:g}:{node:k,deltaX:h-b.lastX,deltaY:g-b.lastY,lastX:b.lastX,lastY:b.lastY,x:h,y:g}},n.createDraggableData=function(c,h){var g=c.props.scale;return{node:h.node,x:c.state.x+h.deltaX/g,y:c.state.y+h.deltaY/g,deltaX:h.deltaX/g,deltaY:h.deltaY/g,lastX:c.state.x,lastY:c.state.y}};var o=r(20),s=r(32);function l(c){var h=c.findDOMNode();if(!h)throw new Error("<DraggableCore>: Unmounted during event!");return h}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function h(g){return[].slice.call(g.querySelectorAll("*"),0).reduce(function(b,y){return b.concat(y.shadowRoot?h(y.shadowRoot):[y])},[]).filter(c)};var o=/input|select|textarea|button|object|iframe/;function s(h){var g=h.offsetWidth<=0&&h.offsetHeight<=0;if(g&&!h.innerHTML)return!0;try{var b=window.getComputedStyle(h);return g?b.getPropertyValue("overflow")!=="visible"||h.scrollWidth<=0&&h.scrollHeight<=0:b.getPropertyValue("display")=="none"}catch{return console.warn("Failed to inspect element style"),!1}}function l(h,g){var b=h.nodeName.toLowerCase();return(o.test(b)&&!h.disabled||b==="a"&&h.href||g)&&function(y){for(var k=y,x=y.getRootNode&&y.getRootNode();k&&k!==document.body;){if(x&&k===x&&(k=x.host.parentNode),s(k))return!1;k=k.parentNode}return!0}(h)}function c(h){var g=h.getAttribute("tabindex");g===null&&(g=void 0);var b=isNaN(g);return(b||g>=0)&&l(h,!b)}t.exports=n.default},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.resetState=function(){h&&(h.removeAttribute?h.removeAttribute("aria-hidden"):h.length!=null?h.forEach(function(y){return y.removeAttribute("aria-hidden")}):document.querySelectorAll(h).forEach(function(y){return y.removeAttribute("aria-hidden")})),h=null},n.log=function(){},n.assertNodeList=g,n.setElement=function(y){var k=y;if(typeof k=="string"&&c.canUseDOM){var x=document.querySelectorAll(k);g(x,k),k=x}return h=k||h},n.validateElement=b,n.hide=function(y){var k=!0,x=!1,D=void 0;try{for(var L,M=b(y)[Symbol.iterator]();!(k=(L=M.next()).done);k=!0)L.value.setAttribute("aria-hidden","true")}catch(V){x=!0,D=V}finally{try{!k&&M.return&&M.return()}finally{if(x)throw D}}},n.show=function(y){var k=!0,x=!1,D=void 0;try{for(var L,M=b(y)[Symbol.iterator]();!(k=(L=M.next()).done);k=!0)L.value.removeAttribute("aria-hidden")}catch(V){x=!0,D=V}finally{try{!k&&M.return&&M.return()}finally{if(x)throw D}}},n.documentNotReadyOrSSRTesting=function(){h=null};var o,s=r(81),l=(o=s)&&o.__esModule?o:{default:o},c=r(36),h=null;function g(y,k){if(!y||!y.length)throw new Error("react-modal: No elements were found for selector "+k+".")}function b(y){var k=y||h;return k?Array.isArray(k)||k instanceof HTMLCollection||k instanceof NodeList?k:[k]:((0,l.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.log=function(){console.log("portalOpenInstances ----------"),console.log(s.openInstances.length),s.openInstances.forEach(function(l){return console.log(l)}),console.log("end portalOpenInstances ----------")},n.resetState=function(){s=new o};var o=function l(){var c=this;(function(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")})(this,l),this.register=function(h){c.openInstances.indexOf(h)===-1&&(c.openInstances.push(h),c.emit("register"))},this.deregister=function(h){var g=c.openInstances.indexOf(h);g!==-1&&(c.openInstances.splice(g,1),c.emit("deregister"))},this.subscribe=function(h){c.subscribers.push(h)},this.emit=function(h){c.subscribers.forEach(function(g){return g(h,c.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},s=new o;n.default=s},function(t,n,r){t.exports=r(51)},function(t,n,r){var o=r(52),s=o.default,l=o.DraggableCore;t.exports=s,t.exports.default=s,t.exports.DraggableCore=l},function(t,n,r){var o=r(76),s={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(l,c){var h,g,b,y,k,x,D=!1;c||(c={}),h=c.debug||!1;try{if(b=o(),y=document.createRange(),k=document.getSelection(),(x=document.createElement("span")).textContent=l,x.style.all="unset",x.style.position="fixed",x.style.top=0,x.style.clip="rect(0, 0, 0, 0)",x.style.whiteSpace="pre",x.style.webkitUserSelect="text",x.style.MozUserSelect="text",x.style.msUserSelect="text",x.style.userSelect="text",x.addEventListener("copy",function(L){if(L.stopPropagation(),c.format)if(L.preventDefault(),L.clipboardData===void 0){h&&console.warn("unable to use e.clipboardData"),h&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var M=s[c.format]||s.default;window.clipboardData.setData(M,l)}else L.clipboardData.clearData(),L.clipboardData.setData(c.format,l);c.onCopy&&(L.preventDefault(),c.onCopy(L.clipboardData))}),document.body.appendChild(x),y.selectNodeContents(x),k.addRange(y),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");D=!0}catch(L){h&&console.error("unable to copy using execCommand: ",L),h&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(c.format||"text",l),c.onCopy&&c.onCopy(window.clipboardData),D=!0}catch(M){h&&console.error("unable to copy using clipboardData: ",M),h&&console.error("falling back to prompt"),g=function(V){var O=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return V.replace(/#{\s*key\s*}/g,O)}("message"in c?c.message:"Copy to clipboard: #{key}, Enter"),window.prompt(g,l)}}finally{k&&(typeof k.removeRange=="function"?k.removeRange(y):k.removeAllRanges()),x&&document.body.removeChild(x),b()}return D}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o,s=r(77),l=(o=s)&&o.__esModule?o:{default:o};n.default=l.default,t.exports=n.default},function(t,n,r){t.exports=r(50)},function(t,n,r){var o=typeof Symbol=="function"&&Symbol.for,s=o?Symbol.for("react.element"):60103,l=o?Symbol.for("react.portal"):60106,c=o?Symbol.for("react.fragment"):60107,h=o?Symbol.for("react.strict_mode"):60108,g=o?Symbol.for("react.profiler"):60114,b=o?Symbol.for("react.provider"):60109,y=o?Symbol.for("react.context"):60110,k=o?Symbol.for("react.async_mode"):60111,x=o?Symbol.for("react.concurrent_mode"):60111,D=o?Symbol.for("react.forward_ref"):60112,L=o?Symbol.for("react.suspense"):60113,M=o?Symbol.for("react.suspense_list"):60120,V=o?Symbol.for("react.memo"):60115,O=o?Symbol.for("react.lazy"):60116,U=o?Symbol.for("react.block"):60121,K=o?Symbol.for("react.fundamental"):60117,q=o?Symbol.for("react.responder"):60118,Q=o?Symbol.for("react.scope"):60119;function ne(se){if(typeof se=="object"&&se!==null){var fe=se.$$typeof;switch(fe){case s:switch(se=se.type){case k:case x:case c:case g:case h:case L:return se;default:switch(se=se&&se.$$typeof){case y:case D:case O:case V:case b:return se;default:return fe}}case l:return fe}}}function X(se){return ne(se)===x}n.AsyncMode=k,n.ConcurrentMode=x,n.ContextConsumer=y,n.ContextProvider=b,n.Element=s,n.ForwardRef=D,n.Fragment=c,n.Lazy=O,n.Memo=V,n.Portal=l,n.Profiler=g,n.StrictMode=h,n.Suspense=L,n.isAsyncMode=function(se){return X(se)||ne(se)===k},n.isConcurrentMode=X,n.isContextConsumer=function(se){return ne(se)===y},n.isContextProvider=function(se){return ne(se)===b},n.isElement=function(se){return typeof se=="object"&&se!==null&&se.$$typeof===s},n.isForwardRef=function(se){return ne(se)===D},n.isFragment=function(se){return ne(se)===c},n.isLazy=function(se){return ne(se)===O},n.isMemo=function(se){return ne(se)===V},n.isPortal=function(se){return ne(se)===l},n.isProfiler=function(se){return ne(se)===g},n.isStrictMode=function(se){return ne(se)===h},n.isSuspense=function(se){return ne(se)===L},n.isValidElementType=function(se){return typeof se=="string"||typeof se=="function"||se===c||se===x||se===g||se===h||se===L||se===M||typeof se=="object"&&se!==null&&(se.$$typeof===O||se.$$typeof===V||se.$$typeof===b||se.$$typeof===y||se.$$typeof===D||se.$$typeof===K||se.$$typeof===q||se.$$typeof===Q||se.$$typeof===U)},n.typeOf=ne},function(t,n,r){var o=60103,s=60106,l=60107,c=60108,h=60114,g=60109,b=60110,y=60112,k=60113,x=60120,D=60115,L=60116,M=60121,V=60122,O=60117,U=60129,K=60131;if(typeof Symbol=="function"&&Symbol.for){var q=Symbol.for;o=q("react.element"),s=q("react.portal"),l=q("react.fragment"),c=q("react.strict_mode"),h=q("react.profiler"),g=q("react.provider"),b=q("react.context"),y=q("react.forward_ref"),k=q("react.suspense"),x=q("react.suspense_list"),D=q("react.memo"),L=q("react.lazy"),M=q("react.block"),V=q("react.server.block"),O=q("react.fundamental"),U=q("react.debug_trace_mode"),K=q("react.legacy_hidden")}function Q(Z){if(typeof Z=="object"&&Z!==null){var Pe=Z.$$typeof;switch(Pe){case o:switch(Z=Z.type){case l:case h:case c:case k:case x:return Z;default:switch(Z=Z&&Z.$$typeof){case b:case y:case L:case D:case g:return Z;default:return Pe}}case s:return Pe}}}var ne=g,X=o,se=y,fe=l,Oe=L,_e=D,Ie=s,re=h,ae=c,pe=k;n.ContextConsumer=b,n.ContextProvider=ne,n.Element=X,n.ForwardRef=se,n.Fragment=fe,n.Lazy=Oe,n.Memo=_e,n.Portal=Ie,n.Profiler=re,n.StrictMode=ae,n.Suspense=pe,n.isAsyncMode=function(){return!1},n.isConcurrentMode=function(){return!1},n.isContextConsumer=function(Z){return Q(Z)===b},n.isContextProvider=function(Z){return Q(Z)===g},n.isElement=function(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===o},n.isForwardRef=function(Z){return Q(Z)===y},n.isFragment=function(Z){return Q(Z)===l},n.isLazy=function(Z){return Q(Z)===L},n.isMemo=function(Z){return Q(Z)===D},n.isPortal=function(Z){return Q(Z)===s},n.isProfiler=function(Z){return Q(Z)===h},n.isStrictMode=function(Z){return Q(Z)===c},n.isSuspense=function(Z){return Q(Z)===k},n.isValidElementType=function(Z){return typeof Z=="string"||typeof Z=="function"||Z===l||Z===h||Z===U||Z===c||Z===k||Z===x||Z===K||typeof Z=="object"&&Z!==null&&(Z.$$typeof===L||Z.$$typeof===D||Z.$$typeof===g||Z.$$typeof===b||Z.$$typeof===y||Z.$$typeof===O||Z.$$typeof===M||Z[0]===V)},n.typeOf=Q},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return y.default}}),n.default=void 0;var o=function(ae){if(ae&&ae.__esModule)return ae;if(ae===null||L(ae)!=="object"&&typeof ae!="function")return{default:ae};var pe=D();if(pe&&pe.has(ae))return pe.get(ae);var Z={},Pe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var je in ae)if(Object.prototype.hasOwnProperty.call(ae,je)){var wt=Pe?Object.getOwnPropertyDescriptor(ae,je):null;wt&&(wt.get||wt.set)?Object.defineProperty(Z,je,wt):Z[je]=ae[je]}return Z.default=ae,pe&&pe.set(ae,Z),Z}(r(0)),s=x(r(18)),l=x(r(12)),c=x(r(55)),h=r(32),g=r(40),b=r(20),y=x(r(57)),k=x(r(41));function x(ae){return ae&&ae.__esModule?ae:{default:ae}}function D(){if(typeof WeakMap!="function")return null;var ae=new WeakMap;return D=function(){return ae},ae}function L(ae){return(L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(ae)}function M(){return(M=Object.assign||function(ae){for(var pe=1;pe<arguments.length;pe++){var Z=arguments[pe];for(var Pe in Z)Object.prototype.hasOwnProperty.call(Z,Pe)&&(ae[Pe]=Z[Pe])}return ae}).apply(this,arguments)}function V(ae,pe){if(ae==null)return{};var Z,Pe,je=function(oe,z){if(oe==null)return{};var ke,at,lt={},Ee=Object.keys(oe);for(at=0;at<Ee.length;at++)ke=Ee[at],z.indexOf(ke)>=0||(lt[ke]=oe[ke]);return lt}(ae,pe);if(Object.getOwnPropertySymbols){var wt=Object.getOwnPropertySymbols(ae);for(Pe=0;Pe<wt.length;Pe++)Z=wt[Pe],pe.indexOf(Z)>=0||Object.prototype.propertyIsEnumerable.call(ae,Z)&&(je[Z]=ae[Z])}return je}function O(ae,pe){return function(Z){if(Array.isArray(Z))return Z}(ae)||function(Z,Pe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Z)))){var je=[],wt=!0,oe=!1,z=void 0;try{for(var ke,at=Z[Symbol.iterator]();!(wt=(ke=at.next()).done)&&(je.push(ke.value),!Pe||je.length!==Pe);wt=!0);}catch(lt){oe=!0,z=lt}finally{try{wt||at.return==null||at.return()}finally{if(oe)throw z}}return je}}(ae,pe)||function(Z,Pe){if(Z){if(typeof Z=="string")return U(Z,Pe);var je=Object.prototype.toString.call(Z).slice(8,-1);if(je==="Object"&&Z.constructor&&(je=Z.constructor.name),je==="Map"||je==="Set")return Array.from(Z);if(je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je))return U(Z,Pe)}}(ae,pe)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function U(ae,pe){(pe==null||pe>ae.length)&&(pe=ae.length);for(var Z=0,Pe=new Array(pe);Z<pe;Z++)Pe[Z]=ae[Z];return Pe}function K(ae,pe){var Z=Object.keys(ae);if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(ae);pe&&(Pe=Pe.filter(function(je){return Object.getOwnPropertyDescriptor(ae,je).enumerable})),Z.push.apply(Z,Pe)}return Z}function q(ae){for(var pe=1;pe<arguments.length;pe++){var Z=arguments[pe]!=null?arguments[pe]:{};pe%2?K(Object(Z),!0).forEach(function(Pe){Ie(ae,Pe,Z[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(Z)):K(Object(Z)).forEach(function(Pe){Object.defineProperty(ae,Pe,Object.getOwnPropertyDescriptor(Z,Pe))})}return ae}function Q(ae,pe){for(var Z=0;Z<pe.length;Z++){var Pe=pe[Z];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(ae,Pe.key,Pe)}}function ne(ae,pe,Z){return pe&&Q(ae.prototype,pe),Z&&Q(ae,Z),ae}function X(ae,pe){return(X=Object.setPrototypeOf||function(Z,Pe){return Z.__proto__=Pe,Z})(ae,pe)}function se(ae){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Z,Pe=_e(ae);if(pe){var je=_e(this).constructor;Z=Reflect.construct(Pe,arguments,je)}else Z=Pe.apply(this,arguments);return fe(this,Z)}}function fe(ae,pe){return!pe||L(pe)!=="object"&&typeof pe!="function"?Oe(ae):pe}function Oe(ae){if(ae===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}function _e(ae){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(pe){return pe.__proto__||Object.getPrototypeOf(pe)})(ae)}function Ie(ae,pe,Z){return pe in ae?Object.defineProperty(ae,pe,{value:Z,enumerable:!0,configurable:!0,writable:!0}):ae[pe]=Z,ae}var re=function(ae){(function(Pe,je){if(typeof je!="function"&&je!==null)throw new TypeError("Super expression must either be null or a function");Pe.prototype=Object.create(je&&je.prototype,{constructor:{value:Pe,writable:!0,configurable:!0}}),je&&X(Pe,je)})(Z,ae);var pe=se(Z);function Z(Pe){var je;return function(wt,oe){if(!(wt instanceof oe))throw new TypeError("Cannot call a class as a function")}(this,Z),Ie(Oe(je=pe.call(this,Pe)),"onDragStart",function(wt,oe){if((0,k.default)("Draggable: onDragStart: %j",oe),je.props.onStart(wt,(0,g.createDraggableData)(Oe(je),oe))===!1)return!1;je.setState({dragging:!0,dragged:!0})}),Ie(Oe(je),"onDrag",function(wt,oe){if(!je.state.dragging)return!1;(0,k.default)("Draggable: onDrag: %j",oe);var z=(0,g.createDraggableData)(Oe(je),oe),ke={x:z.x,y:z.y};if(je.props.bounds){var at=ke.x,lt=ke.y;ke.x+=je.state.slackX,ke.y+=je.state.slackY;var Ee=O((0,g.getBoundPosition)(Oe(je),ke.x,ke.y),2),xe=Ee[0],Ue=Ee[1];ke.x=xe,ke.y=Ue,ke.slackX=je.state.slackX+(at-ke.x),ke.slackY=je.state.slackY+(lt-ke.y),z.x=ke.x,z.y=ke.y,z.deltaX=ke.x-je.state.x,z.deltaY=ke.y-je.state.y}if(je.props.onDrag(wt,z)===!1)return!1;je.setState(ke)}),Ie(Oe(je),"onDragStop",function(wt,oe){if(!je.state.dragging||je.props.onStop(wt,(0,g.createDraggableData)(Oe(je),oe))===!1)return!1;(0,k.default)("Draggable: onDragStop: %j",oe);var z={dragging:!1,slackX:0,slackY:0};if(je.props.position){var ke=je.props.position,at=ke.x,lt=ke.y;z.x=at,z.y=lt}je.setState(z)}),je.state={dragging:!1,dragged:!1,x:Pe.position?Pe.position.x:Pe.defaultPosition.x,y:Pe.position?Pe.position.y:Pe.defaultPosition.y,prevPropsPosition:q({},Pe.position),slackX:0,slackY:0,isElementSVG:!1},!Pe.position||Pe.onDrag||Pe.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),je}return ne(Z,null,[{key:"getDerivedStateFromProps",value:function(Pe,je){var wt=Pe.position,oe=je.prevPropsPosition;return!wt||oe&&wt.x===oe.x&&wt.y===oe.y?null:((0,k.default)("Draggable: getDerivedStateFromProps %j",{position:wt,prevPropsPosition:oe}),{x:wt.x,y:wt.y,prevPropsPosition:q({},wt)})}}]),ne(Z,[{key:"componentDidMount",value:function(){window.SVGElement!==void 0&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){return this.props.nodeRef?this.props.nodeRef.current:l.default.findDOMNode(this)}},{key:"render",value:function(){var Pe,je=this.props,wt=(je.axis,je.bounds,je.children),oe=je.defaultPosition,z=je.defaultClassName,ke=je.defaultClassNameDragging,at=je.defaultClassNameDragged,lt=je.position,Ee=je.positionOffset,xe=(je.scale,V(je,["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"])),Ue={},P=null,R=!lt||this.state.dragging,W=lt||oe,he={x:(0,g.canDragX)(this)&&R?this.state.x:W.x,y:(0,g.canDragY)(this)&&R?this.state.y:W.y};this.state.isElementSVG?P=(0,h.createSVGTransform)(he,Ee):Ue=(0,h.createCSSTransform)(he,Ee);var ge=(0,c.default)(wt.props.className||"",z,(Ie(Pe={},ke,this.state.dragging),Ie(Pe,at,this.state.dragged),Pe));return o.createElement(y.default,M({},xe,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),o.cloneElement(o.Children.only(wt),{className:ge,style:q(q({},wt.props.style),Ue),transform:P}))}}]),Z}(o.Component);n.default=re,Ie(re,"displayName","Draggable"),Ie(re,"propTypes",q(q({},y.default.propTypes),{},{axis:s.default.oneOf(["both","x","y","none"]),bounds:s.default.oneOfType([s.default.shape({left:s.default.number,right:s.default.number,top:s.default.number,bottom:s.default.number}),s.default.string,s.default.oneOf([!1])]),defaultClassName:s.default.string,defaultClassNameDragging:s.default.string,defaultClassNameDragged:s.default.string,defaultPosition:s.default.shape({x:s.default.number,y:s.default.number}),positionOffset:s.default.shape({x:s.default.oneOfType([s.default.number,s.default.string]),y:s.default.oneOfType([s.default.number,s.default.string])}),position:s.default.shape({x:s.default.number,y:s.default.number}),className:b.dontSetMe,style:b.dontSetMe,transform:b.dontSetMe})),Ie(re,"defaultProps",q(q({},y.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}))},function(t,n,r){var o=r(54);function s(){}function l(){}l.resetWarningCache=s,t.exports=function(){function c(b,y,k,x,D,L){if(L!==o){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}function h(){return c}c.isRequired=c;var g={array:c,bigint:c,bool:c,func:c,number:c,object:c,string:c,symbol:c,any:c,arrayOf:h,element:c,elementType:c,instanceOf:h,node:c,objectOf:h,oneOf:h,oneOfType:h,shape:h,exact:h,checkPropTypes:l,resetWarningCache:s};return g.PropTypes=g,g}},function(t,n,r){t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,n,r){var o;(function(){var s={}.hasOwnProperty;function l(){for(var c=[],h=0;h<arguments.length;h++){var g=arguments[h];if(g){var b=typeof g;if(b==="string"||b==="number")c.push(g);else if(Array.isArray(g)){if(g.length){var y=l.apply(null,g);y&&c.push(y)}}else if(b==="object")if(g.toString===Object.prototype.toString)for(var k in g)s.call(g,k)&&g[k]&&c.push(k);else c.push(g.toString())}}return c.join(" ")}t.exports?(l.default=l,t.exports=l):(o=function(){return l}.apply(n,[]))===void 0||(t.exports=o)})()},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getPrefix=s,n.browserPrefixToKey=l,n.browserPrefixToStyle=function(h,g){return g?"-".concat(g.toLowerCase(),"-").concat(h):h},n.default=void 0;var o=["Moz","Webkit","O","ms"];function s(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u"||window.document===void 0)return"";var g=window.document.documentElement.style;if(h in g)return"";for(var b=0;b<o.length;b++)if(l(h,o[b])in g)return o[b];return""}function l(h,g){return g?"".concat(g).concat(function(b){for(var y="",k=!0,x=0;x<b.length;x++)k?(y+=b[x].toUpperCase(),k=!1):b[x]==="-"?k=!0:y+=b[x];return y}(h)):h}var c=s();n.default=c},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(_e){if(_e&&_e.__esModule)return _e;if(_e===null||x(_e)!=="object"&&typeof _e!="function")return{default:_e};var Ie=k();if(Ie&&Ie.has(_e))return Ie.get(_e);var re={},ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var pe in _e)if(Object.prototype.hasOwnProperty.call(_e,pe)){var Z=ae?Object.getOwnPropertyDescriptor(_e,pe):null;Z&&(Z.get||Z.set)?Object.defineProperty(re,pe,Z):re[pe]=_e[pe]}return re.default=_e,Ie&&Ie.set(_e,re),re}(r(0)),s=y(r(18)),l=y(r(12)),c=r(32),h=r(40),g=r(20),b=y(r(41));function y(_e){return _e&&_e.__esModule?_e:{default:_e}}function k(){if(typeof WeakMap!="function")return null;var _e=new WeakMap;return k=function(){return _e},_e}function x(_e){return(x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ie){return typeof Ie}:function(Ie){return Ie&&typeof Symbol=="function"&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie})(_e)}function D(_e,Ie){return function(re){if(Array.isArray(re))return re}(_e)||function(re,ae){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(re)))){var pe=[],Z=!0,Pe=!1,je=void 0;try{for(var wt,oe=re[Symbol.iterator]();!(Z=(wt=oe.next()).done)&&(pe.push(wt.value),!ae||pe.length!==ae);Z=!0);}catch(z){Pe=!0,je=z}finally{try{Z||oe.return==null||oe.return()}finally{if(Pe)throw je}}return pe}}(_e,Ie)||function(re,ae){if(re){if(typeof re=="string")return L(re,ae);var pe=Object.prototype.toString.call(re).slice(8,-1);if(pe==="Object"&&re.constructor&&(pe=re.constructor.name),pe==="Map"||pe==="Set")return Array.from(re);if(pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe))return L(re,ae)}}(_e,Ie)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L(_e,Ie){(Ie==null||Ie>_e.length)&&(Ie=_e.length);for(var re=0,ae=new Array(Ie);re<Ie;re++)ae[re]=_e[re];return ae}function M(_e,Ie){if(!(_e instanceof Ie))throw new TypeError("Cannot call a class as a function")}function V(_e,Ie){for(var re=0;re<Ie.length;re++){var ae=Ie[re];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(_e,ae.key,ae)}}function O(_e,Ie){return(O=Object.setPrototypeOf||function(re,ae){return re.__proto__=ae,re})(_e,Ie)}function U(_e){var Ie=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var re,ae=Q(_e);if(Ie){var pe=Q(this).constructor;re=Reflect.construct(ae,arguments,pe)}else re=ae.apply(this,arguments);return K(this,re)}}function K(_e,Ie){return!Ie||x(Ie)!=="object"&&typeof Ie!="function"?q(_e):Ie}function q(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function Q(_e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(Ie){return Ie.__proto__||Object.getPrototypeOf(Ie)})(_e)}function ne(_e,Ie,re){return Ie in _e?Object.defineProperty(_e,Ie,{value:re,enumerable:!0,configurable:!0,writable:!0}):_e[Ie]=re,_e}var X={start:"touchstart",move:"touchmove",stop:"touchend"},se={start:"mousedown",move:"mousemove",stop:"mouseup"},fe=se,Oe=function(_e){(function(Z,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Super expression must either be null or a function");Z.prototype=Object.create(Pe&&Pe.prototype,{constructor:{value:Z,writable:!0,configurable:!0}}),Pe&&O(Z,Pe)})(pe,_e);var Ie,re,ae=U(pe);function pe(){var Z;M(this,pe);for(var Pe=arguments.length,je=new Array(Pe),wt=0;wt<Pe;wt++)je[wt]=arguments[wt];return ne(q(Z=ae.call.apply(ae,[this].concat(je))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),ne(q(Z),"mounted",!1),ne(q(Z),"handleDragStart",function(oe){if(Z.props.onMouseDown(oe),!Z.props.allowAnyClick&&typeof oe.button=="number"&&oe.button!==0)return!1;var z=Z.findDOMNode();if(!z||!z.ownerDocument||!z.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var ke=z.ownerDocument;if(!(Z.props.disabled||!(oe.target instanceof ke.defaultView.Node)||Z.props.handle&&!(0,c.matchesSelectorAndParentsTo)(oe.target,Z.props.handle,z)||Z.props.cancel&&(0,c.matchesSelectorAndParentsTo)(oe.target,Z.props.cancel,z))){oe.type==="touchstart"&&oe.preventDefault();var at=(0,c.getTouchIdentifier)(oe);Z.setState({touchIdentifier:at});var lt=(0,h.getControlPosition)(oe,at,q(Z));if(lt!=null){var Ee=lt.x,xe=lt.y,Ue=(0,h.createCoreData)(q(Z),Ee,xe);(0,b.default)("DraggableCore: handleDragStart: %j",Ue),(0,b.default)("calling",Z.props.onStart),Z.props.onStart(oe,Ue)!==!1&&Z.mounted!==!1&&(Z.props.enableUserSelectHack&&(0,c.addUserSelectStyles)(ke),Z.setState({dragging:!0,lastX:Ee,lastY:xe}),(0,c.addEvent)(ke,fe.move,Z.handleDrag),(0,c.addEvent)(ke,fe.stop,Z.handleDragStop))}}}),ne(q(Z),"handleDrag",function(oe){var z=(0,h.getControlPosition)(oe,Z.state.touchIdentifier,q(Z));if(z!=null){var ke=z.x,at=z.y;if(Array.isArray(Z.props.grid)){var lt=ke-Z.state.lastX,Ee=at-Z.state.lastY,xe=D((0,h.snapToGrid)(Z.props.grid,lt,Ee),2);if(lt=xe[0],Ee=xe[1],!lt&&!Ee)return;ke=Z.state.lastX+lt,at=Z.state.lastY+Ee}var Ue=(0,h.createCoreData)(q(Z),ke,at);if((0,b.default)("DraggableCore: handleDrag: %j",Ue),Z.props.onDrag(oe,Ue)!==!1&&Z.mounted!==!1)Z.setState({lastX:ke,lastY:at});else try{Z.handleDragStop(new MouseEvent("mouseup"))}catch{var P=document.createEvent("MouseEvents");P.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Z.handleDragStop(P)}}}),ne(q(Z),"handleDragStop",function(oe){if(Z.state.dragging){var z=(0,h.getControlPosition)(oe,Z.state.touchIdentifier,q(Z));if(z!=null){var ke=z.x,at=z.y,lt=(0,h.createCoreData)(q(Z),ke,at);if(Z.props.onStop(oe,lt)===!1||Z.mounted===!1)return!1;var Ee=Z.findDOMNode();Ee&&Z.props.enableUserSelectHack&&(0,c.removeUserSelectStyles)(Ee.ownerDocument),(0,b.default)("DraggableCore: handleDragStop: %j",lt),Z.setState({dragging:!1,lastX:NaN,lastY:NaN}),Ee&&((0,b.default)("DraggableCore: Removing handlers"),(0,c.removeEvent)(Ee.ownerDocument,fe.move,Z.handleDrag),(0,c.removeEvent)(Ee.ownerDocument,fe.stop,Z.handleDragStop))}}}),ne(q(Z),"onMouseDown",function(oe){return fe=se,Z.handleDragStart(oe)}),ne(q(Z),"onMouseUp",function(oe){return fe=se,Z.handleDragStop(oe)}),ne(q(Z),"onTouchStart",function(oe){return fe=X,Z.handleDragStart(oe)}),ne(q(Z),"onTouchEnd",function(oe){return fe=X,Z.handleDragStop(oe)}),Z}return Ie=pe,(re=[{key:"componentDidMount",value:function(){this.mounted=!0;var Z=this.findDOMNode();Z&&(0,c.addEvent)(Z,X.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var Z=this.findDOMNode();if(Z){var Pe=Z.ownerDocument;(0,c.removeEvent)(Pe,se.move,this.handleDrag),(0,c.removeEvent)(Pe,X.move,this.handleDrag),(0,c.removeEvent)(Pe,se.stop,this.handleDragStop),(0,c.removeEvent)(Pe,X.stop,this.handleDragStop),(0,c.removeEvent)(Z,X.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,c.removeUserSelectStyles)(Pe)}}},{key:"findDOMNode",value:function(){return this.props.nodeRef?this.props.nodeRef.current:l.default.findDOMNode(this)}},{key:"render",value:function(){return o.cloneElement(o.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&V(Ie.prototype,re),pe}(o.Component);n.default=Oe,ne(Oe,"displayName","DraggableCore"),ne(Oe,"propTypes",{allowAnyClick:s.default.bool,disabled:s.default.bool,enableUserSelectHack:s.default.bool,offsetParent:function(_e,Ie){if(_e[Ie]&&_e[Ie].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:s.default.arrayOf(s.default.number),handle:s.default.string,cancel:s.default.string,nodeRef:s.default.object,onStart:s.default.func,onDrag:s.default.func,onStop:s.default.func,onMouseDown:s.default.func,scale:s.default.number,className:g.dontSetMe,style:g.dontSetMe,transform:g.dontSetMe}),ne(Oe,"defaultProps",{allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},function(t,n,r){var o=r(6),s=r(59);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,".ck-inspector{--ck-inspector-color-tab-background-hover:rgba(0,0,0,0.07);--ck-inspector-color-tab-active-border:#0dacef }.ck-inspector .ck-inspector-horizontal-nav{display:flex;flex-direction:row;user-select:none;align-self:stretch}.ck-inspector .ck-inspector-horizontal-nav .ck-inspector-horizontal-nav__item{-webkit-appearance:none;background:none;border:0;border-bottom:2px solid transparent;padding:.5em 1em;align-self:stretch}.ck-inspector .ck-inspector-horizontal-nav .ck-inspector-horizontal-nav__item:hover{background:var(--ck-inspector-color-tab-background-hover)}.ck-inspector .ck-inspector-horizontal-nav .ck-inspector-horizontal-nav__item.ck-inspector-horizontal-nav__item_active{border-bottom-color:var(--ck-inspector-color-tab-active-border)}",""])},function(t,n,r){var o=r(6),s=r(61);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,".ck-inspector{--ck-inspector-navbox-empty-background:#fafafa}.ck-inspector .ck-inspector-navbox{display:flex;flex-direction:column;height:100%;align-items:stretch}.ck-inspector .ck-inspector-navbox .ck-inspector-navbox__navigation{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch;min-height:30px;max-height:30px;border-bottom:1px solid var(--ck-inspector-color-border);width:100%;user-select:none;align-items:center}.ck-inspector .ck-inspector-navbox .ck-inspector-navbox__content{display:flex;flex-direction:row;height:100%;overflow:hidden}",""])},function(t,n,r){var o=r(6),s=r(63);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,".ck-inspector{--ck-inspector-icon-size:19px;--ck-inspector-button-size:calc(4px + var(--ck-inspector-icon-size));--ck-inspector-color-button:#777;--ck-inspector-color-button-hover:#222;--ck-inspector-color-button-on:#0f79e2}.ck-inspector .ck-inspector-button{width:var(--ck-inspector-button-size);height:var(--ck-inspector-button-size);border:0;overflow:hidden;border-radius:2px;padding:2px;color:var(--ck-inspector-color-button)}.ck-inspector .ck-inspector-button.ck-inspector-button_on,.ck-inspector .ck-inspector-button.ck-inspector-button_on:hover{color:var(--ck-inspector-color-button-on);opacity:1}.ck-inspector .ck-inspector-button.ck-inspector-button_disabled{opacity:.3}.ck-inspector .ck-inspector-button>span{display:none}.ck-inspector .ck-inspector-button:hover{color:var(--ck-inspector-color-button-hover)}.ck-inspector .ck-inspector-button svg{width:var(--ck-inspector-icon-size);height:var(--ck-inspector-icon-size)}.ck-inspector .ck-inspector-button svg,.ck-inspector .ck-inspector-button svg *{fill:currentColor}",""])},function(t,n,r){var o=r(6),s=r(65);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,".ck-inspector{--ck-inspector-explorer-width:300px}.ck-inspector .ck-inspector-pane{display:flex;width:100%}.ck-inspector .ck-inspector-pane.ck-inspector-pane_empty{align-items:center;justify-content:center;padding:1em;background:var(--ck-inspector-navbox-empty-background)}.ck-inspector .ck-inspector-pane.ck-inspector-pane_empty p{align-self:center;width:100%;text-align:center}.ck-inspector .ck-inspector-pane>.ck-inspector-navbox:last-child{min-width:var(--ck-inspector-explorer-width);width:var(--ck-inspector-explorer-width)}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child{border-right:1px solid var(--ck-inspector-color-border);flex:1 1 auto;overflow:hidden}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child .ck-inspector-navbox__navigation{align-items:center}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child .ck-inspector-tree__config label{margin:0 .5em}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child .ck-inspector-tree__config input+label{margin-right:1em}",""])},function(t,n,r){var o=r(6),s=r(67);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,".ck-inspector-side-pane{position:relative}",""])},function(t,n,r){var o=r(6),s=r(69);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,".ck-inspector .ck-inspector-checkbox{vertical-align:middle}",""])},function(t,n,r){var o=r(6),s=r(71);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,'.ck-inspector{--ck-inspector-color-property-list-property-name:#d0363f;--ck-inspector-color-property-list-property-value-true:green;--ck-inspector-color-property-list-property-value-false:red;--ck-inspector-color-property-list-property-value-unknown:#888;--ck-inspector-color-property-list-background:#f5f5f5;--ck-inspector-color-property-list-title-collapser:#727272}.ck-inspector .ck-inspector-property-list{display:grid;grid-template-columns:auto 1fr;background:var(--ck-inspector-color-white)}.ck-inspector .ck-inspector-property-list>:nth-of-type(odd){background:var(--ck-inspector-color-property-list-background)}.ck-inspector .ck-inspector-property-list>:nth-of-type(2n){background:var(--ck-inspector-color-white)}.ck-inspector .ck-inspector-property-list dt{padding:0 .7em 0 1.2em;min-width:15em}.ck-inspector .ck-inspector-property-list dt.ck-inspector-property-list__title_collapsible button{display:inline-block;overflow:hidden;vertical-align:middle;margin-left:-9px;margin-right:.3em;width:0;height:0;border-left:6px solid var(--ck-inspector-color-property-list-title-collapser);border-bottom:3.5px solid transparent;border-right:0 solid transparent;border-top:3.5px solid transparent;transition:transform .2s ease-in-out;transform:rotate(0deg)}.ck-inspector .ck-inspector-property-list dt.ck-inspector-property-list__title_expanded button{transform:rotate(90deg)}.ck-inspector .ck-inspector-property-list dt.ck-inspector-property-list__title_collapsed+dd+.ck-inspector-property-list{display:none}.ck-inspector .ck-inspector-property-list dt .ck-inspector-property-list__title__color-box{width:12px;height:12px;vertical-align:text-top;display:inline-block;margin-right:3px;border-radius:2px;border:1px solid #000}.ck-inspector .ck-inspector-property-list dt.ck-inspector-property-list__title_clickable label:hover{text-decoration:underline;cursor:pointer}.ck-inspector .ck-inspector-property-list dt label{color:var(--ck-inspector-color-property-list-property-name)}.ck-inspector .ck-inspector-property-list dd{padding-right:.7em}.ck-inspector .ck-inspector-property-list dd input{width:100%}.ck-inspector .ck-inspector-property-list dd input[value=false]{color:var(--ck-inspector-color-property-list-property-value-false)}.ck-inspector .ck-inspector-property-list dd input[value=true]{color:var(--ck-inspector-color-property-list-property-value-true)}.ck-inspector .ck-inspector-property-list dd input[value="function() {…}"],.ck-inspector .ck-inspector-property-list dd input[value=undefined]{color:var(--ck-inspector-color-property-list-property-value-unknown)}.ck-inspector .ck-inspector-property-list dd input[value="function() {…}"]{font-style:italic}.ck-inspector .ck-inspector-property-list .ck-inspector-property-list{grid-column:1/-1;margin-left:1em;background:transparent}.ck-inspector .ck-inspector-property-list .ck-inspector-property-list>:nth-of-type(2n),.ck-inspector .ck-inspector-property-list .ck-inspector-property-list>:nth-of-type(odd){background:transparent}',""])},function(t,n,r){var o=r(6),s=r(73);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,`.ck-inspector .ck-inspector__object-inspector{width:100%;background:var(--ck-inspector-color-white);overflow:auto}.ck-inspector .ck-inspector__object-inspector h2,.ck-inspector .ck-inspector__object-inspector h3{display:flex;flex-direction:row;flex-wrap:nowrap}.ck-inspector .ck-inspector__object-inspector h2{display:flex;align-items:center;padding:1em;overflow:hidden;text-overflow:ellipsis}.ck-inspector .ck-inspector__object-inspector h2>span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;margin-right:auto}.ck-inspector .ck-inspector__object-inspector h2>.ck-inspector-button{flex-shrink:0;margin-left:.5em}.ck-inspector .ck-inspector__object-inspector h2 a{font-weight:700;color:var(--ck-inspector-color-tree-node-name)}.ck-inspector .ck-inspector__object-inspector h2 a,.ck-inspector .ck-inspector__object-inspector h2 a>*{cursor:pointer}.ck-inspector .ck-inspector__object-inspector h2 em:after,.ck-inspector .ck-inspector__object-inspector h2 em:before{content:'"'}.ck-inspector .ck-inspector__object-inspector h3{display:flex;align-items:center;font-size:12px;padding:.4em .7em}.ck-inspector .ck-inspector__object-inspector h3 a{color:inherit;font-weight:700;margin-right:auto}.ck-inspector .ck-inspector__object-inspector h3 .ck-inspector-button{visibility:hidden}.ck-inspector .ck-inspector__object-inspector h3:hover .ck-inspector-button{visibility:visible}.ck-inspector .ck-inspector__object-inspector hr{border-top:1px solid var(--ck-inspector-color-border)}`,""])},function(t,n,r){var o=r(6),s=r(75);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,".ck-inspector-model-tree__hide-markers .ck-inspector-tree__position.ck-inspector-tree__position_marker{display:none}",""])},function(t,n){t.exports=function(){var r=document.getSelection();if(!r.rangeCount)return function(){};for(var o=document.activeElement,s=[],l=0;l<r.rangeCount;l++)s.push(r.getRangeAt(l));switch(o.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":o.blur();break;default:o=null}return r.removeAllRanges(),function(){r.type==="Caret"&&r.removeAllRanges(),r.rangeCount||s.forEach(function(c){r.addRange(c)}),o&&o.focus()}}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.bodyOpenClassName=n.portalClassName=void 0;var o=Object.assign||function(se){for(var fe=1;fe<arguments.length;fe++){var Oe=arguments[fe];for(var _e in Oe)Object.prototype.hasOwnProperty.call(Oe,_e)&&(se[_e]=Oe[_e])}return se},s=function(){function se(fe,Oe){for(var _e=0;_e<Oe.length;_e++){var Ie=Oe[_e];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(fe,Ie.key,Ie)}}return function(fe,Oe,_e){return Oe&&se(fe.prototype,Oe),_e&&se(fe,_e),fe}}(),l=r(0),c=L(l),h=L(r(12)),g=L(r(18)),b=L(r(78)),y=function(se){if(se&&se.__esModule)return se;var fe={};if(se!=null)for(var Oe in se)Object.prototype.hasOwnProperty.call(se,Oe)&&(fe[Oe]=se[Oe]);return fe.default=se,fe}(r(43)),k=r(36),x=L(k),D=r(85);function L(se){return se&&se.__esModule?se:{default:se}}function M(se,fe){if(!(se instanceof fe))throw new TypeError("Cannot call a class as a function")}function V(se,fe){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!fe||typeof fe!="object"&&typeof fe!="function"?se:fe}var O=n.portalClassName="ReactModalPortal",U=n.bodyOpenClassName="ReactModal__Body--open",K=k.canUseDOM&&h.default.createPortal!==void 0,q=function(se){return document.createElement(se)},Q=function(){return K?h.default.createPortal:h.default.unstable_renderSubtreeIntoContainer};function ne(se){return se()}var X=function(se){function fe(){var Oe,_e,Ie;M(this,fe);for(var re=arguments.length,ae=Array(re),pe=0;pe<re;pe++)ae[pe]=arguments[pe];return _e=Ie=V(this,(Oe=fe.__proto__||Object.getPrototypeOf(fe)).call.apply(Oe,[this].concat(ae))),Ie.removePortal=function(){!K&&h.default.unmountComponentAtNode(Ie.node);var Z=ne(Ie.props.parentSelector);Z&&Z.contains(Ie.node)?Z.removeChild(Ie.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},Ie.portalRef=function(Z){Ie.portal=Z},Ie.renderPortal=function(Z){var Pe=Q()(Ie,c.default.createElement(b.default,o({defaultStyles:fe.defaultStyles},Z)),Ie.node);Ie.portalRef(Pe)},V(Ie,_e)}return function(Oe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);Oe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(Oe,_e):Oe.__proto__=_e)}(fe,se),s(fe,[{key:"componentDidMount",value:function(){k.canUseDOM&&(K||(this.node=q("div")),this.node.className=this.props.portalClassName,ne(this.props.parentSelector).appendChild(this.node),!K&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(Oe){return{prevParent:ne(Oe.parentSelector),nextParent:ne(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(Oe,_e,Ie){if(k.canUseDOM){var re=this.props,ae=re.isOpen,pe=re.portalClassName;Oe.portalClassName!==pe&&(this.node.className=pe);var Z=Ie.prevParent,Pe=Ie.nextParent;Pe!==Z&&(Z.removeChild(this.node),Pe.appendChild(this.node)),(Oe.isOpen||ae)&&!K&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(k.canUseDOM&&this.node&&this.portal){var Oe=this.portal.state,_e=Date.now(),Ie=Oe.isOpen&&this.props.closeTimeoutMS&&(Oe.closesAt||_e+this.props.closeTimeoutMS);Ie?(Oe.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,Ie-_e)):this.removePortal()}}},{key:"render",value:function(){return k.canUseDOM&&K?(!this.node&&K&&(this.node=q("div")),Q()(c.default.createElement(b.default,o({ref:this.portalRef,defaultStyles:fe.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(Oe){y.setElement(Oe)}}]),fe}(l.Component);X.propTypes={isOpen:g.default.bool.isRequired,style:g.default.shape({content:g.default.object,overlay:g.default.object}),portalClassName:g.default.string,bodyOpenClassName:g.default.string,htmlOpenClassName:g.default.string,className:g.default.oneOfType([g.default.string,g.default.shape({base:g.default.string.isRequired,afterOpen:g.default.string.isRequired,beforeClose:g.default.string.isRequired})]),overlayClassName:g.default.oneOfType([g.default.string,g.default.shape({base:g.default.string.isRequired,afterOpen:g.default.string.isRequired,beforeClose:g.default.string.isRequired})]),appElement:g.default.oneOfType([g.default.instanceOf(x.default),g.default.instanceOf(k.SafeHTMLCollection),g.default.instanceOf(k.SafeNodeList),g.default.arrayOf(g.default.instanceOf(x.default))]),onAfterOpen:g.default.func,onRequestClose:g.default.func,closeTimeoutMS:g.default.number,ariaHideApp:g.default.bool,shouldFocusAfterRender:g.default.bool,shouldCloseOnOverlayClick:g.default.bool,shouldReturnFocusAfterClose:g.default.bool,preventScroll:g.default.bool,parentSelector:g.default.func,aria:g.default.object,data:g.default.object,role:g.default.string,contentLabel:g.default.string,shouldCloseOnEsc:g.default.bool,overlayRef:g.default.func,contentRef:g.default.func,id:g.default.string,overlayElement:g.default.func,contentElement:g.default.func},X.defaultProps={isOpen:!1,portalClassName:O,bodyOpenClassName:U,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(se,fe){return c.default.createElement("div",se,fe)},contentElement:function(se,fe){return c.default.createElement("div",se,fe)}},X.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,D.polyfill)(X),n.default=X},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(q){for(var Q=1;Q<arguments.length;Q++){var ne=arguments[Q];for(var X in ne)Object.prototype.hasOwnProperty.call(ne,X)&&(q[X]=ne[X])}return q},s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},l=function(){function q(Q,ne){for(var X=0;X<ne.length;X++){var se=ne[X];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(Q,se.key,se)}}return function(Q,ne,X){return ne&&q(Q.prototype,ne),X&&q(Q,X),Q}}(),c=r(0),h=V(r(18)),g=M(r(79)),b=V(r(80)),y=M(r(43)),k=M(r(83)),x=r(36),D=V(x),L=V(r(44));function M(q){if(q&&q.__esModule)return q;var Q={};if(q!=null)for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&(Q[ne]=q[ne]);return Q.default=q,Q}function V(q){return q&&q.__esModule?q:{default:q}}r(84);var O={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},U=0,K=function(q){function Q(ne){(function(se,fe){if(!(se instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,Q);var X=function(se,fe){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!fe||typeof fe!="object"&&typeof fe!="function"?se:fe}(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this,ne));return X.setOverlayRef=function(se){X.overlay=se,X.props.overlayRef&&X.props.overlayRef(se)},X.setContentRef=function(se){X.content=se,X.props.contentRef&&X.props.contentRef(se)},X.afterClose=function(){var se=X.props,fe=se.appElement,Oe=se.ariaHideApp,_e=se.htmlOpenClassName,Ie=se.bodyOpenClassName;Ie&&k.remove(document.body,Ie),_e&&k.remove(document.getElementsByTagName("html")[0],_e),Oe&&U>0&&(U-=1)===0&&y.show(fe),X.props.shouldFocusAfterRender&&(X.props.shouldReturnFocusAfterClose?(g.returnFocus(X.props.preventScroll),g.teardownScopedFocus()):g.popWithoutFocus()),X.props.onAfterClose&&X.props.onAfterClose(),L.default.deregister(X)},X.open=function(){X.beforeOpen(),X.state.afterOpen&&X.state.beforeClose?(clearTimeout(X.closeTimer),X.setState({beforeClose:!1})):(X.props.shouldFocusAfterRender&&(g.setupScopedFocus(X.node),g.markForFocusLater()),X.setState({isOpen:!0},function(){X.openAnimationFrame=requestAnimationFrame(function(){X.setState({afterOpen:!0}),X.props.isOpen&&X.props.onAfterOpen&&X.props.onAfterOpen({overlayEl:X.overlay,contentEl:X.content})})}))},X.close=function(){X.props.closeTimeoutMS>0?X.closeWithTimeout():X.closeWithoutTimeout()},X.focusContent=function(){return X.content&&!X.contentHasFocus()&&X.content.focus({preventScroll:!0})},X.closeWithTimeout=function(){var se=Date.now()+X.props.closeTimeoutMS;X.setState({beforeClose:!0,closesAt:se},function(){X.closeTimer=setTimeout(X.closeWithoutTimeout,X.state.closesAt-Date.now())})},X.closeWithoutTimeout=function(){X.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},X.afterClose)},X.handleKeyDown=function(se){se.keyCode===9&&(0,b.default)(X.content,se),X.props.shouldCloseOnEsc&&se.keyCode===27&&(se.stopPropagation(),X.requestClose(se))},X.handleOverlayOnClick=function(se){X.shouldClose===null&&(X.shouldClose=!0),X.shouldClose&&X.props.shouldCloseOnOverlayClick&&(X.ownerHandlesClose()?X.requestClose(se):X.focusContent()),X.shouldClose=null},X.handleContentOnMouseUp=function(){X.shouldClose=!1},X.handleOverlayOnMouseDown=function(se){X.props.shouldCloseOnOverlayClick||se.target!=X.overlay||se.preventDefault()},X.handleContentOnClick=function(){X.shouldClose=!1},X.handleContentOnMouseDown=function(){X.shouldClose=!1},X.requestClose=function(se){return X.ownerHandlesClose()&&X.props.onRequestClose(se)},X.ownerHandlesClose=function(){return X.props.onRequestClose},X.shouldBeClosed=function(){return!X.state.isOpen&&!X.state.beforeClose},X.contentHasFocus=function(){return document.activeElement===X.content||X.content.contains(document.activeElement)},X.buildClassName=function(se,fe){var Oe=(fe===void 0?"undefined":s(fe))==="object"?fe:{base:O[se],afterOpen:O[se]+"--after-open",beforeClose:O[se]+"--before-close"},_e=Oe.base;return X.state.afterOpen&&(_e=_e+" "+Oe.afterOpen),X.state.beforeClose&&(_e=_e+" "+Oe.beforeClose),typeof fe=="string"&&fe?_e+" "+fe:_e},X.attributesFromObject=function(se,fe){return Object.keys(fe).reduce(function(Oe,_e){return Oe[se+"-"+_e]=fe[_e],Oe},{})},X.state={afterOpen:!1,beforeClose:!1},X.shouldClose=null,X.moveFromContentToOverlay=null,X}return function(ne,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);ne.prototype=Object.create(X&&X.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(ne,X):ne.__proto__=X)}(Q,q),l(Q,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(ne,X){this.props.isOpen&&!ne.isOpen?this.open():!this.props.isOpen&&ne.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!X.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var ne=this.props,X=ne.appElement,se=ne.ariaHideApp,fe=ne.htmlOpenClassName,Oe=ne.bodyOpenClassName;Oe&&k.add(document.body,Oe),fe&&k.add(document.getElementsByTagName("html")[0],fe),se&&(U+=1,y.hide(X)),L.default.register(this)}},{key:"render",value:function(){var ne=this.props,X=ne.id,se=ne.className,fe=ne.overlayClassName,Oe=ne.defaultStyles,_e=ne.children,Ie=se?{}:Oe.content,re=fe?{}:Oe.overlay;if(this.shouldBeClosed())return null;var ae={ref:this.setOverlayRef,className:this.buildClassName("overlay",fe),style:o({},re,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},pe=o({id:X,ref:this.setContentRef,style:o({},Ie,this.props.style.content),className:this.buildClassName("content",se),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",o({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Z=this.props.contentElement(pe,_e);return this.props.overlayElement(ae,Z)}}]),Q}(c.Component);K.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},K.propTypes={isOpen:h.default.bool.isRequired,defaultStyles:h.default.shape({content:h.default.object,overlay:h.default.object}),style:h.default.shape({content:h.default.object,overlay:h.default.object}),className:h.default.oneOfType([h.default.string,h.default.object]),overlayClassName:h.default.oneOfType([h.default.string,h.default.object]),bodyOpenClassName:h.default.string,htmlOpenClassName:h.default.string,ariaHideApp:h.default.bool,appElement:h.default.oneOfType([h.default.instanceOf(D.default),h.default.instanceOf(x.SafeHTMLCollection),h.default.instanceOf(x.SafeNodeList),h.default.arrayOf(h.default.instanceOf(D.default))]),onAfterOpen:h.default.func,onAfterClose:h.default.func,onRequestClose:h.default.func,closeTimeoutMS:h.default.number,shouldFocusAfterRender:h.default.bool,shouldCloseOnOverlayClick:h.default.bool,shouldReturnFocusAfterClose:h.default.bool,preventScroll:h.default.bool,role:h.default.string,contentLabel:h.default.string,aria:h.default.object,data:h.default.object,children:h.default.node,shouldCloseOnEsc:h.default.bool,overlayRef:h.default.func,contentRef:h.default.func,id:h.default.string,overlayElement:h.default.func,contentElement:h.default.func,testId:h.default.string},n.default=K,t.exports=n.default},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.resetState=function(){c=[]},n.log=function(){},n.handleBlur=b,n.handleFocus=y,n.markForFocusLater=function(){c.push(document.activeElement)},n.returnFocus=function(){var k=arguments.length>0&&arguments[0]!==void 0&&arguments[0],x=null;try{return void(c.length!==0&&(x=c.pop()).focus({preventScroll:k}))}catch{console.warn(["You tried to return focus to",x,"but it is not in the DOM anymore"].join(" "))}},n.popWithoutFocus=function(){c.length>0&&c.pop()},n.setupScopedFocus=function(k){h=k,window.addEventListener?(window.addEventListener("blur",b,!1),document.addEventListener("focus",y,!0)):(window.attachEvent("onBlur",b),document.attachEvent("onFocus",y))},n.teardownScopedFocus=function(){h=null,window.addEventListener?(window.removeEventListener("blur",b),document.removeEventListener("focus",y)):(window.detachEvent("onBlur",b),document.detachEvent("onFocus",y))};var o,s=r(42),l=(o=s)&&o.__esModule?o:{default:o},c=[],h=null,g=!1;function b(){g=!0}function y(){if(g){if(g=!1,!h)return;setTimeout(function(){h.contains(document.activeElement)||((0,l.default)(h)[0]||h).focus()},0)}}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(c,h){var g=(0,l.default)(c);if(!g.length)return void h.preventDefault();var b=void 0,y=h.shiftKey,k=g[0],x=g[g.length-1],D=function V(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return O.activeElement.shadowRoot?V(O.activeElement.shadowRoot):O.activeElement}();if(c===D){if(!y)return;b=x}if(x!==D||y||(b=k),k===D&&y&&(b=x),b)return h.preventDefault(),void b.focus();var L=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(!(L==null||L[1]=="Chrome"||/\biPod\b|\biPad\b/g.exec(navigator.userAgent)!=null)){var M=g.indexOf(D);if(M>-1&&(M+=y?-1:1),(b=g[M])===void 0)return h.preventDefault(),void(b=y?x:k).focus();h.preventDefault(),b.focus()}};var o,s=r(42),l=(o=s)&&o.__esModule?o:{default:o};t.exports=n.default},function(t,n,r){var o=function(){};t.exports=o},function(t,n,r){var o;(function(){var s=!(typeof window>"u"||!window.document||!window.document.createElement),l={canUseDOM:s,canUseWorkers:typeof Worker<"u",canUseEventListeners:s&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:s&&!!window.screen};(o=function(){return l}.call(n,r,n,t))===void 0||(t.exports=o)})()},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.resetState=function(){var c=document.getElementsByTagName("html")[0];for(var h in o)l(c,o[h]);var g=document.body;for(var b in s)l(g,s[b]);o={},s={}},n.log=function(){};var o={},s={};function l(c,h){c.classList.remove(h)}n.add=function(c,h){return g=c.classList,b=c.nodeName.toLowerCase()=="html"?o:s,void h.split(" ").forEach(function(y){(function(k,x){k[x]||(k[x]=0),k[x]+=1})(b,y),g.add(y)});var g,b},n.remove=function(c,h){return g=c.classList,b=c.nodeName.toLowerCase()=="html"?o:s,void h.split(" ").forEach(function(y){(function(k,x){k[x]&&(k[x]-=1)})(b,y),b[y]===0&&g.remove(y)});var g,b}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.resetState=function(){for(var y=[c,h],k=0;k<y.length;k++){var x=y[k];x&&x.parentNode&&x.parentNode.removeChild(x)}c=h=null,g=[]},n.log=function(){console.log("bodyTrap ----------"),console.log(g.length);for(var y=[c,h],k=0;k<y.length;k++){var x=y[k]||{};console.log(x.nodeName,x.className,x.id)}console.log("edn bodyTrap ----------")};var o,s=r(44),l=(o=s)&&o.__esModule?o:{default:o},c=void 0,h=void 0,g=[];function b(){g.length!==0&&g[g.length-1].focusContent()}l.default.subscribe(function(y,k){c||h||((c=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),c.style.position="absolute",c.style.opacity="0",c.setAttribute("tabindex","0"),c.addEventListener("focus",b),(h=c.cloneNode()).addEventListener("focus",b)),(g=k).length>0?(document.body.firstChild!==c&&document.body.insertBefore(c,document.body.firstChild),document.body.lastChild!==h&&document.body.appendChild(h)):(c.parentElement&&c.parentElement.removeChild(c),h.parentElement&&h.parentElement.removeChild(h))})},function(t,n,r){function o(){var h=this.constructor.getDerivedStateFromProps(this.props,this.state);h!=null&&this.setState(h)}function s(h){this.setState(function(g){var b=this.constructor.getDerivedStateFromProps(h,g);return b??null}.bind(this))}function l(h,g){try{var b=this.props,y=this.state;this.props=h,this.state=g,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(b,y)}finally{this.props=b,this.state=y}}function c(h){var g=h.prototype;if(!g||!g.isReactComponent)throw new Error("Can only polyfill class components");if(typeof h.getDerivedStateFromProps!="function"&&typeof g.getSnapshotBeforeUpdate!="function")return h;var b=null,y=null,k=null;if(typeof g.componentWillMount=="function"?b="componentWillMount":typeof g.UNSAFE_componentWillMount=="function"&&(b="UNSAFE_componentWillMount"),typeof g.componentWillReceiveProps=="function"?y="componentWillReceiveProps":typeof g.UNSAFE_componentWillReceiveProps=="function"&&(y="UNSAFE_componentWillReceiveProps"),typeof g.componentWillUpdate=="function"?k="componentWillUpdate":typeof g.UNSAFE_componentWillUpdate=="function"&&(k="UNSAFE_componentWillUpdate"),b!==null||y!==null||k!==null){var x=h.displayName||h.name,D=typeof h.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+x+" uses "+D+" but also contains the following legacy lifecycles:"+(b!==null?`
  `+b:"")+(y!==null?`
  `+y:"")+(k!==null?`
  `+k:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof h.getDerivedStateFromProps=="function"&&(g.componentWillMount=o,g.componentWillReceiveProps=s),typeof g.getSnapshotBeforeUpdate=="function"){if(typeof g.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");g.componentWillUpdate=l;var L=g.componentDidUpdate;g.componentDidUpdate=function(M,V,O){var U=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:O;L.call(this,M,V,U)}}return h}r.r(n),r.d(n,"polyfill",function(){return c}),o.__suppressDeprecationWarning=!0,s.__suppressDeprecationWarning=!0,l.__suppressDeprecationWarning=!0},function(t,n,r){var o=r(6),s=r(87);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,".ck-inspector-modal{--ck-inspector-set-data-modal-overlay:rgba(0,0,0,0.5);--ck-inspector-set-data-modal-shadow:rgba(0,0,0,0.06);--ck-inspector-set-data-modal-button-background:#eee;--ck-inspector-set-data-modal-button-background-hover:#ddd;--ck-inspector-set-data-modal-save-button-background:#1976d2;--ck-inspector-set-data-modal-save-button-background-hover:#0b60b5}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal{z-index:999999;position:fixed;inset:0;background-color:var(--ck-inspector-set-data-modal-overlay)}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content{position:absolute;border:1px solid var(--ck-inspector-color-border);background:var(--ck-inspector-color-white);overflow:auto;border-radius:2px;outline:none;box-shadow:0 1px 1px var(--ck-inspector-set-data-modal-shadow),0 2px 2px var(--ck-inspector-set-data-modal-shadow),0 4px 4px var(--ck-inspector-set-data-modal-shadow),0 8px 8px var(--ck-inspector-set-data-modal-shadow),0 16px 16px var(--ck-inspector-set-data-modal-shadow);max-height:calc(100vh - 160px);max-width:calc(100vw - 160px);width:100%;height:100%;left:50%;top:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;justify-content:space-between}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content h2{font-size:14px;font-weight:700;margin:0;padding:12px 20px;background:var(--ck-inspector-color-background);border-bottom:1px solid var(--ck-inspector-color-border)}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content textarea{flex-grow:1;margin:20px;border:1px solid var(--ck-inspector-color-border);border-radius:2px;resize:none;padding:10px;font-family:monospace;font-size:14px}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content button{padding:10px 20px;border-radius:2px;font-size:14px;white-space:nowrap;border:1px solid var(--ck-inspector-color-border)}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content button:hover{background:var(--ck-inspector-set-data-modal-button-background-hover)}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content .ck-inspector-quick-actions__set-data-modal__buttons{margin:0 20px 20px;display:flex;justify-content:center}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content .ck-inspector-quick-actions__set-data-modal__buttons button+button{margin-left:20px}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content .ck-inspector-quick-actions__set-data-modal__buttons button:first-child{margin-right:auto}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content .ck-inspector-quick-actions__set-data-modal__buttons button:not(:first-child){flex-basis:20%}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content .ck-inspector-quick-actions__set-data-modal__buttons button:last-child{background:var(--ck-inspector-set-data-modal-save-button-background);border-color:var(--ck-inspector-set-data-modal-save-button-background);color:#fff;font-weight:700}.ck-inspector-modal.ck-inspector-quick-actions__set-data-modal .ck-inspector-quick-actions__set-data-modal__content .ck-inspector-quick-actions__set-data-modal__buttons button:last-child:hover{background:var(--ck-inspector-set-data-modal-save-button-background-hover)}",""])},function(t,n,r){var o=r(6),s=r(89);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,".ck-inspector .ck-inspector-editor-quick-actions{display:flex;align-content:center;justify-content:center;align-items:center;flex-direction:row;flex-wrap:nowrap}.ck-inspector .ck-inspector-editor-quick-actions>.ck-inspector-button{margin-left:.3em}.ck-inspector .ck-inspector-editor-quick-actions>.ck-inspector-button.ck-inspector-button_data-copied{animation-duration:.5s;animation-name:ck-inspector-bounce-in;color:green}@keyframes ck-inspector-bounce-in{0%{opacity:0;transform:scale3d(.5,.5,.5)}20%{transform:scale3d(1.1,1.1,1.1)}40%{transform:scale3d(.8,.8,.8)}60%{opacity:1;transform:scale3d(1.05,1.05,1.05)}to{opacity:1;transform:scaleX(1)}}",""])},function(t,n,r){var o=r(6),s=r(91);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var l={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,l),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(7)(!1)).push([t.i,"html body.ck-inspector-body-expanded{margin-bottom:var(--ck-inspector-height)}html body.ck-inspector-body-collapsed{margin-bottom:var(--ck-inspector-collapsed-height)}.ck-inspector-wrapper *{box-sizing:border-box}",""])},,,function(t,n,r){r.r(n),r.d(n,"default",function(){return tn});var o=r(0),s=r.n(o),l=r(12),c=r.n(l);function h(G){return"Minified Redux error #"+G+"; visit https://redux.js.org/Errors?code="+G+" for the full message or use the non-minified dev environment for full errors. "}var g=typeof Symbol=="function"&&Symbol.observable||"@@observable",b=function(){return Math.random().toString(36).substring(7).split("").join(".")},y={INIT:"@@redux/INIT"+b(),REPLACE:"@@redux/REPLACE"+b(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+b()}};function k(G){if(typeof G!="object"||G===null)return!1;for(var A=G;Object.getPrototypeOf(A)!==null;)A=Object.getPrototypeOf(A);return Object.getPrototypeOf(G)===A}function x(G,A,F){var N;if(typeof A=="function"&&typeof F=="function"||typeof F=="function"&&typeof arguments[3]=="function")throw new Error(h(0));if(typeof A=="function"&&F===void 0&&(F=A,A=void 0),F!==void 0){if(typeof F!="function")throw new Error(h(1));return F(x)(G,A)}if(typeof G!="function")throw new Error(h(2));var J=G,ee=A,me=[],Le=me,Ze=!1;function Ye(){Le===me&&(Le=me.slice())}function pt(){if(Ze)throw new Error(h(3));return ee}function Ot(zt){if(typeof zt!="function")throw new Error(h(4));if(Ze)throw new Error(h(5));var Zt=!0;return Ye(),Le.push(zt),function(){if(Zt){if(Ze)throw new Error(h(6));Zt=!1,Ye();var bn=Le.indexOf(zt);Le.splice(bn,1),me=null}}}function Kt(zt){if(!k(zt))throw new Error(h(7));if(zt.type===void 0)throw new Error(h(8));if(Ze)throw new Error(h(9));try{Ze=!0,ee=J(ee,zt)}finally{Ze=!1}for(var Zt=me=Le,bn=0;bn<Zt.length;bn++)(0,Zt[bn])();return zt}function Pt(zt){if(typeof zt!="function")throw new Error(h(10));J=zt,Kt({type:y.REPLACE})}function Ut(){var zt,Zt=Ot;return(zt={subscribe:function(bn){if(typeof bn!="object"||bn===null)throw new Error(h(11));function nn(){bn.next&&bn.next(pt())}return nn(),{unsubscribe:Zt(nn)}}})[g]=function(){return this},zt}return Kt({type:y.INIT}),(N={dispatch:Kt,subscribe:Ot,getState:pt,replaceReducer:Pt})[g]=Ut,N}var D=s.a.createContext(null),L=function(G){G()};function M(){var G=L,A=null,F=null;return{clear:function(){A=null,F=null},notify:function(){G(function(){for(var N=A;N;)N.callback(),N=N.next})},get:function(){for(var N=[],J=A;J;)N.push(J),J=J.next;return N},subscribe:function(N){var J=!0,ee=F={callback:N,next:null,prev:F};return ee.prev?ee.prev.next=ee:A=ee,function(){J&&A!==null&&(J=!1,ee.next?ee.next.prev=ee.prev:F=ee.prev,ee.prev?ee.prev.next=ee.next:A=ee.next)}}}}var V={notify:function(){},get:function(){return[]}};function O(G,A){var F,N=V;function J(){me.onStateChange&&me.onStateChange()}function ee(){F||(F=A?A.addNestedSub(J):G.subscribe(J),N=M())}var me={addNestedSub:function(Le){return ee(),N.subscribe(Le)},notifyNestedSubs:function(){N.notify()},handleChangeWrapper:J,isSubscribed:function(){return!!F},trySubscribe:ee,tryUnsubscribe:function(){F&&(F(),F=void 0,N.clear(),N=V)},getListeners:function(){return N}};return me}var U=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?o.useLayoutEffect:o.useEffect,K=function(G){var A=G.store,F=G.context,N=G.children,J=Object(o.useMemo)(function(){var Le=O(A);return{store:A,subscription:Le}},[A]),ee=Object(o.useMemo)(function(){return A.getState()},[A]);U(function(){var Le=J.subscription;return Le.onStateChange=Le.notifyNestedSubs,Le.trySubscribe(),ee!==A.getState()&&Le.notifyNestedSubs(),function(){Le.tryUnsubscribe(),Le.onStateChange=null}},[J,ee]);var me=F||D;return s.a.createElement(me.Provider,{value:J},N)};function q(){return(q=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}function Q(G,A){if(G==null)return{};var F,N,J={},ee=Object.keys(G);for(N=0;N<ee.length;N++)F=ee[N],A.indexOf(F)>=0||(J[F]=G[F]);return J}var ne=r(39),X=r.n(ne),se=r(45),fe=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Oe=["reactReduxForwardedRef"],_e=[],Ie=[null,null];function re(G,A){var F=G[1];return[A.payload,F+1]}function ae(G,A,F){U(function(){return G.apply(void 0,A)},F)}function pe(G,A,F,N,J,ee,me){G.current=N,A.current=J,F.current=!1,ee.current&&(ee.current=null,me())}function Z(G,A,F,N,J,ee,me,Le,Ze,Ye){if(G){var pt=!1,Ot=null,Kt=function(){if(!pt){var Pt,Ut,zt=A.getState();try{Pt=N(zt,J.current)}catch(Zt){Ut=Zt,Ot=Zt}Ut||(Ot=null),Pt===ee.current?me.current||Ze():(ee.current=Pt,Le.current=Pt,me.current=!0,Ye({type:"STORE_UPDATED",payload:{error:Ut}}))}};return F.onStateChange=Kt,F.trySubscribe(),Kt(),function(){if(pt=!0,F.tryUnsubscribe(),F.onStateChange=null,Ot)throw Ot}}}var Pe=function(){return[null,0]};function je(G,A){A===void 0&&(A={});var F=A,N=F.getDisplayName,J=N===void 0?function(qt){return"ConnectAdvanced("+qt+")"}:N,ee=F.methodName,me=ee===void 0?"connectAdvanced":ee,Le=F.renderCountProp,Ze=Le===void 0?void 0:Le,Ye=F.shouldHandleStateChanges,pt=Ye===void 0||Ye,Ot=F.storeKey,Kt=Ot===void 0?"store":Ot,Pt=(F.withRef,F.forwardRef),Ut=Pt!==void 0&&Pt,zt=F.context,Zt=zt===void 0?D:zt,bn=Q(F,fe),nn=Zt;return function(qt){var Un=qt.displayName||qt.name||"Component",_i=J(Un),ii=q({},bn,{getDisplayName:J,methodName:me,renderCountProp:Ze,shouldHandleStateChanges:pt,storeKey:Kt,displayName:_i,wrappedComponentName:Un,WrappedComponent:qt}),Li=bn.pure,mi=Li?o.useMemo:function(_n){return _n()};function ki(_n){var pi=Object(o.useMemo)(function(){var _r=_n.reactReduxForwardedRef,Ha=Q(_n,Oe);return[_n.context,_r,Ha]},[_n]),_o=pi[0],cs=pi[1],ri=pi[2],aa=Object(o.useMemo)(function(){return _o&&_o.Consumer&&Object(se.isContextConsumer)(s.a.createElement(_o.Consumer,null))?_o:nn},[_o,nn]),uo=Object(o.useContext)(aa),Ki=!!_n.store&&!!_n.store.getState&&!!_n.store.dispatch;uo&&uo.store;var Jr=Ki?_n.store:uo.store,us=Object(o.useMemo)(function(){return function(_r){return G(_r.dispatch,ii)}(Jr)},[Jr]),yr=Object(o.useMemo)(function(){if(!pt)return Ie;var _r=O(Jr,Ki?null:uo.subscription),Ha=_r.notifyNestedSubs.bind(_r);return[_r,Ha]},[Jr,Ki,uo]),Bi=yr[0],ho=yr[1],ds=Object(o.useMemo)(function(){return Ki?uo:q({},uo,{subscription:Bi})},[Ki,uo,Bi]),hs=Object(o.useReducer)(re,_e,Pe),la=hs[0][0],fs=hs[1];if(la&&la.error)throw la.error;var Fl=Object(o.useRef)(),Mr=Object(o.useRef)(ri),ko=Object(o.useRef)(),Zi=Object(o.useRef)(!1),fr=mi(function(){return ko.current&&ri===Mr.current?ko.current:us(Jr.getState(),ri)},[Jr,la,ri]);ae(pe,[Mr,Fl,Zi,ri,fr,ko,ho]),ae(Z,[pt,Jr,Bi,us,Mr,Fl,Zi,ko,ho,fs],[Jr,Bi,us]);var Xr=Object(o.useMemo)(function(){return s.a.createElement(qt,q({},fr,{ref:cs}))},[cs,qt,fr]);return Object(o.useMemo)(function(){return pt?s.a.createElement(aa.Provider,{value:ds},Xr):Xr},[aa,Xr,ds])}var Rn=Li?s.a.memo(ki):ki;if(Rn.WrappedComponent=qt,Rn.displayName=ki.displayName=_i,Ut){var co=s.a.forwardRef(function(_n,pi){return s.a.createElement(Rn,q({},_n,{reactReduxForwardedRef:pi}))});return co.displayName=_i,co.WrappedComponent=qt,X()(co,qt)}return X()(Rn,qt)}}function wt(G,A){return G===A?G!==0||A!==0||1/G==1/A:G!=G&&A!=A}function oe(G,A){if(wt(G,A))return!0;if(typeof G!="object"||G===null||typeof A!="object"||A===null)return!1;var F=Object.keys(G),N=Object.keys(A);if(F.length!==N.length)return!1;for(var J=0;J<F.length;J++)if(!Object.prototype.hasOwnProperty.call(A,F[J])||!wt(G[F[J]],A[F[J]]))return!1;return!0}function z(G){return function(A,F){var N=G(A,F);function J(){return N}return J.dependsOnOwnProps=!1,J}}function ke(G){return G.dependsOnOwnProps!==null&&G.dependsOnOwnProps!==void 0?!!G.dependsOnOwnProps:G.length!==1}function at(G,A){return function(F,N){N.displayName;var J=function(ee,me){return J.dependsOnOwnProps?J.mapToProps(ee,me):J.mapToProps(ee)};return J.dependsOnOwnProps=!0,J.mapToProps=function(ee,me){J.mapToProps=G,J.dependsOnOwnProps=ke(G);var Le=J(ee,me);return typeof Le=="function"&&(J.mapToProps=Le,J.dependsOnOwnProps=ke(Le),Le=J(ee,me)),Le},J}}var lt=[function(G){return typeof G=="function"?at(G):void 0},function(G){return G?void 0:z(function(A){return{dispatch:A}})},function(G){return G&&typeof G=="object"?z(function(A){return function(F,N){var J={},ee=function(Le){var Ze=F[Le];typeof Ze=="function"&&(J[Le]=function(){return N(Ze.apply(void 0,arguments))})};for(var me in F)ee(me);return J}(G,A)}):void 0}],Ee=[function(G){return typeof G=="function"?at(G):void 0},function(G){return G?void 0:z(function(){return{}})}];function xe(G,A,F){return q({},F,G,A)}var Ue=[function(G){return typeof G=="function"?function(A){return function(F,N){N.displayName;var J,ee=N.pure,me=N.areMergedPropsEqual,Le=!1;return function(Ze,Ye,pt){var Ot=A(Ze,Ye,pt);return Le?ee&&me(Ot,J)||(J=Ot):(Le=!0,J=Ot),J}}}(G):void 0},function(G){return G?void 0:function(){return xe}}],P=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function R(G,A,F,N){return function(J,ee){return F(G(J,ee),A(N,ee),ee)}}function W(G,A,F,N,J){var ee,me,Le,Ze,Ye,pt=J.areStatesEqual,Ot=J.areOwnPropsEqual,Kt=J.areStatePropsEqual,Pt=!1;function Ut(zt,Zt){var bn,nn,qt=!Ot(Zt,me),Un=!pt(zt,ee);return ee=zt,me=Zt,qt&&Un?(Le=G(ee,me),A.dependsOnOwnProps&&(Ze=A(N,me)),Ye=F(Le,Ze,me)):qt?(G.dependsOnOwnProps&&(Le=G(ee,me)),A.dependsOnOwnProps&&(Ze=A(N,me)),Ye=F(Le,Ze,me)):(Un&&(bn=G(ee,me),nn=!Kt(bn,Le),Le=bn,nn&&(Ye=F(Le,Ze,me))),Ye)}return function(zt,Zt){return Pt?Ut(zt,Zt):(Le=G(ee=zt,me=Zt),Ze=A(N,me),Ye=F(Le,Ze,me),Pt=!0,Ye)}}function he(G,A){var F=A.initMapStateToProps,N=A.initMapDispatchToProps,J=A.initMergeProps,ee=Q(A,P),me=F(G,ee),Le=N(G,ee),Ze=J(G,ee);return(ee.pure?W:R)(me,Le,Ze,G,ee)}var ge=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function ce(G,A,F){for(var N=A.length-1;N>=0;N--){var J=A[N](G);if(J)return J}return function(ee,me){throw new Error("Invalid value of type "+typeof G+" for "+F+" argument when connecting component "+me.wrappedComponentName+".")}}function $e(G,A){return G===A}function At(G){var A={},F=A.connectHOC,N=F===void 0?je:F,J=A.mapStateToPropsFactories,ee=J===void 0?Ee:J,me=A.mapDispatchToPropsFactories,Le=me===void 0?lt:me,Ze=A.mergePropsFactories,Ye=Ze===void 0?Ue:Ze,pt=A.selectorFactory,Ot=pt===void 0?he:pt;return function(Kt,Pt,Ut,zt){zt===void 0&&(zt={});var Zt=zt,bn=Zt.pure,nn=bn===void 0||bn,qt=Zt.areStatesEqual,Un=qt===void 0?$e:qt,_i=Zt.areOwnPropsEqual,ii=_i===void 0?oe:_i,Li=Zt.areStatePropsEqual,mi=Li===void 0?oe:Li,ki=Zt.areMergedPropsEqual,Rn=ki===void 0?oe:ki,co=Q(Zt,ge),_n=ce(Kt,ee,"mapStateToProps"),pi=ce(Pt,Le,"mapDispatchToProps"),_o=ce(Ut,Ye,"mergeProps");return N(Ot,q({methodName:"connect",getDisplayName:function(cs){return"Connect("+cs+")"},shouldHandleStateChanges:!!Kt,initMapStateToProps:_n,initMapDispatchToProps:pi,initMergeProps:_o,pure:nn,areStatesEqual:Un,areOwnPropsEqual:ii,areStatePropsEqual:mi,areMergedPropsEqual:Rn},co))}}var Ct=At(),jt;jt=l.unstable_batchedUpdates,L=jt;function ct(G){return{type:"SET_MODEL_ACTIVE_TAB",tabName:G}}function En(){return{type:"TOGGLE_IS_COLLAPSED"}}function Sn(G){return{type:"SET_EDITORS",editors:G}}function Di(G){return{type:"SET_CURRENT_EDITOR_NAME",editorName:G}}function Te(G){return{type:"SET_ACTIVE_INSPECTOR_TAB",tabName:G}}var Ae=r(10),we=r(4);class ${constructor(A){this._config=A}startListening(A){A.model.document.on("change",this._config.onModelChange),A.editing.view.on("render",this._config.onViewRender),A.on("change:isReadOnly",this._config.onReadOnlyChange)}stopListening(A){A.model.document.off("change",this._config.onModelChange),A.editing.view.off("render",this._config.onViewRender),A.off("change:isReadOnly",this._config.onReadOnlyChange)}}function Y(G){return G.editors.get(G.currentEditorName)}class de{static set(A,F){window.localStorage.setItem("ck5-inspector-"+A,F)}static get(A){return window.localStorage.getItem("ck5-inspector-"+A)}}function ue(G,A,F){const N=function(J,ee,me){if(J.ui.activeTab!=="Model")return ee;if(!ee)return ve(J,ee);switch(me.type){case"SET_MODEL_CURRENT_ROOT_NAME":return function(Le,Ze,Ye){const pt=Ye.currentRootName;return{...Ze,...et(Le,Ze,{currentRootName:pt}),currentNode:null,currentNodeDefinition:null,currentRootName:pt}}(J,ee,me);case"SET_MODEL_CURRENT_NODE":return{...ee,currentNode:me.currentNode,currentNodeDefinition:Object(Ae.b)(Y(J),me.currentNode)};case"SET_ACTIVE_INSPECTOR_TAB":case"UPDATE_MODEL_STATE":return{...ee,...et(J,ee)};case"SET_EDITORS":case"SET_CURRENT_EDITOR_NAME":return ve(J,ee);default:return ee}}(G,A,F);return N&&(N.ui=function(J,ee){if(!J)return{activeTab:de.get("active-model-tab-name")||"Inspect",showMarkers:de.get("model-show-markers")==="true",showCompactText:de.get("model-compact-text")==="true"};switch(ee.type){case"SET_MODEL_ACTIVE_TAB":return function(me,Le){return de.set("active-model-tab-name",Le.tabName),{...me,activeTab:Le.tabName}}(J,ee);case"TOGGLE_MODEL_SHOW_MARKERS":return function(me){const Le=!me.showMarkers;return de.set("model-show-markers",Le),{...me,showMarkers:Le}}(J);case"TOGGLE_MODEL_SHOW_COMPACT_TEXT":return function(me){const Le=!me.showCompactText;return de.set("model-compact-text",Le),{...me,showCompactText:Le}}(J);default:return J}}(N.ui,F)),N}function ve(G,A={}){const F=Y(G);if(!F)return{ui:A.ui};const N=Object(Ae.d)(F)[0].rootName;return{...A,...et(G,A,{currentRootName:N}),currentRootName:N,currentNode:null,currentNodeDefinition:null}}function et(G,A,F){const N=Y(G),J={...A,...F},ee=J.currentRootName,me=Object(Ae.c)(N,ee),Le=Object(Ae.a)(N,ee),Ze=Object(Ae.e)({currentEditor:N,currentRootName:J.currentRootName,ranges:me,markers:Le});let Ye=J.currentNode,pt=J.currentNodeDefinition;return Ye?Ye.root.rootName!==ee||!Object(we.d)(Ye)&&!Ye.parent?(Ye=null,pt=null):pt=Object(Ae.b)(N,Ye):pt=null,{treeDefinition:Ze,currentNode:Ye,currentNodeDefinition:pt,ranges:me,markers:Le}}function ht(G){return{type:"SET_VIEW_ACTIVE_TAB",tabName:G}}function ft(){return{type:"UPDATE_VIEW_STATE"}}var ut=r(9),Et=r(2);function rt(G,A,F){const N=function(J,ee,me){if(J.ui.activeTab!=="View")return ee;if(!ee)return xt(J,ee);switch(me.type){case"SET_VIEW_CURRENT_ROOT_NAME":return function(Le,Ze,Ye){const pt=Ye.currentRootName;return{...Ze,...Ne(Le,Ze,{currentRootName:pt}),currentNode:null,currentNodeDefinition:null,currentRootName:pt}}(J,ee,me);case"SET_VIEW_CURRENT_NODE":return{...ee,currentNode:me.currentNode,currentNodeDefinition:Object(ut.b)(me.currentNode)};case"SET_ACTIVE_INSPECTOR_TAB":case"UPDATE_VIEW_STATE":return{...ee,...Ne(J,ee)};case"SET_EDITORS":case"SET_CURRENT_EDITOR_NAME":return xt(J,ee);default:return ee}}(G,A,F);return N&&(N.ui=function(J,ee,me){if(!ee)return{activeTab:de.get("active-view-tab-name")||"Inspect",showElementTypes:de.get("view-element-types")==="true"};switch(me.type){case"SET_VIEW_ACTIVE_TAB":return function(Le,Ze){return de.set("active-view-tab-name",Ze.tabName),{...Le,activeTab:Ze.tabName}}(ee,me);case"TOGGLE_VIEW_SHOW_ELEMENT_TYPES":return function(Le,Ze){const Ye=!Ze.showElementTypes;return de.set("view-element-types",Ye),{...Ze,showElementTypes:Ye}}(0,ee);default:return ee}}(0,N.ui,F)),N}function xt(G,A={}){const F=Y(G),N=Object(ut.d)(F),J=N[0]?N[0].rootName:null;return{...A,...Ne(G,A,{currentRootName:J}),currentRootName:J,currentNode:null,currentNodeDefinition:null}}function Ne(G,A,F){const N={...A,...F},J=N.currentRootName,ee=Object(ut.c)(Y(G),J),me=Object(ut.e)({currentEditor:Y(G),currentRootName:J,ranges:ee});let Le=N.currentNode,Ze=N.currentNodeDefinition;return Le?Le.root.rootName!==J||!Object(Et.g)(Le)&&!Le.parent?(Le=null,Ze=null):Ze=Object(ut.b)(Le):Ze=null,{treeDefinition:me,currentNode:Le,currentNodeDefinition:Ze,ranges:ee}}function dn(){return{type:"UPDATE_COMMANDS_STATE"}}var Bt=r(1);function ln({editors:G,currentEditorName:A},F){if(!F)return null;const N=G.get(A).commands.get(F);return{currentCommandName:F,type:"Command",url:"https://ckeditor.com/docs/ckeditor5/latest/api/module_core_command-Command.html",properties:Object(Bt.b)({isEnabled:{value:N.isEnabled},value:{value:N.value}}),command:N}}function Nt({editors:G,currentEditorName:A}){if(!G.get(A))return[];const F=[];for(const[N,J]of G.get(A).commands){const ee=[];J.value!==void 0&&ee.push(["value",Object(Bt.a)(J.value,!1)]),F.push({name:N,type:"element",children:[],node:N,attributes:ee,presentation:{isEmpty:!0,cssClass:["ck-inspector-tree-node_tagless",J.isEnabled?"":"ck-inspector-tree-node_disabled"].join(" ")}})}return F.sort((N,J)=>N.name>J.name?1:-1)}function zn(G,A={}){return{...A,currentCommandName:null,currentCommandDefinition:null,treeDefinition:Nt(G)}}function Wn(G){return{type:"SET_SCHEMA_CURRENT_DEFINITION_NAME",currentSchemaDefinitionName:G}}const Ri=["isBlock","isInline","isObject","isContent","isLimit","isSelectable"],mn="https://ckeditor.com/docs/ckeditor5/latest/api/";function ur({editors:G,currentEditorName:A},F){if(!F)return null;const N=G.get(A).model.schema,J=N.getDefinitions()[F],ee={},me={},Le={};let Ze={};for(const Ye of Ri)J[Ye]&&(ee[Ye]={value:J[Ye]});for(const Ye of J.allowChildren.sort())me[Ye]={value:!0,title:"Click to see the definition of "+Ye};for(const Ye of J.allowIn.sort())Le[Ye]={value:!0,title:"Click to see the definition of "+Ye};for(const Ye of J.allowAttributes.sort())Ze[Ye]={value:!0};Ze=Object(Bt.b)(Ze);for(const Ye in Ze){const pt=N.getAttributeProperties(Ye),Ot={};for(const Kt in pt)Ot[Kt]={value:pt[Kt]};Ze[Ye].subProperties=Object(Bt.b)(Ot)}return{currentSchemaDefinitionName:F,type:"SchemaCompiledItemDefinition",urls:{general:mn+"module_engine_model_schema-SchemaCompiledItemDefinition.html",allowAttributes:mn+"module_engine_model_schema-SchemaItemDefinition.html#member-allowAttributes",allowChildren:mn+"module_engine_model_schema-SchemaItemDefinition.html#member-allowChildren",allowIn:mn+"module_engine_model_schema-SchemaItemDefinition.html#member-allowIn"},properties:Object(Bt.b)(ee),allowChildren:Object(Bt.b)(me),allowIn:Object(Bt.b)(Le),allowAttributes:Ze,definition:J}}function Oi({editors:G,currentEditorName:A}){if(!G.get(A))return[];const F=[],N=G.get(A).model.schema.getDefinitions();for(const J in N)F.push({name:J,type:"element",children:[],node:J,attributes:[],presentation:{isEmpty:!0,cssClass:"ck-inspector-tree-node_tagless"}});return F.sort((J,ee)=>J.name>ee.name?1:-1)}function ji(G,A={}){return{...A,currentSchemaDefinitionName:null,currentSchemaDefinition:null,treeDefinition:Oi(G)}}var gr=r(8);function $r(G,A){const F=function(N,J){switch(J.type){case"SET_EDITORS":return function(ee,me){const Le={editors:new Map(me.editors)};return me.editors.size?me.editors.has(ee.currentEditorName)||(Le.currentEditorName=Object(gr.b)(me.editors)):Le.currentEditorName=null,{...ee,...Le}}(N,J);case"SET_CURRENT_EDITOR_NAME":return function(ee,me){return{...ee,currentEditorName:me.editorName}}(N,J);default:return N}}(G,A);return F.currentEditorGlobals=function(N,J,ee){switch(ee.type){case"SET_EDITORS":case"SET_CURRENT_EDITOR_NAME":return{...Ia(N,{})};case"UPDATE_CURRENT_EDITOR_IS_READ_ONLY":return Ia(N,J);default:return J}}(F,F.currentEditorGlobals,A),F.ui=function(N,J){if(!N.activeTab){let ee;return ee=N.isCollapsed!==void 0?N.isCollapsed:de.get("is-collapsed")==="true",{...N,isCollapsed:ee,activeTab:de.get("active-tab-name")||"Model",height:de.get("height")||"400px",sidePaneWidth:de.get("side-pane-width")||"500px"}}switch(J.type){case"TOGGLE_IS_COLLAPSED":return function(ee){const me=!ee.isCollapsed;return de.set("is-collapsed",me),{...ee,isCollapsed:me}}(N);case"SET_HEIGHT":return function(ee,me){return de.set("height",me.newHeight),{...ee,height:me.newHeight}}(N,J);case"SET_SIDE_PANE_WIDTH":return function(ee,me){return de.set("side-pane-width",me.newWidth),{...ee,sidePaneWidth:me.newWidth}}(N,J);case"SET_ACTIVE_INSPECTOR_TAB":return function(ee,me){return de.set("active-tab-name",me.tabName),{...ee,activeTab:me.tabName}}(N,J);default:return N}}(F.ui,A),F.model=ue(F,F.model,A),F.view=rt(F,F.view,A),F.commands=function(N,J,ee){if(N.ui.activeTab!=="Commands")return J;if(!J)return zn(N,J);switch(ee.type){case"SET_COMMANDS_CURRENT_COMMAND_NAME":return{...J,currentCommandDefinition:ln(N,ee.currentCommandName),currentCommandName:ee.currentCommandName};case"SET_ACTIVE_INSPECTOR_TAB":case"UPDATE_COMMANDS_STATE":return{...J,currentCommandDefinition:ln(N,J.currentCommandName),treeDefinition:Nt(N)};case"SET_EDITORS":case"SET_CURRENT_EDITOR_NAME":return zn(N,J);default:return J}}(F,F.commands,A),F.schema=function(N,J,ee){if(N.ui.activeTab!=="Schema")return J;if(!J)return ji(N,J);switch(ee.type){case"SET_SCHEMA_CURRENT_DEFINITION_NAME":return{...J,currentSchemaDefinition:ur(N,ee.currentSchemaDefinitionName),currentSchemaDefinitionName:ee.currentSchemaDefinitionName};case"SET_ACTIVE_INSPECTOR_TAB":return{...J,currentSchemaDefinition:ur(N,J.currentSchemaDefinitionName),treeDefinition:Oi(N)};case"SET_EDITORS":case"SET_CURRENT_EDITOR_NAME":return ji(N,J);default:return J}}(F,F.schema,A),{...G,...F}}function Ia(G,A){const F=Y(G);return{...A,isReadOnly:!!F&&F.isReadOnly}}var Se=r(46),He=r.n(Se),nt=function(){var G=function(A,F){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,J){N.__proto__=J}||function(N,J){for(var ee in J)J.hasOwnProperty(ee)&&(N[ee]=J[ee])})(A,F)};return function(A,F){function N(){this.constructor=A}G(A,F),A.prototype=F===null?Object.create(F):(N.prototype=F.prototype,new N)}}(),Tt=function(){return(Tt=Object.assign||function(G){for(var A,F=1,N=arguments.length;F<N;F++)for(var J in A=arguments[F])Object.prototype.hasOwnProperty.call(A,J)&&(G[J]=A[J]);return G}).apply(this,arguments)},yn={top:{width:"100%",height:"10px",top:"-5px",left:"0px",cursor:"row-resize"},right:{width:"10px",height:"100%",top:"0px",right:"-5px",cursor:"col-resize"},bottom:{width:"100%",height:"10px",bottom:"-5px",left:"0px",cursor:"row-resize"},left:{width:"10px",height:"100%",top:"0px",left:"-5px",cursor:"col-resize"},topRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",top:"-10px",cursor:"ne-resize"},bottomRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",bottom:"-10px",cursor:"se-resize"},bottomLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",bottom:"-10px",cursor:"sw-resize"},topLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",top:"-10px",cursor:"nw-resize"}},rn=function(G){function A(){var F=G!==null&&G.apply(this,arguments)||this;return F.onMouseDown=function(N){F.props.onResizeStart(N,F.props.direction)},F.onTouchStart=function(N){F.props.onResizeStart(N,F.props.direction)},F}return nt(A,G),A.prototype.render=function(){return o.createElement("div",{className:this.props.className||"",style:Tt(Tt({position:"absolute",userSelect:"none"},yn[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},A}(o.PureComponent),Tn=r(14),pn=r.n(Tn),Fi=function(){var G=function(A,F){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,J){N.__proto__=J}||function(N,J){for(var ee in J)J.hasOwnProperty(ee)&&(N[ee]=J[ee])})(A,F)};return function(A,F){function N(){this.constructor=A}G(A,F),A.prototype=F===null?Object.create(F):(N.prototype=F.prototype,new N)}}(),gn=function(){return(gn=Object.assign||function(G){for(var A,F=1,N=arguments.length;F<N;F++)for(var J in A=arguments[F])Object.prototype.hasOwnProperty.call(A,J)&&(G[J]=A[J]);return G}).apply(this,arguments)},In={width:"auto",height:"auto"},Mi=pn()(function(G,A,F){return Math.max(Math.min(G,F),A)}),Fr=pn()(function(G,A){return Math.round(G/A)*A}),Bn=pn()(function(G,A){return new RegExp(G,"i").test(A)}),$i=function(G){return!!(G.touches&&G.touches.length)},dr=pn()(function(G,A,F){F===void 0&&(F=0);var N=A.reduce(function(ee,me,Le){return Math.abs(me-G)<Math.abs(A[ee]-G)?Le:ee},0),J=Math.abs(A[N]-G);return F===0||J<F?A[N]:G}),Dn=pn()(function(G,A){return G.substr(G.length-A.length,A.length)===A}),qi=pn()(function(G){return(G=G.toString())==="auto"||Dn(G,"px")||Dn(G,"%")||Dn(G,"vh")||Dn(G,"vw")||Dn(G,"vmax")||Dn(G,"vmin")?G:G+"px"}),br=function(G,A,F,N){if(G&&typeof G=="string"){if(Dn(G,"px"))return Number(G.replace("px",""));if(Dn(G,"%"))return A*(Number(G.replace("%",""))/100);if(Dn(G,"vw"))return F*(Number(G.replace("vw",""))/100);if(Dn(G,"vh"))return N*(Number(G.replace("vh",""))/100)}return G},oo=pn()(function(G,A,F,N,J,ee,me){return N=br(N,G.width,A,F),J=br(J,G.height,A,F),ee=br(ee,G.width,A,F),me=br(me,G.height,A,F),{maxWidth:N===void 0?void 0:Number(N),maxHeight:J===void 0?void 0:Number(J),minWidth:ee===void 0?void 0:Number(ee),minHeight:me===void 0?void 0:Number(me)}}),jn=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],St=function(G){function A(F){var N=G.call(this,F)||this;return N.ratio=1,N.resizable=null,N.parentLeft=0,N.parentTop=0,N.resizableLeft=0,N.resizableRight=0,N.resizableTop=0,N.resizableBottom=0,N.targetLeft=0,N.targetTop=0,N.appendBase=function(){if(!N.resizable||!N.window)return null;var J=N.parentNode;if(!J)return null;var ee=N.window.document.createElement("div");return ee.style.width="100%",ee.style.height="100%",ee.style.position="absolute",ee.style.transform="scale(0, 0)",ee.style.left="0",ee.style.flex="0",ee.classList?ee.classList.add("__resizable_base__"):ee.className+="__resizable_base__",J.appendChild(ee),ee},N.removeBase=function(J){var ee=N.parentNode;ee&&ee.removeChild(J)},N.ref=function(J){J&&(N.resizable=J)},N.state={isResizing:!1,width:(N.propsSize&&N.propsSize.width)===void 0?"auto":N.propsSize&&N.propsSize.width,height:(N.propsSize&&N.propsSize.height)===void 0?"auto":N.propsSize&&N.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},N.onResizeStart=N.onResizeStart.bind(N),N.onMouseMove=N.onMouseMove.bind(N),N.onMouseUp=N.onMouseUp.bind(N),N}return Fi(A,G),Object.defineProperty(A.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||In},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"size",{get:function(){var F=0,N=0;if(this.resizable&&this.window){var J=this.resizable.offsetWidth,ee=this.resizable.offsetHeight,me=this.resizable.style.position;me!=="relative"&&(this.resizable.style.position="relative"),F=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:J,N=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:ee,this.resizable.style.position=me}return{width:F,height:N}},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"sizeStyle",{get:function(){var F=this,N=this.props.size,J=function(ee){if(F.state[ee]===void 0||F.state[ee]==="auto")return"auto";if(F.propsSize&&F.propsSize[ee]&&Dn(F.propsSize[ee].toString(),"%")){if(Dn(F.state[ee].toString(),"%"))return F.state[ee].toString();var me=F.getParentSize();return Number(F.state[ee].toString().replace("px",""))/me[ee]*100+"%"}return qi(F.state[ee])};return{width:N&&N.width!==void 0&&!this.state.isResizing?qi(N.width):J("width"),height:N&&N.height!==void 0&&!this.state.isResizing?qi(N.height):J("height")}},enumerable:!1,configurable:!0}),A.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var F=this.appendBase();if(!F)return{width:0,height:0};var N=!1,J=this.parentNode.style.flexWrap;J!=="wrap"&&(N=!0,this.parentNode.style.flexWrap="wrap"),F.style.position="relative",F.style.minWidth="100%";var ee={width:F.offsetWidth,height:F.offsetHeight};return N&&(this.parentNode.style.flexWrap=J),this.removeBase(F),ee},A.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},A.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},A.prototype.componentDidMount=function(){if(this.resizable&&this.window){var F=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:F.flexBasis!=="auto"?F.flexBasis:void 0})}},A.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},A.prototype.createSizeForCssProperty=function(F,N){var J=this.propsSize&&this.propsSize[N];return this.state[N]!=="auto"||this.state.original[N]!==F||J!==void 0&&J!=="auto"?F:"auto"},A.prototype.calculateNewMaxFromBoundary=function(F,N){var J,ee,me=this.props.boundsByDirection,Le=this.state.direction,Ze=me&&Bn("left",Le),Ye=me&&Bn("top",Le);if(this.props.bounds==="parent"){var pt=this.parentNode;pt&&(J=Ze?this.resizableRight-this.parentLeft:pt.offsetWidth+(this.parentLeft-this.resizableLeft),ee=Ye?this.resizableBottom-this.parentTop:pt.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(J=Ze?this.resizableRight:this.window.innerWidth-this.resizableLeft,ee=Ye?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(J=Ze?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),ee=Ye?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return J&&Number.isFinite(J)&&(F=F&&F<J?F:J),ee&&Number.isFinite(ee)&&(N=N&&N<ee?N:ee),{maxWidth:F,maxHeight:N}},A.prototype.calculateNewSizeFromDirection=function(F,N){var J=this.props.scale||1,ee=this.props.resizeRatio||1,me=this.state,Le=me.direction,Ze=me.original,Ye=this.props,pt=Ye.lockAspectRatio,Ot=Ye.lockAspectRatioExtraHeight,Kt=Ye.lockAspectRatioExtraWidth,Pt=Ze.width,Ut=Ze.height,zt=Ot||0,Zt=Kt||0;return Bn("right",Le)&&(Pt=Ze.width+(F-Ze.x)*ee/J,pt&&(Ut=(Pt-Zt)/this.ratio+zt)),Bn("left",Le)&&(Pt=Ze.width-(F-Ze.x)*ee/J,pt&&(Ut=(Pt-Zt)/this.ratio+zt)),Bn("bottom",Le)&&(Ut=Ze.height+(N-Ze.y)*ee/J,pt&&(Pt=(Ut-zt)*this.ratio+Zt)),Bn("top",Le)&&(Ut=Ze.height-(N-Ze.y)*ee/J,pt&&(Pt=(Ut-zt)*this.ratio+Zt)),{newWidth:Pt,newHeight:Ut}},A.prototype.calculateNewSizeFromAspectRatio=function(F,N,J,ee){var me=this.props,Le=me.lockAspectRatio,Ze=me.lockAspectRatioExtraHeight,Ye=me.lockAspectRatioExtraWidth,pt=ee.width===void 0?10:ee.width,Ot=J.width===void 0||J.width<0?F:J.width,Kt=ee.height===void 0?10:ee.height,Pt=J.height===void 0||J.height<0?N:J.height,Ut=Ze||0,zt=Ye||0;if(Le){var Zt=(Kt-Ut)*this.ratio+zt,bn=(Pt-Ut)*this.ratio+zt,nn=(pt-zt)/this.ratio+Ut,qt=(Ot-zt)/this.ratio+Ut,Un=Math.max(pt,Zt),_i=Math.min(Ot,bn),ii=Math.max(Kt,nn),Li=Math.min(Pt,qt);F=Mi(F,Un,_i),N=Mi(N,ii,Li)}else F=Mi(F,pt,Ot),N=Mi(N,Kt,Pt);return{newWidth:F,newHeight:N}},A.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var F=this.parentNode;if(F){var N=F.getBoundingClientRect();this.parentLeft=N.left,this.parentTop=N.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var J=this.props.bounds.getBoundingClientRect();this.targetLeft=J.left,this.targetTop=J.top}if(this.resizable){var ee=this.resizable.getBoundingClientRect(),me=ee.left,Le=ee.top,Ze=ee.right,Ye=ee.bottom;this.resizableLeft=me,this.resizableRight=Ze,this.resizableTop=Le,this.resizableBottom=Ye}},A.prototype.onResizeStart=function(F,N){if(this.resizable&&this.window){var J,ee=0,me=0;if(F.nativeEvent&&function(Ot){return!!((Ot.clientX||Ot.clientX===0)&&(Ot.clientY||Ot.clientY===0))}(F.nativeEvent)){if(ee=F.nativeEvent.clientX,me=F.nativeEvent.clientY,F.nativeEvent.which===3)return}else F.nativeEvent&&$i(F.nativeEvent)&&(ee=F.nativeEvent.touches[0].clientX,me=F.nativeEvent.touches[0].clientY);if(this.props.onResizeStart&&this.resizable&&this.props.onResizeStart(F,N,this.resizable)===!1)return;this.props.size&&(this.props.size.height!==void 0&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),this.props.size.width!==void 0&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var Le=this.window.getComputedStyle(this.resizable);if(Le.flexBasis!=="auto"){var Ze=this.parentNode;if(Ze){var Ye=this.window.getComputedStyle(Ze).flexDirection;this.flexDir=Ye.startsWith("row")?"row":"column",J=Le.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var pt={original:{x:ee,y:me,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:gn(gn({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(F.target).cursor||"auto"}),direction:N,flexBasis:J};this.setState(pt)}},A.prototype.onMouseMove=function(F){if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&$i(F))try{F.preventDefault(),F.stopPropagation()}catch{}var N=this.props,J=N.maxWidth,ee=N.maxHeight,me=N.minWidth,Le=N.minHeight,Ze=$i(F)?F.touches[0].clientX:F.clientX,Ye=$i(F)?F.touches[0].clientY:F.clientY,pt=this.state,Ot=pt.direction,Kt=pt.original,Pt=pt.width,Ut=pt.height,zt=this.getParentSize(),Zt=oo(zt,this.window.innerWidth,this.window.innerHeight,J,ee,me,Le);J=Zt.maxWidth,ee=Zt.maxHeight,me=Zt.minWidth,Le=Zt.minHeight;var bn=this.calculateNewSizeFromDirection(Ze,Ye),nn=bn.newHeight,qt=bn.newWidth,Un=this.calculateNewMaxFromBoundary(J,ee),_i=this.calculateNewSizeFromAspectRatio(qt,nn,{width:Un.maxWidth,height:Un.maxHeight},{width:me,height:Le});if(qt=_i.newWidth,nn=_i.newHeight,this.props.grid){var ii=Fr(qt,this.props.grid[0]),Li=Fr(nn,this.props.grid[1]),mi=this.props.snapGap||0;qt=mi===0||Math.abs(ii-qt)<=mi?ii:qt,nn=mi===0||Math.abs(Li-nn)<=mi?Li:nn}this.props.snap&&this.props.snap.x&&(qt=dr(qt,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(nn=dr(nn,this.props.snap.y,this.props.snapGap));var ki={width:qt-Kt.width,height:nn-Kt.height};Pt&&typeof Pt=="string"&&(Dn(Pt,"%")?qt=qt/zt.width*100+"%":Dn(Pt,"vw")?qt=qt/this.window.innerWidth*100+"vw":Dn(Pt,"vh")&&(qt=qt/this.window.innerHeight*100+"vh")),Ut&&typeof Ut=="string"&&(Dn(Ut,"%")?nn=nn/zt.height*100+"%":Dn(Ut,"vw")?nn=nn/this.window.innerWidth*100+"vw":Dn(Ut,"vh")&&(nn=nn/this.window.innerHeight*100+"vh"));var Rn={width:this.createSizeForCssProperty(qt,"width"),height:this.createSizeForCssProperty(nn,"height")};this.flexDir==="row"?Rn.flexBasis=Rn.width:this.flexDir==="column"&&(Rn.flexBasis=Rn.height),this.setState(Rn),this.props.onResize&&this.props.onResize(F,Ot,this.resizable,ki)}},A.prototype.onMouseUp=function(F){var N=this.state,J=N.isResizing,ee=N.direction,me=N.original;if(J&&this.resizable){var Le={width:this.size.width-me.width,height:this.size.height-me.height};this.props.onResizeStop&&this.props.onResizeStop(F,ee,this.resizable,Le),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:gn(gn({},this.state.backgroundStyle),{cursor:"auto"})})}},A.prototype.updateSize=function(F){this.setState({width:F.width,height:F.height})},A.prototype.renderResizer=function(){var F=this,N=this.props,J=N.enable,ee=N.handleStyles,me=N.handleClasses,Le=N.handleWrapperStyle,Ze=N.handleWrapperClass,Ye=N.handleComponent;if(!J)return null;var pt=Object.keys(J).map(function(Ot){return J[Ot]!==!1?o.createElement(rn,{key:Ot,direction:Ot,onResizeStart:F.onResizeStart,replaceStyles:ee&&ee[Ot],className:me&&me[Ot]},Ye&&Ye[Ot]?Ye[Ot]:null):null});return o.createElement("div",{className:Ze,style:Le},pt)},A.prototype.render=function(){var F=this,N=Object.keys(this.props).reduce(function(me,Le){return jn.indexOf(Le)!==-1||(me[Le]=F.props[Le]),me},{}),J=gn(gn(gn({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(J.flexBasis=this.state.flexBasis);var ee=this.props.as||"div";return o.createElement(ee,gn({ref:this.ref,style:J,className:this.props.className},N),this.state.isResizing&&o.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},A.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},A}(o.PureComponent),cn=function(G,A){return(cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,N){F.__proto__=N}||function(F,N){for(var J in N)N.hasOwnProperty(J)&&(F[J]=N[J])})(G,A)},$t=function(){return($t=Object.assign||function(G){for(var A,F=1,N=arguments.length;F<N;F++)for(var J in A=arguments[F])Object.prototype.hasOwnProperty.call(A,J)&&(G[J]=A[J]);return G}).apply(this,arguments)},Gi=He.a,Xt={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},qr=function(G){function A(F){var N=G.call(this,F)||this;return N.resizing=!1,N.resizingPosition={x:0,y:0},N.offsetFromParent={left:0,top:0},N.resizableElement={current:null},N.refDraggable=function(J){J&&(N.draggable=J)},N.refResizable=function(J){J&&(N.resizable=J,N.resizableElement.current=J.resizable)},N.state={original:{x:0,y:0},bounds:{top:0,right:0,bottom:0,left:0},maxWidth:F.maxWidth,maxHeight:F.maxHeight},N.onResizeStart=N.onResizeStart.bind(N),N.onResize=N.onResize.bind(N),N.onResizeStop=N.onResizeStop.bind(N),N.onDragStart=N.onDragStart.bind(N),N.onDrag=N.onDrag.bind(N),N.onDragStop=N.onDragStop.bind(N),N.getMaxSizesFromProps=N.getMaxSizesFromProps.bind(N),N}return function(F,N){function J(){this.constructor=F}cn(F,N),F.prototype=N===null?Object.create(N):(J.prototype=N.prototype,new J)}(A,G),A.prototype.componentDidMount=function(){this.updateOffsetFromParent();var F=this.offsetFromParent,N=F.left,J=F.top,ee=this.getDraggablePosition(),me=ee.x,Le=ee.y;this.draggable.setState({x:me-N,y:Le-J}),this.forceUpdate()},A.prototype.getDraggablePosition=function(){var F=this.draggable.state;return{x:F.x,y:F.y}},A.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},A.prototype.getParentSize=function(){return this.resizable.getParentSize()},A.prototype.getMaxSizesFromProps=function(){return{maxWidth:this.props.maxWidth===void 0?Number.MAX_SAFE_INTEGER:this.props.maxWidth,maxHeight:this.props.maxHeight===void 0?Number.MAX_SAFE_INTEGER:this.props.maxHeight}},A.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},A.prototype.getOffsetHeight=function(F){var N=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/N;case"body":return document.body.offsetHeight/N;default:return F.offsetHeight}},A.prototype.getOffsetWidth=function(F){var N=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/N;case"body":return document.body.offsetWidth/N;default:return F.offsetWidth}},A.prototype.onDragStart=function(F,N){if(this.props.onDragStart&&this.props.onDragStart(F,N),this.props.bounds){var J,ee=this.getParent(),me=this.props.scale;if(this.props.bounds==="parent")J=ee;else{if(this.props.bounds==="body"){var Le=ee.getBoundingClientRect(),Ze=Le.left,Ye=Le.top,pt=document.body.getBoundingClientRect(),Ot=-(Ze-ee.offsetLeft*me-pt.left)/me,Kt=-(Ye-ee.offsetTop*me-pt.top)/me,Pt=(document.body.offsetWidth-this.resizable.size.width*me)/me+Ot,Ut=(document.body.offsetHeight-this.resizable.size.height*me)/me+Kt;return this.setState({bounds:{top:Kt,right:Pt,bottom:Ut,left:Ot}})}if(this.props.bounds==="window"){if(!this.resizable)return;var zt=ee.getBoundingClientRect(),Zt=zt.left,bn=zt.top,nn=-(Zt-ee.offsetLeft*me)/me,qt=-(bn-ee.offsetTop*me)/me;return Pt=(window.innerWidth-this.resizable.size.width*me)/me+nn,Ut=(window.innerHeight-this.resizable.size.height*me)/me+qt,this.setState({bounds:{top:qt,right:Pt,bottom:Ut,left:nn}})}J=document.querySelector(this.props.bounds)}if(J instanceof HTMLElement&&ee instanceof HTMLElement){var Un=J.getBoundingClientRect(),_i=Un.left,ii=Un.top,Li=ee.getBoundingClientRect(),mi=(_i-Li.left)/me,ki=ii-Li.top;if(this.resizable){this.updateOffsetFromParent();var Rn=this.offsetFromParent;this.setState({bounds:{top:ki-Rn.top,right:mi+(J.offsetWidth-this.resizable.size.width)-Rn.left/me,bottom:ki+(J.offsetHeight-this.resizable.size.height)-Rn.top,left:mi-Rn.left/me}})}}}},A.prototype.onDrag=function(F,N){if(this.props.onDrag){var J=this.offsetFromParent;return this.props.onDrag(F,$t($t({},N),{x:N.x-J.left,y:N.y-J.top}))}},A.prototype.onDragStop=function(F,N){if(this.props.onDragStop){var J=this.offsetFromParent,ee=J.left,me=J.top;return this.props.onDragStop(F,$t($t({},N),{x:N.x+ee,y:N.y+me}))}},A.prototype.onResizeStart=function(F,N,J){F.stopPropagation(),this.resizing=!0;var ee=this.props.scale,me=this.offsetFromParent,Le=this.getDraggablePosition();if(this.resizingPosition={x:Le.x+me.left,y:Le.y+me.top},this.setState({original:Le}),this.props.bounds){var Ze=this.getParent(),Ye=void 0;Ye=this.props.bounds==="parent"?Ze:this.props.bounds==="body"?document.body:this.props.bounds==="window"?window:document.querySelector(this.props.bounds);var pt=this.getSelfElement();if(pt instanceof Element&&(Ye instanceof HTMLElement||Ye===window)&&Ze instanceof HTMLElement){var Ot=this.getMaxSizesFromProps(),Kt=Ot.maxWidth,Pt=Ot.maxHeight,Ut=this.getParentSize();if(Kt&&typeof Kt=="string")if(Kt.endsWith("%")){var zt=Number(Kt.replace("%",""))/100;Kt=Ut.width*zt}else Kt.endsWith("px")&&(Kt=Number(Kt.replace("px","")));Pt&&typeof Pt=="string"&&(Pt.endsWith("%")?(zt=Number(Pt.replace("%",""))/100,Pt=Ut.width*zt):Pt.endsWith("px")&&(Pt=Number(Pt.replace("px",""))));var Zt=pt.getBoundingClientRect(),bn=Zt.left,nn=Zt.top,qt=this.props.bounds==="window"?{left:0,top:0}:Ye.getBoundingClientRect(),Un=qt.left,_i=qt.top,ii=this.getOffsetWidth(Ye),Li=this.getOffsetHeight(Ye),mi=N.toLowerCase().endsWith("left"),ki=N.toLowerCase().endsWith("right"),Rn=N.startsWith("top"),co=N.startsWith("bottom");if(mi&&this.resizable){var _n=(bn-Un)/ee+this.resizable.size.width;this.setState({maxWidth:_n>Number(Kt)?Kt:_n})}(ki||this.props.lockAspectRatio&&!mi)&&(_n=ii+(Un-bn)/ee,this.setState({maxWidth:_n>Number(Kt)?Kt:_n})),Rn&&this.resizable&&(_n=(nn-_i)/ee+this.resizable.size.height,this.setState({maxHeight:_n>Number(Pt)?Pt:_n})),(co||this.props.lockAspectRatio&&!Rn)&&(_n=Li+(_i-nn)/ee,this.setState({maxHeight:_n>Number(Pt)?Pt:_n}))}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(F,N,J)},A.prototype.onResize=function(F,N,J,ee){var me={x:this.state.original.x,y:this.state.original.y},Le=-ee.width,Ze=-ee.height;["top","left","topLeft","bottomLeft","topRight"].indexOf(N)!==-1&&(N==="bottomLeft"?me.x+=Le:(N==="topRight"||(me.x+=Le),me.y+=Ze)),me.x===this.draggable.state.x&&me.y===this.draggable.state.y||this.draggable.setState(me),this.updateOffsetFromParent();var Ye=this.offsetFromParent,pt=this.getDraggablePosition().x+Ye.left,Ot=this.getDraggablePosition().y+Ye.top;this.resizingPosition={x:pt,y:Ot},this.props.onResize&&this.props.onResize(F,N,J,ee,{x:pt,y:Ot})},A.prototype.onResizeStop=function(F,N,J,ee){this.resizing=!1;var me=this.getMaxSizesFromProps(),Le=me.maxWidth,Ze=me.maxHeight;this.setState({maxWidth:Le,maxHeight:Ze}),this.props.onResizeStop&&this.props.onResizeStop(F,N,J,ee,this.resizingPosition)},A.prototype.updateSize=function(F){this.resizable&&this.resizable.updateSize({width:F.width,height:F.height})},A.prototype.updatePosition=function(F){this.draggable.setState(F)},A.prototype.updateOffsetFromParent=function(){var F=this.props.scale,N=this.getParent(),J=this.getSelfElement();if(!N||J===null)return{top:0,left:0};var ee=N.getBoundingClientRect(),me=ee.left,Le=ee.top,Ze=J.getBoundingClientRect(),Ye=this.getDraggablePosition();this.offsetFromParent={left:Ze.left-me-Ye.x*F,top:Ze.top-Le-Ye.y*F}},A.prototype.render=function(){var F=this.props,N=F.disableDragging,J=F.style,ee=F.dragHandleClassName,me=F.position,Le=F.onMouseDown,Ze=F.onMouseUp,Ye=F.dragAxis,pt=F.dragGrid,Ot=F.bounds,Kt=F.enableUserSelectHack,Pt=F.cancel,Ut=F.children,zt=(F.onResizeStart,F.onResize,F.onResizeStop,F.onDragStart,F.onDrag,F.onDragStop,F.resizeHandleStyles),Zt=F.resizeHandleClasses,bn=F.resizeHandleComponent,nn=F.enableResizing,qt=F.resizeGrid,Un=F.resizeHandleWrapperClass,_i=F.resizeHandleWrapperStyle,ii=F.scale,Li=F.allowAnyClick,mi=function(Ki,Jr){var us={};for(var yr in Ki)Object.prototype.hasOwnProperty.call(Ki,yr)&&Jr.indexOf(yr)<0&&(us[yr]=Ki[yr]);if(Ki!=null&&typeof Object.getOwnPropertySymbols=="function"){var Bi=0;for(yr=Object.getOwnPropertySymbols(Ki);Bi<yr.length;Bi++)Jr.indexOf(yr[Bi])<0&&Object.prototype.propertyIsEnumerable.call(Ki,yr[Bi])&&(us[yr[Bi]]=Ki[yr[Bi]])}return us}(F,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick"]),ki=this.props.default?$t({},this.props.default):void 0;delete mi.default;var Rn,co=N||ee?{cursor:"auto"}:{cursor:"move"},_n=$t($t($t({},Xt),co),J),pi=this.offsetFromParent,_o=pi.left,cs=pi.top;me&&(Rn={x:me.x-_o,y:me.y-cs});var ri,aa=this.resizing?void 0:Rn,uo=this.resizing?"both":Ye;return Object(o.createElement)(Gi,{ref:this.refDraggable,handle:ee?"."+ee:void 0,defaultPosition:ki,onMouseDown:Le,onMouseUp:Ze,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:uo,disabled:N,grid:pt,bounds:Ot?this.state.bounds:void 0,position:aa,enableUserSelectHack:Kt,cancel:Pt,scale:ii,allowAnyClick:Li,nodeRef:this.resizableElement},Object(o.createElement)(St,$t({},mi,{ref:this.refResizable,defaultSize:ki,size:this.props.size,enable:typeof nn=="boolean"?(ri=nn,{bottom:ri,bottomLeft:ri,bottomRight:ri,left:ri,right:ri,top:ri,topLeft:ri,topRight:ri}):nn,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:_n,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.resizing?this.state.maxHeight:this.props.maxHeight,grid:qt,handleWrapperClass:Un,handleWrapperStyle:_i,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:zt,handleClasses:Zt,handleComponent:bn,scale:this.props.scale}),Ut))},A.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},A}(o.PureComponent);r(58);class ni extends o.Component{constructor(A){super(A),this.handleTabClick=this.handleTabClick.bind(this)}handleTabClick(A){this.setState({activeTab:A},()=>{this.props.onClick(A)})}render(){return s.a.createElement("div",{className:"ck-inspector-horizontal-nav"},this.props.definitions.map(A=>s.a.createElement(hr,{key:A,label:A,isActive:this.props.activeTab===A,onClick:()=>this.handleTabClick(A)})))}}class hr extends o.Component{render(){return s.a.createElement("button",{className:["ck-inspector-horizontal-nav__item",this.props.isActive?" ck-inspector-horizontal-nav__item_active":""].join(" "),key:this.props.label,onClick:this.props.onClick,type:"button"},this.props.label)}}r(60);class Ke extends o.Component{render(){const A=Array.isArray(this.props.children)?this.props.children:[this.props.children];return s.a.createElement("div",{className:"ck-inspector-navbox"},A.length>1?s.a.createElement("div",{className:"ck-inspector-navbox__navigation"},A[0]):"",s.a.createElement("div",{className:"ck-inspector-navbox__content"},A[A.length-1]))}}class Rt extends o.Component{constructor(A){super(A),this.handleTabClick=this.handleTabClick.bind(this)}handleTabClick(A){this.props.onTabChange(A)}render(){const A=Array.isArray(this.props.children)?this.props.children:[this.props.children];return s.a.createElement(Ke,null,[this.props.contentBefore,s.a.createElement(ni,{key:"navigation",definitions:A.map(F=>F.props.label),activeTab:this.props.activeTab,onClick:this.handleTabClick}),this.props.contentAfter],A.filter(F=>F.props.label===this.props.activeTab))}}var No=r(5),Gr=r.n(No);class er extends o.Component{render(){return[s.a.createElement("label",{htmlFor:this.props.id,key:"label"},this.props.label,":"),s.a.createElement("select",{id:this.props.id,value:this.props.value,onChange:this.props.onChange,key:"select"},this.props.options.map(A=>s.a.createElement("option",{value:A,key:A},A)))]}shouldComponentUpdate(A){return!Gr()(this.props,A)}}r(62);class Hn extends o.PureComponent{render(){const A=["ck-inspector-button",this.props.className||"",this.props.isOn?"ck-inspector-button_on":"",this.props.isEnabled===!1?"ck-inspector-button_disabled":""].filter(F=>F).join(" ");return s.a.createElement("button",{className:A,type:"button",onClick:this.props.isEnabled===!1?()=>{}:this.props.onClick,title:this.props.title||this.props.text},s.a.createElement("span",null,this.props.text),this.props.icon)}}r(64);class hi extends o.Component{render(){return s.a.createElement("div",{className:["ck-inspector-pane",this.props.splitVertically?"ck-inspector-pane_vsplit":"",this.props.isEmpty?"ck-inspector-pane_empty":""].join(" ")},this.props.children)}}r(66);const Vt={position:"relative"};class As extends o.Component{get maxSidePaneWidth(){return Math.min(window.innerWidth-400,.8*window.innerWidth)}render(){return s.a.createElement("div",{className:"ck-inspector-side-pane"},s.a.createElement(qr,{enableResizing:{left:!0},disableDragging:!0,minWidth:200,maxWidth:this.maxSidePaneWidth,style:Vt,position:{x:"100%",y:"100%"},size:{width:this.props.sidePaneWidth,height:"100%"},onResizeStop:(A,F,N)=>this.props.setSidePaneWidth(N.style.width)},this.props.children))}}var Kr=Ct(({ui:{sidePaneWidth:G}})=>({sidePaneWidth:G}),{setSidePaneWidth:function(G){return{type:"SET_SIDE_PANE_WIDTH",newWidth:G}}})(As),wi=r(11);r(68);class $n extends o.PureComponent{render(){return[s.a.createElement("input",{type:"checkbox",className:"ck-inspector-checkbox",id:this.props.id,key:"input",checked:this.props.isChecked,onChange:this.props.onChange}),s.a.createElement("label",{htmlFor:this.props.id,key:"label"},this.props.label)]}}class vr extends o.Component{constructor(A){super(A),this.handleTreeClick=this.handleTreeClick.bind(this),this.handleRootChange=this.handleRootChange.bind(this)}handleTreeClick(A,F){A.persist(),A.stopPropagation(),this.props.setModelCurrentNode(F),A.detail===2&&this.props.setModelActiveTab("Inspect")}handleRootChange(A){this.props.setModelCurrentRootName(A.target.value)}render(){const A=this.props.editors.get(this.props.currentEditorName);return s.a.createElement(Ke,null,[s.a.createElement("div",{className:"ck-inspector-tree__config",key:"root-cfg"},s.a.createElement(er,{id:"view-root-select",label:"Root",value:this.props.currentRootName,options:Object(Ae.d)(A).map(F=>F.rootName),onChange:this.handleRootChange})),s.a.createElement("span",{className:"ck-inspector-separator",key:"separator"}),s.a.createElement("div",{className:"ck-inspector-tree__config",key:"text-cfg"},s.a.createElement($n,{label:"Compact text",id:"model-compact-text",isChecked:this.props.showCompactText,onChange:this.props.toggleModelShowCompactText}),s.a.createElement($n,{label:"Show markers",id:"model-show-markers",isChecked:this.props.showMarkers,onChange:this.props.toggleModelShowMarkers}))],s.a.createElement(wi.a,{className:[this.props.showMarkers?"":"ck-inspector-model-tree__hide-markers"],definition:this.props.treeDefinition,textDirection:A.locale.contentLanguageDirection,onClick:this.handleTreeClick,showCompactText:this.props.showCompactText,activeNode:this.props.currentNode}))}}var Vo=Ct(({editors:G,currentEditorName:A,model:{treeDefinition:F,currentRootName:N,currentNode:J,ui:{showMarkers:ee,showCompactText:me}}})=>({treeDefinition:F,editors:G,currentEditorName:A,currentRootName:N,currentNode:J,showMarkers:ee,showCompactText:me}),{toggleModelShowCompactText:function(){return{type:"TOGGLE_MODEL_SHOW_COMPACT_TEXT"}},setModelCurrentRootName:function(G){return{type:"SET_MODEL_CURRENT_ROOT_NAME",currentRootName:G}},toggleModelShowMarkers:function(){return{type:"TOGGLE_MODEL_SHOW_MARKERS"}},setModelCurrentNode:function(G){return{type:"SET_MODEL_CURRENT_NODE",currentNode:G}},setModelActiveTab:ct})(vr);r(70);class so extends o.Component{render(){const A=this.props.presentation&&this.props.presentation.expandCollapsibles,F=[];for(const N in this.props.itemDefinitions){const J=this.props.itemDefinitions[N],{subProperties:ee,presentation:me={}}=J,Le=ee&&Object.keys(ee).length,Ze=Object(Bt.c)(String(J.value),2e3),Ye=[s.a.createElement(Ps,{key:`${this.props.name}-${N}-name`,name:N,listUid:this.props.name,canCollapse:Le,colorBox:me.colorBox,expandCollapsibles:A,onClick:this.props.onPropertyTitleClick,title:J.title}),s.a.createElement("dd",{key:`${this.props.name}-${N}-value`},s.a.createElement("input",{id:`${this.props.name}-${N}-value-input`,type:"text",value:Ze,readOnly:!0}))];Le&&Ye.push(s.a.createElement(so,{name:`${this.props.name}-${N}`,key:`${this.props.name}-${N}`,itemDefinitions:ee,presentation:this.props.presentation})),F.push(Ye)}return s.a.createElement("dl",{className:"ck-inspector-property-list ck-inspector-code"},F)}shouldComponentUpdate(A){return!Gr()(this.props,A)}}class Ps extends o.PureComponent{constructor(A){super(A),this.state={isCollapsed:!this.props.expandCollapsibles},this.handleCollapsedChange=this.handleCollapsedChange.bind(this)}handleCollapsedChange(){this.setState({isCollapsed:!this.state.isCollapsed})}render(){const A=["ck-inspector-property-list__title"];let F,N;return this.props.canCollapse&&(A.push("ck-inspector-property-list__title_collapsible"),A.push("ck-inspector-property-list__title_"+(this.state.isCollapsed?"collapsed":"expanded")),F=s.a.createElement("button",{type:"button",onClick:this.handleCollapsedChange},"Toggle")),this.props.colorBox&&(N=s.a.createElement("span",{className:"ck-inspector-property-list__title__color-box",style:{background:this.props.colorBox}})),this.props.onClick&&A.push("ck-inspector-property-list__title_clickable"),s.a.createElement("dt",{className:A.join(" ").trim()},F,N,s.a.createElement("label",{htmlFor:`${this.props.listUid}-${this.props.name}-value-input`,onClick:this.props.onClick?()=>this.props.onClick(this.props.name):null,title:this.props.title},this.props.name),":")}}r(72);function Is(){return(Is=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}class ao extends o.PureComponent{render(){const A=[];for(const F of this.props.lists)Object.keys(F.itemDefinitions).length&&A.push(s.a.createElement("hr",{key:F.name+"-separator"}),s.a.createElement("h3",{key:F.name+"-header"},s.a.createElement("a",{href:F.url,target:"_blank",rel:"noopener noreferrer"},F.name),F.buttons&&F.buttons.map((N,J)=>s.a.createElement(Hn,Is({key:"button"+J},N)))),s.a.createElement(so,{key:F.name+"-list",name:F.name,itemDefinitions:F.itemDefinitions,presentation:F.presentation,onPropertyTitleClick:F.onPropertyTitleClick}));return s.a.createElement("div",{className:"ck-inspector__object-inspector"},s.a.createElement("h2",{className:"ck-inspector-code"},this.props.header),A)}}var yi=r(3);function Da(){return(Da=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var Zr=({styles:G={},...A})=>s.a.createElement("svg",Da({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},A),s.a.createElement("path",{d:"M17 15.75a.75.75 0 01.102 1.493L17 17.25H9a.75.75 0 01-.102-1.493L9 15.75h8zM2.156 2.947l.095.058 7.58 5.401a.75.75 0 01.084 1.152l-.083.069-7.58 5.425a.75.75 0 01-.958-1.148l.086-.071 6.724-4.815-6.723-4.792a.75.75 0 01-.233-.95l.057-.096a.75.75 0 01.951-.233z"}));function Ds(){return(Ds=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var eh=({styles:G={},...A})=>s.a.createElement("svg",Ds({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 19"},A),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 1a1 1 0 011-1h5a1 1 0 011 1v5a1 1 0 01-1 1h-2v2h5a1 1 0 011 1v3h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3a1 1 0 011-1h1v-2.5a.5.5 0 00-.5-.5H10v3h1a1 1 0 011 1v3a1 1 0 01-1 1H8a1 1 0 01-1-1v-3a1 1 0 011-1h1v-3H4.5a.5.5 0 00-.5.5V13h1a1 1 0 011 1v3a1 1 0 01-1 1H2a1 1 0 01-1-1v-3a1 1 0 011-1h1v-3a1 1 0 011-1h5V7H7a1 1 0 01-1-1V1zm1.5 4.5v-4h4v4h-4zm-5 11v-2h2v2h-2zm6-2v2h2v-2h-2zm6 2v-2h2v2h-2z",fill:"#000"}));class Tl extends o.Component{constructor(A){super(A),this.handleNodeLogButtonClick=this.handleNodeLogButtonClick.bind(this),this.handleNodeSchemaButtonClick=this.handleNodeSchemaButtonClick.bind(this)}handleNodeLogButtonClick(){yi.a.log(this.props.currentNodeDefinition.editorNode)}handleNodeSchemaButtonClick(){const A=this.props.editors.get(this.props.currentEditorName).model.schema.getDefinition(this.props.currentNodeDefinition.editorNode);this.props.setActiveTab("Schema"),this.props.setSchemaCurrentDefinitionName(A.name)}render(){const A=this.props.currentNodeDefinition;return A?s.a.createElement(ao,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:A.url,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,A.type)),":",A.type==="Text"?s.a.createElement("em",null,A.name):A.name),s.a.createElement(Hn,{key:"log",icon:s.a.createElement(Zr,null),text:"Log in console",onClick:this.handleNodeLogButtonClick}),s.a.createElement(Hn,{key:"schema",icon:s.a.createElement(eh,null),text:"Show in schema",onClick:this.handleNodeSchemaButtonClick})],lists:[{name:"Attributes",url:A.url,itemDefinitions:A.attributes},{name:"Properties",url:A.url,itemDefinitions:A.properties}]}):s.a.createElement(hi,{isEmpty:"true"},s.a.createElement("p",null,"Select a node in the tree to inspect"))}}var Sc=Ct(({editors:G,currentEditorName:A,model:{currentNodeDefinition:F}})=>({editors:G,currentEditorName:A,currentNodeDefinition:F}),{setActiveTab:Te,setSchemaCurrentDefinitionName:Wn})(Tl);function vo(){return(vo=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var Xs=({styles:G={},...A})=>s.a.createElement("svg",vo({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},A),s.a.createElement("path",{d:"M9.5 4.5c1.85 0 3.667.561 5.199 1.519C16.363 7.059 17.5 8.4 17.5 9.5s-1.137 2.441-2.801 3.481c-1.532.958-3.35 1.519-5.199 1.519-1.85 0-3.667-.561-5.199-1.519C2.637 11.941 1.5 10.6 1.5 9.5s1.137-2.441 2.801-3.481C5.833 5.06 7.651 4.5 9.5 4.5zm0 1a4 4 0 11-.2.005l.2-.005c-1.655 0-3.29.505-4.669 1.367C3.431 7.742 2.5 8.84 2.5 9.5c0 .66.931 1.758 2.331 2.633C6.21 12.995 7.845 13.5 9.5 13.5c1.655 0 3.29-.505 4.669-1.367 1.4-.875 2.331-1.974 2.331-2.633 0-.66-.931-1.758-2.331-2.633C12.79 6.005 11.155 5.5 9.5 5.5zM8 6.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}));const Rs="https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_selection-Selection.html";class Ra extends o.Component{constructor(A){super(A),this.handleSelectionLogButtonClick=this.handleSelectionLogButtonClick.bind(this),this.handleScrollToSelectionButtonClick=this.handleScrollToSelectionButtonClick.bind(this)}handleSelectionLogButtonClick(){const A=this.props.editor;yi.a.log(A.model.document.selection)}handleScrollToSelectionButtonClick(){const A=document.querySelector(".ck-inspector-tree__position.ck-inspector-tree__position_selection");A&&A.scrollIntoView({behavior:"smooth",block:"center"})}render(){const A=this.props.editor,F=this.props.info;return s.a.createElement(ao,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:Rs,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,"Selection"))),s.a.createElement(Hn,{key:"log",icon:s.a.createElement(Zr,null),text:"Log in console",onClick:this.handleSelectionLogButtonClick}),s.a.createElement(Hn,{key:"scroll",icon:s.a.createElement(Xs,null),text:"Scroll to selection",onClick:this.handleScrollToSelectionButtonClick})],lists:[{name:"Attributes",url:Rs+"#function-getAttributes",itemDefinitions:F.attributes},{name:"Properties",url:""+Rs,itemDefinitions:F.properties},{name:"Anchor",url:Rs+"#member-anchor",buttons:[{icon:s.a.createElement(Zr,null),text:"Log in console",onClick:()=>yi.a.log(A.model.document.selection.anchor)}],itemDefinitions:F.anchor},{name:"Focus",url:Rs+"#member-focus",buttons:[{icon:s.a.createElement(Zr,null),text:"Log in console",onClick:()=>yi.a.log(A.model.document.selection.focus)}],itemDefinitions:F.focus},{name:"Ranges",url:Rs+"#function-getRanges",buttons:[{icon:s.a.createElement(Zr,null),text:"Log in console",onClick:()=>yi.a.log(...A.model.document.selection.getRanges())}],itemDefinitions:F.ranges,presentation:{expandCollapsibles:!0}}]})}}var Qs=Ct(({editors:G,currentEditorName:A,model:{ranges:F}})=>{const N=G.get(A);return{editor:N,currentEditorName:A,info:function(J,ee){const me=J.model.document.selection,Le=me.anchor,Ze=me.focus,Ye={properties:{isCollapsed:{value:me.isCollapsed},isBackward:{value:me.isBackward},isGravityOverridden:{value:me.isGravityOverridden},rangeCount:{value:me.rangeCount}},attributes:{},anchor:ea(Object(we.a)(Le)),focus:ea(Object(we.a)(Ze)),ranges:{}};for(const[pt,Ot]of me.getAttributes())Ye.attributes[pt]={value:Ot};ee.forEach((pt,Ot)=>{Ye.ranges[Ot]={value:"",subProperties:{start:{value:"",subProperties:Object(Bt.b)(ea(pt.start))},end:{value:"",subProperties:Object(Bt.b)(ea(pt.end))}}}});for(const pt in Ye)pt!=="ranges"&&(Ye[pt]=Object(Bt.b)(Ye[pt]));return Ye}(N,F)}},{})(Ra);function ea({path:G,stickiness:A,index:F,isAtEnd:N,isAtStart:J,offset:ee,textNode:me}){return{path:{value:G},stickiness:{value:A},index:{value:F},isAtEnd:{value:N},isAtStart:{value:J},offset:{value:ee},textNode:{value:me}}}class th extends o.Component{render(){const A=function(J){const ee={};for(const me of J){const Le=me.name.split(":");let Ze=ee;for(const Ye of Le){const pt=Ye===Le[Le.length-1];Ze=Ze[Ye]?Ze[Ye]:Ze[Ye]=pt?me:{}}}return ee}(this.props.markers),F=function J(ee){const me={};for(const Le in ee){const Ze=ee[Le];if(Ze.name){const Ye=Object(Bt.b)(Fu(Ze));me[Le]={value:"",presentation:{colorBox:Ze.presentation.color},subProperties:Ye}}else{const Ye=Object.keys(Ze).length;me[Le]={value:Ye+" marker"+(Ye>1?"s":""),subProperties:J(Ze)}}}return me}(A),N=this.props.editors.get(this.props.currentEditorName);return Object.keys(A).length?s.a.createElement(ao,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:"https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_markercollection-Marker.html",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,"Markers"))),s.a.createElement(Hn,{key:"log",icon:s.a.createElement(Zr,null),text:"Log in console",onClick:()=>yi.a.log([...N.model.markers])})],lists:[{name:"Markers tree",itemDefinitions:F,presentation:{expandCollapsibles:!0}}]}):s.a.createElement(hi,{isEmpty:"true"},s.a.createElement("p",null,"No markers in the document."))}}var Tc=Ct(({editors:G,currentEditorName:A,model:{markers:F}})=>({editors:G,currentEditorName:A,markers:F}),{})(th);function Fu({name:G,start:A,end:F,affectsData:N,managedUsingOperations:J}){return{name:{value:G},start:{value:A.path},end:{value:F.path},affectsData:{value:N},managedUsingOperations:{value:J}}}r(74);class Oa extends o.Component{render(){return this.props.currentEditorName?s.a.createElement(hi,{splitVertically:"true"},s.a.createElement(Vo,null),s.a.createElement(Kr,null,s.a.createElement(Rt,{onTabChange:this.props.setModelActiveTab,activeTab:this.props.activeTab},s.a.createElement(Sc,{label:"Inspect"}),s.a.createElement(Qs,{label:"Selection"}),s.a.createElement(Tc,{label:"Markers"})))):s.a.createElement(hi,{isEmpty:"true"},s.a.createElement("p",null,"Nothing to show. Attach another editor instance to start inspecting."))}}var Mu=Ct(({currentEditorName:G,model:{ui:{activeTab:A}}})=>({currentEditorName:G,activeTab:A}),{setModelActiveTab:ct})(Oa);class nh extends o.Component{constructor(A){super(A),this.handleTreeClick=this.handleTreeClick.bind(this),this.handleRootChange=this.handleRootChange.bind(this)}handleTreeClick(A,F){A.persist(),A.stopPropagation(),this.props.setViewCurrentNode(F),A.detail===2&&this.props.setViewActiveTab("Inspect")}handleRootChange(A){this.props.setViewCurrentRootName(A.target.value)}render(){const A=this.props.editors.get(this.props.currentEditorName);return s.a.createElement(Ke,null,[s.a.createElement("div",{className:"ck-inspector-tree__config",key:"root-cfg"},s.a.createElement(er,{id:"view-root-select",label:"Root",value:this.props.currentRootName,options:Object(ut.d)(A).map(F=>F.rootName),onChange:this.handleRootChange})),s.a.createElement("span",{className:"ck-inspector-separator",key:"separator"}),s.a.createElement("div",{className:"ck-inspector-tree__config",key:"types-cfg"},s.a.createElement($n,{label:"Show element types",id:"view-show-types",isChecked:this.props.showElementTypes,onChange:this.props.toggleViewShowElementTypes}))],s.a.createElement(wi.a,{definition:this.props.treeDefinition,textDirection:A.locale.contentLanguageDirection,onClick:this.handleTreeClick,showCompactText:"true",showElementTypes:this.props.showElementTypes,activeNode:this.props.currentNode}))}}var Fa=Ct(({editors:G,currentEditorName:A,view:{treeDefinition:F,currentRootName:N,currentNode:J,ui:{showElementTypes:ee}}})=>({treeDefinition:F,editors:G,currentEditorName:A,currentRootName:N,currentNode:J,showElementTypes:ee}),{setViewCurrentRootName:function(G){return{type:"SET_VIEW_CURRENT_ROOT_NAME",currentRootName:G}},toggleViewShowElementTypes:function(){return{type:"TOGGLE_VIEW_SHOW_ELEMENT_TYPES"}},setViewCurrentNode:function(G){return{type:"SET_VIEW_CURRENT_NODE",currentNode:G}},setViewActiveTab:ht})(nh);class qn extends o.Component{constructor(A){super(A),this.handleNodeLogButtonClick=this.handleNodeLogButtonClick.bind(this)}handleNodeLogButtonClick(){yi.a.log(this.props.currentNodeDefinition.editorNode)}render(){const A=this.props.currentNodeDefinition;return A?s.a.createElement(ao,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:A.url,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,A.type),":"),A.type==="Text"?s.a.createElement("em",null,A.name):A.name),s.a.createElement(Hn,{key:"log",icon:s.a.createElement(Zr,null),text:"Log in console",onClick:this.handleNodeLogButtonClick})],lists:[{name:"Attributes",url:A.url,itemDefinitions:A.attributes},{name:"Properties",url:A.url,itemDefinitions:A.properties},{name:"Custom Properties",url:ut.a+"_element-Element.html#function-getCustomProperty",itemDefinitions:A.customProperties}]}):s.a.createElement(hi,{isEmpty:"true"},s.a.createElement("p",null,"Select a node in the tree to inspect"))}}var rs=Ct(({view:{currentNodeDefinition:G}})=>({currentNodeDefinition:G}),{})(qn);const os="https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view_selection-Selection.html";class Ac extends o.Component{constructor(A){super(A),this.handleSelectionLogButtonClick=this.handleSelectionLogButtonClick.bind(this),this.handleScrollToSelectionButtonClick=this.handleScrollToSelectionButtonClick.bind(this)}handleSelectionLogButtonClick(){const A=this.props.editor;yi.a.log(A.editing.view.document.selection)}handleScrollToSelectionButtonClick(){const A=document.querySelector(".ck-inspector-tree__position.ck-inspector-tree__position_selection");A&&A.scrollIntoView({behavior:"smooth",block:"center"})}render(){const A=this.props.editor,F=this.props.info;return s.a.createElement(ao,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:os,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,"Selection"))),s.a.createElement(Hn,{key:"log",icon:s.a.createElement(Zr,null),text:"Log in console",onClick:this.handleSelectionLogButtonClick}),s.a.createElement(Hn,{key:"scroll",icon:s.a.createElement(Xs,null),text:"Scroll to selection",onClick:this.handleScrollToSelectionButtonClick})],lists:[{name:"Properties",url:""+os,itemDefinitions:F.properties},{name:"Anchor",url:os+"#member-anchor",buttons:[{type:"log",text:"Log in console",onClick:()=>yi.a.log(A.editing.view.document.selection.anchor)}],itemDefinitions:F.anchor},{name:"Focus",url:os+"#member-focus",buttons:[{type:"log",text:"Log in console",onClick:()=>yi.a.log(A.editing.view.document.selection.focus)}],itemDefinitions:F.focus},{name:"Ranges",url:os+"#function-getRanges",buttons:[{type:"log",text:"Log in console",onClick:()=>yi.a.log(...A.editing.view.document.selection.getRanges())}],itemDefinitions:F.ranges,presentation:{expandCollapsibles:!0}}]})}}var Ma=Ct(({editors:G,currentEditorName:A,view:{ranges:F}})=>{const N=G.get(A);return{editor:N,currentEditorName:A,info:function(J,ee){const me=J.editing.view.document.selection,Le={properties:{isCollapsed:{value:me.isCollapsed},isBackward:{value:me.isBackward},isFake:{value:me.isFake},rangeCount:{value:me.rangeCount}},anchor:Os(Object(Et.a)(me.anchor)),focus:Os(Object(Et.a)(me.focus)),ranges:{}};ee.forEach((Ze,Ye)=>{Le.ranges[Ye]={value:"",subProperties:{start:{value:"",subProperties:Object(Bt.b)(Os(Ze.start))},end:{value:"",subProperties:Object(Bt.b)(Os(Ze.end))}}}});for(const Ze in Le)Ze!=="ranges"&&(Le[Ze]=Object(Bt.b)(Le[Ze]));return Le}(N,F)}},{})(Ac);function Os({offset:G,isAtEnd:A,isAtStart:F,parent:N}){return{offset:{value:G},isAtEnd:{value:A},isAtStart:{value:F},parent:{value:N}}}class ss extends o.Component{render(){return this.props.currentEditorName?s.a.createElement(hi,{splitVertically:"true"},s.a.createElement(Fa,null),s.a.createElement(Kr,null,s.a.createElement(Rt,{onTabChange:this.props.setViewActiveTab,activeTab:this.props.activeTab},s.a.createElement(rs,{label:"Inspect"}),s.a.createElement(Ma,{label:"Selection"})))):s.a.createElement(hi,{isEmpty:"true"},s.a.createElement("p",null,"Nothing to show. Attach another editor instance to start inspecting."))}}var ih=Ct(({currentEditorName:G,view:{ui:{activeTab:A}}})=>({currentEditorName:G,activeTab:A}),{setViewActiveTab:ht,updateViewState:ft})(ss);class Pc extends o.Component{constructor(A){super(A),this.handleTreeClick=this.handleTreeClick.bind(this)}handleTreeClick(A,F){A.persist(),A.stopPropagation(),this.props.setCommandsCurrentCommandName(F)}render(){return s.a.createElement(Ke,null,s.a.createElement(wi.a,{definition:this.props.treeDefinition,onClick:this.handleTreeClick,activeNode:this.props.currentCommandName}))}}var Yr=Ct(({commands:{treeDefinition:G,currentCommandName:A}})=>({treeDefinition:G,currentCommandName:A}),{setCommandsCurrentCommandName:function(G){return{type:"SET_COMMANDS_CURRENT_COMMAND_NAME",currentCommandName:G}}})(Pc);function Lu(){return(Lu=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var Ic=({styles:G={},...A})=>s.a.createElement("svg",Lu({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},A),s.a.createElement("path",{d:"M9.25 1.25a8 8 0 110 16 8 8 0 010-16zm0 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM7.344 6.485l4.98 2.765-4.98 3.018V6.485z"}));class La extends o.Component{constructor(A){super(A),this.handleCommandLogButtonClick=this.handleCommandLogButtonClick.bind(this),this.handleCommandExecuteButtonClick=this.handleCommandExecuteButtonClick.bind(this)}handleCommandLogButtonClick(){yi.a.log(this.props.currentCommandDefinition.command)}handleCommandExecuteButtonClick(){this.props.editors.get(this.props.currentEditorName).execute(this.props.currentCommandName)}render(){const A=this.props.currentCommandDefinition;return A?s.a.createElement(ao,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:A.url,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,A.type)),":",this.props.currentCommandName),s.a.createElement(Hn,{key:"exec",icon:s.a.createElement(Ic,null),text:"Execute command",onClick:this.handleCommandExecuteButtonClick}),s.a.createElement(Hn,{key:"log",icon:s.a.createElement(Zr,null),text:"Log in console",onClick:this.handleCommandLogButtonClick})],lists:[{name:"Properties",url:A.url,itemDefinitions:A.properties}]}):s.a.createElement(hi,{isEmpty:"true"},s.a.createElement("p",null,"Select a command to inspect"))}}var Dc=Ct(({editors:G,currentEditorName:A,commands:{currentCommandName:F,currentCommandDefinition:N}})=>({editors:G,currentEditorName:A,currentCommandName:F,currentCommandDefinition:N}),{})(La);class tr extends o.Component{render(){return this.props.currentEditorName?s.a.createElement(hi,{splitVertically:"true"},s.a.createElement(Yr,null),s.a.createElement(Kr,null,s.a.createElement(Rt,{activeTab:"Inspect"},s.a.createElement(Dc,{label:"Inspect"})))):s.a.createElement(hi,{isEmpty:"true"},s.a.createElement("p",null,"Nothing to show. Attach another editor instance to start inspecting."))}}var ta=Ct(({currentEditorName:G})=>({currentEditorName:G}),{updateCommandsState:dn})(tr);class lo extends o.Component{constructor(A){super(A),this.handleTreeClick=this.handleTreeClick.bind(this)}handleTreeClick(A,F){A.persist(),A.stopPropagation(),this.props.setSchemaCurrentDefinitionName(F)}render(){return s.a.createElement(Ke,null,s.a.createElement(wi.a,{definition:this.props.treeDefinition,onClick:this.handleTreeClick,activeNode:this.props.currentSchemaDefinitionName}))}}var Ba=Ct(({schema:{treeDefinition:G,currentSchemaDefinitionName:A}})=>({treeDefinition:G,currentSchemaDefinitionName:A}),{setSchemaCurrentDefinitionName:Wn})(lo);class Al extends o.Component{render(){const A=this.props.currentSchemaDefinition;return A?s.a.createElement(ao,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:A.urls.general,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,A.type)),":",this.props.currentSchemaDefinitionName)],lists:[{name:"Properties",url:A.urls.general,itemDefinitions:A.properties},{name:"Allowed attributes",url:A.urls.allowAttributes,itemDefinitions:A.allowAttributes},{name:"Allowed children",url:A.urls.allowChildren,itemDefinitions:A.allowChildren,onPropertyTitleClick:F=>{this.props.setSchemaCurrentDefinitionName(F)}},{name:"Allowed in",url:A.urls.allowIn,itemDefinitions:A.allowIn,onPropertyTitleClick:F=>{this.props.setSchemaCurrentDefinitionName(F)}}]}):s.a.createElement(hi,{isEmpty:"true"},s.a.createElement("p",null,"Select a schema definition to inspect"))}}var Fs=Ct(({editors:G,currentEditorName:A,schema:{currentSchemaDefinitionName:F,currentSchemaDefinition:N}})=>({editors:G,currentEditorName:A,currentSchemaDefinitionName:F,currentSchemaDefinition:N}),{setSchemaCurrentDefinitionName:Wn})(Al);class Rc extends o.Component{render(){return this.props.currentEditorName?s.a.createElement(hi,{splitVertically:"true"},s.a.createElement(Ba,null),s.a.createElement(Kr,null,s.a.createElement(Rt,{activeTab:"Inspect"},s.a.createElement(Fs,{label:"Inspect"})))):s.a.createElement(hi,{isEmpty:"true"},s.a.createElement("p",null,"Nothing to show. Attach another editor instance to start inspecting."))}}var Oc=Ct(({currentEditorName:G})=>({currentEditorName:G}))(Rc),Fc=r(47),Bu=r.n(Fc),Pl=r(48),Il=r.n(Pl);function Nu(){return(Nu=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var na=({styles:G={},...A})=>s.a.createElement("svg",Nu({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},A),s.a.createElement("path",{d:"M12.936 0l5 4.5v12.502l-1.504-.001v.003h1.504v1.499h-5v-1.501l3.496-.001V5.208L12.21 1.516 3.436 1.5v15.504l3.5-.001v1.5h-5V0h11z"}),s.a.createElement("path",{d:"M10.374 9.463l.085.072.477.464L11 10v.06l3.545 3.453-1.047 1.075L11 12.155V19H9v-6.9l-2.424 2.476-1.072-1.05L9.4 9.547a.75.75 0 01.974-.084zM12.799 1.5l-.001 2.774h3.645v1.5h-5.144V1.5z"}));r(86);class Vu extends o.Component{constructor(A){super(A),this.state={isModalOpen:!1,editorDataValue:""},this.textarea=s.a.createRef()}render(){return[s.a.createElement(Hn,{text:"Set editor data",icon:s.a.createElement(na,null),isEnabled:!!this.props.editor,onClick:()=>this.setState({isModalOpen:!0}),key:"button"}),s.a.createElement(Il.a,{isOpen:this.state.isModalOpen,appElement:document.querySelector(".ck-inspector-wrapper"),onAfterOpen:this._handleModalAfterOpen.bind(this),overlayClassName:"ck-inspector-modal ck-inspector-quick-actions__set-data-modal",className:"ck-inspector-quick-actions__set-data-modal__content",onRequestClose:this._closeModal.bind(this),portalClassName:"ck-inspector-portal",shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,key:"modal"},s.a.createElement("h2",null,"Set editor data"),s.a.createElement("textarea",{autoFocus:!0,ref:this.textarea,value:this.state.editorDataValue,placeholder:"Paste HTML here...",onChange:this._handlDataChange.bind(this),onKeyPress:A=>{A.key=="Enter"&&A.shiftKey&&this._setEditorDataAndCloseModal()}}),s.a.createElement("div",{className:"ck-inspector-quick-actions__set-data-modal__buttons"},s.a.createElement("button",{type:"button",onClick:()=>{this.setState({editorDataValue:this.props.editor.getData()}),this.textarea.current.focus()}},"Load data"),s.a.createElement("button",{type:"button",title:"Cancel (Esc)",onClick:this._closeModal.bind(this)},"Cancel"),s.a.createElement("button",{type:"button",title:"Set editor data (⇧+Enter)",onClick:this._setEditorDataAndCloseModal.bind(this)},"Set data")))]}_setEditorDataAndCloseModal(){this.props.editor.setData(this.state.editorDataValue),this._closeModal()}_closeModal(){this.setState({isModalOpen:!1})}_handlDataChange(A){this.setState({editorDataValue:A.target.value})}_handleModalAfterOpen(){this.setState({editorDataValue:this.props.editor.getData()}),this.textarea.current.select()}}function Dl(){return(Dl=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var zo=({styles:G={},...A})=>s.a.createElement("svg",Dl({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},A),s.a.createElement("path",{d:"M12.936 0l5 4.5v14.003h-4.503L14.936 17h-10l1.503 1.503H1.936V0h11zm-9.5 1.5v15.504h12.996V5.208L12.21 1.516 3.436 1.5z"}),s.a.createElement("path",{d:"M12.799 1.5l-.001 2.774h3.645v1.5h-5.144V1.5zM9.675 18.859l-.085-.072-4.086-3.978 1.047-1.075L9 16.119V9h2v7.273l2.473-2.526 1.072 1.049-3.896 3.979a.75.75 0 01-.974.084z"}));function Na(){return(Na=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var ia=({styles:G={},...A})=>s.a.createElement("svg",Na({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},A),s.a.createElement("path",{d:"M3.144 15.748l2.002 1.402-1.976.516-.026-1.918zM2.438 3.391l15.346 11.023-.875 1.218-5.202-3.736-2.877 4.286.006.005-3.055.797-2.646-1.852-.04-2.95-.006-.005.006-.008v-.025l.01.008L6.02 7.81l-4.457-3.2.876-1.22zM7.25 8.695l-2.13 3.198 3.277 2.294 2.104-3.158-3.25-2.334zM14.002 0l2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158l-2.416 3.599-1.214-.873 2.396-3.593.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349l-.006-.004-2.384 3.575-1.224-.879 2.376-3.539c.674-.932 1.706-1.155 3.096-.668l.046.018.85-1.216z"}));function Ho(){return(Ho=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var wo=({styles:G={},...A})=>s.a.createElement("svg",Ho({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},A),s.a.createElement("path",{d:"M11.28 1a1 1 0 01.948.684l.333 1 .018.066H16a.75.75 0 01.102 1.493L16 4.25h-.5V16a2 2 0 01-2 2h-8a2 2 0 01-2-2V4.25H3a.75.75 0 01-.102-1.493L3 2.75h3.42a1 1 0 01.019-.066l.333-1A1 1 0 017.721 1h3.558zM14 4.5H5V16a.5.5 0 00.41.492l.09.008h8a.5.5 0 00.492-.41L14 16V4.5zM7.527 6.06v8.951h-1V6.06h1zm5 0v8.951h-1V6.06h1zM10 6.06v8.951H9V6.06h1z"}));function as(){return(as=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var Mc=({styles:G={},...A})=>s.a.createElement("svg",as({viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},A),s.a.createElement("path",{d:"M2.284 2.498c-.239.266-.184.617-.184 1.002V4H2a.5.5 0 00-.492.41L1.5 4.5V17a1 1 0 00.883.993L2.5 18h10a1 1 0 00.97-.752l-.081-.062c.438.368.976.54 1.507.526a2.5 2.5 0 01-2.232 1.783l-.164.005h-10a2.5 2.5 0 01-2.495-2.336L0 17V4.5a2 2 0 011.85-1.995L2 2.5l.284-.002zm10.532 0L13 2.5a2 2 0 011.995 1.85L15 4.5v2.28a2.243 2.243 0 00-1.5.404V4.5a.5.5 0 00-.41-.492L13 4v-.5l-.007-.144c-.031-.329.032-.626-.177-.858z"}),s.a.createElement("path",{d:"M6 .49l-.144.006a1.75 1.75 0 00-1.41.94l-.029.058.083-.004c-.69 0-1.25.56-1.25 1.25v1c0 .69.56 1.25 1.25 1.25h6c.69 0 1.25-.56 1.25-1.25v-1l-.006-.128a1.25 1.25 0 00-1.116-1.116l-.046-.002-.027-.058A1.75 1.75 0 009 .49H6zm0 1.5h3a.25.25 0 01.25.25l.007.102A.75.75 0 0010 2.99h.25v.5h-5.5v-.5H5a.75.75 0 00.743-.648l.007-.102A.25.25 0 016 1.99zm9.374 6.55a.75.75 0 01-.093 1.056l-2.33 1.954h6.127a.75.75 0 010 1.501h-5.949l2.19 1.837a.75.75 0 11-.966 1.15l-3.788-3.18a.747.747 0 01-.21-.285.75.75 0 01.17-.945l3.792-3.182a.75.75 0 011.057.093z"}));function yo(){return(yo=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var ra=({styles:G={},...A})=>s.a.createElement("svg",yo({viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},A),s.a.createElement("path",{fill:"#4fa800",d:"M6.972 16.615a.997.997 0 01-.744-.292l-4.596-4.596a1 1 0 111.414-1.414l3.926 3.926 9.937-9.937a1 1 0 011.414 1.415L7.717 16.323a.997.997 0 01-.745.292z"}));r(88);class fi extends o.Component{constructor(A){super(A),this.state={isShiftKeyPressed:!1,wasEditorDataJustCopied:!1},this._keyDownHandler=this._handleKeyDown.bind(this),this._keyUpHandler=this._handleKeyUp.bind(this),this._readOnlyHandler=this._handleReadOnly.bind(this),this._editorDataJustCopiedTimeout=null}render(){return s.a.createElement("div",{className:"ck-inspector-editor-quick-actions"},s.a.createElement(Hn,{text:"Log editor",icon:s.a.createElement(Zr,null),isEnabled:!!this.props.editor,onClick:()=>console.log(this.props.editor)}),this._getLogButton(),s.a.createElement(Vu,{editor:this.props.editor}),s.a.createElement(Hn,{text:"Toggle read only",icon:s.a.createElement(ia,null),isOn:this.props.isReadOnly,isEnabled:!!this.props.editor,onClick:this._readOnlyHandler}),s.a.createElement(Hn,{text:"Destroy editor",icon:s.a.createElement(wo,null),isEnabled:!!this.props.editor,onClick:()=>{this.props.editor.destroy()}}))}componentDidMount(){document.addEventListener("keydown",this._keyDownHandler),document.addEventListener("keyup",this._keyUpHandler)}componentWillUnmount(){document.removeEventListener("keydown",this._keyDownHandler),document.removeEventListener("keyup",this._keyUpHandler),clearTimeout(this._editorDataJustCopiedTimeout)}_getLogButton(){let A,F;return this.state.wasEditorDataJustCopied?(A=s.a.createElement(ra,null),F="Data copied to clipboard."):(A=this.state.isShiftKeyPressed?s.a.createElement(Mc,null):s.a.createElement(zo,null),F="Log editor data (press with Shift to copy)"),s.a.createElement(Hn,{text:F,icon:A,className:this.state.wasEditorDataJustCopied?"ck-inspector-button_data-copied":"",isEnabled:!!this.props.editor,onClick:this._handleLogEditorDataClick.bind(this)})}_handleLogEditorDataClick({shiftKey:A}){A?(Bu()(this.props.editor.getData()),this.setState({wasEditorDataJustCopied:!0}),clearTimeout(this._editorDataJustCopiedTimeout),this._editorDataJustCopiedTimeout=setTimeout(()=>{this.setState({wasEditorDataJustCopied:!1})},3e3)):console.log(this.props.editor.getData())}_handleKeyDown({key:A}){this.setState({isShiftKeyPressed:A==="Shift"})}_handleKeyUp(){this.setState({isShiftKeyPressed:!1})}_handleReadOnly(){this.props.editor.isReadOnly?this.props.editor.disableReadOnlyMode("Lock from Inspector (@ckeditor/ckeditor5-inspector)"):this.props.editor.enableReadOnlyMode("Lock from Inspector (@ckeditor/ckeditor5-inspector)")}}var rh=Ct(({editors:G,currentEditorName:A,currentEditorGlobals:{isReadOnly:F}})=>({editor:G.get(A),isReadOnly:F}),{})(fi);function Va(){return(Va=Object.assign?Object.assign.bind():function(G){for(var A=1;A<arguments.length;A++){var F=arguments[A];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(G[N]=F[N])}return G}).apply(this,arguments)}var za=({styles:G={},...A})=>s.a.createElement("svg",Va({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},A),s.a.createElement("path",{d:"M17.03 6.47a.75.75 0 01.073.976l-.072.084-6.984 7a.75.75 0 01-.977.073l-.084-.072-7.016-7a.75.75 0 01.976-1.134l.084.072 6.485 6.47 6.454-6.469a.75.75 0 01.977-.073l.084.072z"}));r(37);const oa={position:"fixed",bottom:"0",left:"0",right:"0",top:"auto"};class ls extends o.Component{constructor(A){super(A),Nc(this.props.height),document.body.style.setProperty("--ck-inspector-collapsed-height","30px"),this.handleInspectorResize=this.handleInspectorResize.bind(this)}handleInspectorResize(A,F,N){const J=N.style.height;this.props.setHeight(J),Nc(J)}render(){return this.props.isCollapsed?(document.body.classList.remove("ck-inspector-body-expanded"),document.body.classList.add("ck-inspector-body-collapsed")):(document.body.classList.remove("ck-inspector-body-collapsed"),document.body.classList.add("ck-inspector-body-expanded")),s.a.createElement(qr,{bounds:"window",enableResizing:{top:!this.props.isCollapsed},disableDragging:!0,minHeight:"100",maxHeight:"100%",style:oa,className:["ck-inspector",this.props.isCollapsed?"ck-inspector_collapsed":""].join(" "),position:{x:0,y:"100%"},size:{width:"100%",height:this.props.isCollapsed?30:this.props.height},onResizeStop:this.handleInspectorResize},s.a.createElement(Rt,{onTabChange:this.props.setActiveTab,contentBefore:s.a.createElement(sa,{key:"docs"}),activeTab:this.props.activeTab,contentAfter:[s.a.createElement(wr,{key:"selector"}),s.a.createElement("span",{className:"ck-inspector-separator",key:"separator-a"}),s.a.createElement(rh,{key:"quick-actions"}),s.a.createElement("span",{className:"ck-inspector-separator",key:"separator-b"}),s.a.createElement(Rl,{key:"inspector-toggle"})]},s.a.createElement(Mu,{label:"Model"}),s.a.createElement(ih,{label:"View"}),s.a.createElement(ta,{label:"Commands"}),s.a.createElement(Oc,{label:"Schema"})))}componentWillUnmount(){document.body.classList.remove("ck-inspector-body-expanded"),document.body.classList.remove("ck-inspector-body-collapsed")}}var Lc=Ct(({editors:G,currentEditorName:A,ui:{isCollapsed:F,height:N,activeTab:J}})=>({isCollapsed:F,height:N,editors:G,currentEditorName:A,activeTab:J}),{toggleIsCollapsed:En,setHeight:function(G){return{type:"SET_HEIGHT",newHeight:G}},setEditors:Sn,setCurrentEditorName:Di,setActiveTab:Te})(ls);class sa extends o.Component{render(){return s.a.createElement("a",{className:"ck-inspector-navbox__navigation__logo",title:"Go to the documentation",href:"https://ckeditor.com/docs/ckeditor5/latest/",target:"_blank",rel:"noopener noreferrer"},"CKEditor documentation")}}class Bc extends o.Component{constructor(A){super(A),this.handleShortcut=this.handleShortcut.bind(this)}render(){return s.a.createElement(Hn,{text:"Toggle inspector",icon:s.a.createElement(za,null),onClick:this.props.toggleIsCollapsed,title:"Toggle inspector (Alt+F12)",className:["ck-inspector-navbox__navigation__toggle",this.props.isCollapsed?" ck-inspector-navbox__navigation__toggle_up":""].join(" ")})}componentDidMount(){window.addEventListener("keydown",this.handleShortcut)}componentWillUnmount(){window.removeEventListener("keydown",this.handleShortcut)}handleShortcut(A){(function(F){return F.altKey&&!F.shiftKey&&!F.ctrlKey&&F.key==="F12"})(A)&&this.props.toggleIsCollapsed()}}const Rl=Ct(({ui:{isCollapsed:G}})=>({isCollapsed:G}),{toggleIsCollapsed:En})(Bc);class Ol extends o.Component{render(){return s.a.createElement("div",{className:"ck-inspector-editor-selector",key:"editor-selector"},this.props.currentEditorName?s.a.createElement(er,{id:"inspector-editor-selector",label:"Instance",value:this.props.currentEditorName,options:[...this.props.editors].map(([A])=>A),onChange:A=>this.props.setCurrentEditorName(A.target.value)}):"")}}const wr=Ct(({currentEditorName:G,editors:A})=>({currentEditorName:G,editors:A}),{setCurrentEditorName:Di})(Ol);function Nc(G){document.body.style.setProperty("--ck-inspector-height",G)}r(90),window.CKEDITOR_INSPECTOR_VERSION="4.1.0";class tn{constructor(){yi.a.warn("[CKEditorInspector] Whoops! Looks like you tried to create an instance of the CKEditorInspector class. To attach the inspector, use the static CKEditorInspector.attach( editor ) method instead. For the latest API, please refer to https://github.com/ckeditor/ckeditor5-inspector/blob/master/README.md. ")}static attach(...A){const{CKEDITOR_VERSION:F}=window;if(F){const[ee]=F.split(".").map(Number);ee<34&&yi.a.warn("[CKEditorInspector] The inspector requires using CKEditor 5 in version 34 or higher. If you cannot update CKEditor 5, consider downgrading the major version of the inspector to version 3.")}else yi.a.warn("[CKEditorInspector] Could not determine a version of CKEditor 5. Some of the functionalities may not work as expected.");const{editors:N,options:J}=Object(gr.c)(A);for(const ee in N){const me=N[ee];yi.a.group("%cAttached the inspector to a CKEditor 5 instance. To learn more, visit https://ckeditor.com/docs/ckeditor5.","font-weight: bold;"),yi.a.log(`Editor instance "${ee}"`,me),yi.a.groupEnd(),tn._editors.set(ee,me),me.on("destroy",()=>{tn.detach(ee)}),tn._mount(J),tn._updateEditorsState()}return Object.keys(N)}static attachToAll(A){const F=document.querySelectorAll(".ck.ck-content.ck-editor__editable"),N=[];for(const J of F){const ee=J.ckeditorInstance;ee&&!tn._isAttachedTo(ee)&&N.push(...tn.attach(ee,A))}return N}static detach(A){tn._wrapper&&(tn._editors.delete(A),tn._updateEditorsState())}static destroy(){if(!tn._wrapper)return;c.a.unmountComponentAtNode(tn._wrapper),tn._editors.clear(),tn._wrapper.remove();const A=tn._store.getState(),F=A.editors.get(A.currentEditorName);F&&tn._editorListener.stopListening(F),tn._editorListener=null,tn._wrapper=null,tn._store=null}static _updateEditorsState(){tn._store.dispatch(Sn(tn._editors))}static _mount(A){if(tn._wrapper)return;const F=tn._wrapper=document.createElement("div");let N,J;F.className="ck-inspector-wrapper",document.body.appendChild(F),tn._editorListener=new $({onModelChange(){const ee=tn._store;ee.getState().ui.isCollapsed||(ee.dispatch({type:"UPDATE_MODEL_STATE"}),ee.dispatch({type:"UPDATE_COMMANDS_STATE"}))},onViewRender(){const ee=tn._store;ee.getState().ui.isCollapsed||ee.dispatch({type:"UPDATE_VIEW_STATE"})},onReadOnlyChange(){tn._store.dispatch({type:"UPDATE_CURRENT_EDITOR_IS_READ_ONLY"})}}),tn._store=x($r,{editors:tn._editors,currentEditorName:Object(gr.b)(tn._editors),currentEditorGlobals:{},ui:{isCollapsed:A.isCollapsed}}),tn._store.subscribe(()=>{const ee=tn._store.getState(),me=ee.editors.get(ee.currentEditorName);N!==me&&(N&&tn._editorListener.stopListening(N),me&&tn._editorListener.startListening(me),N=me)}),tn._store.subscribe(()=>{const ee=tn._store,me=ee.getState().ui.isCollapsed,Le=J&&!me;J=me,Le&&(ee.dispatch({type:"UPDATE_MODEL_STATE"}),ee.dispatch({type:"UPDATE_COMMANDS_STATE"}),ee.dispatch({type:"UPDATE_VIEW_STATE"}))}),c.a.render(s.a.createElement(K,{store:tn._store},s.a.createElement(Lc,null)),F)}static _isAttachedTo(A){return[...tn._editors.values()].includes(A)}}tn._editors=new Map,tn._wrapper=null}]).default})})(kS);var uW=kS.exports;const dW=Hp(uW);class hW{id;rootElement;table;options;baseurl;async fetchData(e){const t=await axios.get(`${this.baseurl}/api/visualization/${e}`);console.log("Fetched table via axios:",t.data),this.options=t.data.options}constructor(e){this.id=e,this.rootElement=document.getElementById(e),this.baseurl=this.rootElement.dataset.baseurl,this.rootElement.classList.add("ag-theme-quartz","w-full","h-[calc(60vh)]");const t=this.rootElement.getAttribute("viz-id");t?this.fetchData(t).then(()=>{this.rootElement.innerHTML="",this.table=Vg(this.rootElement,this.options)}):(this.options=JSON.parse(this.rootElement.dataset.options),this.options?.rowData?.length>0&&(this.rootElement.innerHTML="",this.table=Vg(this.rootElement,this.options))),console.log({htmlId:e,options:this.options}),this.registerLivewireEventListeners()}registerLivewireEventListeners(){Livewire.on(`updateTable.${this.id}`,e=>{let t;[t]=e,console.log("Table received data: "+this.id,t),this.rootElement.innerHTML="",t.columnDefs=t.columnDefs.map(n=>(n?.type==="rangeColumn"&&(n.comparator=(r,o,s,l,c)=>parseInt(r)-parseInt(o)),n)),this.table=Vg(this.rootElement,t)})}resize(){const e=Alpine.raw(this.table);e&&e.sizeColumnsToFit()}}class fW{id;rootElement;constructor(e){this.id=e,this.registerLivewireEventListeners()}registerLivewireEventListeners(){Livewire.on("filterChanged",({filter:e})=>{console.log({filter:e,me:this.id})})}}var CS={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(nT,function(){var t=navigator.userAgent,n=navigator.platform,r=/gecko\/\d/i.test(t),o=/MSIE \d/.test(t),s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),l=/Edge\/(\d+)/.exec(t),c=o||s||l,h=c&&(o?document.documentMode||6:+(l||s)[1]),g=!l&&/WebKit\//.test(t),b=g&&/Qt\/\d+\.\d+/.test(t),y=!l&&/Chrome\/(\d+)/.exec(t),k=y&&+y[1],x=/Opera\//.test(t),D=/Apple Computer/.test(navigator.vendor),L=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),M=/PhantomJS/.test(t),V=D&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),O=/Android/.test(t),U=V||O||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),K=V||/Mac/.test(n),q=/\bCrOS\b/.test(t),Q=/win/i.test(n),ne=x&&t.match(/Version\/(\d*\.\d*)/);ne&&(ne=Number(ne[1])),ne&&ne>=15&&(x=!1,g=!0);var X=K&&(b||x&&(ne==null||ne<12.11)),se=r||c&&h>=9;function fe(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}var Oe=function(a,u){var p=a.className,m=fe(u).exec(p);if(m){var v=p.slice(m.index+m[0].length);a.className=p.slice(0,m.index)+(v?m[1]+v:"")}};function _e(a){for(var u=a.childNodes.length;u>0;--u)a.removeChild(a.firstChild);return a}function Ie(a,u){return _e(a).appendChild(u)}function re(a,u,p,m){var v=document.createElement(a);if(p&&(v.className=p),m&&(v.style.cssText=m),typeof u=="string")v.appendChild(document.createTextNode(u));else if(u)for(var _=0;_<u.length;++_)v.appendChild(u[_]);return v}function ae(a,u,p,m){var v=re(a,u,p,m);return v.setAttribute("role","presentation"),v}var pe;document.createRange?pe=function(a,u,p,m){var v=document.createRange();return v.setEnd(m||a,p),v.setStart(a,u),v}:pe=function(a,u,p){var m=document.body.createTextRange();try{m.moveToElementText(a.parentNode)}catch{return m}return m.collapse(!0),m.moveEnd("character",p),m.moveStart("character",u),m};function Z(a,u){if(u.nodeType==3&&(u=u.parentNode),a.contains)return a.contains(u);do if(u.nodeType==11&&(u=u.host),u==a)return!0;while(u=u.parentNode)}function Pe(a){var u=a.ownerDocument||a,p;try{p=a.activeElement}catch{p=u.body||null}for(;p&&p.shadowRoot&&p.shadowRoot.activeElement;)p=p.shadowRoot.activeElement;return p}function je(a,u){var p=a.className;fe(u).test(p)||(a.className+=(p?" ":"")+u)}function wt(a,u){for(var p=a.split(" "),m=0;m<p.length;m++)p[m]&&!fe(p[m]).test(u)&&(u+=" "+p[m]);return u}var oe=function(a){a.select()};V?oe=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:c&&(oe=function(a){try{a.select()}catch{}});function z(a){return a.display.wrapper.ownerDocument}function ke(a){return at(a.display.wrapper)}function at(a){return a.getRootNode?a.getRootNode():a.ownerDocument}function lt(a){return z(a).defaultView}function Ee(a){var u=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,u)}}function xe(a,u,p){u||(u={});for(var m in a)a.hasOwnProperty(m)&&(p!==!1||!u.hasOwnProperty(m))&&(u[m]=a[m]);return u}function Ue(a,u,p,m,v){u==null&&(u=a.search(/[^\s\u00a0]/),u==-1&&(u=a.length));for(var _=m||0,E=v||0;;){var T=a.indexOf("	",_);if(T<0||T>=u)return E+(u-_);E+=T-_,E+=p-E%p,_=T+1}}var P=function(){this.id=null,this.f=null,this.time=0,this.handler=Ee(this.onTimeout,this)};P.prototype.onTimeout=function(a){a.id=0,a.time<=+new Date?a.f():setTimeout(a.handler,a.time-+new Date)},P.prototype.set=function(a,u){this.f=u;var p=+new Date+a;(!this.id||p<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,a),this.time=p)};function R(a,u){for(var p=0;p<a.length;++p)if(a[p]==u)return p;return-1}var W=50,he={toString:function(){return"CodeMirror.Pass"}},ge={scroll:!1},ce={origin:"*mouse"},$e={origin:"+move"};function At(a,u,p){for(var m=0,v=0;;){var _=a.indexOf("	",m);_==-1&&(_=a.length);var E=_-m;if(_==a.length||v+E>=u)return m+Math.min(E,u-v);if(v+=_-m,v+=p-v%p,m=_+1,v>=u)return m}}var Ct=[""];function jt(a){for(;Ct.length<=a;)Ct.push(ct(Ct)+" ");return Ct[a]}function ct(a){return a[a.length-1]}function En(a,u){for(var p=[],m=0;m<a.length;m++)p[m]=u(a[m],m);return p}function Sn(a,u,p){for(var m=0,v=p(u);m<a.length&&p(a[m])<=v;)m++;a.splice(m,0,u)}function Di(){}function Te(a,u){var p;return Object.create?p=Object.create(a):(Di.prototype=a,p=new Di),u&&xe(u,p),p}var Ae=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function we(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||Ae.test(a))}function $(a,u){return u?u.source.indexOf("\\w")>-1&&we(a)?!0:u.test(a):we(a)}function Y(a){for(var u in a)if(a.hasOwnProperty(u)&&a[u])return!1;return!0}var de=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ue(a){return a.charCodeAt(0)>=768&&de.test(a)}function ve(a,u,p){for(;(p<0?u>0:u<a.length)&&ue(a.charAt(u));)u+=p;return u}function et(a,u,p){for(var m=u>p?-1:1;;){if(u==p)return u;var v=(u+p)/2,_=m<0?Math.ceil(v):Math.floor(v);if(_==u)return a(_)?u:p;a(_)?p=_:u=_+m}}function ht(a,u,p,m){if(!a)return m(u,p,"ltr",0);for(var v=!1,_=0;_<a.length;++_){var E=a[_];(E.from<p&&E.to>u||u==p&&E.to==u)&&(m(Math.max(E.from,u),Math.min(E.to,p),E.level==1?"rtl":"ltr",_),v=!0)}v||m(u,p,"ltr")}var ft=null;function ut(a,u,p){var m;ft=null;for(var v=0;v<a.length;++v){var _=a[v];if(_.from<u&&_.to>u)return v;_.to==u&&(_.from!=_.to&&p=="before"?m=v:ft=v),_.from==u&&(_.from!=_.to&&p!="before"?m=v:ft=v)}return m??ft}var Et=function(){var a="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",u="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function p(H){return H<=247?a.charAt(H):1424<=H&&H<=1524?"R":1536<=H&&H<=1785?u.charAt(H-1536):1774<=H&&H<=2220?"r":8192<=H&&H<=8203?"w":H==8204?"b":"L"}var m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,v=/[stwN]/,_=/[LRr]/,E=/[Lb1n]/,T=/[1n]/;function I(H,ie,le){this.level=H,this.from=ie,this.to=le}return function(H,ie){var le=ie=="ltr"?"L":"R";if(H.length==0||ie=="ltr"&&!m.test(H))return!1;for(var Ce=H.length,ye=[],Ve=0;Ve<Ce;++Ve)ye.push(p(H.charCodeAt(Ve)));for(var qe=0,Qe=le;qe<Ce;++qe){var ot=ye[qe];ot=="m"?ye[qe]=Qe:Qe=ot}for(var dt=0,tt=le;dt<Ce;++dt){var bt=ye[dt];bt=="1"&&tt=="r"?ye[dt]="n":_.test(bt)&&(tt=bt,bt=="r"&&(ye[dt]="R"))}for(var Mt=1,Dt=ye[0];Mt<Ce-1;++Mt){var en=ye[Mt];en=="+"&&Dt=="1"&&ye[Mt+1]=="1"?ye[Mt]="1":en==","&&Dt==ye[Mt+1]&&(Dt=="1"||Dt=="n")&&(ye[Mt]=Dt),Dt=en}for(var Mn=0;Mn<Ce;++Mn){var Si=ye[Mn];if(Si==",")ye[Mn]="N";else if(Si=="%"){var Gn=void 0;for(Gn=Mn+1;Gn<Ce&&ye[Gn]=="%";++Gn);for(var or=Mn&&ye[Mn-1]=="!"||Gn<Ce&&ye[Gn]=="1"?"1":"N",sr=Mn;sr<Gn;++sr)ye[sr]=or;Mn=Gn-1}}for(var Ti=0,Sr=le;Ti<Ce;++Ti){var Ji=ye[Ti];Sr=="L"&&Ji=="1"?ye[Ti]="L":_.test(Ji)&&(Sr=Ji)}for(var vi=0;vi<Ce;++vi)if(v.test(ye[vi])){var Ai=void 0;for(Ai=vi+1;Ai<Ce&&v.test(ye[Ai]);++Ai);for(var d=(vi?ye[vi-1]:le)=="L",f=(Ai<Ce?ye[Ai]:le)=="L",w=d==f?d?"L":"R":le,C=vi;C<Ai;++C)ye[C]=w;vi=Ai-1}for(var S=[],B,j=0;j<Ce;)if(E.test(ye[j])){var te=j;for(++j;j<Ce&&E.test(ye[j]);++j);S.push(new I(0,te,j))}else{var Re=j,De=S.length,Je=ie=="rtl"?1:0;for(++j;j<Ce&&ye[j]!="L";++j);for(var vt=Re;vt<j;)if(T.test(ye[vt])){Re<vt&&(S.splice(De,0,new I(1,Re,vt)),De+=Je);var Gt=vt;for(++vt;vt<j&&T.test(ye[vt]);++vt);S.splice(De,0,new I(2,Gt,vt)),De+=Je,Re=vt}else++vt;Re<j&&S.splice(De,0,new I(1,Re,j))}return ie=="ltr"&&(S[0].level==1&&(B=H.match(/^\s+/))&&(S[0].from=B[0].length,S.unshift(new I(0,0,B[0].length))),ct(S).level==1&&(B=H.match(/\s+$/))&&(ct(S).to-=B[0].length,S.push(new I(0,Ce-B[0].length,Ce)))),ie=="rtl"?S.reverse():S}}();function rt(a,u){var p=a.order;return p==null&&(p=a.order=Et(a.text,u)),p}var xt=[],Ne=function(a,u,p){if(a.addEventListener)a.addEventListener(u,p,!1);else if(a.attachEvent)a.attachEvent("on"+u,p);else{var m=a._handlers||(a._handlers={});m[u]=(m[u]||xt).concat(p)}};function dn(a,u){return a._handlers&&a._handlers[u]||xt}function Bt(a,u,p){if(a.removeEventListener)a.removeEventListener(u,p,!1);else if(a.detachEvent)a.detachEvent("on"+u,p);else{var m=a._handlers,v=m&&m[u];if(v){var _=R(v,p);_>-1&&(m[u]=v.slice(0,_).concat(v.slice(_+1)))}}}function ln(a,u){var p=dn(a,u);if(p.length)for(var m=Array.prototype.slice.call(arguments,2),v=0;v<p.length;++v)p[v].apply(null,m)}function Nt(a,u,p){return typeof u=="string"&&(u={type:u,preventDefault:function(){this.defaultPrevented=!0}}),ln(a,p||u.type,a,u),Oi(u)||u.codemirrorIgnore}function zn(a){var u=a._handlers&&a._handlers.cursorActivity;if(u)for(var p=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),m=0;m<u.length;++m)R(p,u[m])==-1&&p.push(u[m])}function Wn(a,u){return dn(a,u).length>0}function Ri(a){a.prototype.on=function(u,p){Ne(this,u,p)},a.prototype.off=function(u,p){Bt(this,u,p)}}function mn(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function ur(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Oi(a){return a.defaultPrevented!=null?a.defaultPrevented:a.returnValue==!1}function ji(a){mn(a),ur(a)}function gr(a){return a.target||a.srcElement}function $r(a){var u=a.which;return u==null&&(a.button&1?u=1:a.button&2?u=3:a.button&4&&(u=2)),K&&a.ctrlKey&&u==1&&(u=3),u}var Ia=function(){if(c&&h<9)return!1;var a=re("div");return"draggable"in a||"dragDrop"in a}(),Se;function He(a){if(Se==null){var u=re("span","​");Ie(a,re("span",[u,document.createTextNode("x")])),a.firstChild.offsetHeight!=0&&(Se=u.offsetWidth<=1&&u.offsetHeight>2&&!(c&&h<8))}var p=Se?re("span","​"):re("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return p.setAttribute("cm-text",""),p}var nt;function Tt(a){if(nt!=null)return nt;var u=Ie(a,document.createTextNode("AخA")),p=pe(u,0,1).getBoundingClientRect(),m=pe(u,1,2).getBoundingClientRect();return _e(a),!p||p.left==p.right?!1:nt=m.right-p.right<3}var yn=`

b`.split(/\n/).length!=3?function(a){for(var u=0,p=[],m=a.length;u<=m;){var v=a.indexOf(`
`,u);v==-1&&(v=a.length);var _=a.slice(u,a.charAt(v-1)=="\r"?v-1:v),E=_.indexOf("\r");E!=-1?(p.push(_.slice(0,E)),u+=E+1):(p.push(_),u=v+1)}return p}:function(a){return a.split(/\r\n?|\n/)},rn=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch{return!1}}:function(a){var u;try{u=a.ownerDocument.selection.createRange()}catch{}return!u||u.parentElement()!=a?!1:u.compareEndPoints("StartToEnd",u)!=0},Tn=function(){var a=re("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),typeof a.oncopy=="function")}(),pn=null;function Fi(a){if(pn!=null)return pn;var u=Ie(a,re("span","x")),p=u.getBoundingClientRect(),m=pe(u,0,1).getBoundingClientRect();return pn=Math.abs(p.left-m.left)>1}var gn={},In={};function Mi(a,u){arguments.length>2&&(u.dependencies=Array.prototype.slice.call(arguments,2)),gn[a]=u}function Fr(a,u){In[a]=u}function Bn(a){if(typeof a=="string"&&In.hasOwnProperty(a))a=In[a];else if(a&&typeof a.name=="string"&&In.hasOwnProperty(a.name)){var u=In[a.name];typeof u=="string"&&(u={name:u}),a=Te(u,a),a.name=u.name}else{if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return Bn("application/xml");if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return Bn("application/json")}return typeof a=="string"?{name:a}:a||{name:"null"}}function $i(a,u){u=Bn(u);var p=gn[u.name];if(!p)return $i(a,"text/plain");var m=p(a,u);if(dr.hasOwnProperty(u.name)){var v=dr[u.name];for(var _ in v)v.hasOwnProperty(_)&&(m.hasOwnProperty(_)&&(m["_"+_]=m[_]),m[_]=v[_])}if(m.name=u.name,u.helperType&&(m.helperType=u.helperType),u.modeProps)for(var E in u.modeProps)m[E]=u.modeProps[E];return m}var dr={};function Dn(a,u){var p=dr.hasOwnProperty(a)?dr[a]:dr[a]={};xe(u,p)}function qi(a,u){if(u===!0)return u;if(a.copyState)return a.copyState(u);var p={};for(var m in u){var v=u[m];v instanceof Array&&(v=v.concat([])),p[m]=v}return p}function br(a,u){for(var p;a.innerMode&&(p=a.innerMode(u),!(!p||p.mode==a));)u=p.state,a=p.mode;return p||{mode:a,state:u}}function oo(a,u,p){return a.startState?a.startState(u,p):!0}var jn=function(a,u,p){this.pos=this.start=0,this.string=a,this.tabSize=u||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=p};jn.prototype.eol=function(){return this.pos>=this.string.length},jn.prototype.sol=function(){return this.pos==this.lineStart},jn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},jn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},jn.prototype.eat=function(a){var u=this.string.charAt(this.pos),p;if(typeof a=="string"?p=u==a:p=u&&(a.test?a.test(u):a(u)),p)return++this.pos,u},jn.prototype.eatWhile=function(a){for(var u=this.pos;this.eat(a););return this.pos>u},jn.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},jn.prototype.skipToEnd=function(){this.pos=this.string.length},jn.prototype.skipTo=function(a){var u=this.string.indexOf(a,this.pos);if(u>-1)return this.pos=u,!0},jn.prototype.backUp=function(a){this.pos-=a},jn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ue(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ue(this.string,this.lineStart,this.tabSize):0)},jn.prototype.indentation=function(){return Ue(this.string,null,this.tabSize)-(this.lineStart?Ue(this.string,this.lineStart,this.tabSize):0)},jn.prototype.match=function(a,u,p){if(typeof a=="string"){var m=function(E){return p?E.toLowerCase():E},v=this.string.substr(this.pos,a.length);if(m(v)==m(a))return u!==!1&&(this.pos+=a.length),!0}else{var _=this.string.slice(this.pos).match(a);return _&&_.index>0?null:(_&&u!==!1&&(this.pos+=_[0].length),_)}},jn.prototype.current=function(){return this.string.slice(this.start,this.pos)},jn.prototype.hideFirstChars=function(a,u){this.lineStart+=a;try{return u()}finally{this.lineStart-=a}},jn.prototype.lookAhead=function(a){var u=this.lineOracle;return u&&u.lookAhead(a)},jn.prototype.baseToken=function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};function St(a,u){if(u-=a.first,u<0||u>=a.size)throw new Error("There is no line "+(u+a.first)+" in the document.");for(var p=a;!p.lines;)for(var m=0;;++m){var v=p.children[m],_=v.chunkSize();if(u<_){p=v;break}u-=_}return p.lines[u]}function cn(a,u,p){var m=[],v=u.line;return a.iter(u.line,p.line+1,function(_){var E=_.text;v==p.line&&(E=E.slice(0,p.ch)),v==u.line&&(E=E.slice(u.ch)),m.push(E),++v}),m}function $t(a,u,p){var m=[];return a.iter(u,p,function(v){m.push(v.text)}),m}function Gi(a,u){var p=u-a.height;if(p)for(var m=a;m;m=m.parent)m.height+=p}function Xt(a){if(a.parent==null)return null;for(var u=a.parent,p=R(u.lines,a),m=u.parent;m;u=m,m=m.parent)for(var v=0;m.children[v]!=u;++v)p+=m.children[v].chunkSize();return p+u.first}function qr(a,u){var p=a.first;e:do{for(var m=0;m<a.children.length;++m){var v=a.children[m],_=v.height;if(u<_){a=v;continue e}u-=_,p+=v.chunkSize()}return p}while(!a.lines);for(var E=0;E<a.lines.length;++E){var T=a.lines[E],I=T.height;if(u<I)break;u-=I}return p+E}function ni(a,u){return u>=a.first&&u<a.first+a.size}function hr(a,u){return String(a.lineNumberFormatter(u+a.firstLineNumber))}function Ke(a,u,p){if(p===void 0&&(p=null),!(this instanceof Ke))return new Ke(a,u,p);this.line=a,this.ch=u,this.sticky=p}function Rt(a,u){return a.line-u.line||a.ch-u.ch}function No(a,u){return a.sticky==u.sticky&&Rt(a,u)==0}function Gr(a){return Ke(a.line,a.ch)}function er(a,u){return Rt(a,u)<0?u:a}function Hn(a,u){return Rt(a,u)<0?a:u}function hi(a,u){return Math.max(a.first,Math.min(u,a.first+a.size-1))}function Vt(a,u){if(u.line<a.first)return Ke(a.first,0);var p=a.first+a.size-1;return u.line>p?Ke(p,St(a,p).text.length):As(u,St(a,u.line).text.length)}function As(a,u){var p=a.ch;return p==null||p>u?Ke(a.line,u):p<0?Ke(a.line,0):a}function Kr(a,u){for(var p=[],m=0;m<u.length;m++)p[m]=Vt(a,u[m]);return p}var wi=function(a,u){this.state=a,this.lookAhead=u},$n=function(a,u,p,m){this.state=u,this.doc=a,this.line=p,this.maxLookAhead=m||0,this.baseTokens=null,this.baseTokenPos=1};$n.prototype.lookAhead=function(a){var u=this.doc.getLine(this.line+a);return u!=null&&a>this.maxLookAhead&&(this.maxLookAhead=a),u},$n.prototype.baseToken=function(a){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)this.baseTokenPos+=2;var u=this.baseTokens[this.baseTokenPos+1];return{type:u&&u.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}},$n.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},$n.fromSaved=function(a,u,p){return u instanceof wi?new $n(a,qi(a.mode,u.state),p,u.lookAhead):new $n(a,qi(a.mode,u),p)},$n.prototype.save=function(a){var u=a!==!1?qi(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new wi(u,this.maxLookAhead):u};function vr(a,u,p,m){var v=[a.state.modeGen],_={};Ds(a,u.text,a.doc.mode,p,function(H,ie){return v.push(H,ie)},_,m);for(var E=p.state,T=function(H){p.baseTokens=v;var ie=a.state.overlays[H],le=1,Ce=0;p.state=!0,Ds(a,u.text,ie.mode,p,function(ye,Ve){for(var qe=le;Ce<ye;){var Qe=v[le];Qe>ye&&v.splice(le,1,ye,v[le+1],Qe),le+=2,Ce=Math.min(ye,Qe)}if(Ve)if(ie.opaque)v.splice(qe,le-qe,ye,"overlay "+Ve),le=qe+2;else for(;qe<le;qe+=2){var ot=v[qe+1];v[qe+1]=(ot?ot+" ":"")+"overlay "+Ve}},_),p.state=E,p.baseTokens=null,p.baseTokenPos=1},I=0;I<a.state.overlays.length;++I)T(I);return{styles:v,classes:_.bgClass||_.textClass?_:null}}function Vo(a,u,p){if(!u.styles||u.styles[0]!=a.state.modeGen){var m=so(a,Xt(u)),v=u.text.length>a.options.maxHighlightLength&&qi(a.doc.mode,m.state),_=vr(a,u,m);v&&(m.state=v),u.stateAfter=m.save(!v),u.styles=_.styles,_.classes?u.styleClasses=_.classes:u.styleClasses&&(u.styleClasses=null),p===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return u.styles}function so(a,u,p){var m=a.doc,v=a.display;if(!m.mode.startState)return new $n(m,!0,u);var _=eh(a,u,p),E=_>m.first&&St(m,_-1).stateAfter,T=E?$n.fromSaved(m,E,_):new $n(m,oo(m.mode),_);return m.iter(_,u,function(I){Ps(a,I.text,T);var H=T.line;I.stateAfter=H==u-1||H%5==0||H>=v.viewFrom&&H<v.viewTo?T.save():null,T.nextLine()}),p&&(m.modeFrontier=T.line),T}function Ps(a,u,p,m){var v=a.doc.mode,_=new jn(u,a.options.tabSize,p);for(_.start=_.pos=m||0,u==""&&Is(v,p.state);!_.eol();)ao(v,_,p.state),_.start=_.pos}function Is(a,u){if(a.blankLine)return a.blankLine(u);if(a.innerMode){var p=br(a,u);if(p.mode.blankLine)return p.mode.blankLine(p.state)}}function ao(a,u,p,m){for(var v=0;v<10;v++){m&&(m[0]=br(a,p).mode);var _=a.token(u,p);if(u.pos>u.start)return _}throw new Error("Mode "+a.name+" failed to advance stream.")}var yi=function(a,u,p){this.start=a.start,this.end=a.pos,this.string=a.current(),this.type=u||null,this.state=p};function Da(a,u,p,m){var v=a.doc,_=v.mode,E;u=Vt(v,u);var T=St(v,u.line),I=so(a,u.line,p),H=new jn(T.text,a.options.tabSize,I),ie;for(m&&(ie=[]);(m||H.pos<u.ch)&&!H.eol();)H.start=H.pos,E=ao(_,H,I.state),m&&ie.push(new yi(H,E,qi(v.mode,I.state)));return m?ie:new yi(H,E,I.state)}function Zr(a,u){if(a)for(;;){var p=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!p)break;a=a.slice(0,p.index)+a.slice(p.index+p[0].length);var m=p[1]?"bgClass":"textClass";u[m]==null?u[m]=p[2]:new RegExp("(?:^|\\s)"+p[2]+"(?:$|\\s)").test(u[m])||(u[m]+=" "+p[2])}return a}function Ds(a,u,p,m,v,_,E){var T=p.flattenSpans;T==null&&(T=a.options.flattenSpans);var I=0,H=null,ie=new jn(u,a.options.tabSize,m),le,Ce=a.options.addModeClass&&[null];for(u==""&&Zr(Is(p,m.state),_);!ie.eol();){if(ie.pos>a.options.maxHighlightLength?(T=!1,E&&Ps(a,u,m,ie.pos),ie.pos=u.length,le=null):le=Zr(ao(p,ie,m.state,Ce),_),Ce){var ye=Ce[0].name;ye&&(le="m-"+(le?ye+" "+le:ye))}if(!T||H!=le){for(;I<ie.start;)I=Math.min(ie.start,I+5e3),v(I,H);H=le}ie.start=ie.pos}for(;I<ie.pos;){var Ve=Math.min(ie.pos,I+5e3);v(Ve,H),I=Ve}}function eh(a,u,p){for(var m,v,_=a.doc,E=p?-1:u-(a.doc.mode.innerMode?1e3:100),T=u;T>E;--T){if(T<=_.first)return _.first;var I=St(_,T-1),H=I.stateAfter;if(H&&(!p||T+(H instanceof wi?H.lookAhead:0)<=_.modeFrontier))return T;var ie=Ue(I.text,null,a.options.tabSize);(v==null||m>ie)&&(v=T-1,m=ie)}return v}function Tl(a,u){if(a.modeFrontier=Math.min(a.modeFrontier,u),!(a.highlightFrontier<u-10)){for(var p=a.first,m=u-1;m>p;m--){var v=St(a,m).stateAfter;if(v&&(!(v instanceof wi)||m+v.lookAhead<u)){p=m+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,p)}}var Sc=!1,vo=!1;function Xs(){Sc=!0}function Rs(){vo=!0}function Ra(a,u,p){this.marker=a,this.from=u,this.to=p}function Qs(a,u){if(a)for(var p=0;p<a.length;++p){var m=a[p];if(m.marker==u)return m}}function ea(a,u){for(var p,m=0;m<a.length;++m)a[m]!=u&&(p||(p=[])).push(a[m]);return p}function th(a,u,p){var m=p&&window.WeakSet&&(p.markedSpans||(p.markedSpans=new WeakSet));m&&a.markedSpans&&m.has(a.markedSpans)?a.markedSpans.push(u):(a.markedSpans=a.markedSpans?a.markedSpans.concat([u]):[u],m&&m.add(a.markedSpans)),u.marker.attachLine(a)}function Tc(a,u,p){var m;if(a)for(var v=0;v<a.length;++v){var _=a[v],E=_.marker,T=_.from==null||(E.inclusiveLeft?_.from<=u:_.from<u);if(T||_.from==u&&E.type=="bookmark"&&(!p||!_.marker.insertLeft)){var I=_.to==null||(E.inclusiveRight?_.to>=u:_.to>u);(m||(m=[])).push(new Ra(E,_.from,I?null:_.to))}}return m}function Fu(a,u,p){var m;if(a)for(var v=0;v<a.length;++v){var _=a[v],E=_.marker,T=_.to==null||(E.inclusiveRight?_.to>=u:_.to>u);if(T||_.from==u&&E.type=="bookmark"&&(!p||_.marker.insertLeft)){var I=_.from==null||(E.inclusiveLeft?_.from<=u:_.from<u);(m||(m=[])).push(new Ra(E,I?null:_.from-u,_.to==null?null:_.to-u))}}return m}function Oa(a,u){if(u.full)return null;var p=ni(a,u.from.line)&&St(a,u.from.line).markedSpans,m=ni(a,u.to.line)&&St(a,u.to.line).markedSpans;if(!p&&!m)return null;var v=u.from.ch,_=u.to.ch,E=Rt(u.from,u.to)==0,T=Tc(p,v,E),I=Fu(m,_,E),H=u.text.length==1,ie=ct(u.text).length+(H?v:0);if(T)for(var le=0;le<T.length;++le){var Ce=T[le];if(Ce.to==null){var ye=Qs(I,Ce.marker);ye?H&&(Ce.to=ye.to==null?null:ye.to+ie):Ce.to=v}}if(I)for(var Ve=0;Ve<I.length;++Ve){var qe=I[Ve];if(qe.to!=null&&(qe.to+=ie),qe.from==null){var Qe=Qs(T,qe.marker);Qe||(qe.from=ie,H&&(T||(T=[])).push(qe))}else qe.from+=ie,H&&(T||(T=[])).push(qe)}T&&(T=Mu(T)),I&&I!=T&&(I=Mu(I));var ot=[T];if(!H){var dt=u.text.length-2,tt;if(dt>0&&T)for(var bt=0;bt<T.length;++bt)T[bt].to==null&&(tt||(tt=[])).push(new Ra(T[bt].marker,null,null));for(var Mt=0;Mt<dt;++Mt)ot.push(tt);ot.push(I)}return ot}function Mu(a){for(var u=0;u<a.length;++u){var p=a[u];p.from!=null&&p.from==p.to&&p.marker.clearWhenEmpty!==!1&&a.splice(u--,1)}return a.length?a:null}function nh(a,u,p){var m=null;if(a.iter(u.line,p.line+1,function(ye){if(ye.markedSpans)for(var Ve=0;Ve<ye.markedSpans.length;++Ve){var qe=ye.markedSpans[Ve].marker;qe.readOnly&&(!m||R(m,qe)==-1)&&(m||(m=[])).push(qe)}}),!m)return null;for(var v=[{from:u,to:p}],_=0;_<m.length;++_)for(var E=m[_],T=E.find(0),I=0;I<v.length;++I){var H=v[I];if(!(Rt(H.to,T.from)<0||Rt(H.from,T.to)>0)){var ie=[I,1],le=Rt(H.from,T.from),Ce=Rt(H.to,T.to);(le<0||!E.inclusiveLeft&&!le)&&ie.push({from:H.from,to:T.from}),(Ce>0||!E.inclusiveRight&&!Ce)&&ie.push({from:T.to,to:H.to}),v.splice.apply(v,ie),I+=ie.length-3}}return v}function Fa(a){var u=a.markedSpans;if(u){for(var p=0;p<u.length;++p)u[p].marker.detachLine(a);a.markedSpans=null}}function qn(a,u){if(u){for(var p=0;p<u.length;++p)u[p].marker.attachLine(a);a.markedSpans=u}}function rs(a){return a.inclusiveLeft?-1:0}function os(a){return a.inclusiveRight?1:0}function Ac(a,u){var p=a.lines.length-u.lines.length;if(p!=0)return p;var m=a.find(),v=u.find(),_=Rt(m.from,v.from)||rs(a)-rs(u);if(_)return-_;var E=Rt(m.to,v.to)||os(a)-os(u);return E||u.id-a.id}function Ma(a,u){var p=vo&&a.markedSpans,m;if(p)for(var v=void 0,_=0;_<p.length;++_)v=p[_],v.marker.collapsed&&(u?v.from:v.to)==null&&(!m||Ac(m,v.marker)<0)&&(m=v.marker);return m}function Os(a){return Ma(a,!0)}function ss(a){return Ma(a,!1)}function ih(a,u){var p=vo&&a.markedSpans,m;if(p)for(var v=0;v<p.length;++v){var _=p[v];_.marker.collapsed&&(_.from==null||_.from<u)&&(_.to==null||_.to>u)&&(!m||Ac(m,_.marker)<0)&&(m=_.marker)}return m}function Pc(a,u,p,m,v){var _=St(a,u),E=vo&&_.markedSpans;if(E)for(var T=0;T<E.length;++T){var I=E[T];if(I.marker.collapsed){var H=I.marker.find(0),ie=Rt(H.from,p)||rs(I.marker)-rs(v),le=Rt(H.to,m)||os(I.marker)-os(v);if(!(ie>=0&&le<=0||ie<=0&&le>=0)&&(ie<=0&&(I.marker.inclusiveRight&&v.inclusiveLeft?Rt(H.to,p)>=0:Rt(H.to,p)>0)||ie>=0&&(I.marker.inclusiveRight&&v.inclusiveLeft?Rt(H.from,m)<=0:Rt(H.from,m)<0)))return!0}}}function Yr(a){for(var u;u=Os(a);)a=u.find(-1,!0).line;return a}function Lu(a){for(var u;u=ss(a);)a=u.find(1,!0).line;return a}function Ic(a){for(var u,p;u=ss(a);)a=u.find(1,!0).line,(p||(p=[])).push(a);return p}function La(a,u){var p=St(a,u),m=Yr(p);return p==m?u:Xt(m)}function Dc(a,u){if(u>a.lastLine())return u;var p=St(a,u),m;if(!tr(a,p))return u;for(;m=ss(p);)p=m.find(1,!0).line;return Xt(p)+1}function tr(a,u){var p=vo&&u.markedSpans;if(p){for(var m=void 0,v=0;v<p.length;++v)if(m=p[v],!!m.marker.collapsed){if(m.from==null)return!0;if(!m.marker.widgetNode&&m.from==0&&m.marker.inclusiveLeft&&ta(a,u,m))return!0}}}function ta(a,u,p){if(p.to==null){var m=p.marker.find(1,!0);return ta(a,m.line,Qs(m.line.markedSpans,p.marker))}if(p.marker.inclusiveRight&&p.to==u.text.length)return!0;for(var v=void 0,_=0;_<u.markedSpans.length;++_)if(v=u.markedSpans[_],v.marker.collapsed&&!v.marker.widgetNode&&v.from==p.to&&(v.to==null||v.to!=p.from)&&(v.marker.inclusiveLeft||p.marker.inclusiveRight)&&ta(a,u,v))return!0}function lo(a){a=Yr(a);for(var u=0,p=a.parent,m=0;m<p.lines.length;++m){var v=p.lines[m];if(v==a)break;u+=v.height}for(var _=p.parent;_;p=_,_=p.parent)for(var E=0;E<_.children.length;++E){var T=_.children[E];if(T==p)break;u+=T.height}return u}function Ba(a){if(a.height==0)return 0;for(var u=a.text.length,p,m=a;p=Os(m);){var v=p.find(0,!0);m=v.from.line,u+=v.from.ch-v.to.ch}for(m=a;p=ss(m);){var _=p.find(0,!0);u-=m.text.length-_.from.ch,m=_.to.line,u+=m.text.length-_.to.ch}return u}function Al(a){var u=a.display,p=a.doc;u.maxLine=St(p,p.first),u.maxLineLength=Ba(u.maxLine),u.maxLineChanged=!0,p.iter(function(m){var v=Ba(m);v>u.maxLineLength&&(u.maxLineLength=v,u.maxLine=m)})}var Fs=function(a,u,p){this.text=a,qn(this,u),this.height=p?p(this):1};Fs.prototype.lineNo=function(){return Xt(this)},Ri(Fs);function Rc(a,u,p,m){a.text=u,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),a.order!=null&&(a.order=null),Fa(a),qn(a,p);var v=m?m(a):1;v!=a.height&&Gi(a,v)}function Oc(a){a.parent=null,Fa(a)}var Fc={},Bu={};function Pl(a,u){if(!a||/^\s*$/.test(a))return null;var p=u.addModeClass?Bu:Fc;return p[a]||(p[a]=a.replace(/\S+/g,"cm-$&"))}function Il(a,u){var p=ae("span",null,null,g?"padding-right: .1px":null),m={pre:ae("pre",[p],"CodeMirror-line"),content:p,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:a.getOption("lineWrapping")};u.measure={};for(var v=0;v<=(u.rest?u.rest.length:0);v++){var _=v?u.rest[v-1]:u.line,E=void 0;m.pos=0,m.addToken=na,Tt(a.display.measure)&&(E=rt(_,a.doc.direction))&&(m.addToken=Dl(m.addToken,E)),m.map=[];var T=u!=a.display.externalMeasured&&Xt(_);Na(_,m,Vo(a,_,T)),_.styleClasses&&(_.styleClasses.bgClass&&(m.bgClass=wt(_.styleClasses.bgClass,m.bgClass||"")),_.styleClasses.textClass&&(m.textClass=wt(_.styleClasses.textClass,m.textClass||""))),m.map.length==0&&m.map.push(0,0,m.content.appendChild(He(a.display.measure))),v==0?(u.measure.map=m.map,u.measure.cache={}):((u.measure.maps||(u.measure.maps=[])).push(m.map),(u.measure.caches||(u.measure.caches=[])).push({}))}if(g){var I=m.content.lastChild;(/\bcm-tab\b/.test(I.className)||I.querySelector&&I.querySelector(".cm-tab"))&&(m.content.className="cm-tab-wrap-hack")}return ln(a,"renderLine",a,u.line,m.pre),m.pre.className&&(m.textClass=wt(m.pre.className,m.textClass||"")),m}function Nu(a){var u=re("span","•","cm-invalidchar");return u.title="\\u"+a.charCodeAt(0).toString(16),u.setAttribute("aria-label",u.title),u}function na(a,u,p,m,v,_,E){if(u){var T=a.splitSpaces?Vu(u,a.trailingSpace):u,I=a.cm.state.specialChars,H=!1,ie;if(!I.test(u))a.col+=u.length,ie=document.createTextNode(T),a.map.push(a.pos,a.pos+u.length,ie),c&&h<9&&(H=!0),a.pos+=u.length;else{ie=document.createDocumentFragment();for(var le=0;;){I.lastIndex=le;var Ce=I.exec(u),ye=Ce?Ce.index-le:u.length-le;if(ye){var Ve=document.createTextNode(T.slice(le,le+ye));c&&h<9?ie.appendChild(re("span",[Ve])):ie.appendChild(Ve),a.map.push(a.pos,a.pos+ye,Ve),a.col+=ye,a.pos+=ye}if(!Ce)break;le+=ye+1;var qe=void 0;if(Ce[0]=="	"){var Qe=a.cm.options.tabSize,ot=Qe-a.col%Qe;qe=ie.appendChild(re("span",jt(ot),"cm-tab")),qe.setAttribute("role","presentation"),qe.setAttribute("cm-text","	"),a.col+=ot}else Ce[0]=="\r"||Ce[0]==`
`?(qe=ie.appendChild(re("span",Ce[0]=="\r"?"␍":"␤","cm-invalidchar")),qe.setAttribute("cm-text",Ce[0]),a.col+=1):(qe=a.cm.options.specialCharPlaceholder(Ce[0]),qe.setAttribute("cm-text",Ce[0]),c&&h<9?ie.appendChild(re("span",[qe])):ie.appendChild(qe),a.col+=1);a.map.push(a.pos,a.pos+1,qe),a.pos++}}if(a.trailingSpace=T.charCodeAt(u.length-1)==32,p||m||v||H||_||E){var dt=p||"";m&&(dt+=m),v&&(dt+=v);var tt=re("span",[ie],dt,_);if(E)for(var bt in E)E.hasOwnProperty(bt)&&bt!="style"&&bt!="class"&&tt.setAttribute(bt,E[bt]);return a.content.appendChild(tt)}a.content.appendChild(ie)}}function Vu(a,u){if(a.length>1&&!/  /.test(a))return a;for(var p=u,m="",v=0;v<a.length;v++){var _=a.charAt(v);_==" "&&p&&(v==a.length-1||a.charCodeAt(v+1)==32)&&(_=" "),m+=_,p=_==" "}return m}function Dl(a,u){return function(p,m,v,_,E,T,I){v=v?v+" cm-force-border":"cm-force-border";for(var H=p.pos,ie=H+m.length;;){for(var le=void 0,Ce=0;Ce<u.length&&(le=u[Ce],!(le.to>H&&le.from<=H));Ce++);if(le.to>=ie)return a(p,m,v,_,E,T,I);a(p,m.slice(0,le.to-H),v,_,null,T,I),_=null,m=m.slice(le.to-H),H=le.to}}}function zo(a,u,p,m){var v=!m&&p.widgetNode;v&&a.map.push(a.pos,a.pos+u,v),!m&&a.cm.display.input.needsContentAttribute&&(v||(v=a.content.appendChild(document.createElement("span"))),v.setAttribute("cm-marker",p.id)),v&&(a.cm.display.input.setUneditable(v),a.content.appendChild(v)),a.pos+=u,a.trailingSpace=!1}function Na(a,u,p){var m=a.markedSpans,v=a.text,_=0;if(!m){for(var E=1;E<p.length;E+=2)u.addToken(u,v.slice(_,_=p[E]),Pl(p[E+1],u.cm.options));return}for(var T=v.length,I=0,H=1,ie="",le,Ce,ye=0,Ve,qe,Qe,ot,dt;;){if(ye==I){Ve=qe=Qe=Ce="",dt=null,ot=null,ye=1/0;for(var tt=[],bt=void 0,Mt=0;Mt<m.length;++Mt){var Dt=m[Mt],en=Dt.marker;if(en.type=="bookmark"&&Dt.from==I&&en.widgetNode)tt.push(en);else if(Dt.from<=I&&(Dt.to==null||Dt.to>I||en.collapsed&&Dt.to==I&&Dt.from==I)){if(Dt.to!=null&&Dt.to!=I&&ye>Dt.to&&(ye=Dt.to,qe=""),en.className&&(Ve+=" "+en.className),en.css&&(Ce=(Ce?Ce+";":"")+en.css),en.startStyle&&Dt.from==I&&(Qe+=" "+en.startStyle),en.endStyle&&Dt.to==ye&&(bt||(bt=[])).push(en.endStyle,Dt.to),en.title&&((dt||(dt={})).title=en.title),en.attributes)for(var Mn in en.attributes)(dt||(dt={}))[Mn]=en.attributes[Mn];en.collapsed&&(!ot||Ac(ot.marker,en)<0)&&(ot=Dt)}else Dt.from>I&&ye>Dt.from&&(ye=Dt.from)}if(bt)for(var Si=0;Si<bt.length;Si+=2)bt[Si+1]==ye&&(qe+=" "+bt[Si]);if(!ot||ot.from==I)for(var Gn=0;Gn<tt.length;++Gn)zo(u,0,tt[Gn]);if(ot&&(ot.from||0)==I){if(zo(u,(ot.to==null?T+1:ot.to)-I,ot.marker,ot.from==null),ot.to==null)return;ot.to==I&&(ot=!1)}}if(I>=T)break;for(var or=Math.min(T,ye);;){if(ie){var sr=I+ie.length;if(!ot){var Ti=sr>or?ie.slice(0,or-I):ie;u.addToken(u,Ti,le?le+Ve:Ve,Qe,I+Ti.length==ye?qe:"",Ce,dt)}if(sr>=or){ie=ie.slice(or-I),I=or;break}I=sr,Qe=""}ie=v.slice(_,_=p[H++]),le=Pl(p[H++],u.cm.options)}}}function ia(a,u,p){this.line=u,this.rest=Ic(u),this.size=this.rest?Xt(ct(this.rest))-p+1:1,this.node=this.text=null,this.hidden=tr(a,u)}function Ho(a,u,p){for(var m=[],v,_=u;_<p;_=v){var E=new ia(a.doc,St(a.doc,_),_);v=_+E.size,m.push(E)}return m}var wo=null;function as(a){wo?wo.ops.push(a):a.ownsGroup=wo={ops:[a],delayedCallbacks:[]}}function Mc(a){var u=a.delayedCallbacks,p=0;do{for(;p<u.length;p++)u[p].call(null);for(var m=0;m<a.ops.length;m++){var v=a.ops[m];if(v.cursorActivityHandlers)for(;v.cursorActivityCalled<v.cursorActivityHandlers.length;)v.cursorActivityHandlers[v.cursorActivityCalled++].call(null,v.cm)}}while(p<u.length)}function yo(a,u){var p=a.ownsGroup;if(p)try{Mc(p)}finally{wo=null,u(p)}}var ra=null;function fi(a,u){var p=dn(a,u);if(p.length){var m=Array.prototype.slice.call(arguments,2),v;wo?v=wo.delayedCallbacks:ra?v=ra:(v=ra=[],setTimeout(rh,0));for(var _=function(T){v.push(function(){return p[T].apply(null,m)})},E=0;E<p.length;++E)_(E)}}function rh(){var a=ra;ra=null;for(var u=0;u<a.length;++u)a[u]()}function Va(a,u,p,m){for(var v=0;v<u.changes.length;v++){var _=u.changes[v];_=="text"?Lc(a,u):_=="gutter"?Bc(a,u,p,m):_=="class"?sa(a,u):_=="widget"&&Rl(a,u,m)}u.changes=null}function za(a){return a.node==a.text&&(a.node=re("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),c&&h<8&&(a.node.style.zIndex=2)),a.node}function oa(a,u){var p=u.bgClass?u.bgClass+" "+(u.line.bgClass||""):u.line.bgClass;if(p&&(p+=" CodeMirror-linebackground"),u.background)p?u.background.className=p:(u.background.parentNode.removeChild(u.background),u.background=null);else if(p){var m=za(u);u.background=m.insertBefore(re("div",null,p),m.firstChild),a.display.input.setUneditable(u.background)}}function ls(a,u){var p=a.display.externalMeasured;return p&&p.line==u.line?(a.display.externalMeasured=null,u.measure=p.measure,p.built):Il(a,u)}function Lc(a,u){var p=u.text.className,m=ls(a,u);u.text==u.node&&(u.node=m.pre),u.text.parentNode.replaceChild(m.pre,u.text),u.text=m.pre,m.bgClass!=u.bgClass||m.textClass!=u.textClass?(u.bgClass=m.bgClass,u.textClass=m.textClass,sa(a,u)):p&&(u.text.className=p)}function sa(a,u){oa(a,u),u.line.wrapClass?za(u).className=u.line.wrapClass:u.node!=u.text&&(u.node.className="");var p=u.textClass?u.textClass+" "+(u.line.textClass||""):u.line.textClass;u.text.className=p||""}function Bc(a,u,p,m){if(u.gutter&&(u.node.removeChild(u.gutter),u.gutter=null),u.gutterBackground&&(u.node.removeChild(u.gutterBackground),u.gutterBackground=null),u.line.gutterClass){var v=za(u);u.gutterBackground=re("div",null,"CodeMirror-gutter-background "+u.line.gutterClass,"left: "+(a.options.fixedGutter?m.fixedPos:-m.gutterTotalWidth)+"px; width: "+m.gutterTotalWidth+"px"),a.display.input.setUneditable(u.gutterBackground),v.insertBefore(u.gutterBackground,u.text)}var _=u.line.gutterMarkers;if(a.options.lineNumbers||_){var E=za(u),T=u.gutter=re("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?m.fixedPos:-m.gutterTotalWidth)+"px");if(T.setAttribute("aria-hidden","true"),a.display.input.setUneditable(T),E.insertBefore(T,u.text),u.line.gutterClass&&(T.className+=" "+u.line.gutterClass),a.options.lineNumbers&&(!_||!_["CodeMirror-linenumbers"])&&(u.lineNumber=T.appendChild(re("div",hr(a.options,p),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+m.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),_)for(var I=0;I<a.display.gutterSpecs.length;++I){var H=a.display.gutterSpecs[I].className,ie=_.hasOwnProperty(H)&&_[H];ie&&T.appendChild(re("div",[ie],"CodeMirror-gutter-elt","left: "+m.gutterLeft[H]+"px; width: "+m.gutterWidth[H]+"px"))}}}function Rl(a,u,p){u.alignable&&(u.alignable=null);for(var m=fe("CodeMirror-linewidget"),v=u.node.firstChild,_=void 0;v;v=_)_=v.nextSibling,m.test(v.className)&&u.node.removeChild(v);wr(a,u,p)}function Ol(a,u,p,m){var v=ls(a,u);return u.text=u.node=v.pre,v.bgClass&&(u.bgClass=v.bgClass),v.textClass&&(u.textClass=v.textClass),sa(a,u),Bc(a,u,p,m),wr(a,u,m),u.node}function wr(a,u,p){if(Nc(a,u.line,u,p,!0),u.rest)for(var m=0;m<u.rest.length;m++)Nc(a,u.rest[m],u,p,!1)}function Nc(a,u,p,m,v){if(u.widgets)for(var _=za(p),E=0,T=u.widgets;E<T.length;++E){var I=T[E],H=re("div",[I.node],"CodeMirror-linewidget"+(I.className?" "+I.className:""));I.handleMouseEvents||H.setAttribute("cm-ignore-events","true"),tn(I,H,p,m),a.display.input.setUneditable(H),v&&I.above?_.insertBefore(H,p.gutter||p.text):_.appendChild(H),fi(I,"redraw")}}function tn(a,u,p,m){if(a.noHScroll){(p.alignable||(p.alignable=[])).push(u);var v=m.wrapperWidth;u.style.left=m.fixedPos+"px",a.coverGutter||(v-=m.gutterTotalWidth,u.style.paddingLeft=m.gutterTotalWidth+"px"),u.style.width=v+"px"}a.coverGutter&&(u.style.zIndex=5,u.style.position="relative",a.noHScroll||(u.style.marginLeft=-m.gutterTotalWidth+"px"))}function G(a){if(a.height!=null)return a.height;var u=a.doc.cm;if(!u)return 0;if(!Z(document.body,a.node)){var p="position: relative;";a.coverGutter&&(p+="margin-left: -"+u.display.gutters.offsetWidth+"px;"),a.noHScroll&&(p+="width: "+u.display.wrapper.clientWidth+"px;"),Ie(u.display.measure,re("div",[a.node],null,p))}return a.height=a.node.parentNode.offsetHeight}function A(a,u){for(var p=gr(u);p!=a.wrapper;p=p.parentNode)if(!p||p.nodeType==1&&p.getAttribute("cm-ignore-events")=="true"||p.parentNode==a.sizer&&p!=a.mover)return!0}function F(a){return a.lineSpace.offsetTop}function N(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function J(a){if(a.cachedPaddingH)return a.cachedPaddingH;var u=Ie(a.measure,re("pre","x","CodeMirror-line-like")),p=window.getComputedStyle?window.getComputedStyle(u):u.currentStyle,m={left:parseInt(p.paddingLeft),right:parseInt(p.paddingRight)};return!isNaN(m.left)&&!isNaN(m.right)&&(a.cachedPaddingH=m),m}function ee(a){return W-a.display.nativeBarWidth}function me(a){return a.display.scroller.clientWidth-ee(a)-a.display.barWidth}function Le(a){return a.display.scroller.clientHeight-ee(a)-a.display.barHeight}function Ze(a,u,p){var m=a.options.lineWrapping,v=m&&me(a);if(!u.measure.heights||m&&u.measure.width!=v){var _=u.measure.heights=[];if(m){u.measure.width=v;for(var E=u.text.firstChild.getClientRects(),T=0;T<E.length-1;T++){var I=E[T],H=E[T+1];Math.abs(I.bottom-H.bottom)>2&&_.push((I.bottom+H.top)/2-p.top)}}_.push(p.bottom-p.top)}}function Ye(a,u,p){if(a.line==u)return{map:a.measure.map,cache:a.measure.cache};if(a.rest){for(var m=0;m<a.rest.length;m++)if(a.rest[m]==u)return{map:a.measure.maps[m],cache:a.measure.caches[m]};for(var v=0;v<a.rest.length;v++)if(Xt(a.rest[v])>p)return{map:a.measure.maps[v],cache:a.measure.caches[v],before:!0}}}function pt(a,u){u=Yr(u);var p=Xt(u),m=a.display.externalMeasured=new ia(a.doc,u,p);m.lineN=p;var v=m.built=Il(a,m);return m.text=v.pre,Ie(a.display.lineMeasure,v.pre),m}function Ot(a,u,p,m){return Ut(a,Pt(a,u),p,m)}function Kt(a,u){if(u>=a.display.viewFrom&&u<a.display.viewTo)return a.display.view[ko(a,u)];var p=a.display.externalMeasured;if(p&&u>=p.lineN&&u<p.lineN+p.size)return p}function Pt(a,u){var p=Xt(u),m=Kt(a,p);m&&!m.text?m=null:m&&m.changes&&(Va(a,m,p,hs(a)),a.curOp.forceUpdate=!0),m||(m=pt(a,u));var v=Ye(m,u,p);return{line:u,view:m,rect:null,map:v.map,cache:v.cache,before:v.before,hasHeights:!1}}function Ut(a,u,p,m,v){u.before&&(p=-1);var _=p+(m||""),E;return u.cache.hasOwnProperty(_)?E=u.cache[_]:(u.rect||(u.rect=u.view.text.getBoundingClientRect()),u.hasHeights||(Ze(a,u.view,u.rect),u.hasHeights=!0),E=nn(a,u,p,m),E.bogus||(u.cache[_]=E)),{left:E.left,right:E.right,top:v?E.rtop:E.top,bottom:v?E.rbottom:E.bottom}}var zt={left:0,right:0,top:0,bottom:0};function Zt(a,u,p){for(var m,v,_,E,T,I,H=0;H<a.length;H+=3)if(T=a[H],I=a[H+1],u<T?(v=0,_=1,E="left"):u<I?(v=u-T,_=v+1):(H==a.length-3||u==I&&a[H+3]>u)&&(_=I-T,v=_-1,u>=I&&(E="right")),v!=null){if(m=a[H+2],T==I&&p==(m.insertLeft?"left":"right")&&(E=p),p=="left"&&v==0)for(;H&&a[H-2]==a[H-3]&&a[H-1].insertLeft;)m=a[(H-=3)+2],E="left";if(p=="right"&&v==I-T)for(;H<a.length-3&&a[H+3]==a[H+4]&&!a[H+5].insertLeft;)m=a[(H+=3)+2],E="right";break}return{node:m,start:v,end:_,collapse:E,coverStart:T,coverEnd:I}}function bn(a,u){var p=zt;if(u=="left")for(var m=0;m<a.length&&(p=a[m]).left==p.right;m++);else for(var v=a.length-1;v>=0&&(p=a[v]).left==p.right;v--);return p}function nn(a,u,p,m){var v=Zt(u.map,p,m),_=v.node,E=v.start,T=v.end,I=v.collapse,H;if(_.nodeType==3){for(var ie=0;ie<4;ie++){for(;E&&ue(u.line.text.charAt(v.coverStart+E));)--E;for(;v.coverStart+T<v.coverEnd&&ue(u.line.text.charAt(v.coverStart+T));)++T;if(c&&h<9&&E==0&&T==v.coverEnd-v.coverStart?H=_.parentNode.getBoundingClientRect():H=bn(pe(_,E,T).getClientRects(),m),H.left||H.right||E==0)break;T=E,E=E-1,I="right"}c&&h<11&&(H=qt(a.display.measure,H))}else{E>0&&(I=m="right");var le;a.options.lineWrapping&&(le=_.getClientRects()).length>1?H=le[m=="right"?le.length-1:0]:H=_.getBoundingClientRect()}if(c&&h<9&&!E&&(!H||!H.left&&!H.right)){var Ce=_.parentNode.getClientRects()[0];Ce?H={left:Ce.left,right:Ce.left+ds(a.display),top:Ce.top,bottom:Ce.bottom}:H=zt}for(var ye=H.top-u.rect.top,Ve=H.bottom-u.rect.top,qe=(ye+Ve)/2,Qe=u.view.measure.heights,ot=0;ot<Qe.length-1&&!(qe<Qe[ot]);ot++);var dt=ot?Qe[ot-1]:0,tt=Qe[ot],bt={left:(I=="right"?H.right:H.left)-u.rect.left,right:(I=="left"?H.left:H.right)-u.rect.left,top:dt,bottom:tt};return!H.left&&!H.right&&(bt.bogus=!0),a.options.singleCursorHeightPerLine||(bt.rtop=ye,bt.rbottom=Ve),bt}function qt(a,u){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Fi(a))return u;var p=screen.logicalXDPI/screen.deviceXDPI,m=screen.logicalYDPI/screen.deviceYDPI;return{left:u.left*p,right:u.right*p,top:u.top*m,bottom:u.bottom*m}}function Un(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var u=0;u<a.rest.length;u++)a.measure.caches[u]={}}function _i(a){a.display.externalMeasure=null,_e(a.display.lineMeasure);for(var u=0;u<a.display.view.length;u++)Un(a.display.view[u])}function ii(a){_i(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function Li(a){return y&&O?-(a.body.getBoundingClientRect().left-parseInt(getComputedStyle(a.body).marginLeft)):a.defaultView.pageXOffset||(a.documentElement||a.body).scrollLeft}function mi(a){return y&&O?-(a.body.getBoundingClientRect().top-parseInt(getComputedStyle(a.body).marginTop)):a.defaultView.pageYOffset||(a.documentElement||a.body).scrollTop}function ki(a){var u=Yr(a),p=u.widgets,m=0;if(p)for(var v=0;v<p.length;++v)p[v].above&&(m+=G(p[v]));return m}function Rn(a,u,p,m,v){if(!v){var _=ki(u);p.top+=_,p.bottom+=_}if(m=="line")return p;m||(m="local");var E=lo(u);if(m=="local"?E+=F(a.display):E-=a.display.viewOffset,m=="page"||m=="window"){var T=a.display.lineSpace.getBoundingClientRect();E+=T.top+(m=="window"?0:mi(z(a)));var I=T.left+(m=="window"?0:Li(z(a)));p.left+=I,p.right+=I}return p.top+=E,p.bottom+=E,p}function co(a,u,p){if(p=="div")return u;var m=u.left,v=u.top;if(p=="page")m-=Li(z(a)),v-=mi(z(a));else if(p=="local"||!p){var _=a.display.sizer.getBoundingClientRect();m+=_.left,v+=_.top}var E=a.display.lineSpace.getBoundingClientRect();return{left:m-E.left,top:v-E.top}}function _n(a,u,p,m,v){return m||(m=St(a.doc,u.line)),Rn(a,m,Ot(a,m,u.ch,v),p)}function pi(a,u,p,m,v,_){m=m||St(a.doc,u.line),v||(v=Pt(a,m));function E(Ve,qe){var Qe=Ut(a,v,Ve,qe?"right":"left",_);return qe?Qe.left=Qe.right:Qe.right=Qe.left,Rn(a,m,Qe,p)}var T=rt(m,a.doc.direction),I=u.ch,H=u.sticky;if(I>=m.text.length?(I=m.text.length,H="before"):I<=0&&(I=0,H="after"),!T)return E(H=="before"?I-1:I,H=="before");function ie(Ve,qe,Qe){var ot=T[qe],dt=ot.level==1;return E(Qe?Ve-1:Ve,dt!=Qe)}var le=ut(T,I,H),Ce=ft,ye=ie(I,le,H=="before");return Ce!=null&&(ye.other=ie(I,Ce,H!="before")),ye}function _o(a,u){var p=0;u=Vt(a.doc,u),a.options.lineWrapping||(p=ds(a.display)*u.ch);var m=St(a.doc,u.line),v=lo(m)+F(a.display);return{left:p,right:p,top:v,bottom:v+m.height}}function cs(a,u,p,m,v){var _=Ke(a,u,p);return _.xRel=v,m&&(_.outside=m),_}function ri(a,u,p){var m=a.doc;if(p+=a.display.viewOffset,p<0)return cs(m.first,0,null,-1,-1);var v=qr(m,p),_=m.first+m.size-1;if(v>_)return cs(m.first+m.size-1,St(m,_).text.length,null,1,1);u<0&&(u=0);for(var E=St(m,v);;){var T=Jr(a,E,v,u,p),I=ih(E,T.ch+(T.xRel>0||T.outside>0?1:0));if(!I)return T;var H=I.find(1);if(H.line==v)return H;E=St(m,v=H.line)}}function aa(a,u,p,m){m-=ki(u);var v=u.text.length,_=et(function(E){return Ut(a,p,E-1).bottom<=m},v,0);return v=et(function(E){return Ut(a,p,E).top>m},_,v),{begin:_,end:v}}function uo(a,u,p,m){p||(p=Pt(a,u));var v=Rn(a,u,Ut(a,p,m),"line").top;return aa(a,u,p,v)}function Ki(a,u,p,m){return a.bottom<=p?!1:a.top>p?!0:(m?a.left:a.right)>u}function Jr(a,u,p,m,v){v-=lo(u);var _=Pt(a,u),E=ki(u),T=0,I=u.text.length,H=!0,ie=rt(u,a.doc.direction);if(ie){var le=(a.options.lineWrapping?yr:us)(a,u,p,_,ie,m,v);H=le.level!=1,T=H?le.from:le.to-1,I=H?le.to:le.from-1}var Ce=null,ye=null,Ve=et(function(Mt){var Dt=Ut(a,_,Mt);return Dt.top+=E,Dt.bottom+=E,Ki(Dt,m,v,!1)?(Dt.top<=v&&Dt.left<=m&&(Ce=Mt,ye=Dt),!0):!1},T,I),qe,Qe,ot=!1;if(ye){var dt=m-ye.left<ye.right-m,tt=dt==H;Ve=Ce+(tt?0:1),Qe=tt?"after":"before",qe=dt?ye.left:ye.right}else{!H&&(Ve==I||Ve==T)&&Ve++,Qe=Ve==0?"after":Ve==u.text.length?"before":Ut(a,_,Ve-(H?1:0)).bottom+E<=v==H?"after":"before";var bt=pi(a,Ke(p,Ve,Qe),"line",u,_);qe=bt.left,ot=v<bt.top?-1:v>=bt.bottom?1:0}return Ve=ve(u.text,Ve,1),cs(p,Ve,Qe,ot,m-qe)}function us(a,u,p,m,v,_,E){var T=et(function(le){var Ce=v[le],ye=Ce.level!=1;return Ki(pi(a,Ke(p,ye?Ce.to:Ce.from,ye?"before":"after"),"line",u,m),_,E,!0)},0,v.length-1),I=v[T];if(T>0){var H=I.level!=1,ie=pi(a,Ke(p,H?I.from:I.to,H?"after":"before"),"line",u,m);Ki(ie,_,E,!0)&&ie.top>E&&(I=v[T-1])}return I}function yr(a,u,p,m,v,_,E){var T=aa(a,u,m,E),I=T.begin,H=T.end;/\s/.test(u.text.charAt(H-1))&&H--;for(var ie=null,le=null,Ce=0;Ce<v.length;Ce++){var ye=v[Ce];if(!(ye.from>=H||ye.to<=I)){var Ve=ye.level!=1,qe=Ut(a,m,Ve?Math.min(H,ye.to)-1:Math.max(I,ye.from)).right,Qe=qe<_?_-qe+1e9:qe-_;(!ie||le>Qe)&&(ie=ye,le=Qe)}}return ie||(ie=v[v.length-1]),ie.from<I&&(ie={from:I,to:ie.to,level:ie.level}),ie.to>H&&(ie={from:ie.from,to:H,level:ie.level}),ie}var Bi;function ho(a){if(a.cachedTextHeight!=null)return a.cachedTextHeight;if(Bi==null){Bi=re("pre",null,"CodeMirror-line-like");for(var u=0;u<49;++u)Bi.appendChild(document.createTextNode("x")),Bi.appendChild(re("br"));Bi.appendChild(document.createTextNode("x"))}Ie(a.measure,Bi);var p=Bi.offsetHeight/50;return p>3&&(a.cachedTextHeight=p),_e(a.measure),p||1}function ds(a){if(a.cachedCharWidth!=null)return a.cachedCharWidth;var u=re("span","xxxxxxxxxx"),p=re("pre",[u],"CodeMirror-line-like");Ie(a.measure,p);var m=u.getBoundingClientRect(),v=(m.right-m.left)/10;return v>2&&(a.cachedCharWidth=v),v||10}function hs(a){for(var u=a.display,p={},m={},v=u.gutters.clientLeft,_=u.gutters.firstChild,E=0;_;_=_.nextSibling,++E){var T=a.display.gutterSpecs[E].className;p[T]=_.offsetLeft+_.clientLeft+v,m[T]=_.clientWidth}return{fixedPos:la(u),gutterTotalWidth:u.gutters.offsetWidth,gutterLeft:p,gutterWidth:m,wrapperWidth:u.wrapper.clientWidth}}function la(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function fs(a){var u=ho(a.display),p=a.options.lineWrapping,m=p&&Math.max(5,a.display.scroller.clientWidth/ds(a.display)-3);return function(v){if(tr(a.doc,v))return 0;var _=0;if(v.widgets)for(var E=0;E<v.widgets.length;E++)v.widgets[E].height&&(_+=v.widgets[E].height);return p?_+(Math.ceil(v.text.length/m)||1)*u:_+u}}function Fl(a){var u=a.doc,p=fs(a);u.iter(function(m){var v=p(m);v!=m.height&&Gi(m,v)})}function Mr(a,u,p,m){var v=a.display;if(!p&&gr(u).getAttribute("cm-not-content")=="true")return null;var _,E,T=v.lineSpace.getBoundingClientRect();try{_=u.clientX-T.left,E=u.clientY-T.top}catch{return null}var I=ri(a,_,E),H;if(m&&I.xRel>0&&(H=St(a.doc,I.line).text).length==I.ch){var ie=Ue(H,H.length,a.options.tabSize)-H.length;I=Ke(I.line,Math.max(0,Math.round((_-J(a.display).left)/ds(a.display))-ie))}return I}function ko(a,u){if(u>=a.display.viewTo||(u-=a.display.viewFrom,u<0))return null;for(var p=a.display.view,m=0;m<p.length;m++)if(u-=p[m].size,u<0)return m}function Zi(a,u,p,m){u==null&&(u=a.doc.first),p==null&&(p=a.doc.first+a.doc.size),m||(m=0);var v=a.display;if(m&&p<v.viewTo&&(v.updateLineNumbers==null||v.updateLineNumbers>u)&&(v.updateLineNumbers=u),a.curOp.viewChanged=!0,u>=v.viewTo)vo&&La(a.doc,u)<v.viewTo&&Xr(a);else if(p<=v.viewFrom)vo&&Dc(a.doc,p+m)>v.viewFrom?Xr(a):(v.viewFrom+=m,v.viewTo+=m);else if(u<=v.viewFrom&&p>=v.viewTo)Xr(a);else if(u<=v.viewFrom){var _=_r(a,p,p+m,1);_?(v.view=v.view.slice(_.index),v.viewFrom=_.lineN,v.viewTo+=m):Xr(a)}else if(p>=v.viewTo){var E=_r(a,u,u,-1);E?(v.view=v.view.slice(0,E.index),v.viewTo=E.lineN):Xr(a)}else{var T=_r(a,u,u,-1),I=_r(a,p,p+m,1);T&&I?(v.view=v.view.slice(0,T.index).concat(Ho(a,T.lineN,I.lineN)).concat(v.view.slice(I.index)),v.viewTo+=m):Xr(a)}var H=v.externalMeasured;H&&(p<H.lineN?H.lineN+=m:u<H.lineN+H.size&&(v.externalMeasured=null))}function fr(a,u,p){a.curOp.viewChanged=!0;var m=a.display,v=a.display.externalMeasured;if(v&&u>=v.lineN&&u<v.lineN+v.size&&(m.externalMeasured=null),!(u<m.viewFrom||u>=m.viewTo)){var _=m.view[ko(a,u)];if(_.node!=null){var E=_.changes||(_.changes=[]);R(E,p)==-1&&E.push(p)}}}function Xr(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function _r(a,u,p,m){var v=ko(a,u),_,E=a.display.view;if(!vo||p==a.doc.first+a.doc.size)return{index:v,lineN:p};for(var T=a.display.viewFrom,I=0;I<v;I++)T+=E[I].size;if(T!=u){if(m>0){if(v==E.length-1)return null;_=T+E[v].size-u,v++}else _=T-u;u+=_,p+=_}for(;La(a.doc,p)!=p;){if(v==(m<0?0:E.length-1))return null;p+=m*E[v-(m<0?1:0)].size,v+=m}return{index:v,lineN:p}}function Ha(a,u,p){var m=a.display,v=m.view;v.length==0||u>=m.viewTo||p<=m.viewFrom?(m.view=Ho(a,u,p),m.viewFrom=u):(m.viewFrom>u?m.view=Ho(a,u,m.viewFrom).concat(m.view):m.viewFrom<u&&(m.view=m.view.slice(ko(a,u))),m.viewFrom=u,m.viewTo<p?m.view=m.view.concat(Ho(a,m.viewTo,p)):m.viewTo>p&&(m.view=m.view.slice(0,ko(a,p)))),m.viewTo=p}function oh(a){for(var u=a.display.view,p=0,m=0;m<u.length;m++){var v=u[m];!v.hidden&&(!v.node||v.changes)&&++p}return p}function Vc(a){a.display.input.showSelection(a.display.input.prepareSelection())}function nm(a,u){u===void 0&&(u=!0);var p=a.doc,m={},v=m.cursors=document.createDocumentFragment(),_=m.selection=document.createDocumentFragment(),E=a.options.$customCursor;E&&(u=!0);for(var T=0;T<p.sel.ranges.length;T++)if(!(!u&&T==p.sel.primIndex)){var I=p.sel.ranges[T];if(!(I.from().line>=a.display.viewTo||I.to().line<a.display.viewFrom)){var H=I.empty();if(E){var ie=E(a,I);ie&&sh(a,ie,v)}else(H||a.options.showCursorWhenSelecting)&&sh(a,I.head,v);H||Hu(a,I,_)}}return m}function sh(a,u,p){var m=pi(a,u,"div",null,null,!a.options.singleCursorHeightPerLine),v=p.appendChild(re("div"," ","CodeMirror-cursor"));if(v.style.left=m.left+"px",v.style.top=m.top+"px",v.style.height=Math.max(0,m.bottom-m.top)*a.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(a.getWrapperElement().className)){var _=_n(a,u,"div",null,null),E=_.right-_.left;v.style.width=(E>0?E:a.defaultCharWidth())+"px"}if(m.other){var T=p.appendChild(re("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));T.style.display="",T.style.left=m.other.left+"px",T.style.top=m.other.top+"px",T.style.height=(m.other.bottom-m.other.top)*.85+"px"}}function zu(a,u){return a.top-u.top||a.left-u.left}function Hu(a,u,p){var m=a.display,v=a.doc,_=document.createDocumentFragment(),E=J(a.display),T=E.left,I=Math.max(m.sizerWidth,me(a)-m.sizer.offsetLeft)-E.right,H=v.direction=="ltr";function ie(tt,bt,Mt,Dt){bt<0&&(bt=0),bt=Math.round(bt),Dt=Math.round(Dt),_.appendChild(re("div",null,"CodeMirror-selected","position: absolute; left: "+tt+`px;
                             top: `+bt+"px; width: "+(Mt??I-tt)+`px;
                             height: `+(Dt-bt)+"px"))}function le(tt,bt,Mt){var Dt=St(v,tt),en=Dt.text.length,Mn,Si;function Gn(Ti,Sr){return _n(a,Ke(tt,Ti),"div",Dt,Sr)}function or(Ti,Sr,Ji){var vi=uo(a,Dt,null,Ti),Ai=Sr=="ltr"==(Ji=="after")?"left":"right",d=Ji=="after"?vi.begin:vi.end-(/\s/.test(Dt.text.charAt(vi.end-1))?2:1);return Gn(d,Ai)[Ai]}var sr=rt(Dt,v.direction);return ht(sr,bt||0,Mt??en,function(Ti,Sr,Ji,vi){var Ai=Ji=="ltr",d=Gn(Ti,Ai?"left":"right"),f=Gn(Sr-1,Ai?"right":"left"),w=bt==null&&Ti==0,C=Mt==null&&Sr==en,S=vi==0,B=!sr||vi==sr.length-1;if(f.top-d.top<=3){var j=(H?w:C)&&S,te=(H?C:w)&&B,Re=j?T:(Ai?d:f).left,De=te?I:(Ai?f:d).right;ie(Re,d.top,De-Re,d.bottom)}else{var Je,vt,Gt,wn;Ai?(Je=H&&w&&S?T:d.left,vt=H?I:or(Ti,Ji,"before"),Gt=H?T:or(Sr,Ji,"after"),wn=H&&C&&B?I:f.right):(Je=H?or(Ti,Ji,"before"):T,vt=!H&&w&&S?I:d.right,Gt=!H&&C&&B?T:f.left,wn=H?or(Sr,Ji,"after"):I),ie(Je,d.top,vt-Je,d.bottom),d.bottom<f.top&&ie(T,d.bottom,null,f.top),ie(Gt,f.top,wn-Gt,f.bottom)}(!Mn||zu(d,Mn)<0)&&(Mn=d),zu(f,Mn)<0&&(Mn=f),(!Si||zu(d,Si)<0)&&(Si=d),zu(f,Si)<0&&(Si=f)}),{start:Mn,end:Si}}var Ce=u.from(),ye=u.to();if(Ce.line==ye.line)le(Ce.line,Ce.ch,ye.ch);else{var Ve=St(v,Ce.line),qe=St(v,ye.line),Qe=Yr(Ve)==Yr(qe),ot=le(Ce.line,Ce.ch,Qe?Ve.text.length+1:null).end,dt=le(ye.line,Qe?0:null,ye.ch).start;Qe&&(ot.top<dt.top-2?(ie(ot.right,ot.top,null,ot.bottom),ie(T,dt.top,dt.left,dt.bottom)):ie(ot.right,ot.top,dt.left-ot.right,ot.bottom)),ot.bottom<dt.top&&ie(T,ot.bottom,null,dt.top)}p.appendChild(_)}function ah(a){if(a.state.focused){var u=a.display;clearInterval(u.blinker);var p=!0;u.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?u.blinker=setInterval(function(){a.hasFocus()||Ml(a),u.cursorDiv.style.visibility=(p=!p)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(u.cursorDiv.style.visibility="hidden")}}function im(a){a.hasFocus()||(a.display.input.focus(),a.state.focused||ch(a))}function lh(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,a.state.focused&&Ml(a))},100)}function ch(a,u){a.state.delayingBlurEvent&&!a.state.draggingText&&(a.state.delayingBlurEvent=!1),a.options.readOnly!="nocursor"&&(a.state.focused||(ln(a,"focus",a,u),a.state.focused=!0,je(a.display.wrapper,"CodeMirror-focused"),!a.curOp&&a.display.selForContextMenu!=a.doc.sel&&(a.display.input.reset(),g&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),ah(a))}function Ml(a,u){a.state.delayingBlurEvent||(a.state.focused&&(ln(a,"blur",a,u),a.state.focused=!1,Oe(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function Uu(a){for(var u=a.display,p=u.lineDiv.offsetTop,m=Math.max(0,u.scroller.getBoundingClientRect().top),v=u.lineDiv.getBoundingClientRect().top,_=0,E=0;E<u.view.length;E++){var T=u.view[E],I=a.options.lineWrapping,H=void 0,ie=0;if(!T.hidden){if(v+=T.line.height,c&&h<8){var le=T.node.offsetTop+T.node.offsetHeight;H=le-p,p=le}else{var Ce=T.node.getBoundingClientRect();H=Ce.bottom-Ce.top,!I&&T.text.firstChild&&(ie=T.text.firstChild.getBoundingClientRect().right-Ce.left-1)}var ye=T.line.height-H;if((ye>.005||ye<-.005)&&(v<m&&(_-=ye),Gi(T.line,H),rm(T.line),T.rest))for(var Ve=0;Ve<T.rest.length;Ve++)rm(T.rest[Ve]);if(ie>a.display.sizerWidth){var qe=Math.ceil(ie/ds(a.display));qe>a.display.maxLineLength&&(a.display.maxLineLength=qe,a.display.maxLine=T.line,a.display.maxLineChanged=!0)}}}Math.abs(_)>2&&(u.scroller.scrollTop+=_)}function rm(a){if(a.widgets)for(var u=0;u<a.widgets.length;++u){var p=a.widgets[u],m=p.node.parentNode;m&&(p.height=m.offsetHeight)}}function Wu(a,u,p){var m=p&&p.top!=null?Math.max(0,p.top):a.scroller.scrollTop;m=Math.floor(m-F(a));var v=p&&p.bottom!=null?p.bottom:m+a.wrapper.clientHeight,_=qr(u,m),E=qr(u,v);if(p&&p.ensure){var T=p.ensure.from.line,I=p.ensure.to.line;T<_?(_=T,E=qr(u,lo(St(u,T))+a.wrapper.clientHeight)):Math.min(I,u.lastLine())>=E&&(_=qr(u,lo(St(u,I))-a.wrapper.clientHeight),E=I)}return{from:_,to:Math.max(E,_+1)}}function uh(a,u){if(!Nt(a,"scrollCursorIntoView")){var p=a.display,m=p.sizer.getBoundingClientRect(),v=null,_=p.wrapper.ownerDocument;if(u.top+m.top<0?v=!0:u.bottom+m.top>(_.defaultView.innerHeight||_.documentElement.clientHeight)&&(v=!1),v!=null&&!M){var E=re("div","​",null,`position: absolute;
                         top: `+(u.top-p.viewOffset-F(a.display))+`px;
                         height: `+(u.bottom-u.top+ee(a)+p.barHeight)+`px;
                         left: `+u.left+"px; width: "+Math.max(2,u.right-u.left)+"px;");a.display.lineSpace.appendChild(E),E.scrollIntoView(v),a.display.lineSpace.removeChild(E)}}}function Ll(a,u,p,m){m==null&&(m=0);var v;!a.options.lineWrapping&&u==p&&(p=u.sticky=="before"?Ke(u.line,u.ch+1,"before"):u,u=u.ch?Ke(u.line,u.sticky=="before"?u.ch-1:u.ch,"after"):u);for(var _=0;_<5;_++){var E=!1,T=pi(a,u),I=!p||p==u?T:pi(a,p);v={left:Math.min(T.left,I.left),top:Math.min(T.top,I.top)-m,right:Math.max(T.left,I.left),bottom:Math.max(T.bottom,I.bottom)+m};var H=si(a,v),ie=a.doc.scrollTop,le=a.doc.scrollLeft;if(H.scrollTop!=null&&(ca(a,H.scrollTop),Math.abs(a.doc.scrollTop-ie)>1&&(E=!0)),H.scrollLeft!=null&&(ua(a,H.scrollLeft),Math.abs(a.doc.scrollLeft-le)>1&&(E=!0)),!E)break}return v}function oi(a,u){var p=si(a,u);p.scrollTop!=null&&ca(a,p.scrollTop),p.scrollLeft!=null&&ua(a,p.scrollLeft)}function si(a,u){var p=a.display,m=ho(a.display);u.top<0&&(u.top=0);var v=a.curOp&&a.curOp.scrollTop!=null?a.curOp.scrollTop:p.scroller.scrollTop,_=Le(a),E={};u.bottom-u.top>_&&(u.bottom=u.top+_);var T=a.doc.height+N(p),I=u.top<m,H=u.bottom>T-m;if(u.top<v)E.scrollTop=I?0:u.top;else if(u.bottom>v+_){var ie=Math.min(u.top,(H?T:u.bottom)-_);ie!=v&&(E.scrollTop=ie)}var le=a.options.fixedGutter?0:p.gutters.offsetWidth,Ce=a.curOp&&a.curOp.scrollLeft!=null?a.curOp.scrollLeft:p.scroller.scrollLeft-le,ye=me(a)-p.gutters.offsetWidth,Ve=u.right-u.left>ye;return Ve&&(u.right=u.left+ye),u.left<10?E.scrollLeft=0:u.left<Ce?E.scrollLeft=Math.max(0,u.left+le-(Ve?0:10)):u.right>ye+Ce-3&&(E.scrollLeft=u.right+(Ve?0:10)-ye),E}function ms(a,u){u!=null&&(Ms(a),a.curOp.scrollTop=(a.curOp.scrollTop==null?a.doc.scrollTop:a.curOp.scrollTop)+u)}function Ci(a){Ms(a);var u=a.getCursor();a.curOp.scrollToPos={from:u,to:u,margin:a.options.cursorScrollMargin}}function nr(a,u,p){(u!=null||p!=null)&&Ms(a),u!=null&&(a.curOp.scrollLeft=u),p!=null&&(a.curOp.scrollTop=p)}function Ua(a,u){Ms(a),a.curOp.scrollToPos=u}function Ms(a){var u=a.curOp.scrollToPos;if(u){a.curOp.scrollToPos=null;var p=_o(a,u.from),m=_o(a,u.to);Lr(a,p,m,u.margin)}}function Lr(a,u,p,m){var v=si(a,{left:Math.min(u.left,p.left),top:Math.min(u.top,p.top)-m,right:Math.max(u.right,p.right),bottom:Math.max(u.bottom,p.bottom)+m});nr(a,v.scrollLeft,v.scrollTop)}function ca(a,u){Math.abs(a.doc.scrollTop-u)<2||(r||Bl(a,{top:u}),dh(a,u,!0),r&&Bl(a),kr(a,100))}function dh(a,u,p){u=Math.max(0,Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,u)),!(a.display.scroller.scrollTop==u&&!p)&&(a.doc.scrollTop=u,a.display.scrollbars.setScrollTop(u),a.display.scroller.scrollTop!=u&&(a.display.scroller.scrollTop=u))}function ua(a,u,p,m){u=Math.max(0,Math.min(u,a.display.scroller.scrollWidth-a.display.scroller.clientWidth)),!((p?u==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-u)<2)&&!m)&&(a.doc.scrollLeft=u,Wa(a),a.display.scroller.scrollLeft!=u&&(a.display.scroller.scrollLeft=u),a.display.scrollbars.setScrollLeft(u))}function da(a){var u=a.display,p=u.gutters.offsetWidth,m=Math.round(a.doc.height+N(a.display));return{clientHeight:u.scroller.clientHeight,viewHeight:u.wrapper.clientHeight,scrollWidth:u.scroller.scrollWidth,clientWidth:u.scroller.clientWidth,viewWidth:u.wrapper.clientWidth,barLeft:a.options.fixedGutter?p:0,docHeight:m,scrollHeight:m+ee(a)+u.barHeight,nativeBarWidth:u.nativeBarWidth,gutterWidth:p}}var ha=function(a,u,p){this.cm=p;var m=this.vert=re("div",[re("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),v=this.horiz=re("div",[re("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");m.tabIndex=v.tabIndex=-1,a(m),a(v),Ne(m,"scroll",function(){m.clientHeight&&u(m.scrollTop,"vertical")}),Ne(v,"scroll",function(){v.clientWidth&&u(v.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,c&&h<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ha.prototype.update=function(a){var u=a.scrollWidth>a.clientWidth+1,p=a.scrollHeight>a.clientHeight+1,m=a.nativeBarWidth;if(p){this.vert.style.display="block",this.vert.style.bottom=u?m+"px":"0";var v=a.viewHeight-(u?m:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+v)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(u){this.horiz.style.display="block",this.horiz.style.right=p?m+"px":"0",this.horiz.style.left=a.barLeft+"px";var _=a.viewWidth-a.barLeft-(p?m:0);this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+_)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&a.clientHeight>0&&(m==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:p?m:0,bottom:u?m:0}},ha.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ha.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ha.prototype.zeroWidthHack=function(){var a=K&&!L?"12px":"18px";this.horiz.style.height=this.vert.style.width=a,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new P,this.disableVert=new P},ha.prototype.enableZeroWidthBar=function(a,u,p){a.style.visibility="";function m(){var v=a.getBoundingClientRect(),_=p=="vert"?document.elementFromPoint(v.right-1,(v.top+v.bottom)/2):document.elementFromPoint((v.right+v.left)/2,v.bottom-1);_!=a?a.style.visibility="hidden":u.set(1e3,m)}u.set(1e3,m)},ha.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)};var zc=function(){};zc.prototype.update=function(){return{bottom:0,right:0}},zc.prototype.setScrollLeft=function(){},zc.prototype.setScrollTop=function(){},zc.prototype.clear=function(){};function fa(a,u){u||(u=da(a));var p=a.display.barWidth,m=a.display.barHeight;hh(a,u);for(var v=0;v<4&&p!=a.display.barWidth||m!=a.display.barHeight;v++)p!=a.display.barWidth&&a.options.lineWrapping&&Uu(a),hh(a,da(a)),p=a.display.barWidth,m=a.display.barHeight}function hh(a,u){var p=a.display,m=p.scrollbars.update(u);p.sizer.style.paddingRight=(p.barWidth=m.right)+"px",p.sizer.style.paddingBottom=(p.barHeight=m.bottom)+"px",p.heightForcer.style.borderBottom=m.bottom+"px solid transparent",m.right&&m.bottom?(p.scrollbarFiller.style.display="block",p.scrollbarFiller.style.height=m.bottom+"px",p.scrollbarFiller.style.width=m.right+"px"):p.scrollbarFiller.style.display="",m.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(p.gutterFiller.style.display="block",p.gutterFiller.style.height=m.bottom+"px",p.gutterFiller.style.width=u.gutterWidth+"px"):p.gutterFiller.style.display=""}var fh={native:ha,null:zc};function ju(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&Oe(a.display.wrapper,a.display.scrollbars.addClass)),a.display.scrollbars=new fh[a.options.scrollbarStyle](function(u){a.display.wrapper.insertBefore(u,a.display.scrollbarFiller),Ne(u,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)}),u.setAttribute("cm-not-content","true")},function(u,p){p=="horizontal"?ua(a,u):ca(a,u)},a),a.display.scrollbars.addClass&&je(a.display.wrapper,a.display.scrollbars.addClass)}var Rg=0;function ps(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Rg,markArrays:null},as(a.curOp)}function ma(a){var u=a.curOp;u&&yo(u,function(p){for(var m=0;m<p.ops.length;m++)p.ops[m].cm.curOp=null;om(p)})}function om(a){for(var u=a.ops,p=0;p<u.length;p++)sm(u[p]);for(var m=0;m<u.length;m++)am(u[m]);for(var v=0;v<u.length;v++)lm(u[v]);for(var _=0;_<u.length;_++)Og(u[_]);for(var E=0;E<u.length;E++)Fg(u[E])}function sm(a){var u=a.cm,p=u.display;pa(u),a.updateMaxLine&&Al(u),a.mustUpdate=a.viewChanged||a.forceUpdate||a.scrollTop!=null||a.scrollToPos&&(a.scrollToPos.from.line<p.viewFrom||a.scrollToPos.to.line>=p.viewTo)||p.maxLineChanged&&u.options.lineWrapping,a.update=a.mustUpdate&&new Hc(u,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function am(a){a.updatedDisplay=a.mustUpdate&&Co(a.cm,a.update)}function lm(a){var u=a.cm,p=u.display;a.updatedDisplay&&Uu(u),a.barMeasure=da(u),p.maxLineChanged&&!u.options.lineWrapping&&(a.adjustWidthTo=Ot(u,p.maxLine,p.maxLine.text.length).left+3,u.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(p.scroller.clientWidth,p.sizer.offsetLeft+a.adjustWidthTo+ee(u)+u.display.barWidth),a.maxScrollLeft=Math.max(0,p.sizer.offsetLeft+a.adjustWidthTo-me(u))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=p.input.prepareSelection())}function Og(a){var u=a.cm;a.adjustWidthTo!=null&&(u.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<u.doc.scrollLeft&&ua(u,Math.min(u.display.scroller.scrollLeft,a.maxScrollLeft),!0),u.display.maxLineChanged=!1);var p=a.focus&&a.focus==Pe(ke(u));a.preparedSelection&&u.display.input.showSelection(a.preparedSelection,p),(a.updatedDisplay||a.startHeight!=u.doc.height)&&fa(u,a.barMeasure),a.updatedDisplay&&Vl(u,a.barMeasure),a.selectionChanged&&ah(u),u.state.focused&&a.updateInput&&u.display.input.reset(a.typing),p&&im(a.cm)}function Fg(a){var u=a.cm,p=u.display,m=u.doc;if(a.updatedDisplay&&mh(u,a.update),p.wheelStartX!=null&&(a.scrollTop!=null||a.scrollLeft!=null||a.scrollToPos)&&(p.wheelStartX=p.wheelStartY=null),a.scrollTop!=null&&dh(u,a.scrollTop,a.forceScroll),a.scrollLeft!=null&&ua(u,a.scrollLeft,!0,!0),a.scrollToPos){var v=Ll(u,Vt(m,a.scrollToPos.from),Vt(m,a.scrollToPos.to),a.scrollToPos.margin);uh(u,v)}var _=a.maybeHiddenMarkers,E=a.maybeUnhiddenMarkers;if(_)for(var T=0;T<_.length;++T)_[T].lines.length||ln(_[T],"hide");if(E)for(var I=0;I<E.length;++I)E[I].lines.length&&ln(E[I],"unhide");p.wrapper.offsetHeight&&(m.scrollTop=u.display.scroller.scrollTop),a.changeObjs&&ln(u,"changes",u,a.changeObjs),a.update&&a.update.finish()}function gi(a,u){if(a.curOp)return u();ps(a);try{return u()}finally{ma(a)}}function bi(a,u){return function(){if(a.curOp)return u.apply(a,arguments);ps(a);try{return u.apply(a,arguments)}finally{ma(a)}}}function ir(a){return function(){if(this.curOp)return a.apply(this,arguments);ps(this);try{return a.apply(this,arguments)}finally{ma(this)}}}function Ni(a){return function(){var u=this.cm;if(!u||u.curOp)return a.apply(this,arguments);ps(u);try{return a.apply(this,arguments)}finally{ma(u)}}}function kr(a,u){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(u,Ee($u,a))}function $u(a){var u=a.doc;if(!(u.highlightFrontier>=a.display.viewTo)){var p=+new Date+a.options.workTime,m=so(a,u.highlightFrontier),v=[];u.iter(m.line,Math.min(u.first+u.size,a.display.viewTo+500),function(_){if(m.line>=a.display.viewFrom){var E=_.styles,T=_.text.length>a.options.maxHighlightLength?qi(u.mode,m.state):null,I=vr(a,_,m,!0);T&&(m.state=T),_.styles=I.styles;var H=_.styleClasses,ie=I.classes;ie?_.styleClasses=ie:H&&(_.styleClasses=null);for(var le=!E||E.length!=_.styles.length||H!=ie&&(!H||!ie||H.bgClass!=ie.bgClass||H.textClass!=ie.textClass),Ce=0;!le&&Ce<E.length;++Ce)le=E[Ce]!=_.styles[Ce];le&&v.push(m.line),_.stateAfter=m.save(),m.nextLine()}else _.text.length<=a.options.maxHighlightLength&&Ps(a,_.text,m),_.stateAfter=m.line%5==0?m.save():null,m.nextLine();if(+new Date>p)return kr(a,a.options.workDelay),!0}),u.highlightFrontier=m.line,u.modeFrontier=Math.max(u.modeFrontier,m.line),v.length&&gi(a,function(){for(var _=0;_<v.length;_++)fr(a,v[_],"text")})}}var Hc=function(a,u,p){var m=a.display;this.viewport=u,this.visible=Wu(m,a.doc,u),this.editorIsHidden=!m.wrapper.offsetWidth,this.wrapperHeight=m.wrapper.clientHeight,this.wrapperWidth=m.wrapper.clientWidth,this.oldDisplayWidth=me(a),this.force=p,this.dims=hs(a),this.events=[]};Hc.prototype.signal=function(a,u){Wn(a,u)&&this.events.push(arguments)},Hc.prototype.finish=function(){for(var a=0;a<this.events.length;a++)ln.apply(null,this.events[a])};function pa(a){var u=a.display;!u.scrollbarsClipped&&u.scroller.offsetWidth&&(u.nativeBarWidth=u.scroller.offsetWidth-u.scroller.clientWidth,u.heightForcer.style.height=ee(a)+"px",u.sizer.style.marginBottom=-u.nativeBarWidth+"px",u.sizer.style.borderRightWidth=ee(a)+"px",u.scrollbarsClipped=!0)}function cm(a){if(a.hasFocus())return null;var u=Pe(ke(a));if(!u||!Z(a.display.lineDiv,u))return null;var p={activeElt:u};if(window.getSelection){var m=lt(a).getSelection();m.anchorNode&&m.extend&&Z(a.display.lineDiv,m.anchorNode)&&(p.anchorNode=m.anchorNode,p.anchorOffset=m.anchorOffset,p.focusNode=m.focusNode,p.focusOffset=m.focusOffset)}return p}function um(a){if(!(!a||!a.activeElt||a.activeElt==Pe(at(a.activeElt)))&&(a.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(a.activeElt.nodeName)&&a.anchorNode&&Z(document.body,a.anchorNode)&&Z(document.body,a.focusNode))){var u=a.activeElt.ownerDocument,p=u.defaultView.getSelection(),m=u.createRange();m.setEnd(a.anchorNode,a.anchorOffset),m.collapse(!1),p.removeAllRanges(),p.addRange(m),p.extend(a.focusNode,a.focusOffset)}}function Co(a,u){var p=a.display,m=a.doc;if(u.editorIsHidden)return Xr(a),!1;if(!u.force&&u.visible.from>=p.viewFrom&&u.visible.to<=p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>=p.viewTo)&&p.renderedView==p.view&&oh(a)==0)return!1;Uc(a)&&(Xr(a),u.dims=hs(a));var v=m.first+m.size,_=Math.max(u.visible.from-a.options.viewportMargin,m.first),E=Math.min(v,u.visible.to+a.options.viewportMargin);p.viewFrom<_&&_-p.viewFrom<20&&(_=Math.max(m.first,p.viewFrom)),p.viewTo>E&&p.viewTo-E<20&&(E=Math.min(v,p.viewTo)),vo&&(_=La(a.doc,_),E=Dc(a.doc,E));var T=_!=p.viewFrom||E!=p.viewTo||p.lastWrapHeight!=u.wrapperHeight||p.lastWrapWidth!=u.wrapperWidth;Ha(a,_,E),p.viewOffset=lo(St(a.doc,p.viewFrom)),a.display.mover.style.top=p.viewOffset+"px";var I=oh(a);if(!T&&I==0&&!u.force&&p.renderedView==p.view&&(p.updateLineNumbers==null||p.updateLineNumbers>=p.viewTo))return!1;var H=cm(a);return I>4&&(p.lineDiv.style.display="none"),Uo(a,p.updateLineNumbers,u.dims),I>4&&(p.lineDiv.style.display=""),p.renderedView=p.view,um(H),_e(p.cursorDiv),_e(p.selectionDiv),p.gutters.style.height=p.sizer.style.minHeight=0,T&&(p.lastWrapHeight=u.wrapperHeight,p.lastWrapWidth=u.wrapperWidth,kr(a,400)),p.updateLineNumbers=null,!0}function mh(a,u){for(var p=u.viewport,m=!0;;m=!1){if(!m||!a.options.lineWrapping||u.oldDisplayWidth==me(a)){if(p&&p.top!=null&&(p={top:Math.min(a.doc.height+N(a.display)-Le(a),p.top)}),u.visible=Wu(a.display,a.doc,p),u.visible.from>=a.display.viewFrom&&u.visible.to<=a.display.viewTo)break}else m&&(u.visible=Wu(a.display,a.doc,p));if(!Co(a,u))break;Uu(a);var v=da(a);Vc(a),fa(a,v),Vl(a,v),u.force=!1}u.signal(a,"update",a),(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)&&(u.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function Bl(a,u){var p=new Hc(a,u);if(Co(a,p)){Uu(a),mh(a,p);var m=da(a);Vc(a),fa(a,m),Vl(a,m),p.finish()}}function Uo(a,u,p){var m=a.display,v=a.options.lineNumbers,_=m.lineDiv,E=_.firstChild;function T(Ve){var qe=Ve.nextSibling;return g&&K&&a.display.currentWheelTarget==Ve?Ve.style.display="none":Ve.parentNode.removeChild(Ve),qe}for(var I=m.view,H=m.viewFrom,ie=0;ie<I.length;ie++){var le=I[ie];if(!le.hidden)if(!le.node||le.node.parentNode!=_){var Ce=Ol(a,le,H,p);_.insertBefore(Ce,E)}else{for(;E!=le.node;)E=T(E);var ye=v&&u!=null&&u<=H&&le.lineNumber;le.changes&&(R(le.changes,"gutter")>-1&&(ye=!1),Va(a,le,H,p)),ye&&(_e(le.lineNumber),le.lineNumber.appendChild(document.createTextNode(hr(a.options,H)))),E=le.node.nextSibling}H+=le.size}for(;E;)E=T(E)}function Nl(a){var u=a.gutters.offsetWidth;a.sizer.style.marginLeft=u+"px",fi(a,"gutterChanged",a)}function Vl(a,u){a.display.sizer.style.minHeight=u.docHeight+"px",a.display.heightForcer.style.top=u.docHeight+"px",a.display.gutters.style.height=u.docHeight+a.display.barHeight+ee(a)+"px"}function Wa(a){var u=a.display,p=u.view;if(!(!u.alignWidgets&&(!u.gutters.firstChild||!a.options.fixedGutter))){for(var m=la(u)-u.scroller.scrollLeft+a.doc.scrollLeft,v=u.gutters.offsetWidth,_=m+"px",E=0;E<p.length;E++)if(!p[E].hidden){a.options.fixedGutter&&(p[E].gutter&&(p[E].gutter.style.left=_),p[E].gutterBackground&&(p[E].gutterBackground.style.left=_));var T=p[E].alignable;if(T)for(var I=0;I<T.length;I++)T[I].style.left=_}a.options.fixedGutter&&(u.gutters.style.left=m+v+"px")}}function Uc(a){if(!a.options.lineNumbers)return!1;var u=a.doc,p=hr(a.options,u.first+u.size-1),m=a.display;if(p.length!=m.lineNumChars){var v=m.measure.appendChild(re("div",[re("div",p)],"CodeMirror-linenumber CodeMirror-gutter-elt")),_=v.firstChild.offsetWidth,E=v.offsetWidth-_;return m.lineGutter.style.width="",m.lineNumInnerWidth=Math.max(_,m.lineGutter.offsetWidth-E)+1,m.lineNumWidth=m.lineNumInnerWidth+E,m.lineNumChars=m.lineNumInnerWidth?p.length:-1,m.lineGutter.style.width=m.lineNumWidth+"px",Nl(a.display),!0}return!1}function Wc(a,u){for(var p=[],m=!1,v=0;v<a.length;v++){var _=a[v],E=null;if(typeof _!="string"&&(E=_.style,_=_.className),_=="CodeMirror-linenumbers")if(u)m=!0;else continue;p.push({className:_,style:E})}return u&&!m&&p.push({className:"CodeMirror-linenumbers",style:null}),p}function qu(a){var u=a.gutters,p=a.gutterSpecs;_e(u),a.lineGutter=null;for(var m=0;m<p.length;++m){var v=p[m],_=v.className,E=v.style,T=u.appendChild(re("div",null,"CodeMirror-gutter "+_));E&&(T.style.cssText=E),_=="CodeMirror-linenumbers"&&(a.lineGutter=T,T.style.width=(a.lineNumWidth||1)+"px")}u.style.display=p.length?"":"none",Nl(a)}function zl(a){qu(a.display),Zi(a),Wa(a)}function Hl(a,u,p,m){var v=this;this.input=p,v.scrollbarFiller=re("div",null,"CodeMirror-scrollbar-filler"),v.scrollbarFiller.setAttribute("cm-not-content","true"),v.gutterFiller=re("div",null,"CodeMirror-gutter-filler"),v.gutterFiller.setAttribute("cm-not-content","true"),v.lineDiv=ae("div",null,"CodeMirror-code"),v.selectionDiv=re("div",null,null,"position: relative; z-index: 1"),v.cursorDiv=re("div",null,"CodeMirror-cursors"),v.measure=re("div",null,"CodeMirror-measure"),v.lineMeasure=re("div",null,"CodeMirror-measure"),v.lineSpace=ae("div",[v.measure,v.lineMeasure,v.selectionDiv,v.cursorDiv,v.lineDiv],null,"position: relative; outline: none");var _=ae("div",[v.lineSpace],"CodeMirror-lines");v.mover=re("div",[_],null,"position: relative"),v.sizer=re("div",[v.mover],"CodeMirror-sizer"),v.sizerWidth=null,v.heightForcer=re("div",null,null,"position: absolute; height: "+W+"px; width: 1px;"),v.gutters=re("div",null,"CodeMirror-gutters"),v.lineGutter=null,v.scroller=re("div",[v.sizer,v.heightForcer,v.gutters],"CodeMirror-scroll"),v.scroller.setAttribute("tabIndex","-1"),v.wrapper=re("div",[v.scrollbarFiller,v.gutterFiller,v.scroller],"CodeMirror"),y&&k>=105&&(v.wrapper.style.clipPath="inset(0px)"),v.wrapper.setAttribute("translate","no"),c&&h<8&&(v.gutters.style.zIndex=-1,v.scroller.style.paddingRight=0),!g&&!(r&&U)&&(v.scroller.draggable=!0),a&&(a.appendChild?a.appendChild(v.wrapper):a(v.wrapper)),v.viewFrom=v.viewTo=u.first,v.reportedViewFrom=v.reportedViewTo=u.first,v.view=[],v.renderedView=null,v.externalMeasured=null,v.viewOffset=0,v.lastWrapHeight=v.lastWrapWidth=0,v.updateLineNumbers=null,v.nativeBarWidth=v.barHeight=v.barWidth=0,v.scrollbarsClipped=!1,v.lineNumWidth=v.lineNumInnerWidth=v.lineNumChars=null,v.alignWidgets=!1,v.cachedCharWidth=v.cachedTextHeight=v.cachedPaddingH=null,v.maxLine=null,v.maxLineLength=0,v.maxLineChanged=!1,v.wheelDX=v.wheelDY=v.wheelStartX=v.wheelStartY=null,v.shift=!1,v.selForContextMenu=null,v.activeTouch=null,v.gutterSpecs=Wc(m.gutters,m.lineNumbers),qu(v),p.init(v)}var Br=0,Cr=null;c?Cr=-.53:r?Cr=15:y?Cr=-.7:D&&(Cr=-1/3);function Gu(a){var u=a.wheelDeltaX,p=a.wheelDeltaY;return u==null&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(u=a.detail),p==null&&a.detail&&a.axis==a.VERTICAL_AXIS?p=a.detail:p==null&&(p=a.wheelDelta),{x:u,y:p}}function ph(a){var u=Gu(a);return u.x*=Cr,u.y*=Cr,u}function Ls(a,u){y&&k==102&&(a.display.chromeScrollHack==null?a.display.sizer.style.pointerEvents="none":clearTimeout(a.display.chromeScrollHack),a.display.chromeScrollHack=setTimeout(function(){a.display.chromeScrollHack=null,a.display.sizer.style.pointerEvents=""},100));var p=Gu(u),m=p.x,v=p.y,_=Cr;u.deltaMode===0&&(m=u.deltaX,v=u.deltaY,_=1);var E=a.display,T=E.scroller,I=T.scrollWidth>T.clientWidth,H=T.scrollHeight>T.clientHeight;if(m&&I||v&&H){if(v&&K&&g){e:for(var ie=u.target,le=E.view;ie!=T;ie=ie.parentNode)for(var Ce=0;Ce<le.length;Ce++)if(le[Ce].node==ie){a.display.currentWheelTarget=ie;break e}}if(m&&!r&&!x&&_!=null){v&&H&&ca(a,Math.max(0,T.scrollTop+v*_)),ua(a,Math.max(0,T.scrollLeft+m*_)),(!v||v&&H)&&mn(u),E.wheelStartX=null;return}if(v&&_!=null){var ye=v*_,Ve=a.doc.scrollTop,qe=Ve+E.wrapper.clientHeight;ye<0?Ve=Math.max(0,Ve+ye-50):qe=Math.min(a.doc.height,qe+ye+50),Bl(a,{top:Ve,bottom:qe})}Br<20&&u.deltaMode!==0&&(E.wheelStartX==null?(E.wheelStartX=T.scrollLeft,E.wheelStartY=T.scrollTop,E.wheelDX=m,E.wheelDY=v,setTimeout(function(){if(E.wheelStartX!=null){var Qe=T.scrollLeft-E.wheelStartX,ot=T.scrollTop-E.wheelStartY,dt=ot&&E.wheelDY&&ot/E.wheelDY||Qe&&E.wheelDX&&Qe/E.wheelDX;E.wheelStartX=E.wheelStartY=null,dt&&(Cr=(Cr*Br+dt)/(Br+1),++Br)}},200)):(E.wheelDX+=m,E.wheelDY+=v))}}var Vi=function(a,u){this.ranges=a,this.primIndex=u};Vi.prototype.primary=function(){return this.ranges[this.primIndex]},Vi.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var u=0;u<this.ranges.length;u++){var p=this.ranges[u],m=a.ranges[u];if(!No(p.anchor,m.anchor)||!No(p.head,m.head))return!1}return!0},Vi.prototype.deepCopy=function(){for(var a=[],u=0;u<this.ranges.length;u++)a[u]=new kn(Gr(this.ranges[u].anchor),Gr(this.ranges[u].head));return new Vi(a,this.primIndex)},Vi.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},Vi.prototype.contains=function(a,u){u||(u=a);for(var p=0;p<this.ranges.length;p++){var m=this.ranges[p];if(Rt(u,m.from())>=0&&Rt(a,m.to())<=0)return p}return-1};var kn=function(a,u){this.anchor=a,this.head=u};kn.prototype.from=function(){return Hn(this.anchor,this.head)},kn.prototype.to=function(){return er(this.anchor,this.head)},kn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Nr(a,u,p){var m=a&&a.options.selectionsMayTouch,v=u[p];u.sort(function(Ce,ye){return Rt(Ce.from(),ye.from())}),p=R(u,v);for(var _=1;_<u.length;_++){var E=u[_],T=u[_-1],I=Rt(T.to(),E.from());if(m&&!E.empty()?I>0:I>=0){var H=Hn(T.from(),E.from()),ie=er(T.to(),E.to()),le=T.empty()?E.from()==E.head:T.from()==T.head;_<=p&&--p,u.splice(--_,2,new kn(le?ie:H,le?H:ie))}}return new Vi(u,p)}function Bs(a,u){return new Vi([new kn(a,u||a)],0)}function xo(a){return a.text?Ke(a.from.line+a.text.length-1,ct(a.text).length+(a.text.length==1?a.from.ch:0)):a.to}function gh(a,u){if(Rt(a,u.from)<0)return a;if(Rt(a,u.to)<=0)return xo(u);var p=a.line+u.text.length-(u.to.line-u.from.line)-1,m=a.ch;return a.line==u.to.line&&(m+=xo(u).ch-u.to.ch),Ke(p,m)}function Ul(a,u){for(var p=[],m=0;m<a.sel.ranges.length;m++){var v=a.sel.ranges[m];p.push(new kn(gh(v.anchor,u),gh(v.head,u)))}return Nr(a.cm,p,a.sel.primIndex)}function jc(a,u,p){return a.line==u.line?Ke(p.line,a.ch-u.ch+p.ch):Ke(p.line+(a.line-u.line),a.ch)}function dm(a,u,p){for(var m=[],v=Ke(a.first,0),_=v,E=0;E<u.length;E++){var T=u[E],I=jc(T.from,v,_),H=jc(xo(T),v,_);if(v=T.to,_=H,p=="around"){var ie=a.sel.ranges[E],le=Rt(ie.head,ie.anchor)<0;m[E]=new kn(le?H:I,le?I:H)}else m[E]=new kn(I,I)}return new Vi(m,a.sel.primIndex)}function Ku(a){a.doc.mode=$i(a.options,a.doc.modeOption),Wl(a)}function Wl(a){a.doc.iter(function(u){u.stateAfter&&(u.stateAfter=null),u.styles&&(u.styles=null)}),a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first,kr(a,100),a.state.modeGen++,a.curOp&&Zi(a)}function Zu(a,u){return u.from.ch==0&&u.to.ch==0&&ct(u.text)==""&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function jl(a,u,p,m){function v(dt){return p?p[dt]:null}function _(dt,tt,bt){Rc(dt,tt,bt,m),fi(dt,"change",dt,u)}function E(dt,tt){for(var bt=[],Mt=dt;Mt<tt;++Mt)bt.push(new Fs(H[Mt],v(Mt),m));return bt}var T=u.from,I=u.to,H=u.text,ie=St(a,T.line),le=St(a,I.line),Ce=ct(H),ye=v(H.length-1),Ve=I.line-T.line;if(u.full)a.insert(0,E(0,H.length)),a.remove(H.length,a.size-H.length);else if(Zu(a,u)){var qe=E(0,H.length-1);_(le,le.text,ye),Ve&&a.remove(T.line,Ve),qe.length&&a.insert(T.line,qe)}else if(ie==le)if(H.length==1)_(ie,ie.text.slice(0,T.ch)+Ce+ie.text.slice(I.ch),ye);else{var Qe=E(1,H.length-1);Qe.push(new Fs(Ce+ie.text.slice(I.ch),ye,m)),_(ie,ie.text.slice(0,T.ch)+H[0],v(0)),a.insert(T.line+1,Qe)}else if(H.length==1)_(ie,ie.text.slice(0,T.ch)+H[0]+le.text.slice(I.ch),v(0)),a.remove(T.line+1,Ve);else{_(ie,ie.text.slice(0,T.ch)+H[0],v(0)),_(le,Ce+le.text.slice(I.ch),ye);var ot=E(1,H.length-1);Ve>1&&a.remove(T.line+1,Ve-1),a.insert(T.line+1,ot)}fi(a,"change",a,u)}function Eo(a,u,p){function m(v,_,E){if(v.linked)for(var T=0;T<v.linked.length;++T){var I=v.linked[T];if(I.doc!=_){var H=E&&I.sharedHist;p&&!H||(u(I.doc,H),m(I.doc,v,H))}}}m(a,null,!0)}function $c(a,u){if(u.cm)throw new Error("This document is already in use.");a.doc=u,u.cm=a,Fl(a),Ku(a),bh(a),a.options.direction=u.direction,a.options.lineWrapping||Al(a),a.options.mode=u.modeOption,Zi(a)}function bh(a){(a.doc.direction=="rtl"?je:Oe)(a.display.lineDiv,"CodeMirror-rtl")}function $l(a){gi(a,function(){bh(a),Zi(a)})}function ql(a){this.done=[],this.undone=[],this.undoDepth=a?a.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a?a.maxGeneration:1}function ja(a,u){var p={from:Gr(u.from),to:xo(u),text:cn(a,u.from,u.to)};return wh(a,p,u.from.line,u.to.line+1),Eo(a,function(m){return wh(m,p,u.from.line,u.to.line+1)},!0),p}function Wo(a){for(;a.length;){var u=ct(a);if(u.ranges)a.pop();else break}}function qc(a,u){if(u)return Wo(a.done),ct(a.done);if(a.done.length&&!ct(a.done).ranges)return ct(a.done);if(a.done.length>1&&!a.done[a.done.length-2].ranges)return a.done.pop(),ct(a.done)}function Gl(a,u,p,m){var v=a.history;v.undone.length=0;var _=+new Date,E,T;if((v.lastOp==m||v.lastOrigin==u.origin&&u.origin&&(u.origin.charAt(0)=="+"&&v.lastModTime>_-(a.cm?a.cm.options.historyEventDelay:500)||u.origin.charAt(0)=="*"))&&(E=qc(v,v.lastOp==m)))T=ct(E.changes),Rt(u.from,u.to)==0&&Rt(u.from,T.to)==0?T.to=xo(u):E.changes.push(ja(a,u));else{var I=ct(v.done);for((!I||!I.ranges)&&Ns(a.sel,v.done),E={changes:[ja(a,u)],generation:v.generation},v.done.push(E);v.done.length>v.undoDepth;)v.done.shift(),v.done[0].ranges||v.done.shift()}v.done.push(p),v.generation=++v.maxGeneration,v.lastModTime=v.lastSelTime=_,v.lastOp=v.lastSelOp=m,v.lastOrigin=v.lastSelOrigin=u.origin,T||ln(a,"historyAdded")}function $a(a,u,p,m){var v=u.charAt(0);return v=="*"||v=="+"&&p.ranges.length==m.ranges.length&&p.somethingSelected()==m.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function vh(a,u,p,m){var v=a.history,_=m&&m.origin;p==v.lastSelOp||_&&v.lastSelOrigin==_&&(v.lastModTime==v.lastSelTime&&v.lastOrigin==_||$a(a,_,ct(v.done),u))?v.done[v.done.length-1]=u:Ns(u,v.done),v.lastSelTime=+new Date,v.lastSelOrigin=_,v.lastSelOp=p,m&&m.clearRedo!==!1&&Wo(v.undone)}function Ns(a,u){var p=ct(u);p&&p.ranges&&p.equals(a)||u.push(a)}function wh(a,u,p,m){var v=u["spans_"+a.id],_=0;a.iter(Math.max(a.first,p),Math.min(a.first+a.size,m),function(E){E.markedSpans&&((v||(v=u["spans_"+a.id]={}))[_]=E.markedSpans),++_})}function yh(a){if(!a)return null;for(var u,p=0;p<a.length;++p)a[p].marker.explicitlyCleared?u||(u=a.slice(0,p)):u&&u.push(a[p]);return u?u.length?u:null:a}function xi(a,u){var p=u["spans_"+a.id];if(!p)return null;for(var m=[],v=0;v<u.text.length;++v)m.push(yh(p[v]));return m}function Gc(a,u){var p=xi(a,u),m=Oa(a,u);if(!p)return m;if(!m)return p;for(var v=0;v<p.length;++v){var _=p[v],E=m[v];if(_&&E)e:for(var T=0;T<E.length;++T){for(var I=E[T],H=0;H<_.length;++H)if(_[H].marker==I.marker)continue e;_.push(I)}else E&&(p[v]=E)}return p}function ga(a,u,p){for(var m=[],v=0;v<a.length;++v){var _=a[v];if(_.ranges){m.push(p?Vi.prototype.deepCopy.call(_):_);continue}var E=_.changes,T=[];m.push({changes:T});for(var I=0;I<E.length;++I){var H=E[I],ie=void 0;if(T.push({from:H.from,to:H.to,text:H.text}),u)for(var le in H)(ie=le.match(/^spans_(\d+)$/))&&R(u,Number(ie[1]))>-1&&(ct(T)[le]=H[le],delete H[le])}}return m}function Kl(a,u,p,m){if(m){var v=a.anchor;if(p){var _=Rt(u,v)<0;_!=Rt(p,v)<0?(v=u,u=p):_!=Rt(u,p)<0&&(u=p)}return new kn(v,u)}else return new kn(p||u,u)}function Vr(a,u,p,m,v){v==null&&(v=a.cm&&(a.cm.display.shift||a.extend)),On(a,new Vi([Kl(a.sel.primary(),u,p,v)],0),m)}function Vs(a,u,p){for(var m=[],v=a.cm&&(a.cm.display.shift||a.extend),_=0;_<a.sel.ranges.length;_++)m[_]=Kl(a.sel.ranges[_],u[_],null,v);var E=Nr(a.cm,m,a.sel.primIndex);On(a,E,p)}function Ei(a,u,p,m){var v=a.sel.ranges.slice(0);v[u]=p,On(a,Nr(a.cm,v,a.sel.primIndex),m)}function xr(a,u,p,m){On(a,Bs(u,p),m)}function Er(a,u,p){var m={ranges:u.ranges,update:function(v){this.ranges=[];for(var _=0;_<v.length;_++)this.ranges[_]=new kn(Vt(a,v[_].anchor),Vt(a,v[_].head))},origin:p&&p.origin};return ln(a,"beforeSelectionChange",a,m),a.cm&&ln(a.cm,"beforeSelectionChange",a.cm,m),m.ranges!=u.ranges?Nr(a.cm,m.ranges,m.ranges.length-1):u}function Kc(a,u,p){var m=a.history.done,v=ct(m);v&&v.ranges?(m[m.length-1]=u,Zl(a,u,p)):On(a,u,p)}function On(a,u,p){Zl(a,u,p),vh(a,a.sel,a.cm?a.cm.curOp.id:NaN,p)}function Zl(a,u,p){(Wn(a,"beforeSelectionChange")||a.cm&&Wn(a.cm,"beforeSelectionChange"))&&(u=Er(a,u,p));var m=p&&p.bias||(Rt(u.primary().head,a.sel.primary().head)<0?-1:1);Yu(a,Ga(a,u,m,!0)),!(p&&p.scroll===!1)&&a.cm&&a.cm.getOption("readOnly")!="nocursor"&&Ci(a.cm)}function Yu(a,u){u.equals(a.sel)||(a.sel=u,a.cm&&(a.cm.curOp.updateInput=1,a.cm.curOp.selectionChanged=!0,zn(a.cm)),fi(a,"cursorActivity",a))}function qa(a){Yu(a,Ga(a,a.sel,null,!1))}function Ga(a,u,p,m){for(var v,_=0;_<u.ranges.length;_++){var E=u.ranges[_],T=u.ranges.length==a.sel.ranges.length&&a.sel.ranges[_],I=Ka(a,E.anchor,T&&T.anchor,p,m),H=E.head==E.anchor?I:Ka(a,E.head,T&&T.head,p,m);(v||I!=E.anchor||H!=E.head)&&(v||(v=u.ranges.slice(0,_)),v[_]=new kn(I,H))}return v?Nr(a.cm,v,u.primIndex):u}function So(a,u,p,m,v){var _=St(a,u.line);if(_.markedSpans)for(var E=0;E<_.markedSpans.length;++E){var T=_.markedSpans[E],I=T.marker,H="selectLeft"in I?!I.selectLeft:I.inclusiveLeft,ie="selectRight"in I?!I.selectRight:I.inclusiveRight;if((T.from==null||(H?T.from<=u.ch:T.from<u.ch))&&(T.to==null||(ie?T.to>=u.ch:T.to>u.ch))){if(v&&(ln(I,"beforeCursorEnter"),I.explicitlyCleared))if(_.markedSpans){--E;continue}else break;if(!I.atomic)continue;if(p){var le=I.find(m<0?1:-1),Ce=void 0;if((m<0?ie:H)&&(le=Zc(a,le,-m,le&&le.line==u.line?_:null)),le&&le.line==u.line&&(Ce=Rt(le,p))&&(m<0?Ce<0:Ce>0))return So(a,le,u,m,v)}var ye=I.find(m<0?-1:1);return(m<0?H:ie)&&(ye=Zc(a,ye,m,ye.line==u.line?_:null)),ye?So(a,ye,u,m,v):null}}return u}function Ka(a,u,p,m,v){var _=m||1,E=So(a,u,p,_,v)||!v&&So(a,u,p,_,!0)||So(a,u,p,-_,v)||!v&&So(a,u,p,-_,!0);return E||(a.cantEdit=!0,Ke(a.first,0))}function Zc(a,u,p,m){return p<0&&u.ch==0?u.line>a.first?Vt(a,Ke(u.line-1)):null:p>0&&u.ch==(m||St(a,u.line)).text.length?u.line<a.first+a.size-1?Ke(u.line+1,0):null:new Ke(u.line,u.ch+p)}function Ju(a){a.setSelection(Ke(a.firstLine(),0),Ke(a.lastLine()),ge)}function Xu(a,u,p){var m={canceled:!1,from:u.from,to:u.to,text:u.text,origin:u.origin,cancel:function(){return m.canceled=!0}};return p&&(m.update=function(v,_,E,T){v&&(m.from=Vt(a,v)),_&&(m.to=Vt(a,_)),E&&(m.text=E),T!==void 0&&(m.origin=T)}),ln(a,"beforeChange",a,m),a.cm&&ln(a.cm,"beforeChange",a.cm,m),m.canceled?(a.cm&&(a.cm.curOp.updateInput=2),null):{from:m.from,to:m.to,text:m.text,origin:m.origin}}function Za(a,u,p){if(a.cm){if(!a.cm.curOp)return bi(a.cm,Za)(a,u,p);if(a.cm.state.suppressEdits)return}if(!((Wn(a,"beforeChange")||a.cm&&Wn(a.cm,"beforeChange"))&&(u=Xu(a,u,!0),!u))){var m=Sc&&!p&&nh(a,u.from,u.to);if(m)for(var v=m.length-1;v>=0;--v)Qu(a,{from:m[v].from,to:m[v].to,text:v?[""]:u.text,origin:u.origin});else Qu(a,u)}}function Qu(a,u){if(!(u.text.length==1&&u.text[0]==""&&Rt(u.from,u.to)==0)){var p=Ul(a,u);Gl(a,u,p,a.cm?a.cm.curOp.id:NaN),ba(a,u,p,Oa(a,u));var m=[];Eo(a,function(v,_){!_&&R(m,v.history)==-1&&(Ch(v.history,u),m.push(v.history)),ba(v,u,null,Oa(v,u))})}}function Yl(a,u,p){var m=a.cm&&a.cm.state.suppressEdits;if(!(m&&!p)){for(var v=a.history,_,E=a.sel,T=u=="undo"?v.done:v.undone,I=u=="undo"?v.undone:v.done,H=0;H<T.length&&(_=T[H],!(p?_.ranges&&!_.equals(a.sel):!_.ranges));H++);if(H!=T.length){for(v.lastOrigin=v.lastSelOrigin=null;;)if(_=T.pop(),_.ranges){if(Ns(_,I),p&&!_.equals(a.sel)){On(a,_,{clearRedo:!1});return}E=_}else if(m){T.push(_);return}else break;var ie=[];Ns(E,I),I.push({changes:ie,generation:v.generation}),v.generation=_.generation||++v.maxGeneration;for(var le=Wn(a,"beforeChange")||a.cm&&Wn(a.cm,"beforeChange"),Ce=function(qe){var Qe=_.changes[qe];if(Qe.origin=u,le&&!Xu(a,Qe,!1))return T.length=0,{};ie.push(ja(a,Qe));var ot=qe?Ul(a,Qe):ct(T);ba(a,Qe,ot,Gc(a,Qe)),!qe&&a.cm&&a.cm.scrollIntoView({from:Qe.from,to:xo(Qe)});var dt=[];Eo(a,function(tt,bt){!bt&&R(dt,tt.history)==-1&&(Ch(tt.history,Qe),dt.push(tt.history)),ba(tt,Qe,null,Gc(tt,Qe))})},ye=_.changes.length-1;ye>=0;--ye){var Ve=Ce(ye);if(Ve)return Ve.v}}}}function _h(a,u){if(u!=0&&(a.first+=u,a.sel=new Vi(En(a.sel.ranges,function(v){return new kn(Ke(v.anchor.line+u,v.anchor.ch),Ke(v.head.line+u,v.head.ch))}),a.sel.primIndex),a.cm)){Zi(a.cm,a.first,a.first-u,u);for(var p=a.cm.display,m=p.viewFrom;m<p.viewTo;m++)fr(a.cm,m,"gutter")}}function ba(a,u,p,m){if(a.cm&&!a.cm.curOp)return bi(a.cm,ba)(a,u,p,m);if(u.to.line<a.first){_h(a,u.text.length-1-(u.to.line-u.from.line));return}if(!(u.from.line>a.lastLine())){if(u.from.line<a.first){var v=u.text.length-1-(a.first-u.from.line);_h(a,v),u={from:Ke(a.first,0),to:Ke(u.to.line+v,u.to.ch),text:[ct(u.text)],origin:u.origin}}var _=a.lastLine();u.to.line>_&&(u={from:u.from,to:Ke(_,St(a,_).text.length),text:[u.text[0]],origin:u.origin}),u.removed=cn(a,u.from,u.to),p||(p=Ul(a,u)),a.cm?hm(a.cm,u,m):jl(a,u,m),Zl(a,p,ge),a.cantEdit&&Ka(a,Ke(a.firstLine(),0))&&(a.cantEdit=!1)}}function hm(a,u,p){var m=a.doc,v=a.display,_=u.from,E=u.to,T=!1,I=_.line;a.options.lineWrapping||(I=Xt(Yr(St(m,_.line))),m.iter(I,E.line+1,function(ye){if(ye==v.maxLine)return T=!0,!0})),m.sel.contains(u.from,u.to)>-1&&zn(a),jl(m,u,p,fs(a)),a.options.lineWrapping||(m.iter(I,_.line+u.text.length,function(ye){var Ve=Ba(ye);Ve>v.maxLineLength&&(v.maxLine=ye,v.maxLineLength=Ve,v.maxLineChanged=!0,T=!1)}),T&&(a.curOp.updateMaxLine=!0)),Tl(m,_.line),kr(a,400);var H=u.text.length-(E.line-_.line)-1;u.full?Zi(a):_.line==E.line&&u.text.length==1&&!Zu(a.doc,u)?fr(a,_.line,"text"):Zi(a,_.line,E.line+1,H);var ie=Wn(a,"changes"),le=Wn(a,"change");if(le||ie){var Ce={from:_,to:E,text:u.text,removed:u.removed,origin:u.origin};le&&fi(a,"change",a,Ce),ie&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(Ce)}a.display.selForContextMenu=null}function Ya(a,u,p,m,v){var _;m||(m=p),Rt(m,p)<0&&(_=[m,p],p=_[0],m=_[1]),typeof u=="string"&&(u=a.splitLines(u)),Za(a,{from:p,to:m,text:u,origin:v})}function kh(a,u,p,m){p<a.line?a.line+=m:u<a.line&&(a.line=u,a.ch=0)}function ed(a,u,p,m){for(var v=0;v<a.length;++v){var _=a[v],E=!0;if(_.ranges){_.copied||(_=a[v]=_.deepCopy(),_.copied=!0);for(var T=0;T<_.ranges.length;T++)kh(_.ranges[T].anchor,u,p,m),kh(_.ranges[T].head,u,p,m);continue}for(var I=0;I<_.changes.length;++I){var H=_.changes[I];if(p<H.from.line)H.from=Ke(H.from.line+m,H.from.ch),H.to=Ke(H.to.line+m,H.to.ch);else if(u<=H.to.line){E=!1;break}}E||(a.splice(0,v+1),v=0)}}function Ch(a,u){var p=u.from.line,m=u.to.line,v=u.text.length-(m-p)-1;ed(a.done,p,m,v),ed(a.undone,p,m,v)}function va(a,u,p,m){var v=u,_=u;return typeof u=="number"?_=St(a,hi(a,u)):v=Xt(u),v==null?null:(m(_,v)&&a.cm&&fr(a.cm,v,p),_)}function Jl(a){this.lines=a,this.parent=null;for(var u=0,p=0;p<a.length;++p)a[p].parent=this,u+=a[p].height;this.height=u}Jl.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,u){for(var p=a,m=a+u;p<m;++p){var v=this.lines[p];this.height-=v.height,Oc(v),fi(v,"delete")}this.lines.splice(a,u)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,u,p){this.height+=p,this.lines=this.lines.slice(0,a).concat(u).concat(this.lines.slice(a));for(var m=0;m<u.length;++m)u[m].parent=this},iterN:function(a,u,p){for(var m=a+u;a<m;++a)if(p(this.lines[a]))return!0}};function Ja(a){this.children=a;for(var u=0,p=0,m=0;m<a.length;++m){var v=a[m];u+=v.chunkSize(),p+=v.height,v.parent=this}this.size=u,this.height=p,this.parent=null}Ja.prototype={chunkSize:function(){return this.size},removeInner:function(a,u){this.size-=u;for(var p=0;p<this.children.length;++p){var m=this.children[p],v=m.chunkSize();if(a<v){var _=Math.min(u,v-a),E=m.height;if(m.removeInner(a,_),this.height-=E-m.height,v==_&&(this.children.splice(p--,1),m.parent=null),(u-=_)==0)break;a=0}else a-=v}if(this.size-u<25&&(this.children.length>1||!(this.children[0]instanceof Jl))){var T=[];this.collapse(T),this.children=[new Jl(T)],this.children[0].parent=this}},collapse:function(a){for(var u=0;u<this.children.length;++u)this.children[u].collapse(a)},insertInner:function(a,u,p){this.size+=u.length,this.height+=p;for(var m=0;m<this.children.length;++m){var v=this.children[m],_=v.chunkSize();if(a<=_){if(v.insertInner(a,u,p),v.lines&&v.lines.length>50){for(var E=v.lines.length%25+25,T=E;T<v.lines.length;){var I=new Jl(v.lines.slice(T,T+=25));v.height-=I.height,this.children.splice(++m,0,I),I.parent=this}v.lines=v.lines.slice(0,E),this.maybeSpill()}break}a-=_}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var u=a.children.splice(a.children.length-5,5),p=new Ja(u);if(a.parent){a.size-=p.size,a.height-=p.height;var v=R(a.parent.children,a);a.parent.children.splice(v+1,0,p)}else{var m=new Ja(a.children);m.parent=a,a.children=[m,p],a=m}p.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,u,p){for(var m=0;m<this.children.length;++m){var v=this.children[m],_=v.chunkSize();if(a<_){var E=Math.min(u,_-a);if(v.iterN(a,E,p))return!0;if((u-=E)==0)break;a=0}else a-=_}}};var Xl=function(a,u,p){if(p)for(var m in p)p.hasOwnProperty(m)&&(this[m]=p[m]);this.doc=a,this.node=u};Xl.prototype.clear=function(){var a=this.doc.cm,u=this.line.widgets,p=this.line,m=Xt(p);if(!(m==null||!u)){for(var v=0;v<u.length;++v)u[v]==this&&u.splice(v--,1);u.length||(p.widgets=null);var _=G(this);Gi(p,Math.max(0,p.height-_)),a&&(gi(a,function(){Yc(a,p,-_),fr(a,m,"widget")}),fi(a,"lineWidgetCleared",a,this,m))}},Xl.prototype.changed=function(){var a=this,u=this.height,p=this.doc.cm,m=this.line;this.height=null;var v=G(this)-u;v&&(tr(this.doc,m)||Gi(m,m.height+v),p&&gi(p,function(){p.curOp.forceUpdate=!0,Yc(p,m,v),fi(p,"lineWidgetChanged",p,a,Xt(m))}))},Ri(Xl);function Yc(a,u,p){lo(u)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&ms(a,p)}function Mg(a,u,p,m){var v=new Xl(a,p,m),_=a.cm;return _&&v.noHScroll&&(_.display.alignWidgets=!0),va(a,u,"widget",function(E){var T=E.widgets||(E.widgets=[]);if(v.insertAt==null?T.push(v):T.splice(Math.min(T.length,Math.max(0,v.insertAt)),0,v),v.line=E,_&&!tr(a,E)){var I=lo(E)<a.scrollTop;Gi(E,E.height+G(v)),I&&ms(_,v.height),_.curOp.forceUpdate=!0}return!0}),_&&fi(_,"lineWidgetAdded",_,v,typeof u=="number"?u:Xt(u)),v}var fm=0,wa=function(a,u){this.lines=[],this.type=u,this.doc=a,this.id=++fm};wa.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,u=a&&!a.curOp;if(u&&ps(a),Wn(this,"clear")){var p=this.find();p&&fi(this,"clear",p.from,p.to)}for(var m=null,v=null,_=0;_<this.lines.length;++_){var E=this.lines[_],T=Qs(E.markedSpans,this);a&&!this.collapsed?fr(a,Xt(E),"text"):a&&(T.to!=null&&(v=Xt(E)),T.from!=null&&(m=Xt(E))),E.markedSpans=ea(E.markedSpans,T),T.from==null&&this.collapsed&&!tr(this.doc,E)&&a&&Gi(E,ho(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var I=0;I<this.lines.length;++I){var H=Yr(this.lines[I]),ie=Ba(H);ie>a.display.maxLineLength&&(a.display.maxLine=H,a.display.maxLineLength=ie,a.display.maxLineChanged=!0)}m!=null&&a&&this.collapsed&&Zi(a,m,v+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&qa(a.doc)),a&&fi(a,"markerCleared",a,this,m,v),u&&ma(a),this.parent&&this.parent.clear()}},wa.prototype.find=function(a,u){a==null&&this.type=="bookmark"&&(a=1);for(var p,m,v=0;v<this.lines.length;++v){var _=this.lines[v],E=Qs(_.markedSpans,this);if(E.from!=null&&(p=Ke(u?_:Xt(_),E.from),a==-1))return p;if(E.to!=null&&(m=Ke(u?_:Xt(_),E.to),a==1))return m}return p&&{from:p,to:m}},wa.prototype.changed=function(){var a=this,u=this.find(-1,!0),p=this,m=this.doc.cm;!u||!m||gi(m,function(){var v=u.line,_=Xt(u.line),E=Kt(m,_);if(E&&(Un(E),m.curOp.selectionChanged=m.curOp.forceUpdate=!0),m.curOp.updateMaxLine=!0,!tr(p.doc,v)&&p.height!=null){var T=p.height;p.height=null;var I=G(p)-T;I&&Gi(v,v.height+I)}fi(m,"markerChanged",m,a)})},wa.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var u=this.doc.cm.curOp;(!u.maybeHiddenMarkers||R(u.maybeHiddenMarkers,this)==-1)&&(u.maybeUnhiddenMarkers||(u.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},wa.prototype.detachLine=function(a){if(this.lines.splice(R(this.lines,a),1),!this.lines.length&&this.doc.cm){var u=this.doc.cm.curOp;(u.maybeHiddenMarkers||(u.maybeHiddenMarkers=[])).push(this)}},Ri(wa);function Qr(a,u,p,m,v){if(m&&m.shared)return Xa(a,u,p,m,v);if(a.cm&&!a.cm.curOp)return bi(a.cm,Qr)(a,u,p,m,v);var _=new wa(a,v),E=Rt(u,p);if(m&&xe(m,_,!1),E>0||E==0&&_.clearWhenEmpty!==!1)return _;if(_.replacedWith&&(_.collapsed=!0,_.widgetNode=ae("span",[_.replacedWith],"CodeMirror-widget"),m.handleMouseEvents||_.widgetNode.setAttribute("cm-ignore-events","true"),m.insertLeft&&(_.widgetNode.insertLeft=!0)),_.collapsed){if(Pc(a,u.line,u,p,_)||u.line!=p.line&&Pc(a,p.line,u,p,_))throw new Error("Inserting collapsed marker partially overlapping an existing one");Rs()}_.addToHistory&&Gl(a,{from:u,to:p,origin:"markText"},a.sel,NaN);var T=u.line,I=a.cm,H;if(a.iter(T,p.line+1,function(le){I&&_.collapsed&&!I.options.lineWrapping&&Yr(le)==I.display.maxLine&&(H=!0),_.collapsed&&T!=u.line&&Gi(le,0),th(le,new Ra(_,T==u.line?u.ch:null,T==p.line?p.ch:null),a.cm&&a.cm.curOp),++T}),_.collapsed&&a.iter(u.line,p.line+1,function(le){tr(a,le)&&Gi(le,0)}),_.clearOnEnter&&Ne(_,"beforeCursorEnter",function(){return _.clear()}),_.readOnly&&(Xs(),(a.history.done.length||a.history.undone.length)&&a.clearHistory()),_.collapsed&&(_.id=++fm,_.atomic=!0),I){if(H&&(I.curOp.updateMaxLine=!0),_.collapsed)Zi(I,u.line,p.line+1);else if(_.className||_.startStyle||_.endStyle||_.css||_.attributes||_.title)for(var ie=u.line;ie<=p.line;ie++)fr(I,ie,"text");_.atomic&&qa(I.doc),fi(I,"markerAdded",I,_)}return _}var To=function(a,u){this.markers=a,this.primary=u;for(var p=0;p<a.length;++p)a[p].parent=this};To.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();fi(this,"clear")}},To.prototype.find=function(a,u){return this.primary.find(a,u)},Ri(To);function Xa(a,u,p,m,v){m=xe(m),m.shared=!1;var _=[Qr(a,u,p,m,v)],E=_[0],T=m.widgetNode;return Eo(a,function(I){T&&(m.widgetNode=T.cloneNode(!0)),_.push(Qr(I,Vt(I,u),Vt(I,p),m,v));for(var H=0;H<I.linked.length;++H)if(I.linked[H].isParent)return;E=ct(_)}),new To(_,E)}function xh(a){return a.findMarks(Ke(a.first,0),a.clipPos(Ke(a.lastLine())),function(u){return u.parent})}function mm(a,u){for(var p=0;p<u.length;p++){var m=u[p],v=m.find(),_=a.clipPos(v.from),E=a.clipPos(v.to);if(Rt(_,E)){var T=Qr(a,_,E,m.primary,m.primary.type);m.markers.push(T),T.parent=m}}}function Eh(a){for(var u=function(m){var v=a[m],_=[v.primary.doc];Eo(v.primary.doc,function(I){return _.push(I)});for(var E=0;E<v.markers.length;E++){var T=v.markers[E];R(_,T.doc)==-1&&(T.parent=null,v.markers.splice(E--,1))}},p=0;p<a.length;p++)u(p)}var pm=0,rr=function(a,u,p,m,v){if(!(this instanceof rr))return new rr(a,u,p,m,v);p==null&&(p=0),Ja.call(this,[new Jl([new Fs("",null)])]),this.first=p,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=p;var _=Ke(p,0);this.sel=Bs(_),this.history=new ql(null),this.id=++pm,this.modeOption=u,this.lineSep=m,this.direction=v=="rtl"?"rtl":"ltr",this.extend=!1,typeof a=="string"&&(a=this.splitLines(a)),jl(this,{from:_,to:_,text:a}),On(this,Bs(_),ge)};rr.prototype=Te(Ja.prototype,{constructor:rr,iter:function(a,u,p){p?this.iterN(a-this.first,u-a,p):this.iterN(this.first,this.first+this.size,a)},insert:function(a,u){for(var p=0,m=0;m<u.length;++m)p+=u[m].height;this.insertInner(a-this.first,u,p)},remove:function(a,u){this.removeInner(a-this.first,u)},getValue:function(a){var u=$t(this,this.first,this.first+this.size);return a===!1?u:u.join(a||this.lineSeparator())},setValue:Ni(function(a){var u=Ke(this.first,0),p=this.first+this.size-1;Za(this,{from:u,to:Ke(p,St(this,p).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0),this.cm&&nr(this.cm,0,0),On(this,Bs(u),ge)}),replaceRange:function(a,u,p,m){u=Vt(this,u),p=p?Vt(this,p):u,Ya(this,a,u,p,m)},getRange:function(a,u,p){var m=cn(this,Vt(this,a),Vt(this,u));return p===!1?m:p===""?m.join(""):m.join(p||this.lineSeparator())},getLine:function(a){var u=this.getLineHandle(a);return u&&u.text},getLineHandle:function(a){if(ni(this,a))return St(this,a)},getLineNumber:function(a){return Xt(a)},getLineHandleVisualStart:function(a){return typeof a=="number"&&(a=St(this,a)),Yr(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Vt(this,a)},getCursor:function(a){var u=this.sel.primary(),p;return a==null||a=="head"?p=u.head:a=="anchor"?p=u.anchor:a=="end"||a=="to"||a===!1?p=u.to():p=u.from(),p},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ni(function(a,u,p){xr(this,Vt(this,typeof a=="number"?Ke(a,u||0):a),null,p)}),setSelection:Ni(function(a,u,p){xr(this,Vt(this,a),Vt(this,u||a),p)}),extendSelection:Ni(function(a,u,p){Vr(this,Vt(this,a),u&&Vt(this,u),p)}),extendSelections:Ni(function(a,u){Vs(this,Kr(this,a),u)}),extendSelectionsBy:Ni(function(a,u){var p=En(this.sel.ranges,a);Vs(this,Kr(this,p),u)}),setSelections:Ni(function(a,u,p){if(a.length){for(var m=[],v=0;v<a.length;v++)m[v]=new kn(Vt(this,a[v].anchor),Vt(this,a[v].head||a[v].anchor));u==null&&(u=Math.min(a.length-1,this.sel.primIndex)),On(this,Nr(this.cm,m,u),p)}}),addSelection:Ni(function(a,u,p){var m=this.sel.ranges.slice(0);m.push(new kn(Vt(this,a),Vt(this,u||a))),On(this,Nr(this.cm,m,m.length-1),p)}),getSelection:function(a){for(var u=this.sel.ranges,p,m=0;m<u.length;m++){var v=cn(this,u[m].from(),u[m].to());p=p?p.concat(v):v}return a===!1?p:p.join(a||this.lineSeparator())},getSelections:function(a){for(var u=[],p=this.sel.ranges,m=0;m<p.length;m++){var v=cn(this,p[m].from(),p[m].to());a!==!1&&(v=v.join(a||this.lineSeparator())),u[m]=v}return u},replaceSelection:function(a,u,p){for(var m=[],v=0;v<this.sel.ranges.length;v++)m[v]=a;this.replaceSelections(m,u,p||"+input")},replaceSelections:Ni(function(a,u,p){for(var m=[],v=this.sel,_=0;_<v.ranges.length;_++){var E=v.ranges[_];m[_]={from:E.from(),to:E.to(),text:this.splitLines(a[_]),origin:p}}for(var T=u&&u!="end"&&dm(this,m,u),I=m.length-1;I>=0;I--)Za(this,m[I]);T?Kc(this,T):this.cm&&Ci(this.cm)}),undo:Ni(function(){Yl(this,"undo")}),redo:Ni(function(){Yl(this,"redo")}),undoSelection:Ni(function(){Yl(this,"undo",!0)}),redoSelection:Ni(function(){Yl(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,u=0,p=0,m=0;m<a.done.length;m++)a.done[m].ranges||++u;for(var v=0;v<a.undone.length;v++)a.undone[v].ranges||++p;return{undo:u,redo:p}},clearHistory:function(){var a=this;this.history=new ql(this.history),Eo(this,function(u){return u.history=a.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:ga(this.history.done),undone:ga(this.history.undone)}},setHistory:function(a){var u=this.history=new ql(this.history);u.done=ga(a.done.slice(0),null,!0),u.undone=ga(a.undone.slice(0),null,!0)},setGutterMarker:Ni(function(a,u,p){return va(this,a,"gutter",function(m){var v=m.gutterMarkers||(m.gutterMarkers={});return v[u]=p,!p&&Y(v)&&(m.gutterMarkers=null),!0})}),clearGutter:Ni(function(a){var u=this;this.iter(function(p){p.gutterMarkers&&p.gutterMarkers[a]&&va(u,p,"gutter",function(){return p.gutterMarkers[a]=null,Y(p.gutterMarkers)&&(p.gutterMarkers=null),!0})})}),lineInfo:function(a){var u;if(typeof a=="number"){if(!ni(this,a)||(u=a,a=St(this,a),!a))return null}else if(u=Xt(a),u==null)return null;return{line:u,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:Ni(function(a,u,p){return va(this,a,u=="gutter"?"gutter":"class",function(m){var v=u=="text"?"textClass":u=="background"?"bgClass":u=="gutter"?"gutterClass":"wrapClass";if(!m[v])m[v]=p;else{if(fe(p).test(m[v]))return!1;m[v]+=" "+p}return!0})}),removeLineClass:Ni(function(a,u,p){return va(this,a,u=="gutter"?"gutter":"class",function(m){var v=u=="text"?"textClass":u=="background"?"bgClass":u=="gutter"?"gutterClass":"wrapClass",_=m[v];if(_)if(p==null)m[v]=null;else{var E=_.match(fe(p));if(!E)return!1;var T=E.index+E[0].length;m[v]=_.slice(0,E.index)+(!E.index||T==_.length?"":" ")+_.slice(T)||null}else return!1;return!0})}),addLineWidget:Ni(function(a,u,p){return Mg(this,a,u,p)}),removeLineWidget:function(a){a.clear()},markText:function(a,u,p){return Qr(this,Vt(this,a),Vt(this,u),p,p&&p.type||"range")},setBookmark:function(a,u){var p={replacedWith:u&&(u.nodeType==null?u.widget:u),insertLeft:u&&u.insertLeft,clearWhenEmpty:!1,shared:u&&u.shared,handleMouseEvents:u&&u.handleMouseEvents};return a=Vt(this,a),Qr(this,a,a,p,"bookmark")},findMarksAt:function(a){a=Vt(this,a);var u=[],p=St(this,a.line).markedSpans;if(p)for(var m=0;m<p.length;++m){var v=p[m];(v.from==null||v.from<=a.ch)&&(v.to==null||v.to>=a.ch)&&u.push(v.marker.parent||v.marker)}return u},findMarks:function(a,u,p){a=Vt(this,a),u=Vt(this,u);var m=[],v=a.line;return this.iter(a.line,u.line+1,function(_){var E=_.markedSpans;if(E)for(var T=0;T<E.length;T++){var I=E[T];!(I.to!=null&&v==a.line&&a.ch>=I.to||I.from==null&&v!=a.line||I.from!=null&&v==u.line&&I.from>=u.ch)&&(!p||p(I.marker))&&m.push(I.marker.parent||I.marker)}++v}),m},getAllMarks:function(){var a=[];return this.iter(function(u){var p=u.markedSpans;if(p)for(var m=0;m<p.length;++m)p[m].from!=null&&a.push(p[m].marker)}),a},posFromIndex:function(a){var u,p=this.first,m=this.lineSeparator().length;return this.iter(function(v){var _=v.text.length+m;if(_>a)return u=a,!0;a-=_,++p}),Vt(this,Ke(p,u))},indexFromPos:function(a){a=Vt(this,a);var u=a.ch;if(a.line<this.first||a.ch<0)return 0;var p=this.lineSeparator().length;return this.iter(this.first,a.line,function(m){u+=m.text.length+p}),u},copy:function(a){var u=new rr($t(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return u.scrollTop=this.scrollTop,u.scrollLeft=this.scrollLeft,u.sel=this.sel,u.extend=!1,a&&(u.history.undoDepth=this.history.undoDepth,u.setHistory(this.getHistory())),u},linkedDoc:function(a){a||(a={});var u=this.first,p=this.first+this.size;a.from!=null&&a.from>u&&(u=a.from),a.to!=null&&a.to<p&&(p=a.to);var m=new rr($t(this,u,p),a.mode||this.modeOption,u,this.lineSep,this.direction);return a.sharedHist&&(m.history=this.history),(this.linked||(this.linked=[])).push({doc:m,sharedHist:a.sharedHist}),m.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],mm(m,xh(this)),m},unlinkDoc:function(a){if(a instanceof Fn&&(a=a.doc),this.linked)for(var u=0;u<this.linked.length;++u){var p=this.linked[u];if(p.doc==a){this.linked.splice(u,1),a.unlinkDoc(this),Eh(xh(this));break}}if(a.history==this.history){var m=[a.id];Eo(a,function(v){return m.push(v.id)},!0),a.history=new ql(null),a.history.done=ga(this.history.done,m),a.history.undone=ga(this.history.undone,m)}},iterLinkedDocs:function(a){Eo(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):yn(a)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ni(function(a){a!="rtl"&&(a="ltr"),a!=this.direction&&(this.direction=a,this.iter(function(u){return u.order=null}),this.cm&&$l(this.cm))})}),rr.prototype.eachLine=rr.prototype.iter;var td=0;function Lg(a){var u=this;if(Sh(u),!(Nt(u,a)||A(u.display,a))){mn(a),c&&(td=+new Date);var p=Mr(u,a,!0),m=a.dataTransfer.files;if(!(!p||u.isReadOnly()))if(m&&m.length&&window.FileReader&&window.File)for(var v=m.length,_=Array(v),E=0,T=function(){++E==v&&bi(u,function(){p=Vt(u.doc,p);var ye={from:p,to:p,text:u.doc.splitLines(_.filter(function(Ve){return Ve!=null}).join(u.doc.lineSeparator())),origin:"paste"};Za(u.doc,ye),Kc(u.doc,Bs(Vt(u.doc,p),Vt(u.doc,xo(ye))))})()},I=function(ye,Ve){if(u.options.allowDropFileTypes&&R(u.options.allowDropFileTypes,ye.type)==-1){T();return}var qe=new FileReader;qe.onerror=function(){return T()},qe.onload=function(){var Qe=qe.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Qe)){T();return}_[Ve]=Qe,T()},qe.readAsText(ye)},H=0;H<m.length;H++)I(m[H],H);else{if(u.state.draggingText&&u.doc.sel.contains(p)>-1){u.state.draggingText(a),setTimeout(function(){return u.display.input.focus()},20);return}try{var ie=a.dataTransfer.getData("Text");if(ie){var le;if(u.state.draggingText&&!u.state.draggingText.copy&&(le=u.listSelections()),Zl(u.doc,Bs(p,p)),le)for(var Ce=0;Ce<le.length;++Ce)Ya(u.doc,"",le[Ce].anchor,le[Ce].head,"drag");u.replaceSelection(ie,"around","paste"),u.display.input.focus()}}catch{}}}}function gs(a,u){if(c&&(!a.state.draggingText||+new Date-td<100)){ji(u);return}if(!(Nt(a,u)||A(a.display,u))&&(u.dataTransfer.setData("Text",a.getSelection()),u.dataTransfer.effectAllowed="copyMove",u.dataTransfer.setDragImage&&!D)){var p=re("img",null,null,"position: fixed; left: 0; top: 0;");p.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",x&&(p.width=p.height=1,a.display.wrapper.appendChild(p),p._top=p.offsetTop),u.dataTransfer.setDragImage(p,0,0),x&&p.parentNode.removeChild(p)}}function Ao(a,u){var p=Mr(a,u);if(p){var m=document.createDocumentFragment();sh(a,p,m),a.display.dragCursor||(a.display.dragCursor=re("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv)),Ie(a.display.dragCursor,m)}}function Sh(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function Th(a){if(document.getElementsByClassName){for(var u=document.getElementsByClassName("CodeMirror"),p=[],m=0;m<u.length;m++){var v=u[m].CodeMirror;v&&p.push(v)}p.length&&p[0].operation(function(){for(var _=0;_<p.length;_++)a(p[_])})}}var Ah=!1;function gm(){Ah||(Ph(),Ah=!0)}function Ph(){var a;Ne(window,"resize",function(){a==null&&(a=setTimeout(function(){a=null,Th(bm)},100))}),Ne(window,"blur",function(){return Th(Ml)})}function bm(a){var u=a.display;u.cachedCharWidth=u.cachedTextHeight=u.cachedPaddingH=null,u.scrollbarsClipped=!1,a.setSize()}for(var bs={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ql=0;Ql<10;Ql++)bs[Ql+48]=bs[Ql+96]=String(Ql);for(var Jc=65;Jc<=90;Jc++)bs[Jc]=String.fromCharCode(Jc);for(var ec=1;ec<=12;ec++)bs[ec+111]=bs[ec+63235]="F"+ec;var vs={};vs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},vs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},vs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},vs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},vs.default=K?vs.macDefault:vs.pcDefault;function Ih(a){var u=a.split(/-(?!$)/);a=u[u.length-1];for(var p,m,v,_,E=0;E<u.length-1;E++){var T=u[E];if(/^(cmd|meta|m)$/i.test(T))_=!0;else if(/^a(lt)?$/i.test(T))p=!0;else if(/^(c|ctrl|control)$/i.test(T))m=!0;else if(/^s(hift)?$/i.test(T))v=!0;else throw new Error("Unrecognized modifier name: "+T)}return p&&(a="Alt-"+a),m&&(a="Ctrl-"+a),_&&(a="Cmd-"+a),v&&(a="Shift-"+a),a}function vm(a){var u={};for(var p in a)if(a.hasOwnProperty(p)){var m=a[p];if(/^(name|fallthrough|(de|at)tach)$/.test(p))continue;if(m=="..."){delete a[p];continue}for(var v=En(p.split(" "),Ih),_=0;_<v.length;_++){var E=void 0,T=void 0;_==v.length-1?(T=v.join(" "),E=m):(T=v.slice(0,_+1).join(" "),E="...");var I=u[T];if(!I)u[T]=E;else if(I!=E)throw new Error("Inconsistent bindings for "+T)}delete a[p]}for(var H in u)a[H]=u[H];return a}function Qa(a,u,p,m){u=el(u);var v=u.call?u.call(a,m):u[a];if(v===!1)return"nothing";if(v==="...")return"multi";if(v!=null&&p(v))return"handled";if(u.fallthrough){if(Object.prototype.toString.call(u.fallthrough)!="[object Array]")return Qa(a,u.fallthrough,p,m);for(var _=0;_<u.fallthrough.length;_++){var E=Qa(a,u.fallthrough[_],p,m);if(E)return E}}}function nd(a){var u=typeof a=="string"?a:bs[a.keyCode];return u=="Ctrl"||u=="Alt"||u=="Shift"||u=="Mod"}function Dh(a,u,p){var m=a;return u.altKey&&m!="Alt"&&(a="Alt-"+a),(X?u.metaKey:u.ctrlKey)&&m!="Ctrl"&&(a="Ctrl-"+a),(X?u.ctrlKey:u.metaKey)&&m!="Mod"&&(a="Cmd-"+a),!p&&u.shiftKey&&m!="Shift"&&(a="Shift-"+a),a}function ws(a,u){if(x&&a.keyCode==34&&a.char)return!1;var p=bs[a.keyCode];return p==null||a.altGraphKey?!1:(a.keyCode==3&&a.code&&(p=a.code),Dh(p,a,u))}function el(a){return typeof a=="string"?vs[a]:a}function tc(a,u){for(var p=a.doc.sel.ranges,m=[],v=0;v<p.length;v++){for(var _=u(p[v]);m.length&&Rt(_.from,ct(m).to)<=0;){var E=m.pop();if(Rt(E.from,_.from)<0){_.from=E.from;break}}m.push(_)}gi(a,function(){for(var T=m.length-1;T>=0;T--)Ya(a.doc,"",m[T].from,m[T].to,"+delete");Ci(a)})}function Rh(a,u,p){var m=ve(a.text,u+p,p);return m<0||m>a.text.length?null:m}function Xc(a,u,p){var m=Rh(a,u.ch,p);return m==null?null:new Ke(u.line,m,p<0?"after":"before")}function Oh(a,u,p,m,v){if(a){u.doc.direction=="rtl"&&(v=-v);var _=rt(p,u.doc.direction);if(_){var E=v<0?ct(_):_[0],T=v<0==(E.level==1),I=T?"after":"before",H;if(E.level>0||u.doc.direction=="rtl"){var ie=Pt(u,p);H=v<0?p.text.length-1:0;var le=Ut(u,ie,H).top;H=et(function(Ce){return Ut(u,ie,Ce).top==le},v<0==(E.level==1)?E.from:E.to-1,H),I=="before"&&(H=Rh(p,H,1))}else H=v<0?E.to:E.from;return new Ke(m,H,I)}}return new Ke(m,v<0?p.text.length:0,v<0?"before":"after")}function Fh(a,u,p,m){var v=rt(u,a.doc.direction);if(!v)return Xc(u,p,m);p.ch>=u.text.length?(p.ch=u.text.length,p.sticky="before"):p.ch<=0&&(p.ch=0,p.sticky="after");var _=ut(v,p.ch,p.sticky),E=v[_];if(a.doc.direction=="ltr"&&E.level%2==0&&(m>0?E.to>p.ch:E.from<p.ch))return Xc(u,p,m);var T=function(ot,dt){return Rh(u,ot instanceof Ke?ot.ch:ot,dt)},I,H=function(ot){return a.options.lineWrapping?(I=I||Pt(a,u),uo(a,u,I,ot)):{begin:0,end:u.text.length}},ie=H(p.sticky=="before"?T(p,-1):p.ch);if(a.doc.direction=="rtl"||E.level==1){var le=E.level==1==m<0,Ce=T(p,le?1:-1);if(Ce!=null&&(le?Ce<=E.to&&Ce<=ie.end:Ce>=E.from&&Ce>=ie.begin)){var ye=le?"before":"after";return new Ke(p.line,Ce,ye)}}var Ve=function(ot,dt,tt){for(var bt=function(Mn,Si){return Si?new Ke(p.line,T(Mn,1),"before"):new Ke(p.line,Mn,"after")};ot>=0&&ot<v.length;ot+=dt){var Mt=v[ot],Dt=dt>0==(Mt.level!=1),en=Dt?tt.begin:T(tt.end,-1);if(Mt.from<=en&&en<Mt.to||(en=Dt?Mt.from:T(Mt.to,-1),tt.begin<=en&&en<tt.end))return bt(en,Dt)}},qe=Ve(_+m,m,ie);if(qe)return qe;var Qe=m>0?ie.end:T(ie.begin,-1);return Qe!=null&&!(m>0&&Qe==u.text.length)&&(qe=Ve(m>0?0:v.length-1,m,H(Qe)),qe)?qe:null}var nc={selectAll:Ju,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),ge)},killLine:function(a){return tc(a,function(u){if(u.empty()){var p=St(a.doc,u.head.line).text.length;return u.head.ch==p&&u.head.line<a.lastLine()?{from:u.head,to:Ke(u.head.line+1,0)}:{from:u.head,to:Ke(u.head.line,p)}}else return{from:u.from(),to:u.to()}})},deleteLine:function(a){return tc(a,function(u){return{from:Ke(u.from().line,0),to:Vt(a.doc,Ke(u.to().line+1,0))}})},delLineLeft:function(a){return tc(a,function(u){return{from:Ke(u.from().line,0),to:u.from()}})},delWrappedLineLeft:function(a){return tc(a,function(u){var p=a.charCoords(u.head,"div").top+5,m=a.coordsChar({left:0,top:p},"div");return{from:m,to:u.from()}})},delWrappedLineRight:function(a){return tc(a,function(u){var p=a.charCoords(u.head,"div").top+5,m=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:p},"div");return{from:u.from(),to:m}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(Ke(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(Ke(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(u){return wm(a,u.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(u){return Mh(a,u.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(u){return ym(a,u.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(u){var p=a.cursorCoords(u.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:p},"div")},$e)},goLineLeft:function(a){return a.extendSelectionsBy(function(u){var p=a.cursorCoords(u.head,"div").top+5;return a.coordsChar({left:0,top:p},"div")},$e)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(u){var p=a.cursorCoords(u.head,"div").top+5,m=a.coordsChar({left:0,top:p},"div");return m.ch<a.getLine(m.line).search(/\S/)?Mh(a,u.head):m},$e)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"codepoint")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("	")},insertSoftTab:function(a){for(var u=[],p=a.listSelections(),m=a.options.tabSize,v=0;v<p.length;v++){var _=p[v].from(),E=Ue(a.getLine(_.line),_.ch,m);u.push(jt(m-E%m))}a.replaceSelections(u)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return gi(a,function(){for(var u=a.listSelections(),p=[],m=0;m<u.length;m++)if(u[m].empty()){var v=u[m].head,_=St(a.doc,v.line).text;if(_){if(v.ch==_.length&&(v=new Ke(v.line,v.ch-1)),v.ch>0)v=new Ke(v.line,v.ch+1),a.replaceRange(_.charAt(v.ch-1)+_.charAt(v.ch-2),Ke(v.line,v.ch-2),v,"+transpose");else if(v.line>a.doc.first){var E=St(a.doc,v.line-1).text;E&&(v=new Ke(v.line,1),a.replaceRange(_.charAt(0)+a.doc.lineSeparator()+E.charAt(E.length-1),Ke(v.line-1,E.length-1),v,"+transpose"))}}p.push(new kn(v,v))}a.setSelections(p)})},newlineAndIndent:function(a){return gi(a,function(){for(var u=a.listSelections(),p=u.length-1;p>=0;p--)a.replaceRange(a.doc.lineSeparator(),u[p].anchor,u[p].head,"+input");u=a.listSelections();for(var m=0;m<u.length;m++)a.indentLine(u[m].from().line,null,!0);Ci(a)})},openLine:function(a){return a.replaceSelection(`
`,"start")},toggleOverwrite:function(a){return a.toggleOverwrite()}};function wm(a,u){var p=St(a.doc,u),m=Yr(p);return m!=p&&(u=Xt(m)),Oh(!0,a,m,u,1)}function ym(a,u){var p=St(a.doc,u),m=Lu(p);return m!=p&&(u=Xt(m)),Oh(!0,a,p,u,-1)}function Mh(a,u){var p=wm(a,u.line),m=St(a.doc,p.line),v=rt(m,a.doc.direction);if(!v||v[0].level==0){var _=Math.max(p.ch,m.text.search(/\S/)),E=u.line==p.line&&u.ch<=_&&u.ch;return Ke(p.line,E?0:_,p.sticky)}return p}function id(a,u,p){if(typeof u=="string"&&(u=nc[u],!u))return!1;a.display.input.ensurePolled();var m=a.display.shift,v=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),p&&(a.display.shift=!1),v=u(a)!=he}finally{a.display.shift=m,a.state.suppressEdits=!1}return v}function _m(a,u,p){for(var m=0;m<a.state.keyMaps.length;m++){var v=Qa(u,a.state.keyMaps[m],p,a);if(v)return v}return a.options.extraKeys&&Qa(u,a.options.extraKeys,p,a)||Qa(u,a.options.keyMap,p,a)}var km=new P;function ic(a,u,p,m){var v=a.state.keySeq;if(v){if(nd(u))return"handled";if(/\'$/.test(u)?a.state.keySeq=null:km.set(50,function(){a.state.keySeq==v&&(a.state.keySeq=null,a.display.input.reset())}),Lh(a,v+" "+u,p,m))return!0}return Lh(a,u,p,m)}function Lh(a,u,p,m){var v=_m(a,u,m);return v=="multi"&&(a.state.keySeq=u),v=="handled"&&fi(a,"keyHandled",a,u,p),(v=="handled"||v=="multi")&&(mn(p),ah(a)),!!v}function Bh(a,u){var p=ws(u,!0);return p?u.shiftKey&&!a.state.keySeq?ic(a,"Shift-"+p,u,function(m){return id(a,m,!0)})||ic(a,p,u,function(m){if(typeof m=="string"?/^go[A-Z]/.test(m):m.motion)return id(a,m)}):ic(a,p,u,function(m){return id(a,m)}):!1}function Nh(a,u,p){return ic(a,"'"+p+"'",u,function(m){return id(a,m,!0)})}var rd=null;function Cm(a){var u=this;if(!(a.target&&a.target!=u.display.input.getField())&&(u.curOp.focus=Pe(ke(u)),!Nt(u,a))){c&&h<11&&a.keyCode==27&&(a.returnValue=!1);var p=a.keyCode;u.display.shift=p==16||a.shiftKey;var m=Bh(u,a);x&&(rd=m?p:null,!m&&p==88&&!Tn&&(K?a.metaKey:a.ctrlKey)&&u.replaceSelection("",null,"cut")),r&&!K&&!m&&p==46&&a.shiftKey&&!a.ctrlKey&&document.execCommand&&document.execCommand("cut"),p==18&&!/\bCodeMirror-crosshair\b/.test(u.display.lineDiv.className)&&xm(u)}}function xm(a){var u=a.display.lineDiv;je(u,"CodeMirror-crosshair");function p(m){(m.keyCode==18||!m.altKey)&&(Oe(u,"CodeMirror-crosshair"),Bt(document,"keyup",p),Bt(document,"mouseover",p))}Ne(document,"keyup",p),Ne(document,"mouseover",p)}function Vh(a){a.keyCode==16&&(this.doc.sel.shift=!1),Nt(this,a)}function zh(a){var u=this;if(!(a.target&&a.target!=u.display.input.getField())&&!(A(u.display,a)||Nt(u,a)||a.ctrlKey&&!a.altKey||K&&a.metaKey)){var p=a.keyCode,m=a.charCode;if(x&&p==rd){rd=null,mn(a);return}if(!(x&&(!a.which||a.which<10)&&Bh(u,a))){var v=String.fromCharCode(m??p);v!="\b"&&(Nh(u,a,v)||u.display.input.onKeyPress(a))}}}var Bg=400,rc=function(a,u,p){this.time=a,this.pos=u,this.button=p};rc.prototype.compare=function(a,u,p){return this.time+Bg>a&&Rt(u,this.pos)==0&&p==this.button};var oc,jo;function od(a,u){var p=+new Date;return jo&&jo.compare(p,a,u)?(oc=jo=null,"triple"):oc&&oc.compare(p,a,u)?(jo=new rc(p,a,u),oc=null,"double"):(oc=new rc(p,a,u),jo=null,"single")}function Qc(a){var u=this,p=u.display;if(!(Nt(u,a)||p.activeTouch&&p.input.supportsTouch())){if(p.input.ensurePolled(),p.shift=a.shiftKey,A(p,a)){g||(p.scroller.draggable=!1,setTimeout(function(){return p.scroller.draggable=!0},100));return}if(!ac(u,a)){var m=Mr(u,a),v=$r(a),_=m?od(m,v):"single";lt(u).focus(),v==1&&u.state.selectingText&&u.state.selectingText(a),!(m&&on(u,v,m,_,a))&&(v==1?m?sn(u,m,_,a):gr(a)==p.scroller&&mn(a):v==2?(m&&Vr(u.doc,m),setTimeout(function(){return p.input.focus()},20)):v==3&&(se?u.display.input.onContextMenu(a):lh(u)))}}}function on(a,u,p,m,v){var _="Click";return m=="double"?_="Double"+_:m=="triple"&&(_="Triple"+_),_=(u==1?"Left":u==2?"Middle":"Right")+_,ic(a,Dh(_,v),v,function(E){if(typeof E=="string"&&(E=nc[E]),!E)return!1;var T=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),T=E(a,p)!=he}finally{a.state.suppressEdits=!1}return T})}function fo(a,u,p){var m=a.getOption("configureMouse"),v=m?m(a,u,p):{};if(v.unit==null){var _=q?p.shiftKey&&p.metaKey:p.altKey;v.unit=_?"rectangle":u=="single"?"char":u=="double"?"word":"line"}return(v.extend==null||a.doc.extend)&&(v.extend=a.doc.extend||p.shiftKey),v.addNew==null&&(v.addNew=K?p.metaKey:p.ctrlKey),v.moveOnDrag==null&&(v.moveOnDrag=!(K?p.altKey:p.ctrlKey)),v}function sn(a,u,p,m){c?setTimeout(Ee(im,a),0):a.curOp.focus=Pe(ke(a));var v=fo(a,p,m),_=a.doc.sel,E;a.options.dragDrop&&Ia&&!a.isReadOnly()&&p=="single"&&(E=_.contains(u))>-1&&(Rt((E=_.ranges[E]).from(),u)<0||u.xRel>0)&&(Rt(E.to(),u)>0||u.xRel<0)?eo(a,m,u,v):sd(a,m,u,v)}function eo(a,u,p,m){var v=a.display,_=!1,E=bi(a,function(H){g&&(v.scroller.draggable=!1),a.state.draggingText=!1,a.state.delayingBlurEvent&&(a.hasFocus()?a.state.delayingBlurEvent=!1:lh(a)),Bt(v.wrapper.ownerDocument,"mouseup",E),Bt(v.wrapper.ownerDocument,"mousemove",T),Bt(v.scroller,"dragstart",I),Bt(v.scroller,"drop",E),_||(mn(H),m.addNew||Vr(a.doc,p,null,null,m.extend),g&&!D||c&&h==9?setTimeout(function(){v.wrapper.ownerDocument.body.focus({preventScroll:!0}),v.input.focus()},20):v.input.focus())}),T=function(H){_=_||Math.abs(u.clientX-H.clientX)+Math.abs(u.clientY-H.clientY)>=10},I=function(){return _=!0};g&&(v.scroller.draggable=!0),a.state.draggingText=E,E.copy=!m.moveOnDrag,Ne(v.wrapper.ownerDocument,"mouseup",E),Ne(v.wrapper.ownerDocument,"mousemove",T),Ne(v.scroller,"dragstart",I),Ne(v.scroller,"drop",E),a.state.delayingBlurEvent=!0,setTimeout(function(){return v.input.focus()},20),v.scroller.dragDrop&&v.scroller.dragDrop()}function Yi(a,u,p){if(p=="char")return new kn(u,u);if(p=="word")return a.findWordAt(u);if(p=="line")return new kn(Ke(u.line,0),Vt(a.doc,Ke(u.line+1,0)));var m=p(a,u);return new kn(m.from,m.to)}function sd(a,u,p,m){c&&lh(a);var v=a.display,_=a.doc;mn(u);var E,T,I=_.sel,H=I.ranges;if(m.addNew&&!m.extend?(T=_.sel.contains(p),T>-1?E=H[T]:E=new kn(p,p)):(E=_.sel.primary(),T=_.sel.primIndex),m.unit=="rectangle")m.addNew||(E=new kn(p,p)),p=Mr(a,u,!0,!0),T=-1;else{var ie=Yi(a,p,m.unit);m.extend?E=Kl(E,ie.anchor,ie.head,m.extend):E=ie}m.addNew?T==-1?(T=H.length,On(_,Nr(a,H.concat([E]),T),{scroll:!1,origin:"*mouse"})):H.length>1&&H[T].empty()&&m.unit=="char"&&!m.extend?(On(_,Nr(a,H.slice(0,T).concat(H.slice(T+1)),0),{scroll:!1,origin:"*mouse"}),I=_.sel):Ei(_,T,E,ce):(T=0,On(_,new Vi([E],0),ce),I=_.sel);var le=p;function Ce(tt){if(Rt(le,tt)!=0)if(le=tt,m.unit=="rectangle"){for(var bt=[],Mt=a.options.tabSize,Dt=Ue(St(_,p.line).text,p.ch,Mt),en=Ue(St(_,tt.line).text,tt.ch,Mt),Mn=Math.min(Dt,en),Si=Math.max(Dt,en),Gn=Math.min(p.line,tt.line),or=Math.min(a.lastLine(),Math.max(p.line,tt.line));Gn<=or;Gn++){var sr=St(_,Gn).text,Ti=At(sr,Mn,Mt);Mn==Si?bt.push(new kn(Ke(Gn,Ti),Ke(Gn,Ti))):sr.length>Ti&&bt.push(new kn(Ke(Gn,Ti),Ke(Gn,At(sr,Si,Mt))))}bt.length||bt.push(new kn(p,p)),On(_,Nr(a,I.ranges.slice(0,T).concat(bt),T),{origin:"*mouse",scroll:!1}),a.scrollIntoView(tt)}else{var Sr=E,Ji=Yi(a,tt,m.unit),vi=Sr.anchor,Ai;Rt(Ji.anchor,vi)>0?(Ai=Ji.head,vi=Hn(Sr.from(),Ji.anchor)):(Ai=Ji.anchor,vi=er(Sr.to(),Ji.head));var d=I.ranges.slice(0);d[T]=zs(a,new kn(Vt(_,vi),Ai)),On(_,Nr(a,d,T),ce)}}var ye=v.wrapper.getBoundingClientRect(),Ve=0;function qe(tt){var bt=++Ve,Mt=Mr(a,tt,!0,m.unit=="rectangle");if(Mt)if(Rt(Mt,le)!=0){a.curOp.focus=Pe(ke(a)),Ce(Mt);var Dt=Wu(v,_);(Mt.line>=Dt.to||Mt.line<Dt.from)&&setTimeout(bi(a,function(){Ve==bt&&qe(tt)}),150)}else{var en=tt.clientY<ye.top?-20:tt.clientY>ye.bottom?20:0;en&&setTimeout(bi(a,function(){Ve==bt&&(v.scroller.scrollTop+=en,qe(tt))}),50)}}function Qe(tt){a.state.selectingText=!1,Ve=1/0,tt&&(mn(tt),v.input.focus()),Bt(v.wrapper.ownerDocument,"mousemove",ot),Bt(v.wrapper.ownerDocument,"mouseup",dt),_.history.lastSelOrigin=null}var ot=bi(a,function(tt){tt.buttons===0||!$r(tt)?Qe(tt):qe(tt)}),dt=bi(a,Qe);a.state.selectingText=dt,Ne(v.wrapper.ownerDocument,"mousemove",ot),Ne(v.wrapper.ownerDocument,"mouseup",dt)}function zs(a,u){var p=u.anchor,m=u.head,v=St(a.doc,p.line);if(Rt(p,m)==0&&p.sticky==m.sticky)return u;var _=rt(v);if(!_)return u;var E=ut(_,p.ch,p.sticky),T=_[E];if(T.from!=p.ch&&T.to!=p.ch)return u;var I=E+(T.from==p.ch==(T.level!=1)?0:1);if(I==0||I==_.length)return u;var H;if(m.line!=p.line)H=(m.line-p.line)*(a.doc.direction=="ltr"?1:-1)>0;else{var ie=ut(_,m.ch,m.sticky),le=ie-E||(m.ch-p.ch)*(T.level==1?-1:1);ie==I-1||ie==I?H=le<0:H=le>0}var Ce=_[I+(H?-1:0)],ye=H==(Ce.level==1),Ve=ye?Ce.from:Ce.to,qe=ye?"after":"before";return p.ch==Ve&&p.sticky==qe?u:new kn(new Ke(p.line,Ve,qe),m)}function sc(a,u,p,m){var v,_;if(u.touches)v=u.touches[0].clientX,_=u.touches[0].clientY;else try{v=u.clientX,_=u.clientY}catch{return!1}if(v>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;m&&mn(u);var E=a.display,T=E.lineDiv.getBoundingClientRect();if(_>T.bottom||!Wn(a,p))return Oi(u);_-=T.top-E.viewOffset;for(var I=0;I<a.display.gutterSpecs.length;++I){var H=E.gutters.childNodes[I];if(H&&H.getBoundingClientRect().right>=v){var ie=qr(a.doc,_),le=a.display.gutterSpecs[I];return ln(a,p,a,ie,le.className,u),Oi(u)}}}function ac(a,u){return sc(a,u,"gutterClick",!0)}function lc(a,u){A(a.display,u)||ad(a,u)||Nt(a,u,"contextmenu")||se||a.display.input.onContextMenu(u)}function ad(a,u){return Wn(a,"gutterContextMenu")?sc(a,u,"gutterContextMenu",!1):!1}function ld(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ii(a)}var It={toString:function(){return"CodeMirror.Init"}},eu={},cc={};function ya(a){var u=a.optionHandlers;function p(m,v,_,E){a.defaults[m]=v,_&&(u[m]=E?function(T,I,H){H!=It&&_(T,I,H)}:_)}a.defineOption=p,a.Init=It,p("value","",function(m,v){return m.setValue(v)},!0),p("mode",null,function(m,v){m.doc.modeOption=v,Ku(m)},!0),p("indentUnit",2,Ku,!0),p("indentWithTabs",!1),p("smartIndent",!0),p("tabSize",4,function(m){Wl(m),ii(m),Zi(m)},!0),p("lineSeparator",null,function(m,v){if(m.doc.lineSep=v,!!v){var _=[],E=m.doc.first;m.doc.iter(function(I){for(var H=0;;){var ie=I.text.indexOf(v,H);if(ie==-1)break;H=ie+v.length,_.push(Ke(E,ie))}E++});for(var T=_.length-1;T>=0;T--)Ya(m.doc,v,_[T],Ke(_[T].line,_[T].ch+v.length))}}),p("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(m,v,_){m.state.specialChars=new RegExp(v.source+(v.test("	")?"":"|	"),"g"),_!=It&&m.refresh()}),p("specialCharPlaceholder",Nu,function(m){return m.refresh()},!0),p("electricChars",!0),p("inputStyle",U?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),p("spellcheck",!1,function(m,v){return m.getInputField().spellcheck=v},!0),p("autocorrect",!1,function(m,v){return m.getInputField().autocorrect=v},!0),p("autocapitalize",!1,function(m,v){return m.getInputField().autocapitalize=v},!0),p("rtlMoveVisually",!Q),p("wholeLineUpdateBefore",!0),p("theme","default",function(m){ld(m),zl(m)},!0),p("keyMap","default",function(m,v,_){var E=el(v),T=_!=It&&el(_);T&&T.detach&&T.detach(m,E),E.attach&&E.attach(m,T||null)}),p("extraKeys",null),p("configureMouse",null),p("lineWrapping",!1,tu,!0),p("gutters",[],function(m,v){m.display.gutterSpecs=Wc(v,m.options.lineNumbers),zl(m)},!0),p("fixedGutter",!0,function(m,v){m.display.gutters.style.left=v?la(m.display)+"px":"0",m.refresh()},!0),p("coverGutterNextToScrollbar",!1,function(m){return fa(m)},!0),p("scrollbarStyle","native",function(m){ju(m),fa(m),m.display.scrollbars.setScrollTop(m.doc.scrollTop),m.display.scrollbars.setScrollLeft(m.doc.scrollLeft)},!0),p("lineNumbers",!1,function(m,v){m.display.gutterSpecs=Wc(m.options.gutters,v),zl(m)},!0),p("firstLineNumber",1,zl,!0),p("lineNumberFormatter",function(m){return m},zl,!0),p("showCursorWhenSelecting",!1,Vc,!0),p("resetSelectionOnContextMenu",!0),p("lineWiseCopyCut",!0),p("pasteLinesPerSelection",!0),p("selectionsMayTouch",!1),p("readOnly",!1,function(m,v){v=="nocursor"&&(Ml(m),m.display.input.blur()),m.display.input.readOnlyChanged(v)}),p("screenReaderLabel",null,function(m,v){v=v===""?null:v,m.display.input.screenReaderLabelChanged(v)}),p("disableInput",!1,function(m,v){v||m.display.input.reset()},!0),p("dragDrop",!0,cd),p("allowDropFileTypes",null),p("cursorBlinkRate",530),p("cursorScrollMargin",0),p("cursorHeight",1,Vc,!0),p("singleCursorHeightPerLine",!0,Vc,!0),p("workTime",100),p("workDelay",100),p("flattenSpans",!0,Wl,!0),p("addModeClass",!1,Wl,!0),p("pollInterval",100),p("undoDepth",200,function(m,v){return m.doc.history.undoDepth=v}),p("historyEventDelay",1250),p("viewportMargin",10,function(m){return m.refresh()},!0),p("maxHighlightLength",1e4,Wl,!0),p("moveInputWithCursor",!0,function(m,v){v||m.display.input.resetPosition()}),p("tabindex",null,function(m,v){return m.display.input.getField().tabIndex=v||""}),p("autofocus",null),p("direction","ltr",function(m,v){return m.doc.setDirection(v)},!0),p("phrases",null)}function cd(a,u,p){var m=p&&p!=It;if(!u!=!m){var v=a.display.dragFunctions,_=u?Ne:Bt;_(a.display.scroller,"dragstart",v.start),_(a.display.scroller,"dragenter",v.enter),_(a.display.scroller,"dragover",v.over),_(a.display.scroller,"dragleave",v.leave),_(a.display.scroller,"drop",v.drop)}}function tu(a){a.options.lineWrapping?(je(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(Oe(a.display.wrapper,"CodeMirror-wrap"),Al(a)),Fl(a),Zi(a),ii(a),setTimeout(function(){return fa(a)},100)}function Fn(a,u){var p=this;if(!(this instanceof Fn))return new Fn(a,u);this.options=u=u?xe(u):{},xe(eu,u,!1);var m=u.value;typeof m=="string"?m=new rr(m,u.mode,null,u.lineSeparator,u.direction):u.mode&&(m.modeOption=u.mode),this.doc=m;var v=new Fn.inputStyles[u.inputStyle](this),_=this.display=new Hl(a,m,v,u);_.wrapper.CodeMirror=this,ld(this),u.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ju(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new P,keySeq:null,specialChars:null},u.autofocus&&!U&&_.input.focus(),c&&h<11&&setTimeout(function(){return p.display.input.reset(!0)},20),tl(this),gm(),ps(this),this.curOp.forceUpdate=!0,$c(this,m),u.autofocus&&!U||this.hasFocus()?setTimeout(function(){p.hasFocus()&&!p.state.focused&&ch(p)},20):Ml(this);for(var E in cc)cc.hasOwnProperty(E)&&cc[E](this,u[E],It);Uc(this),u.finishInit&&u.finishInit(this);for(var T=0;T<nl.length;++T)nl[T](this);ma(this),g&&u.lineWrapping&&getComputedStyle(_.lineDiv).textRendering=="optimizelegibility"&&(_.lineDiv.style.textRendering="auto")}Fn.defaults=eu,Fn.optionHandlers=cc;function tl(a){var u=a.display;Ne(u.scroller,"mousedown",bi(a,Qc)),c&&h<11?Ne(u.scroller,"dblclick",bi(a,function(I){if(!Nt(a,I)){var H=Mr(a,I);if(!(!H||ac(a,I)||A(a.display,I))){mn(I);var ie=a.findWordAt(H);Vr(a.doc,ie.anchor,ie.head)}}})):Ne(u.scroller,"dblclick",function(I){return Nt(a,I)||mn(I)}),Ne(u.scroller,"contextmenu",function(I){return lc(a,I)}),Ne(u.input.getField(),"contextmenu",function(I){u.scroller.contains(I.target)||lc(a,I)});var p,m={end:0};function v(){u.activeTouch&&(p=setTimeout(function(){return u.activeTouch=null},1e3),m=u.activeTouch,m.end=+new Date)}function _(I){if(I.touches.length!=1)return!1;var H=I.touches[0];return H.radiusX<=1&&H.radiusY<=1}function E(I,H){if(H.left==null)return!0;var ie=H.left-I.left,le=H.top-I.top;return ie*ie+le*le>20*20}Ne(u.scroller,"touchstart",function(I){if(!Nt(a,I)&&!_(I)&&!ac(a,I)){u.input.ensurePolled(),clearTimeout(p);var H=+new Date;u.activeTouch={start:H,moved:!1,prev:H-m.end<=300?m:null},I.touches.length==1&&(u.activeTouch.left=I.touches[0].pageX,u.activeTouch.top=I.touches[0].pageY)}}),Ne(u.scroller,"touchmove",function(){u.activeTouch&&(u.activeTouch.moved=!0)}),Ne(u.scroller,"touchend",function(I){var H=u.activeTouch;if(H&&!A(u,I)&&H.left!=null&&!H.moved&&new Date-H.start<300){var ie=a.coordsChar(u.activeTouch,"page"),le;!H.prev||E(H,H.prev)?le=new kn(ie,ie):!H.prev.prev||E(H,H.prev.prev)?le=a.findWordAt(ie):le=new kn(Ke(ie.line,0),Vt(a.doc,Ke(ie.line+1,0))),a.setSelection(le.anchor,le.head),a.focus(),mn(I)}v()}),Ne(u.scroller,"touchcancel",v),Ne(u.scroller,"scroll",function(){u.scroller.clientHeight&&(ca(a,u.scroller.scrollTop),ua(a,u.scroller.scrollLeft,!0),ln(a,"scroll",a))}),Ne(u.scroller,"mousewheel",function(I){return Ls(a,I)}),Ne(u.scroller,"DOMMouseScroll",function(I){return Ls(a,I)}),Ne(u.wrapper,"scroll",function(){return u.wrapper.scrollTop=u.wrapper.scrollLeft=0}),u.dragFunctions={enter:function(I){Nt(a,I)||ji(I)},over:function(I){Nt(a,I)||(Ao(a,I),ji(I))},start:function(I){return gs(a,I)},drop:bi(a,Lg),leave:function(I){Nt(a,I)||Sh(a)}};var T=u.input.getField();Ne(T,"keyup",function(I){return Vh.call(a,I)}),Ne(T,"keydown",bi(a,Cm)),Ne(T,"keypress",bi(a,zh)),Ne(T,"focus",function(I){return ch(a,I)}),Ne(T,"blur",function(I){return Ml(a,I)})}var nl=[];Fn.defineInitHook=function(a){return nl.push(a)};function il(a,u,p,m){var v=a.doc,_;p==null&&(p="add"),p=="smart"&&(v.mode.indent?_=so(a,u).state:p="prev");var E=a.options.tabSize,T=St(v,u),I=Ue(T.text,null,E);T.stateAfter&&(T.stateAfter=null);var H=T.text.match(/^\s*/)[0],ie;if(!m&&!/\S/.test(T.text))ie=0,p="not";else if(p=="smart"&&(ie=v.mode.indent(_,T.text.slice(H.length),T.text),ie==he||ie>150)){if(!m)return;p="prev"}p=="prev"?u>v.first?ie=Ue(St(v,u-1).text,null,E):ie=0:p=="add"?ie=I+a.options.indentUnit:p=="subtract"?ie=I-a.options.indentUnit:typeof p=="number"&&(ie=I+p),ie=Math.max(0,ie);var le="",Ce=0;if(a.options.indentWithTabs)for(var ye=Math.floor(ie/E);ye;--ye)Ce+=E,le+="	";if(Ce<ie&&(le+=jt(ie-Ce)),le!=H)return Ya(v,le,Ke(u,0),Ke(u,H.length),"+input"),T.stateAfter=null,!0;for(var Ve=0;Ve<v.sel.ranges.length;Ve++){var qe=v.sel.ranges[Ve];if(qe.head.line==u&&qe.head.ch<H.length){var Qe=Ke(u,H.length);Ei(v,Ve,new kn(Qe,Qe));break}}}var to=null;function mo(a){to=a}function Hs(a,u,p,m,v){var _=a.doc;a.display.shift=!1,m||(m=_.sel);var E=+new Date-200,T=v=="paste"||a.state.pasteIncoming>E,I=yn(u),H=null;if(T&&m.ranges.length>1)if(to&&to.text.join(`
`)==u){if(m.ranges.length%to.text.length==0){H=[];for(var ie=0;ie<to.text.length;ie++)H.push(_.splitLines(to.text[ie]))}}else I.length==m.ranges.length&&a.options.pasteLinesPerSelection&&(H=En(I,function(ot){return[ot]}));for(var le=a.curOp.updateInput,Ce=m.ranges.length-1;Ce>=0;Ce--){var ye=m.ranges[Ce],Ve=ye.from(),qe=ye.to();ye.empty()&&(p&&p>0?Ve=Ke(Ve.line,Ve.ch-p):a.state.overwrite&&!T?qe=Ke(qe.line,Math.min(St(_,qe.line).text.length,qe.ch+ct(I).length)):T&&to&&to.lineWise&&to.text.join(`
`)==I.join(`
`)&&(Ve=qe=Ke(Ve.line,0)));var Qe={from:Ve,to:qe,text:H?H[Ce%H.length]:I,origin:v||(T?"paste":a.state.cutIncoming>E?"cut":"+input")};Za(a.doc,Qe),fi(a,"inputRead",a,Qe)}u&&!T&&nu(a,u),Ci(a),a.curOp.updateInput<2&&(a.curOp.updateInput=le),a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=-1}function Us(a,u){var p=a.clipboardData&&a.clipboardData.getData("Text");if(p)return a.preventDefault(),!u.isReadOnly()&&!u.options.disableInput&&u.hasFocus()&&gi(u,function(){return Hs(u,p,0,null,"paste")}),!0}function nu(a,u){if(!(!a.options.electricChars||!a.options.smartIndent))for(var p=a.doc.sel,m=p.ranges.length-1;m>=0;m--){var v=p.ranges[m];if(!(v.head.ch>100||m&&p.ranges[m-1].head.line==v.head.line)){var _=a.getModeAt(v.head),E=!1;if(_.electricChars){for(var T=0;T<_.electricChars.length;T++)if(u.indexOf(_.electricChars.charAt(T))>-1){E=il(a,v.head.line,"smart");break}}else _.electricInput&&_.electricInput.test(St(a.doc,v.head.line).text.slice(0,v.head.ch))&&(E=il(a,v.head.line,"smart"));E&&fi(a,"electricInput",a,v.head.line)}}}function iu(a){for(var u=[],p=[],m=0;m<a.doc.sel.ranges.length;m++){var v=a.doc.sel.ranges[m].head.line,_={anchor:Ke(v,0),head:Ke(v+1,0)};p.push(_),u.push(a.getRange(_.anchor,_.head))}return{text:u,ranges:p}}function zr(a,u,p,m){a.setAttribute("autocorrect",p?"on":"off"),a.setAttribute("autocapitalize",m?"on":"off"),a.setAttribute("spellcheck",!!u)}function Hh(){var a=re("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),u=re("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return g?a.style.width="1000px":a.setAttribute("wrap","off"),V&&(a.style.border="1px solid black"),u}function Uh(a){var u=a.optionHandlers,p=a.helpers={};a.prototype={constructor:a,focus:function(){lt(this).focus(),this.display.input.focus()},setOption:function(m,v){var _=this.options,E=_[m];_[m]==v&&m!="mode"||(_[m]=v,u.hasOwnProperty(m)&&bi(this,u[m])(this,v,E),ln(this,"optionChange",this,m))},getOption:function(m){return this.options[m]},getDoc:function(){return this.doc},addKeyMap:function(m,v){this.state.keyMaps[v?"push":"unshift"](el(m))},removeKeyMap:function(m){for(var v=this.state.keyMaps,_=0;_<v.length;++_)if(v[_]==m||v[_].name==m)return v.splice(_,1),!0},addOverlay:ir(function(m,v){var _=m.token?m:a.getMode(this.options,m);if(_.startState)throw new Error("Overlays may not be stateful.");Sn(this.state.overlays,{mode:_,modeSpec:m,opaque:v&&v.opaque,priority:v&&v.priority||0},function(E){return E.priority}),this.state.modeGen++,Zi(this)}),removeOverlay:ir(function(m){for(var v=this.state.overlays,_=0;_<v.length;++_){var E=v[_].modeSpec;if(E==m||typeof m=="string"&&E.name==m){v.splice(_,1),this.state.modeGen++,Zi(this);return}}}),indentLine:ir(function(m,v,_){typeof v!="string"&&typeof v!="number"&&(v==null?v=this.options.smartIndent?"smart":"prev":v=v?"add":"subtract"),ni(this.doc,m)&&il(this,m,v,_)}),indentSelection:ir(function(m){for(var v=this.doc.sel.ranges,_=-1,E=0;E<v.length;E++){var T=v[E];if(T.empty())T.head.line>_&&(il(this,T.head.line,m,!0),_=T.head.line,E==this.doc.sel.primIndex&&Ci(this));else{var I=T.from(),H=T.to(),ie=Math.max(_,I.line);_=Math.min(this.lastLine(),H.line-(H.ch?0:1))+1;for(var le=ie;le<_;++le)il(this,le,m);var Ce=this.doc.sel.ranges;I.ch==0&&v.length==Ce.length&&Ce[E].from().ch>0&&Ei(this.doc,E,new kn(I,Ce[E].to()),ge)}}}),getTokenAt:function(m,v){return Da(this,m,v)},getLineTokens:function(m,v){return Da(this,Ke(m),v,!0)},getTokenTypeAt:function(m){m=Vt(this.doc,m);var v=Vo(this,St(this.doc,m.line)),_=0,E=(v.length-1)/2,T=m.ch,I;if(T==0)I=v[2];else for(;;){var H=_+E>>1;if((H?v[H*2-1]:0)>=T)E=H;else if(v[H*2+1]<T)_=H+1;else{I=v[H*2+2];break}}var ie=I?I.indexOf("overlay "):-1;return ie<0?I:ie==0?null:I.slice(0,ie-1)},getModeAt:function(m){var v=this.doc.mode;return v.innerMode?a.innerMode(v,this.getTokenAt(m).state).mode:v},getHelper:function(m,v){return this.getHelpers(m,v)[0]},getHelpers:function(m,v){var _=[];if(!p.hasOwnProperty(v))return _;var E=p[v],T=this.getModeAt(m);if(typeof T[v]=="string")E[T[v]]&&_.push(E[T[v]]);else if(T[v])for(var I=0;I<T[v].length;I++){var H=E[T[v][I]];H&&_.push(H)}else T.helperType&&E[T.helperType]?_.push(E[T.helperType]):E[T.name]&&_.push(E[T.name]);for(var ie=0;ie<E._global.length;ie++){var le=E._global[ie];le.pred(T,this)&&R(_,le.val)==-1&&_.push(le.val)}return _},getStateAfter:function(m,v){var _=this.doc;return m=hi(_,m??_.first+_.size-1),so(this,m+1,v).state},cursorCoords:function(m,v){var _,E=this.doc.sel.primary();return m==null?_=E.head:typeof m=="object"?_=Vt(this.doc,m):_=m?E.from():E.to(),pi(this,_,v||"page")},charCoords:function(m,v){return _n(this,Vt(this.doc,m),v||"page")},coordsChar:function(m,v){return m=co(this,m,v||"page"),ri(this,m.left,m.top)},lineAtHeight:function(m,v){return m=co(this,{top:m,left:0},v||"page").top,qr(this.doc,m+this.display.viewOffset)},heightAtLine:function(m,v,_){var E=!1,T;if(typeof m=="number"){var I=this.doc.first+this.doc.size-1;m<this.doc.first?m=this.doc.first:m>I&&(m=I,E=!0),T=St(this.doc,m)}else T=m;return Rn(this,T,{top:0,left:0},v||"page",_||E).top+(E?this.doc.height-lo(T):0)},defaultTextHeight:function(){return ho(this.display)},defaultCharWidth:function(){return ds(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(m,v,_,E,T){var I=this.display;m=pi(this,Vt(this.doc,m));var H=m.bottom,ie=m.left;if(v.style.position="absolute",v.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(v),I.sizer.appendChild(v),E=="over")H=m.top;else if(E=="above"||E=="near"){var le=Math.max(I.wrapper.clientHeight,this.doc.height),Ce=Math.max(I.sizer.clientWidth,I.lineSpace.clientWidth);(E=="above"||m.bottom+v.offsetHeight>le)&&m.top>v.offsetHeight?H=m.top-v.offsetHeight:m.bottom+v.offsetHeight<=le&&(H=m.bottom),ie+v.offsetWidth>Ce&&(ie=Ce-v.offsetWidth)}v.style.top=H+"px",v.style.left=v.style.right="",T=="right"?(ie=I.sizer.clientWidth-v.offsetWidth,v.style.right="0px"):(T=="left"?ie=0:T=="middle"&&(ie=(I.sizer.clientWidth-v.offsetWidth)/2),v.style.left=ie+"px"),_&&oi(this,{left:ie,top:H,right:ie+v.offsetWidth,bottom:H+v.offsetHeight})},triggerOnKeyDown:ir(Cm),triggerOnKeyPress:ir(zh),triggerOnKeyUp:Vh,triggerOnMouseDown:ir(Qc),execCommand:function(m){if(nc.hasOwnProperty(m))return nc[m].call(null,this)},triggerElectric:ir(function(m){nu(this,m)}),findPosH:function(m,v,_,E){var T=1;v<0&&(T=-1,v=-v);for(var I=Vt(this.doc,m),H=0;H<v&&(I=ud(this.doc,I,T,_,E),!I.hitSide);++H);return I},moveH:ir(function(m,v){var _=this;this.extendSelectionsBy(function(E){return _.display.shift||_.doc.extend||E.empty()?ud(_.doc,E.head,m,v,_.options.rtlMoveVisually):m<0?E.from():E.to()},$e)}),deleteH:ir(function(m,v){var _=this.doc.sel,E=this.doc;_.somethingSelected()?E.replaceSelection("",null,"+delete"):tc(this,function(T){var I=ud(E,T.head,m,v,!1);return m<0?{from:I,to:T.head}:{from:T.head,to:I}})}),findPosV:function(m,v,_,E){var T=1,I=E;v<0&&(T=-1,v=-v);for(var H=Vt(this.doc,m),ie=0;ie<v;++ie){var le=pi(this,H,"div");if(I==null?I=le.left:le.left=I,H=Wh(this,le,T,_),H.hitSide)break}return H},moveV:ir(function(m,v){var _=this,E=this.doc,T=[],I=!this.display.shift&&!E.extend&&E.sel.somethingSelected();if(E.extendSelectionsBy(function(ie){if(I)return m<0?ie.from():ie.to();var le=pi(_,ie.head,"div");ie.goalColumn!=null&&(le.left=ie.goalColumn),T.push(le.left);var Ce=Wh(_,le,m,v);return v=="page"&&ie==E.sel.primary()&&ms(_,_n(_,Ce,"div").top-le.top),Ce},$e),T.length)for(var H=0;H<E.sel.ranges.length;H++)E.sel.ranges[H].goalColumn=T[H]}),findWordAt:function(m){var v=this.doc,_=St(v,m.line).text,E=m.ch,T=m.ch;if(_){var I=this.getHelper(m,"wordChars");(m.sticky=="before"||T==_.length)&&E?--E:++T;for(var H=_.charAt(E),ie=$(H,I)?function(le){return $(le,I)}:/\s/.test(H)?function(le){return/\s/.test(le)}:function(le){return!/\s/.test(le)&&!$(le)};E>0&&ie(_.charAt(E-1));)--E;for(;T<_.length&&ie(_.charAt(T));)++T}return new kn(Ke(m.line,E),Ke(m.line,T))},toggleOverwrite:function(m){m!=null&&m==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?je(this.display.cursorDiv,"CodeMirror-overwrite"):Oe(this.display.cursorDiv,"CodeMirror-overwrite"),ln(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Pe(ke(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ir(function(m,v){nr(this,m,v)}),getScrollInfo:function(){var m=this.display.scroller;return{left:m.scrollLeft,top:m.scrollTop,height:m.scrollHeight-ee(this)-this.display.barHeight,width:m.scrollWidth-ee(this)-this.display.barWidth,clientHeight:Le(this),clientWidth:me(this)}},scrollIntoView:ir(function(m,v){m==null?(m={from:this.doc.sel.primary().head,to:null},v==null&&(v=this.options.cursorScrollMargin)):typeof m=="number"?m={from:Ke(m,0),to:null}:m.from==null&&(m={from:m,to:null}),m.to||(m.to=m.from),m.margin=v||0,m.from.line!=null?Ua(this,m):Lr(this,m.from,m.to,m.margin)}),setSize:ir(function(m,v){var _=this,E=function(I){return typeof I=="number"||/^\d+$/.test(String(I))?I+"px":I};m!=null&&(this.display.wrapper.style.width=E(m)),v!=null&&(this.display.wrapper.style.height=E(v)),this.options.lineWrapping&&_i(this);var T=this.display.viewFrom;this.doc.iter(T,this.display.viewTo,function(I){if(I.widgets){for(var H=0;H<I.widgets.length;H++)if(I.widgets[H].noHScroll){fr(_,T,"widget");break}}++T}),this.curOp.forceUpdate=!0,ln(this,"refresh",this)}),operation:function(m){return gi(this,m)},startOperation:function(){return ps(this)},endOperation:function(){return ma(this)},refresh:ir(function(){var m=this.display.cachedTextHeight;Zi(this),this.curOp.forceUpdate=!0,ii(this),nr(this,this.doc.scrollLeft,this.doc.scrollTop),Nl(this.display),(m==null||Math.abs(m-ho(this.display))>.5||this.options.lineWrapping)&&Fl(this),ln(this,"refresh",this)}),swapDoc:ir(function(m){var v=this.doc;return v.cm=null,this.state.selectingText&&this.state.selectingText(),$c(this,m),ii(this),this.display.input.reset(),nr(this,m.scrollLeft,m.scrollTop),this.curOp.forceScroll=!0,fi(this,"swapDoc",this,v),v}),phrase:function(m){var v=this.options.phrases;return v&&Object.prototype.hasOwnProperty.call(v,m)?v[m]:m},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ri(a),a.registerHelper=function(m,v,_){p.hasOwnProperty(m)||(p[m]=a[m]={_global:[]}),p[m][v]=_},a.registerGlobalHelper=function(m,v,_,E){a.registerHelper(m,v,E),p[m]._global.push({pred:_,val:E})}}function ud(a,u,p,m,v){var _=u,E=p,T=St(a,u.line),I=v&&a.direction=="rtl"?-p:p;function H(){var dt=u.line+I;return dt<a.first||dt>=a.first+a.size?!1:(u=new Ke(dt,u.ch,u.sticky),T=St(a,dt))}function ie(dt){var tt;if(m=="codepoint"){var bt=T.text.charCodeAt(u.ch+(p>0?0:-1));if(isNaN(bt))tt=null;else{var Mt=p>0?bt>=55296&&bt<56320:bt>=56320&&bt<57343;tt=new Ke(u.line,Math.max(0,Math.min(T.text.length,u.ch+p*(Mt?2:1))),-p)}}else v?tt=Fh(a.cm,T,u,p):tt=Xc(T,u,p);if(tt==null)if(!dt&&H())u=Oh(v,a.cm,T,u.line,I);else return!1;else u=tt;return!0}if(m=="char"||m=="codepoint")ie();else if(m=="column")ie(!0);else if(m=="word"||m=="group")for(var le=null,Ce=m=="group",ye=a.cm&&a.cm.getHelper(u,"wordChars"),Ve=!0;!(p<0&&!ie(!Ve));Ve=!1){var qe=T.text.charAt(u.ch)||`
`,Qe=$(qe,ye)?"w":Ce&&qe==`
`?"n":!Ce||/\s/.test(qe)?null:"p";if(Ce&&!Ve&&!Qe&&(Qe="s"),le&&le!=Qe){p<0&&(p=1,ie(),u.sticky="after");break}if(Qe&&(le=Qe),p>0&&!ie(!Ve))break}var ot=Ka(a,u,_,E,!0);return No(_,ot)&&(ot.hitSide=!0),ot}function Wh(a,u,p,m){var v=a.doc,_=u.left,E;if(m=="page"){var T=Math.min(a.display.wrapper.clientHeight,lt(a).innerHeight||v(a).documentElement.clientHeight),I=Math.max(T-.5*ho(a.display),3);E=(p>0?u.bottom:u.top)+p*I}else m=="line"&&(E=p>0?u.bottom+3:u.top-3);for(var H;H=ri(a,_,E),!!H.outside;){if(p<0?E<=0:E>=v.height){H.hitSide=!0;break}E+=p*5}return H}var fn=function(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new P,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};fn.prototype.init=function(a){var u=this,p=this,m=p.cm,v=p.div=a.lineDiv;v.contentEditable=!0,zr(v,m.options.spellcheck,m.options.autocorrect,m.options.autocapitalize);function _(T){for(var I=T.target;I;I=I.parentNode){if(I==v)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(I.className))break}return!1}Ne(v,"paste",function(T){!_(T)||Nt(m,T)||Us(T,m)||h<=11&&setTimeout(bi(m,function(){return u.updateFromDOM()}),20)}),Ne(v,"compositionstart",function(T){u.composing={data:T.data,done:!1}}),Ne(v,"compositionupdate",function(T){u.composing||(u.composing={data:T.data,done:!1})}),Ne(v,"compositionend",function(T){u.composing&&(T.data!=u.composing.data&&u.readFromDOMSoon(),u.composing.done=!0)}),Ne(v,"touchstart",function(){return p.forceCompositionEnd()}),Ne(v,"input",function(){u.composing||u.readFromDOMSoon()});function E(T){if(!(!_(T)||Nt(m,T))){if(m.somethingSelected())mo({lineWise:!1,text:m.getSelections()}),T.type=="cut"&&m.replaceSelection("",null,"cut");else if(m.options.lineWiseCopyCut){var I=iu(m);mo({lineWise:!0,text:I.text}),T.type=="cut"&&m.operation(function(){m.setSelections(I.ranges,0,ge),m.replaceSelection("",null,"cut")})}else return;if(T.clipboardData){T.clipboardData.clearData();var H=to.text.join(`
`);if(T.clipboardData.setData("Text",H),T.clipboardData.getData("Text")==H){T.preventDefault();return}}var ie=Hh(),le=ie.firstChild;zr(le),m.display.lineSpace.insertBefore(ie,m.display.lineSpace.firstChild),le.value=to.text.join(`
`);var Ce=Pe(at(v));oe(le),setTimeout(function(){m.display.lineSpace.removeChild(ie),Ce.focus(),Ce==v&&p.showPrimarySelection()},50)}}Ne(v,"copy",E),Ne(v,"cut",E)},fn.prototype.screenReaderLabelChanged=function(a){a?this.div.setAttribute("aria-label",a):this.div.removeAttribute("aria-label")},fn.prototype.prepareSelection=function(){var a=nm(this.cm,!1);return a.focus=Pe(at(this.div))==this.div,a},fn.prototype.showSelection=function(a,u){!a||!this.cm.display.view.length||((a.focus||u)&&this.showPrimarySelection(),this.showMultipleSelections(a))},fn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},fn.prototype.showPrimarySelection=function(){var a=this.getSelection(),u=this.cm,p=u.doc.sel.primary(),m=p.from(),v=p.to();if(u.display.viewTo==u.display.viewFrom||m.line>=u.display.viewTo||v.line<u.display.viewFrom){a.removeAllRanges();return}var _=hd(u,a.anchorNode,a.anchorOffset),E=hd(u,a.focusNode,a.focusOffset);if(!(_&&!_.bad&&E&&!E.bad&&Rt(Hn(_,E),m)==0&&Rt(er(_,E),v)==0)){var T=u.display.view,I=m.line>=u.display.viewFrom&&jh(u,m)||{node:T[0].measure.map[2],offset:0},H=v.line<u.display.viewTo&&jh(u,v);if(!H){var ie=T[T.length-1].measure,le=ie.maps?ie.maps[ie.maps.length-1]:ie.map;H={node:le[le.length-1],offset:le[le.length-2]-le[le.length-3]}}if(!I||!H){a.removeAllRanges();return}var Ce=a.rangeCount&&a.getRangeAt(0),ye;try{ye=pe(I.node,I.offset,H.offset,H.node)}catch{}ye&&(!r&&u.state.focused?(a.collapse(I.node,I.offset),ye.collapsed||(a.removeAllRanges(),a.addRange(ye))):(a.removeAllRanges(),a.addRange(ye)),Ce&&a.anchorNode==null?a.addRange(Ce):r&&this.startGracePeriod()),this.rememberSelection()}},fn.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)},fn.prototype.showMultipleSelections=function(a){Ie(this.cm.display.cursorDiv,a.cursors),Ie(this.cm.display.selectionDiv,a.selection)},fn.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},fn.prototype.selectionInEditor=function(){var a=this.getSelection();if(!a.rangeCount)return!1;var u=a.getRangeAt(0).commonAncestorContainer;return Z(this.div,u)},fn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Pe(at(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},fn.prototype.blur=function(){this.div.blur()},fn.prototype.getField=function(){return this.div},fn.prototype.supportsTouch=function(){return!0},fn.prototype.receivedFocus=function(){var a=this,u=this;this.selectionInEditor()?setTimeout(function(){return a.pollSelection()},20):gi(this.cm,function(){return u.cm.curOp.selectionChanged=!0});function p(){u.cm.state.focused&&(u.pollSelection(),u.polling.set(u.cm.options.pollInterval,p))}this.polling.set(this.cm.options.pollInterval,p)},fn.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},fn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var a=this.getSelection(),u=this.cm;if(O&&y&&this.cm.display.gutterSpecs.length&&Em(a.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var p=hd(u,a.anchorNode,a.anchorOffset),m=hd(u,a.focusNode,a.focusOffset);p&&m&&gi(u,function(){On(u.doc,Bs(p,m),ge),(p.bad||m.bad)&&(u.curOp.selectionChanged=!0)})}}},fn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=this.cm,u=a.display,p=a.doc.sel.primary(),m=p.from(),v=p.to();if(m.ch==0&&m.line>a.firstLine()&&(m=Ke(m.line-1,St(a.doc,m.line-1).length)),v.ch==St(a.doc,v.line).text.length&&v.line<a.lastLine()&&(v=Ke(v.line+1,0)),m.line<u.viewFrom||v.line>u.viewTo-1)return!1;var _,E,T;m.line==u.viewFrom||(_=ko(a,m.line))==0?(E=Xt(u.view[0].line),T=u.view[0].node):(E=Xt(u.view[_].line),T=u.view[_-1].node.nextSibling);var I=ko(a,v.line),H,ie;if(I==u.view.length-1?(H=u.viewTo-1,ie=u.lineDiv.lastChild):(H=Xt(u.view[I+1].line)-1,ie=u.view[I+1].node.previousSibling),!T)return!1;for(var le=a.doc.splitLines(dd(a,T,ie,E,H)),Ce=cn(a.doc,Ke(E,0),Ke(H,St(a.doc,H).text.length));le.length>1&&Ce.length>1;)if(ct(le)==ct(Ce))le.pop(),Ce.pop(),H--;else if(le[0]==Ce[0])le.shift(),Ce.shift(),E++;else break;for(var ye=0,Ve=0,qe=le[0],Qe=Ce[0],ot=Math.min(qe.length,Qe.length);ye<ot&&qe.charCodeAt(ye)==Qe.charCodeAt(ye);)++ye;for(var dt=ct(le),tt=ct(Ce),bt=Math.min(dt.length-(le.length==1?ye:0),tt.length-(Ce.length==1?ye:0));Ve<bt&&dt.charCodeAt(dt.length-Ve-1)==tt.charCodeAt(tt.length-Ve-1);)++Ve;if(le.length==1&&Ce.length==1&&E==m.line)for(;ye&&ye>m.ch&&dt.charCodeAt(dt.length-Ve-1)==tt.charCodeAt(tt.length-Ve-1);)ye--,Ve++;le[le.length-1]=dt.slice(0,dt.length-Ve).replace(/^\u200b+/,""),le[0]=le[0].slice(ye).replace(/\u200b+$/,"");var Mt=Ke(E,ye),Dt=Ke(H,Ce.length?ct(Ce).length-Ve:0);if(le.length>1||le[0]||Rt(Mt,Dt))return Ya(a.doc,le,Mt,Dt,"+input"),!0},fn.prototype.ensurePolled=function(){this.forceCompositionEnd()},fn.prototype.reset=function(){this.forceCompositionEnd()},fn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},fn.prototype.readFromDOMSoon=function(){var a=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(a.readDOMTimeout=null,a.composing)if(a.composing.done)a.composing=null;else return;a.updateFromDOM()},80))},fn.prototype.updateFromDOM=function(){var a=this;(this.cm.isReadOnly()||!this.pollContent())&&gi(this.cm,function(){return Zi(a.cm)})},fn.prototype.setUneditable=function(a){a.contentEditable="false"},fn.prototype.onKeyPress=function(a){a.charCode==0||this.composing||(a.preventDefault(),this.cm.isReadOnly()||bi(this.cm,Hs)(this.cm,String.fromCharCode(a.charCode==null?a.keyCode:a.charCode),0))},fn.prototype.readOnlyChanged=function(a){this.div.contentEditable=String(a!="nocursor")},fn.prototype.onContextMenu=function(){},fn.prototype.resetPosition=function(){},fn.prototype.needsContentAttribute=!0;function jh(a,u){var p=Kt(a,u.line);if(!p||p.hidden)return null;var m=St(a.doc,u.line),v=Ye(p,m,u.line),_=rt(m,a.doc.direction),E="left";if(_){var T=ut(_,u.ch);E=T%2?"right":"left"}var I=Zt(v.map,u.ch,E);return I.offset=I.collapse=="right"?I.end:I.start,I}function Em(a){for(var u=a;u;u=u.parentNode)if(/CodeMirror-gutter-wrapper/.test(u.className))return!0;return!1}function rl(a,u){return u&&(a.bad=!0),a}function dd(a,u,p,m,v){var _="",E=!1,T=a.doc.lineSeparator(),I=!1;function H(ye){return function(Ve){return Ve.id==ye}}function ie(){E&&(_+=T,I&&(_+=T),E=I=!1)}function le(ye){ye&&(ie(),_+=ye)}function Ce(ye){if(ye.nodeType==1){var Ve=ye.getAttribute("cm-text");if(Ve){le(Ve);return}var qe=ye.getAttribute("cm-marker"),Qe;if(qe){var ot=a.findMarks(Ke(m,0),Ke(v+1,0),H(+qe));ot.length&&(Qe=ot[0].find(0))&&le(cn(a.doc,Qe.from,Qe.to).join(T));return}if(ye.getAttribute("contenteditable")=="false")return;var dt=/^(pre|div|p|li|table|br)$/i.test(ye.nodeName);if(!/^br$/i.test(ye.nodeName)&&ye.textContent.length==0)return;dt&&ie();for(var tt=0;tt<ye.childNodes.length;tt++)Ce(ye.childNodes[tt]);/^(pre|p)$/i.test(ye.nodeName)&&(I=!0),dt&&(E=!0)}else ye.nodeType==3&&le(ye.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ce(u),u!=p;)u=u.nextSibling,I=!1;return _}function hd(a,u,p){var m;if(u==a.display.lineDiv){if(m=a.display.lineDiv.childNodes[p],!m)return rl(a.clipPos(Ke(a.display.viewTo-1)),!0);u=null,p=0}else for(m=u;;m=m.parentNode){if(!m||m==a.display.lineDiv)return null;if(m.parentNode&&m.parentNode==a.display.lineDiv)break}for(var v=0;v<a.display.view.length;v++){var _=a.display.view[v];if(_.node==m)return Ng(_,u,p)}}function Ng(a,u,p){var m=a.text.firstChild,v=!1;if(!u||!Z(m,u))return rl(Ke(Xt(a.line),0),!0);if(u==m&&(v=!0,u=m.childNodes[p],p=0,!u)){var _=a.rest?ct(a.rest):a.line;return rl(Ke(Xt(_),_.text.length),v)}var E=u.nodeType==3?u:null,T=u;for(!E&&u.childNodes.length==1&&u.firstChild.nodeType==3&&(E=u.firstChild,p&&(p=E.nodeValue.length));T.parentNode!=m;)T=T.parentNode;var I=a.measure,H=I.maps;function ie(Qe,ot,dt){for(var tt=-1;tt<(H?H.length:0);tt++)for(var bt=tt<0?I.map:H[tt],Mt=0;Mt<bt.length;Mt+=3){var Dt=bt[Mt+2];if(Dt==Qe||Dt==ot){var en=Xt(tt<0?a.line:a.rest[tt]),Mn=bt[Mt]+dt;return(dt<0||Dt!=Qe)&&(Mn=bt[Mt+(dt?1:0)]),Ke(en,Mn)}}}var le=ie(E,T,p);if(le)return rl(le,v);for(var Ce=T.nextSibling,ye=E?E.nodeValue.length-p:0;Ce;Ce=Ce.nextSibling){if(le=ie(Ce,Ce.firstChild,0),le)return rl(Ke(le.line,le.ch-ye),v);ye+=Ce.textContent.length}for(var Ve=T.previousSibling,qe=p;Ve;Ve=Ve.previousSibling){if(le=ie(Ve,Ve.firstChild,-1),le)return rl(Ke(le.line,le.ch+qe),v);qe+=Ve.textContent.length}}var ai=function(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new P,this.hasSelection=!1,this.composing=null,this.resetting=!1};ai.prototype.init=function(a){var u=this,p=this,m=this.cm;this.createField(a);var v=this.textarea;a.wrapper.insertBefore(this.wrapper,a.wrapper.firstChild),V&&(v.style.width="0px"),Ne(v,"input",function(){c&&h>=9&&u.hasSelection&&(u.hasSelection=null),p.poll()}),Ne(v,"paste",function(E){Nt(m,E)||Us(E,m)||(m.state.pasteIncoming=+new Date,p.fastPoll())});function _(E){if(!Nt(m,E)){if(m.somethingSelected())mo({lineWise:!1,text:m.getSelections()});else if(m.options.lineWiseCopyCut){var T=iu(m);mo({lineWise:!0,text:T.text}),E.type=="cut"?m.setSelections(T.ranges,null,ge):(p.prevInput="",v.value=T.text.join(`
`),oe(v))}else return;E.type=="cut"&&(m.state.cutIncoming=+new Date)}}Ne(v,"cut",_),Ne(v,"copy",_),Ne(a.scroller,"paste",function(E){if(!(A(a,E)||Nt(m,E))){if(!v.dispatchEvent){m.state.pasteIncoming=+new Date,p.focus();return}var T=new Event("paste");T.clipboardData=E.clipboardData,v.dispatchEvent(T)}}),Ne(a.lineSpace,"selectstart",function(E){A(a,E)||mn(E)}),Ne(v,"compositionstart",function(){var E=m.getCursor("from");p.composing&&p.composing.range.clear(),p.composing={start:E,range:m.markText(E,m.getCursor("to"),{className:"CodeMirror-composing"})}}),Ne(v,"compositionend",function(){p.composing&&(p.poll(),p.composing.range.clear(),p.composing=null)})},ai.prototype.createField=function(a){this.wrapper=Hh(),this.textarea=this.wrapper.firstChild;var u=this.cm.options;zr(this.textarea,u.spellcheck,u.autocorrect,u.autocapitalize)},ai.prototype.screenReaderLabelChanged=function(a){a?this.textarea.setAttribute("aria-label",a):this.textarea.removeAttribute("aria-label")},ai.prototype.prepareSelection=function(){var a=this.cm,u=a.display,p=a.doc,m=nm(a);if(a.options.moveInputWithCursor){var v=pi(a,p.sel.primary().head,"div"),_=u.wrapper.getBoundingClientRect(),E=u.lineDiv.getBoundingClientRect();m.teTop=Math.max(0,Math.min(u.wrapper.clientHeight-10,v.top+E.top-_.top)),m.teLeft=Math.max(0,Math.min(u.wrapper.clientWidth-10,v.left+E.left-_.left))}return m},ai.prototype.showSelection=function(a){var u=this.cm,p=u.display;Ie(p.cursorDiv,a.cursors),Ie(p.selectionDiv,a.selection),a.teTop!=null&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},ai.prototype.reset=function(a){if(!(this.contextMenuPending||this.composing&&a)){var u=this.cm;if(this.resetting=!0,u.somethingSelected()){this.prevInput="";var p=u.getSelection();this.textarea.value=p,u.state.focused&&oe(this.textarea),c&&h>=9&&(this.hasSelection=p)}else a||(this.prevInput=this.textarea.value="",c&&h>=9&&(this.hasSelection=null));this.resetting=!1}},ai.prototype.getField=function(){return this.textarea},ai.prototype.supportsTouch=function(){return!1},ai.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!U||Pe(at(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},ai.prototype.blur=function(){this.textarea.blur()},ai.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ai.prototype.receivedFocus=function(){this.slowPoll()},ai.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},ai.prototype.fastPoll=function(){var a=!1,u=this;u.pollingFast=!0;function p(){var m=u.poll();!m&&!a?(a=!0,u.polling.set(60,p)):(u.pollingFast=!1,u.slowPoll())}u.polling.set(20,p)},ai.prototype.poll=function(){var a=this,u=this.cm,p=this.textarea,m=this.prevInput;if(this.contextMenuPending||this.resetting||!u.state.focused||rn(p)&&!m&&!this.composing||u.isReadOnly()||u.options.disableInput||u.state.keySeq)return!1;var v=p.value;if(v==m&&!u.somethingSelected())return!1;if(c&&h>=9&&this.hasSelection===v||K&&/[\uf700-\uf7ff]/.test(v))return u.display.input.reset(),!1;if(u.doc.sel==u.display.selForContextMenu){var _=v.charCodeAt(0);if(_==8203&&!m&&(m="​"),_==8666)return this.reset(),this.cm.execCommand("undo")}for(var E=0,T=Math.min(m.length,v.length);E<T&&m.charCodeAt(E)==v.charCodeAt(E);)++E;return gi(u,function(){Hs(u,v.slice(E),m.length-E,null,a.composing?"*compose":null),v.length>1e3||v.indexOf(`
`)>-1?p.value=a.prevInput="":a.prevInput=v,a.composing&&(a.composing.range.clear(),a.composing.range=u.markText(a.composing.start,u.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ai.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ai.prototype.onKeyPress=function(){c&&h>=9&&(this.hasSelection=null),this.fastPoll()},ai.prototype.onContextMenu=function(a){var u=this,p=u.cm,m=p.display,v=u.textarea;u.contextMenuPending&&u.contextMenuPending();var _=Mr(p,a),E=m.scroller.scrollTop;if(!_||x)return;var T=p.options.resetSelectionOnContextMenu;T&&p.doc.sel.contains(_)==-1&&bi(p,On)(p.doc,Bs(_),ge);var I=v.style.cssText,H=u.wrapper.style.cssText,ie=u.wrapper.offsetParent.getBoundingClientRect();u.wrapper.style.cssText="position: static",v.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(a.clientY-ie.top-5)+"px; left: "+(a.clientX-ie.left-5)+`px;
      z-index: 1000; background: `+(c?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var le;g&&(le=v.ownerDocument.defaultView.scrollY),m.input.focus(),g&&v.ownerDocument.defaultView.scrollTo(null,le),m.input.reset(),p.somethingSelected()||(v.value=u.prevInput=" "),u.contextMenuPending=ye,m.selForContextMenu=p.doc.sel,clearTimeout(m.detectingSelectAll);function Ce(){if(v.selectionStart!=null){var qe=p.somethingSelected(),Qe="​"+(qe?v.value:"");v.value="⇚",v.value=Qe,u.prevInput=qe?"":"​",v.selectionStart=1,v.selectionEnd=Qe.length,m.selForContextMenu=p.doc.sel}}function ye(){if(u.contextMenuPending==ye&&(u.contextMenuPending=!1,u.wrapper.style.cssText=H,v.style.cssText=I,c&&h<9&&m.scrollbars.setScrollTop(m.scroller.scrollTop=E),v.selectionStart!=null)){(!c||c&&h<9)&&Ce();var qe=0,Qe=function(){m.selForContextMenu==p.doc.sel&&v.selectionStart==0&&v.selectionEnd>0&&u.prevInput=="​"?bi(p,Ju)(p):qe++<10?m.detectingSelectAll=setTimeout(Qe,500):(m.selForContextMenu=null,m.input.reset())};m.detectingSelectAll=setTimeout(Qe,200)}}if(c&&h>=9&&Ce(),se){ji(a);var Ve=function(){Bt(window,"mouseup",Ve),setTimeout(ye,20)};Ne(window,"mouseup",Ve)}else setTimeout(ye,50)},ai.prototype.readOnlyChanged=function(a){a||this.reset(),this.textarea.disabled=a=="nocursor",this.textarea.readOnly=!!a},ai.prototype.setUneditable=function(){},ai.prototype.needsContentAttribute=!1;function Sm(a,u){if(u=u?xe(u):{},u.value=a.value,!u.tabindex&&a.tabIndex&&(u.tabindex=a.tabIndex),!u.placeholder&&a.placeholder&&(u.placeholder=a.placeholder),u.autofocus==null){var p=Pe(at(a));u.autofocus=p==a||a.getAttribute("autofocus")!=null&&p==document.body}function m(){a.value=T.getValue()}var v;if(a.form&&(Ne(a.form,"submit",m),!u.leaveSubmitMethodAlone)){var _=a.form;v=_.submit;try{var E=_.submit=function(){m(),_.submit=v,_.submit(),_.submit=E}}catch{}}u.finishInit=function(I){I.save=m,I.getTextArea=function(){return a},I.toTextArea=function(){I.toTextArea=isNaN,m(),a.parentNode.removeChild(I.getWrapperElement()),a.style.display="",a.form&&(Bt(a.form,"submit",m),!u.leaveSubmitMethodAlone&&typeof a.form.submit=="function"&&(a.form.submit=v))}},a.style.display="none";var T=Fn(function(I){return a.parentNode.insertBefore(I,a.nextSibling)},u);return T}function $h(a){a.off=Bt,a.on=Ne,a.wheelEventPixels=ph,a.Doc=rr,a.splitLines=yn,a.countColumn=Ue,a.findColumn=At,a.isWordChar=we,a.Pass=he,a.signal=ln,a.Line=Fs,a.changeEnd=xo,a.scrollbarModel=fh,a.Pos=Ke,a.cmpPos=Rt,a.modes=gn,a.mimeModes=In,a.resolveMode=Bn,a.getMode=$i,a.modeExtensions=dr,a.extendMode=Dn,a.copyState=qi,a.startState=oo,a.innerMode=br,a.commands=nc,a.keyMap=vs,a.keyName=ws,a.isModifierKey=nd,a.lookupKey=Qa,a.normalizeKeyMap=vm,a.StringStream=jn,a.SharedTextMarker=To,a.TextMarker=wa,a.LineWidget=Xl,a.e_preventDefault=mn,a.e_stopPropagation=ur,a.e_stop=ji,a.addClass=je,a.contains=Z,a.rmClass=Oe,a.keyNames=bs}ya(Fn),Uh(Fn);var ol="iter insert remove copy getEditor constructor".split(" ");for(var fd in rr.prototype)rr.prototype.hasOwnProperty(fd)&&R(ol,fd)<0&&(Fn.prototype[fd]=function(a){return function(){return a.apply(this.doc,arguments)}}(rr.prototype[fd]));return Ri(rr),Fn.inputStyles={textarea:ai,contenteditable:fn},Fn.defineMode=function(a){!Fn.defaults.mode&&a!="null"&&(Fn.defaults.mode=a),Mi.apply(this,arguments)},Fn.defineMIME=Fr,Fn.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}}),Fn.defineMIME("text/plain","null"),Fn.defineExtension=function(a,u){Fn.prototype[a]=u},Fn.defineDocExtension=function(a,u){rr.prototype[a]=u},Fn.fromTextArea=Sm,$h(Fn),Fn.version="5.65.18",Fn})})(CS);var is=CS.exports;(function(i,e){(function(t){t(is)})(function(t){var n=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,r=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,o=/[*+-]\s/;t.commands.newlineAndIndentContinueMarkdownList=function(l){if(l.getOption("disableInput"))return t.Pass;for(var c=l.listSelections(),h=[],g=0;g<c.length;g++){var b=c[g].head,y=l.getStateAfter(b.line),k=t.innerMode(l.getMode(),y);if(k.mode.name!=="markdown"&&k.mode.helperType!=="markdown"){l.execCommand("newlineAndIndent");return}else y=k.state;var x=y.list!==!1,D=y.quote!==0,L=l.getLine(b.line),M=n.exec(L),V=/^\s*$/.test(L.slice(0,b.ch));if(!c[g].empty()||!x&&!D||!M||V){l.execCommand("newlineAndIndent");return}if(r.test(L)){var O=D&&/>\s*$/.test(L),U=!/>\s*$/.test(L);(O||U)&&l.replaceRange("",{line:b.line,ch:0},{line:b.line,ch:b.ch+1}),h[g]=`
`}else{var K=M[1],q=M[5],Q=!(o.test(M[2])||M[2].indexOf(">")>=0),ne=Q?parseInt(M[3],10)+1+M[4]:M[2].replace("x"," ");h[g]=`
`+K+ne+q,Q&&s(l,b)}}l.replaceSelections(h)};function s(l,c){var h=c.line,g=0,b=0,y=n.exec(l.getLine(h)),k=y[1];do{g+=1;var x=h+g,D=l.getLine(x),L=n.exec(D);if(L){var M=L[1],V=parseInt(y[3],10)+g-b,O=parseInt(L[3],10),U=O;if(k===M&&!isNaN(O))V===O&&(U=O+1),V>O&&(U=V+1),l.replaceRange(D.replace(n,M+U+L[4]+L[5]),{line:x,ch:0},{line:x,ch:D.length});else{if(k.length>M.length||k.length<M.length&&g===1)return;b+=1}}}while(L)}})})();var xS=is;xS.commands.tabAndIndentMarkdownList=function(i){var e=i.listSelections(),t=e[0].head,n=i.getStateAfter(t.line),r=n.list!==!1;if(r){i.execCommand("indentMore");return}if(i.options.indentWithTabs)i.execCommand("insertTab");else{var o=Array(i.options.tabSize+1).join(" ");i.replaceSelection(o)}};xS.commands.shiftTabAndUnindentMarkdownList=function(i){var e=i.listSelections(),t=e[0].head,n=i.getStateAfter(t.line),r=n.list!==!1;if(r){i.execCommand("indentLess");return}if(i.options.indentWithTabs)i.execCommand("insertTab");else{var o=Array(i.options.tabSize+1).join(" ");i.replaceSelection(o)}};(function(i,e){(function(t){t(is)})(function(t){t.defineOption("fullScreen",!1,function(o,s,l){l==t.Init&&(l=!1),!l!=!s&&(s?n(o):r(o))});function n(o){var s=o.getWrapperElement();o.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:s.style.width,height:s.style.height},s.style.width="",s.style.height="auto",s.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",o.refresh()}function r(o){var s=o.getWrapperElement();s.className=s.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var l=o.state.fullScreenRestore;s.style.width=l.width,s.style.height=l.height,window.scrollTo(l.scrollLeft,l.scrollTop),o.refresh()}})})();var mW={exports:{}},pW={exports:{}};(function(i,e){(function(t){t(is)})(function(t){var n={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(o,s){var l=o.indentUnit,c={},h=s.htmlMode?n:r;for(var g in h)c[g]=h[g];for(var g in s)c[g]=s[g];var b,y;function k(re,ae){function pe(je){return ae.tokenize=je,je(re,ae)}var Z=re.next();if(Z=="<")return re.eat("!")?re.eat("[")?re.match("CDATA[")?pe(L("atom","]]>")):null:re.match("--")?pe(L("comment","-->")):re.match("DOCTYPE",!0,!0)?(re.eatWhile(/[\w\._\-]/),pe(M(1))):null:re.eat("?")?(re.eatWhile(/[\w\._\-]/),ae.tokenize=L("meta","?>"),"meta"):(b=re.eat("/")?"closeTag":"openTag",ae.tokenize=x,"tag bracket");if(Z=="&"){var Pe;return re.eat("#")?re.eat("x")?Pe=re.eatWhile(/[a-fA-F\d]/)&&re.eat(";"):Pe=re.eatWhile(/[\d]/)&&re.eat(";"):Pe=re.eatWhile(/[\w\.\-:]/)&&re.eat(";"),Pe?"atom":"error"}else return re.eatWhile(/[^&<]/),null}k.isInText=!0;function x(re,ae){var pe=re.next();if(pe==">"||pe=="/"&&re.eat(">"))return ae.tokenize=k,b=pe==">"?"endTag":"selfcloseTag","tag bracket";if(pe=="=")return b="equals",null;if(pe=="<"){ae.tokenize=k,ae.state=q,ae.tagName=ae.tagStart=null;var Z=ae.tokenize(re,ae);return Z?Z+" tag error":"tag error"}else return/[\'\"]/.test(pe)?(ae.tokenize=D(pe),ae.stringStartCol=re.column(),ae.tokenize(re,ae)):(re.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function D(re){var ae=function(pe,Z){for(;!pe.eol();)if(pe.next()==re){Z.tokenize=x;break}return"string"};return ae.isInAttribute=!0,ae}function L(re,ae){return function(pe,Z){for(;!pe.eol();){if(pe.match(ae)){Z.tokenize=k;break}pe.next()}return re}}function M(re){return function(ae,pe){for(var Z;(Z=ae.next())!=null;){if(Z=="<")return pe.tokenize=M(re+1),pe.tokenize(ae,pe);if(Z==">")if(re==1){pe.tokenize=k;break}else return pe.tokenize=M(re-1),pe.tokenize(ae,pe)}return"meta"}}function V(re){return re&&re.toLowerCase()}function O(re,ae,pe){this.prev=re.context,this.tagName=ae||"",this.indent=re.indented,this.startOfLine=pe,(c.doNotIndent.hasOwnProperty(ae)||re.context&&re.context.noIndent)&&(this.noIndent=!0)}function U(re){re.context&&(re.context=re.context.prev)}function K(re,ae){for(var pe;;){if(!re.context||(pe=re.context.tagName,!c.contextGrabbers.hasOwnProperty(V(pe))||!c.contextGrabbers[V(pe)].hasOwnProperty(V(ae))))return;U(re)}}function q(re,ae,pe){return re=="openTag"?(pe.tagStart=ae.column(),Q):re=="closeTag"?ne:q}function Q(re,ae,pe){return re=="word"?(pe.tagName=ae.current(),y="tag",fe):c.allowMissingTagName&&re=="endTag"?(y="tag bracket",fe(re,ae,pe)):(y="error",Q)}function ne(re,ae,pe){if(re=="word"){var Z=ae.current();return pe.context&&pe.context.tagName!=Z&&c.implicitlyClosed.hasOwnProperty(V(pe.context.tagName))&&U(pe),pe.context&&pe.context.tagName==Z||c.matchClosing===!1?(y="tag",X):(y="tag error",se)}else return c.allowMissingTagName&&re=="endTag"?(y="tag bracket",X(re,ae,pe)):(y="error",se)}function X(re,ae,pe){return re!="endTag"?(y="error",X):(U(pe),q)}function se(re,ae,pe){return y="error",X(re,ae,pe)}function fe(re,ae,pe){if(re=="word")return y="attribute",Oe;if(re=="endTag"||re=="selfcloseTag"){var Z=pe.tagName,Pe=pe.tagStart;return pe.tagName=pe.tagStart=null,re=="selfcloseTag"||c.autoSelfClosers.hasOwnProperty(V(Z))?K(pe,Z):(K(pe,Z),pe.context=new O(pe,Z,Pe==pe.indented)),q}return y="error",fe}function Oe(re,ae,pe){return re=="equals"?_e:(c.allowMissing||(y="error"),fe(re,ae,pe))}function _e(re,ae,pe){return re=="string"?Ie:re=="word"&&c.allowUnquoted?(y="string",fe):(y="error",fe(re,ae,pe))}function Ie(re,ae,pe){return re=="string"?Ie:fe(re,ae,pe)}return{startState:function(re){var ae={tokenize:k,state:q,indented:re||0,tagName:null,tagStart:null,context:null};return re!=null&&(ae.baseIndent=re),ae},token:function(re,ae){if(!ae.tagName&&re.sol()&&(ae.indented=re.indentation()),re.eatSpace())return null;b=null;var pe=ae.tokenize(re,ae);return(pe||b)&&pe!="comment"&&(y=null,ae.state=ae.state(b||pe,re,ae),y&&(pe=y=="error"?pe+" error":y)),pe},indent:function(re,ae,pe){var Z=re.context;if(re.tokenize.isInAttribute)return re.tagStart==re.indented?re.stringStartCol+1:re.indented+l;if(Z&&Z.noIndent)return t.Pass;if(re.tokenize!=x&&re.tokenize!=k)return pe?pe.match(/^(\s*)/)[0].length:0;if(re.tagName)return c.multilineTagIndentPastTag!==!1?re.tagStart+re.tagName.length+2:re.tagStart+l*(c.multilineTagIndentFactor||1);if(c.alignCDATA&&/<!\[CDATA\[/.test(ae))return 0;var Pe=ae&&/^<(\/)?([\w_:\.-]*)/.exec(ae);if(Pe&&Pe[1])for(;Z;)if(Z.tagName==Pe[2]){Z=Z.prev;break}else if(c.implicitlyClosed.hasOwnProperty(V(Z.tagName)))Z=Z.prev;else break;else if(Pe)for(;Z;){var je=c.contextGrabbers[V(Z.tagName)];if(je&&je.hasOwnProperty(V(Pe[2])))Z=Z.prev;else break}for(;Z&&Z.prev&&!Z.startOfLine;)Z=Z.prev;return Z?Z.indent+l:re.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:c.htmlMode?"html":"xml",helperType:c.htmlMode?"html":"xml",skipAttribute:function(re){re.state==_e&&(re.state=fe)},xmlCurrentTag:function(re){return re.tagName?{name:re.tagName,close:re.type=="closeTag"}:null},xmlCurrentContext:function(re){for(var ae=[],pe=re.context;pe;pe=pe.prev)ae.push(pe.tagName);return ae.reverse()}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})})})();var gW=pW.exports,w_={exports:{}},y_;function bW(){return y_||(y_=1,function(i,e){(function(t){t(is)})(function(t){t.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var n=0;n<t.modeInfo.length;n++){var r=t.modeInfo[n];r.mimes&&(r.mime=r.mimes[0])}t.findModeByMIME=function(o){o=o.toLowerCase();for(var s=0;s<t.modeInfo.length;s++){var l=t.modeInfo[s];if(l.mime==o)return l;if(l.mimes){for(var c=0;c<l.mimes.length;c++)if(l.mimes[c]==o)return l}}if(/\+xml$/.test(o))return t.findModeByMIME("application/xml");if(/\+json$/.test(o))return t.findModeByMIME("application/json")},t.findModeByExtension=function(o){o=o.toLowerCase();for(var s=0;s<t.modeInfo.length;s++){var l=t.modeInfo[s];if(l.ext){for(var c=0;c<l.ext.length;c++)if(l.ext[c]==o)return l}}},t.findModeByFileName=function(o){for(var s=0;s<t.modeInfo.length;s++){var l=t.modeInfo[s];if(l.file&&l.file.test(o))return l}var c=o.lastIndexOf("."),h=c>-1&&o.substring(c+1,o.length);if(h)return t.findModeByExtension(h)},t.findModeByName=function(o){o=o.toLowerCase();for(var s=0;s<t.modeInfo.length;s++){var l=t.modeInfo[s];if(l.name.toLowerCase()==o)return l;if(l.alias){for(var c=0;c<l.alias.length;c++)if(l.alias[c].toLowerCase()==o)return l}}}})}()),w_.exports}(function(i,e){(function(t){t(is,gW,bW())})(function(t){t.defineMode("markdown",function(n,r){var o=t.getMode(n,"text/html"),s=o.name=="null";function l(oe){if(t.findModeByName){var z=t.findModeByName(oe);z&&(oe=z.mime||z.mimes[0])}var ke=t.getMode(n,oe);return ke.name=="null"?null:ke}r.highlightFormatting===void 0&&(r.highlightFormatting=!1),r.maxBlockquoteDepth===void 0&&(r.maxBlockquoteDepth=0),r.taskLists===void 0&&(r.taskLists=!1),r.strikethrough===void 0&&(r.strikethrough=!1),r.emoji===void 0&&(r.emoji=!1),r.fencedCodeBlockHighlighting===void 0&&(r.fencedCodeBlockHighlighting=!0),r.fencedCodeBlockDefaultMode===void 0&&(r.fencedCodeBlockDefaultMode="text/plain"),r.xml===void 0&&(r.xml=!0),r.tokenTypeOverrides===void 0&&(r.tokenTypeOverrides={});var c={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var h in c)c.hasOwnProperty(h)&&r.tokenTypeOverrides[h]&&(c[h]=r.tokenTypeOverrides[h]);var g=/^([*\-_])(?:\s*\1){2,}\s*$/,b=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,y=/^\[(x| )\](?=\s)/i,k=r.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,x=/^ {0,3}(?:\={1,}|-{2,})\s*$/,D=/^[^#!\[\]*_\\<>` "'(~:]+/,L=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,M=/^\s*\[[^\]]+?\]:.*$/,V=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,O="    ";function U(oe,z,ke){return z.f=z.inline=ke,ke(oe,z)}function K(oe,z,ke){return z.f=z.block=ke,ke(oe,z)}function q(oe){return!oe||!/\S/.test(oe.string)}function Q(oe){if(oe.linkTitle=!1,oe.linkHref=!1,oe.linkText=!1,oe.em=!1,oe.strong=!1,oe.strikethrough=!1,oe.quote=0,oe.indentedCode=!1,oe.f==X){var z=s;if(!z){var ke=t.innerMode(o,oe.htmlState);z=ke.mode.name=="xml"&&ke.state.tagStart===null&&!ke.state.context&&ke.state.tokenize.isInText}z&&(oe.f=_e,oe.block=ne,oe.htmlState=null)}return oe.trailingSpace=0,oe.trailingSpaceNewLine=!1,oe.prevLine=oe.thisLine,oe.thisLine={stream:null},null}function ne(oe,z){var ke=oe.column()===z.indentation,at=q(z.prevLine.stream),lt=z.indentedCode,Ee=z.prevLine.hr,xe=z.list!==!1,Ue=(z.listStack[z.listStack.length-1]||0)+3;z.indentedCode=!1;var P=z.indentation;if(z.indentationDiff===null&&(z.indentationDiff=z.indentation,xe)){for(z.list=null;P<z.listStack[z.listStack.length-1];)z.listStack.pop(),z.listStack.length?z.indentation=z.listStack[z.listStack.length-1]:z.list=!1;z.list!==!1&&(z.indentationDiff=P-z.listStack[z.listStack.length-1])}var R=!at&&!Ee&&!z.prevLine.header&&(!xe||!lt)&&!z.prevLine.fencedCodeEnd,W=(z.list===!1||Ee||at)&&z.indentation<=Ue&&oe.match(g),he=null;if(z.indentationDiff>=4&&(lt||z.prevLine.fencedCodeEnd||z.prevLine.header||at))return oe.skipToEnd(),z.indentedCode=!0,c.code;if(oe.eatSpace())return null;if(ke&&z.indentation<=Ue&&(he=oe.match(k))&&he[1].length<=6)return z.quote=0,z.header=he[1].length,z.thisLine.header=!0,r.highlightFormatting&&(z.formatting="header"),z.f=z.inline,fe(z);if(z.indentation<=Ue&&oe.eat(">"))return z.quote=ke?1:z.quote+1,r.highlightFormatting&&(z.formatting="quote"),oe.eatSpace(),fe(z);if(!W&&!z.setext&&ke&&z.indentation<=Ue&&(he=oe.match(b))){var ge=he[1]?"ol":"ul";return z.indentation=P+oe.current().length,z.list=!0,z.quote=0,z.listStack.push(z.indentation),z.em=!1,z.strong=!1,z.code=!1,z.strikethrough=!1,r.taskLists&&oe.match(y,!1)&&(z.taskList=!0),z.f=z.inline,r.highlightFormatting&&(z.formatting=["list","list-"+ge]),fe(z)}else{if(ke&&z.indentation<=Ue&&(he=oe.match(L,!0)))return z.quote=0,z.fencedEndRE=new RegExp(he[1]+"+ *$"),z.localMode=r.fencedCodeBlockHighlighting&&l(he[2]||r.fencedCodeBlockDefaultMode),z.localMode&&(z.localState=t.startState(z.localMode)),z.f=z.block=se,r.highlightFormatting&&(z.formatting="code-block"),z.code=-1,fe(z);if(z.setext||(!R||!xe)&&!z.quote&&z.list===!1&&!z.code&&!W&&!M.test(oe.string)&&(he=oe.lookAhead(1))&&(he=he.match(x)))return z.setext?(z.header=z.setext,z.setext=0,oe.skipToEnd(),r.highlightFormatting&&(z.formatting="header")):(z.header=he[0].charAt(0)=="="?1:2,z.setext=z.header),z.thisLine.header=!0,z.f=z.inline,fe(z);if(W)return oe.skipToEnd(),z.hr=!0,z.thisLine.hr=!0,c.hr;if(oe.peek()==="[")return U(oe,z,Z)}return U(oe,z,z.inline)}function X(oe,z){var ke=o.token(oe,z.htmlState);if(!s){var at=t.innerMode(o,z.htmlState);(at.mode.name=="xml"&&at.state.tagStart===null&&!at.state.context&&at.state.tokenize.isInText||z.md_inside&&oe.current().indexOf(">")>-1)&&(z.f=_e,z.block=ne,z.htmlState=null)}return ke}function se(oe,z){var ke=z.listStack[z.listStack.length-1]||0,at=z.indentation<ke,lt=ke+3;if(z.fencedEndRE&&z.indentation<=lt&&(at||oe.match(z.fencedEndRE))){r.highlightFormatting&&(z.formatting="code-block");var Ee;return at||(Ee=fe(z)),z.localMode=z.localState=null,z.block=ne,z.f=_e,z.fencedEndRE=null,z.code=0,z.thisLine.fencedCodeEnd=!0,at?K(oe,z,z.block):Ee}else return z.localMode?z.localMode.token(oe,z.localState):(oe.skipToEnd(),c.code)}function fe(oe){var z=[];if(oe.formatting){z.push(c.formatting),typeof oe.formatting=="string"&&(oe.formatting=[oe.formatting]);for(var ke=0;ke<oe.formatting.length;ke++)z.push(c.formatting+"-"+oe.formatting[ke]),oe.formatting[ke]==="header"&&z.push(c.formatting+"-"+oe.formatting[ke]+"-"+oe.header),oe.formatting[ke]==="quote"&&(!r.maxBlockquoteDepth||r.maxBlockquoteDepth>=oe.quote?z.push(c.formatting+"-"+oe.formatting[ke]+"-"+oe.quote):z.push("error"))}if(oe.taskOpen)return z.push("meta"),z.length?z.join(" "):null;if(oe.taskClosed)return z.push("property"),z.length?z.join(" "):null;if(oe.linkHref?z.push(c.linkHref,"url"):(oe.strong&&z.push(c.strong),oe.em&&z.push(c.em),oe.strikethrough&&z.push(c.strikethrough),oe.emoji&&z.push(c.emoji),oe.linkText&&z.push(c.linkText),oe.code&&z.push(c.code),oe.image&&z.push(c.image),oe.imageAltText&&z.push(c.imageAltText,"link"),oe.imageMarker&&z.push(c.imageMarker)),oe.header&&z.push(c.header,c.header+"-"+oe.header),oe.quote&&(z.push(c.quote),!r.maxBlockquoteDepth||r.maxBlockquoteDepth>=oe.quote?z.push(c.quote+"-"+oe.quote):z.push(c.quote+"-"+r.maxBlockquoteDepth)),oe.list!==!1){var at=(oe.listStack.length-1)%3;at?at===1?z.push(c.list2):z.push(c.list3):z.push(c.list1)}return oe.trailingSpaceNewLine?z.push("trailing-space-new-line"):oe.trailingSpace&&z.push("trailing-space-"+(oe.trailingSpace%2?"a":"b")),z.length?z.join(" "):null}function Oe(oe,z){if(oe.match(D,!0))return fe(z)}function _e(oe,z){var ke=z.text(oe,z);if(typeof ke<"u")return ke;if(z.list)return z.list=null,fe(z);if(z.taskList){var at=oe.match(y,!0)[1]===" ";return at?z.taskOpen=!0:z.taskClosed=!0,r.highlightFormatting&&(z.formatting="task"),z.taskList=!1,fe(z)}if(z.taskOpen=!1,z.taskClosed=!1,z.header&&oe.match(/^#+$/,!0))return r.highlightFormatting&&(z.formatting="header"),fe(z);var lt=oe.next();if(z.linkTitle){z.linkTitle=!1;var Ee=lt;lt==="("&&(Ee=")"),Ee=(Ee+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var xe="^\\s*(?:[^"+Ee+"\\\\]+|\\\\\\\\|\\\\.)"+Ee;if(oe.match(new RegExp(xe),!0))return c.linkHref}if(lt==="`"){var Ue=z.formatting;r.highlightFormatting&&(z.formatting="code"),oe.eatWhile("`");var P=oe.current().length;if(z.code==0&&(!z.quote||P==1))return z.code=P,fe(z);if(P==z.code){var R=fe(z);return z.code=0,R}else return z.formatting=Ue,fe(z)}else if(z.code)return fe(z);if(lt==="\\"&&(oe.next(),r.highlightFormatting)){var W=fe(z),he=c.formatting+"-escape";return W?W+" "+he:he}if(lt==="!"&&oe.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return z.imageMarker=!0,z.image=!0,r.highlightFormatting&&(z.formatting="image"),fe(z);if(lt==="["&&z.imageMarker&&oe.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return z.imageMarker=!1,z.imageAltText=!0,r.highlightFormatting&&(z.formatting="image"),fe(z);if(lt==="]"&&z.imageAltText){r.highlightFormatting&&(z.formatting="image");var W=fe(z);return z.imageAltText=!1,z.image=!1,z.inline=z.f=re,W}if(lt==="["&&!z.image)return z.linkText&&oe.match(/^.*?\]/)||(z.linkText=!0,r.highlightFormatting&&(z.formatting="link")),fe(z);if(lt==="]"&&z.linkText){r.highlightFormatting&&(z.formatting="link");var W=fe(z);return z.linkText=!1,z.inline=z.f=oe.match(/\(.*?\)| ?\[.*?\]/,!1)?re:_e,W}if(lt==="<"&&oe.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){z.f=z.inline=Ie,r.highlightFormatting&&(z.formatting="link");var W=fe(z);return W?W+=" ":W="",W+c.linkInline}if(lt==="<"&&oe.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){z.f=z.inline=Ie,r.highlightFormatting&&(z.formatting="link");var W=fe(z);return W?W+=" ":W="",W+c.linkEmail}if(r.xml&&lt==="<"&&oe.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var ge=oe.string.indexOf(">",oe.pos);if(ge!=-1){var ce=oe.string.substring(oe.start,ge);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(ce)&&(z.md_inside=!0)}return oe.backUp(1),z.htmlState=t.startState(o),K(oe,z,X)}if(r.xml&&lt==="<"&&oe.match(/^\/\w*?>/))return z.md_inside=!1,"tag";if(lt==="*"||lt==="_"){for(var $e=1,At=oe.pos==1?" ":oe.string.charAt(oe.pos-2);$e<3&&oe.eat(lt);)$e++;var Ct=oe.peek()||" ",jt=!/\s/.test(Ct)&&(!V.test(Ct)||/\s/.test(At)||V.test(At)),ct=!/\s/.test(At)&&(!V.test(At)||/\s/.test(Ct)||V.test(Ct)),En=null,Sn=null;if($e%2&&(!z.em&&jt&&(lt==="*"||!ct||V.test(At))?En=!0:z.em==lt&&ct&&(lt==="*"||!jt||V.test(Ct))&&(En=!1)),$e>1&&(!z.strong&&jt&&(lt==="*"||!ct||V.test(At))?Sn=!0:z.strong==lt&&ct&&(lt==="*"||!jt||V.test(Ct))&&(Sn=!1)),Sn!=null||En!=null){r.highlightFormatting&&(z.formatting=En==null?"strong":Sn==null?"em":"strong em"),En===!0&&(z.em=lt),Sn===!0&&(z.strong=lt);var R=fe(z);return En===!1&&(z.em=!1),Sn===!1&&(z.strong=!1),R}}else if(lt===" "&&(oe.eat("*")||oe.eat("_"))){if(oe.peek()===" ")return fe(z);oe.backUp(1)}if(r.strikethrough){if(lt==="~"&&oe.eatWhile(lt)){if(z.strikethrough){r.highlightFormatting&&(z.formatting="strikethrough");var R=fe(z);return z.strikethrough=!1,R}else if(oe.match(/^[^\s]/,!1))return z.strikethrough=!0,r.highlightFormatting&&(z.formatting="strikethrough"),fe(z)}else if(lt===" "&&oe.match("~~",!0)){if(oe.peek()===" ")return fe(z);oe.backUp(2)}}if(r.emoji&&lt===":"&&oe.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){z.emoji=!0,r.highlightFormatting&&(z.formatting="emoji");var Di=fe(z);return z.emoji=!1,Di}return lt===" "&&(oe.match(/^ +$/,!1)?z.trailingSpace++:z.trailingSpace&&(z.trailingSpaceNewLine=!0)),fe(z)}function Ie(oe,z){var ke=oe.next();if(ke===">"){z.f=z.inline=_e,r.highlightFormatting&&(z.formatting="link");var at=fe(z);return at?at+=" ":at="",at+c.linkInline}return oe.match(/^[^>]+/,!0),c.linkInline}function re(oe,z){if(oe.eatSpace())return null;var ke=oe.next();return ke==="("||ke==="["?(z.f=z.inline=pe(ke==="("?")":"]"),r.highlightFormatting&&(z.formatting="link-string"),z.linkHref=!0,fe(z)):"error"}var ae={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function pe(oe){return function(z,ke){var at=z.next();if(at===oe){ke.f=ke.inline=_e,r.highlightFormatting&&(ke.formatting="link-string");var lt=fe(ke);return ke.linkHref=!1,lt}return z.match(ae[oe]),ke.linkHref=!0,fe(ke)}}function Z(oe,z){return oe.match(/^([^\]\\]|\\.)*\]:/,!1)?(z.f=Pe,oe.next(),r.highlightFormatting&&(z.formatting="link"),z.linkText=!0,fe(z)):U(oe,z,_e)}function Pe(oe,z){if(oe.match("]:",!0)){z.f=z.inline=je,r.highlightFormatting&&(z.formatting="link");var ke=fe(z);return z.linkText=!1,ke}return oe.match(/^([^\]\\]|\\.)+/,!0),c.linkText}function je(oe,z){return oe.eatSpace()?null:(oe.match(/^[^\s]+/,!0),oe.peek()===void 0?z.linkTitle=!0:oe.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),z.f=z.inline=_e,c.linkHref+" url")}var wt={startState:function(){return{f:ne,prevLine:{stream:null},thisLine:{stream:null},block:ne,htmlState:null,indentation:0,inline:_e,text:Oe,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(oe){return{f:oe.f,prevLine:oe.prevLine,thisLine:oe.thisLine,block:oe.block,htmlState:oe.htmlState&&t.copyState(o,oe.htmlState),indentation:oe.indentation,localMode:oe.localMode,localState:oe.localMode?t.copyState(oe.localMode,oe.localState):null,inline:oe.inline,text:oe.text,formatting:!1,linkText:oe.linkText,linkTitle:oe.linkTitle,linkHref:oe.linkHref,code:oe.code,em:oe.em,strong:oe.strong,strikethrough:oe.strikethrough,emoji:oe.emoji,header:oe.header,setext:oe.setext,hr:oe.hr,taskList:oe.taskList,list:oe.list,listStack:oe.listStack.slice(0),quote:oe.quote,indentedCode:oe.indentedCode,trailingSpace:oe.trailingSpace,trailingSpaceNewLine:oe.trailingSpaceNewLine,md_inside:oe.md_inside,fencedEndRE:oe.fencedEndRE}},token:function(oe,z){if(z.formatting=!1,oe!=z.thisLine.stream){if(z.header=0,z.hr=!1,oe.match(/^\s*$/,!0))return Q(z),null;if(z.prevLine=z.thisLine,z.thisLine={stream:oe},z.taskList=!1,z.trailingSpace=0,z.trailingSpaceNewLine=!1,!z.localState&&(z.f=z.block,z.f!=X)){var ke=oe.match(/^\s*/,!0)[0].replace(/\t/g,O).length;if(z.indentation=ke,z.indentationDiff=null,ke>0)return null}}return z.f(oe,z)},innerMode:function(oe){return oe.block==X?{state:oe.htmlState,mode:o}:oe.localState?{state:oe.localState,mode:oe.localMode}:{state:oe,mode:wt}},indent:function(oe,z,ke){return oe.block==X&&o.indent?o.indent(oe.htmlState,z,ke):oe.localState&&oe.localMode.indent?oe.localMode.indent(oe.localState,z,ke):t.Pass},blankLine:Q,getType:fe,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return wt},"xml"),t.defineMIME("text/markdown","markdown"),t.defineMIME("text/x-markdown","markdown")})})();var vW=mW.exports,wW={exports:{}};(function(i,e){(function(t){t(is)})(function(t){t.overlayMode=function(n,r,o){return{startState:function(){return{base:t.startState(n),overlay:t.startState(r),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(s){return{base:t.copyState(n,s.base),overlay:t.copyState(r,s.overlay),basePos:s.basePos,baseCur:null,overlayPos:s.overlayPos,overlayCur:null}},token:function(s,l){return(s!=l.streamSeen||Math.min(l.basePos,l.overlayPos)<s.start)&&(l.streamSeen=s,l.basePos=l.overlayPos=s.start),s.start==l.basePos&&(l.baseCur=n.token(s,l.base),l.basePos=s.pos),s.start==l.overlayPos&&(s.pos=s.start,l.overlayCur=r.token(s,l.overlay),l.overlayPos=s.pos),s.pos=Math.min(l.basePos,l.overlayPos),l.overlayCur==null?l.baseCur:l.baseCur!=null&&l.overlay.combineTokens||o&&l.overlay.combineTokens==null?l.baseCur+" "+l.overlayCur:l.overlayCur},indent:n.indent&&function(s,l,c){return n.indent(s.base,l,c)},electricChars:n.electricChars,innerMode:function(s){return{state:s.base,mode:n}},blankLine:function(s){var l,c;return n.blankLine&&(l=n.blankLine(s.base)),r.blankLine&&(c=r.blankLine(s.overlay)),c==null?l:o&&l!=null?l+" "+c:c}}}})})();var yW=wW.exports;(function(i,e){(function(t){t(is)})(function(t){t.defineOption("placeholder","",function(h,g,b){var y=b&&b!=t.Init;if(g&&!y)h.on("blur",s),h.on("change",l),h.on("swapDoc",l),t.on(h.getInputField(),"compositionupdate",h.state.placeholderCompose=function(){o(h)}),l(h);else if(!g&&y){h.off("blur",s),h.off("change",l),h.off("swapDoc",l),t.off(h.getInputField(),"compositionupdate",h.state.placeholderCompose),n(h);var k=h.getWrapperElement();k.className=k.className.replace(" CodeMirror-empty","")}g&&!h.hasFocus()&&s(h)});function n(h){h.state.placeholder&&(h.state.placeholder.parentNode.removeChild(h.state.placeholder),h.state.placeholder=null)}function r(h){n(h);var g=h.state.placeholder=document.createElement("pre");g.style.cssText="height: 0; overflow: visible",g.style.direction=h.getOption("direction"),g.className="CodeMirror-placeholder CodeMirror-line-like";var b=h.getOption("placeholder");typeof b=="string"&&(b=document.createTextNode(b)),g.appendChild(b),h.display.lineSpace.insertBefore(g,h.display.lineSpace.firstChild)}function o(h){setTimeout(function(){var g=!1;if(h.lineCount()==1){var b=h.getInputField();g=b.nodeName=="TEXTAREA"?!h.getLine(0).length:!/[^\u200b]/.test(b.querySelector(".CodeMirror-line").textContent)}g?r(h):n(h)},20)}function s(h){c(h)&&r(h)}function l(h){var g=h.getWrapperElement(),b=c(h);g.className=g.className.replace(" CodeMirror-empty","")+(b?" CodeMirror-empty":""),b?r(h):n(h)}function c(h){return h.lineCount()===1&&h.getLine(0)===""}})})();(function(i,e){(function(t){t(is)})(function(t){t.defineOption("autoRefresh",!1,function(o,s){o.state.autoRefresh&&(r(o,o.state.autoRefresh),o.state.autoRefresh=null),s&&o.display.wrapper.offsetHeight==0&&n(o,o.state.autoRefresh={delay:s.delay||250})});function n(o,s){function l(){o.display.wrapper.offsetHeight?(r(o,s),o.display.lastWrapHeight!=o.display.wrapper.clientHeight&&o.refresh()):s.timeout=setTimeout(l,s.delay)}s.timeout=setTimeout(l,s.delay),s.hurry=function(){clearTimeout(s.timeout),s.timeout=setTimeout(l,50)},t.on(window,"mouseup",s.hurry),t.on(window,"keyup",s.hurry)}function r(o,s){clearTimeout(s.timeout),t.off(window,"mouseup",s.hurry),t.off(window,"keyup",s.hurry)}})})();(function(i,e){(function(t){t(is)})(function(t){t.defineOption("styleSelectedText",!1,function(y,k,x){var D=x&&x!=t.Init;k&&!D?(y.state.markedSelection=[],y.state.markedSelectionStyle=typeof k=="string"?k:"CodeMirror-selectedtext",g(y),y.on("cursorActivity",n),y.on("change",r)):!k&&D&&(y.off("cursorActivity",n),y.off("change",r),h(y),y.state.markedSelection=y.state.markedSelectionStyle=null)});function n(y){y.state.markedSelection&&y.operation(function(){b(y)})}function r(y){y.state.markedSelection&&y.state.markedSelection.length&&y.operation(function(){h(y)})}var o=8,s=t.Pos,l=t.cmpPos;function c(y,k,x,D){if(l(k,x)!=0)for(var L=y.state.markedSelection,M=y.state.markedSelectionStyle,V=k.line;;){var O=V==k.line?k:s(V,0),U=V+o,K=U>=x.line,q=K?x:s(U,0),Q=y.markText(O,q,{className:M});if(D==null?L.push(Q):L.splice(D++,0,Q),K)break;V=U}}function h(y){for(var k=y.state.markedSelection,x=0;x<k.length;++x)k[x].clear();k.length=0}function g(y){h(y);for(var k=y.listSelections(),x=0;x<k.length;x++)c(y,k[x].from(),k[x].to())}function b(y){if(!y.somethingSelected())return h(y);if(y.listSelections().length>1)return g(y);var k=y.getCursor("start"),x=y.getCursor("end"),D=y.state.markedSelection;if(!D.length)return c(y,k,x);var L=D[0].find(),M=D[D.length-1].find();if(!L||!M||x.line-k.line<=o||l(k,M.to)>=0||l(x,L.from)<=0)return g(y);for(;l(k,L.from)>0;)D.shift().clear(),L=D[0].find();for(l(k,L.from)<0&&(L.to.line-k.line<o?(D.shift().clear(),c(y,k,L.to,0)):c(y,k,L.from,0));l(x,M.to)<0;)D.pop().clear(),M=D[D.length-1].find();l(x,M.to)>0&&(x.line-M.from.line<o?(D.pop().clear(),c(y,M.from,x)):c(y,M.to,x))}})})();(function(i,e){(function(t){t(is)})(function(t){var n=t.Pos;function r(V){var O=V.flags;return O??(V.ignoreCase?"i":"")+(V.global?"g":"")+(V.multiline?"m":"")}function o(V,O){for(var U=r(V),K=U,q=0;q<O.length;q++)K.indexOf(O.charAt(q))==-1&&(K+=O.charAt(q));return U==K?V:new RegExp(V.source,K)}function s(V){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(V.source)}function l(V,O,U){O=o(O,"g");for(var K=U.line,q=U.ch,Q=V.lastLine();K<=Q;K++,q=0){O.lastIndex=q;var ne=V.getLine(K),X=O.exec(ne);if(X)return{from:n(K,X.index),to:n(K,X.index+X[0].length),match:X}}}function c(V,O,U){if(!s(O))return l(V,O,U);O=o(O,"gm");for(var K,q=1,Q=U.line,ne=V.lastLine();Q<=ne;){for(var X=0;X<q&&!(Q>ne);X++){var se=V.getLine(Q++);K=K==null?se:K+`
`+se}q=q*2,O.lastIndex=U.ch;var fe=O.exec(K);if(fe){var Oe=K.slice(0,fe.index).split(`
`),_e=fe[0].split(`
`),Ie=U.line+Oe.length-1,re=Oe[Oe.length-1].length;return{from:n(Ie,re),to:n(Ie+_e.length-1,_e.length==1?re+_e[0].length:_e[_e.length-1].length),match:fe}}}}function h(V,O,U){for(var K,q=0;q<=V.length;){O.lastIndex=q;var Q=O.exec(V);if(!Q)break;var ne=Q.index+Q[0].length;if(ne>V.length-U)break;(!K||ne>K.index+K[0].length)&&(K=Q),q=Q.index+1}return K}function g(V,O,U){O=o(O,"g");for(var K=U.line,q=U.ch,Q=V.firstLine();K>=Q;K--,q=-1){var ne=V.getLine(K),X=h(ne,O,q<0?0:ne.length-q);if(X)return{from:n(K,X.index),to:n(K,X.index+X[0].length),match:X}}}function b(V,O,U){if(!s(O))return g(V,O,U);O=o(O,"gm");for(var K,q=1,Q=V.getLine(U.line).length-U.ch,ne=U.line,X=V.firstLine();ne>=X;){for(var se=0;se<q&&ne>=X;se++){var fe=V.getLine(ne--);K=K==null?fe:fe+`
`+K}q*=2;var Oe=h(K,O,Q);if(Oe){var _e=K.slice(0,Oe.index).split(`
`),Ie=Oe[0].split(`
`),re=ne+_e.length,ae=_e[_e.length-1].length;return{from:n(re,ae),to:n(re+Ie.length-1,Ie.length==1?ae+Ie[0].length:Ie[Ie.length-1].length),match:Oe}}}}var y,k;String.prototype.normalize?(y=function(V){return V.normalize("NFD").toLowerCase()},k=function(V){return V.normalize("NFD")}):(y=function(V){return V.toLowerCase()},k=function(V){return V});function x(V,O,U,K){if(V.length==O.length)return U;for(var q=0,Q=U+Math.max(0,V.length-O.length);;){if(q==Q)return q;var ne=q+Q>>1,X=K(V.slice(0,ne)).length;if(X==U)return ne;X>U?Q=ne:q=ne+1}}function D(V,O,U,K){if(!O.length)return null;var q=K?y:k,Q=q(O).split(/\r|\n\r?/);e:for(var ne=U.line,X=U.ch,se=V.lastLine()+1-Q.length;ne<=se;ne++,X=0){var fe=V.getLine(ne).slice(X),Oe=q(fe);if(Q.length==1){var _e=Oe.indexOf(Q[0]);if(_e==-1)continue e;var U=x(fe,Oe,_e,q)+X;return{from:n(ne,x(fe,Oe,_e,q)+X),to:n(ne,x(fe,Oe,_e+Q[0].length,q)+X)}}else{var Ie=Oe.length-Q[0].length;if(Oe.slice(Ie)!=Q[0])continue e;for(var re=1;re<Q.length-1;re++)if(q(V.getLine(ne+re))!=Q[re])continue e;var ae=V.getLine(ne+Q.length-1),pe=q(ae),Z=Q[Q.length-1];if(pe.slice(0,Z.length)!=Z)continue e;return{from:n(ne,x(fe,Oe,Ie,q)+X),to:n(ne+Q.length-1,x(ae,pe,Z.length,q))}}}}function L(V,O,U,K){if(!O.length)return null;var q=K?y:k,Q=q(O).split(/\r|\n\r?/);e:for(var ne=U.line,X=U.ch,se=V.firstLine()-1+Q.length;ne>=se;ne--,X=-1){var fe=V.getLine(ne);X>-1&&(fe=fe.slice(0,X));var Oe=q(fe);if(Q.length==1){var _e=Oe.lastIndexOf(Q[0]);if(_e==-1)continue e;return{from:n(ne,x(fe,Oe,_e,q)),to:n(ne,x(fe,Oe,_e+Q[0].length,q))}}else{var Ie=Q[Q.length-1];if(Oe.slice(0,Ie.length)!=Ie)continue e;for(var re=1,U=ne-Q.length+1;re<Q.length-1;re++)if(q(V.getLine(U+re))!=Q[re])continue e;var ae=V.getLine(ne+1-Q.length),pe=q(ae);if(pe.slice(pe.length-Q[0].length)!=Q[0])continue e;return{from:n(ne+1-Q.length,x(ae,pe,ae.length-Q[0].length,q)),to:n(ne,x(fe,Oe,Ie.length,q))}}}}function M(V,O,U,K){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=V,U=U?V.clipPos(U):n(0,0),this.pos={from:U,to:U};var q;typeof K=="object"?q=K.caseFold:(q=K,K=null),typeof O=="string"?(q==null&&(q=!1),this.matches=function(Q,ne){return(Q?L:D)(V,O,ne,q)}):(O=o(O,"gm"),!K||K.multiline!==!1?this.matches=function(Q,ne){return(Q?b:c)(V,O,ne)}:this.matches=function(Q,ne){return(Q?g:l)(V,O,ne)})}M.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(V){var O=this.doc.clipPos(V?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(O=n(O.line,O.ch),V?(O.ch--,O.ch<0&&(O.line--,O.ch=(this.doc.getLine(O.line)||"").length)):(O.ch++,O.ch>(this.doc.getLine(O.line)||"").length&&(O.ch=0,O.line++)),t.cmpPos(O,this.doc.clipPos(O))!=0))return this.atOccurrence=!1;var U=this.matches(V,O);if(this.afterEmptyMatch=U&&t.cmpPos(U.from,U.to)==0,U)return this.pos=U,this.atOccurrence=!0,this.pos.match||!0;var K=n(V?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:K,to:K},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(V,O){if(this.atOccurrence){var U=t.splitLines(V);this.doc.replaceRange(U,this.pos.from,this.pos.to,O),this.pos.to=n(this.pos.from.line+U.length-1,U[U.length-1].length+(U.length==1?this.pos.from.ch:0))}}},t.defineExtension("getSearchCursor",function(V,O,U){return new M(this.doc,V,O,U)}),t.defineDocExtension("getSearchCursor",function(V,O,U){return new M(this,V,O,U)}),t.defineExtension("selectMatches",function(V,O){for(var U=[],K=this.getSearchCursor(V,this.getCursor("from"),O);K.findNext()&&!(t.cmpPos(K.to(),this.getCursor("to"))>0);)U.push({anchor:K.from(),head:K.to()});U.length&&this.setSelections(U,0)})})})();(function(i,e){(function(t){t(is,vW,yW)})(function(t){var n=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i;t.defineMode("gfm",function(r,o){var s=0;function l(b){return b.code=!1,null}var c={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(b){return{code:b.code,codeBlock:b.codeBlock,ateSpace:b.ateSpace}},token:function(b,y){if(y.combineTokens=null,y.codeBlock)return b.match(/^```+/)?(y.codeBlock=!1,null):(b.skipToEnd(),null);if(b.sol()&&(y.code=!1),b.sol()&&b.match(/^```+/))return b.skipToEnd(),y.codeBlock=!0,null;if(b.peek()==="`"){b.next();var k=b.pos;b.eatWhile("`");var x=1+b.pos-k;return y.code?x===s&&(y.code=!1):(s=x,y.code=!0),null}else if(y.code)return b.next(),null;if(b.eatSpace())return y.ateSpace=!0,null;if((b.sol()||y.ateSpace)&&(y.ateSpace=!1,o.gitHubSpice!==!1)){if(b.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return y.combineTokens=!0,"link";if(b.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return y.combineTokens=!0,"link"}return b.match(n)&&b.string.slice(b.start-2,b.start)!="]("&&(b.start==0||/\W/.test(b.string.charAt(b.start-1)))?(y.combineTokens=!0,"link"):(b.next(),null)},blankLine:l},h={taskLists:!0,strikethrough:!0,emoji:!0};for(var g in o)h[g]=o[g];return h.name="markdown",t.overlayMode(t.getMode(r,h),c)},"markdown"),t.defineMIME("text/x-gfm","gfm")})})();function _W(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ES={exports:{}};const kW={},CW=Object.freeze(Object.defineProperty({__proto__:null,default:kW},Symbol.toStringTag,{value:"Module"})),xW=iT(CW);(function(i){var e;(function(){e=function(t,n,r,o){o=o||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=o.flags||{},this.memoized={},this.loaded=!1;var s=this,l,c,h,g,b;t&&(s.dictionary=t,n&&r?D():typeof window<"u"&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(o.dictionaryPath?l=o.dictionaryPath:l="typo/dictionaries",n||y(chrome.extension.getURL(l+"/"+t+"/"+t+".aff"),k),r||y(chrome.extension.getURL(l+"/"+t+"/"+t+".dic"),x)):(o.dictionaryPath?l=o.dictionaryPath:typeof __dirname<"u"?l=__dirname+"/dictionaries":l="./dictionaries",n||y(l+"/"+t+"/"+t+".aff",k),r||y(l+"/"+t+"/"+t+".dic",x)));function y(L,M){var V=s._readFile(L,null,o.asyncLoad);o.asyncLoad?V.then(function(O){M(O)}):M(V)}function k(L){n=L,r&&D()}function x(L){r=L,n&&D()}function D(){for(s.rules=s._parseAFF(n),s.compoundRuleCodes={},c=0,g=s.compoundRules.length;c<g;c++){var L=s.compoundRules[c];for(h=0,b=L.length;h<b;h++)s.compoundRuleCodes[L[h]]=[]}"ONLYINCOMPOUND"in s.flags&&(s.compoundRuleCodes[s.flags.ONLYINCOMPOUND]=[]),s.dictionaryTable=s._parseDIC(r);for(c in s.compoundRuleCodes)s.compoundRuleCodes[c].length===0&&delete s.compoundRuleCodes[c];for(c=0,g=s.compoundRules.length;c<g;c++){var M=s.compoundRules[c],V="";for(h=0,b=M.length;h<b;h++){var O=M[h];O in s.compoundRuleCodes?V+="("+s.compoundRuleCodes[O].join("|")+")":V+=O}s.compoundRules[c]=new RegExp(V,"i")}s.loaded=!0,o.asyncLoad&&o.loadedCallback&&o.loadedCallback(s)}return this},e.prototype={load:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);return this},_readFile:function(t,n,r){if(n=n||"utf8",typeof XMLHttpRequest<"u"){var o,s=new XMLHttpRequest;return s.open("GET",t,r),r&&(o=new Promise(function(c,h){s.onload=function(){s.status===200?c(s.responseText):h(s.statusText)},s.onerror=function(){h(s.statusText)}})),s.overrideMimeType&&s.overrideMimeType("text/plain; charset="+n),s.send(null),r?o:s.responseText}else if(typeof _W<"u"){var l=xW;try{if(l.existsSync(t))return l.readFileSync(t,n);console.log("Path "+t+" does not exist.")}catch(c){return console.log(c),""}}},_parseAFF:function(t){var n={},r,o,s,l,c,h,g,b,y=t.split(/\r?\n/);for(c=0,g=y.length;c<g;c++)if(r=this._removeAffixComments(y[c]),r=r.trim(),!!r){var k=r.split(/\s+/),x=k[0];if(x=="PFX"||x=="SFX"){var D=k[1],L=k[2];s=parseInt(k[3],10);var M=[];for(h=c+1,b=c+1+s;h<b;h++){o=y[h],l=o.split(/\s+/);var V=l[2],O=l[3].split("/"),U=O[0];U==="0"&&(U="");var K=this.parseRuleCodes(O[1]),q=l[4],Q={};Q.add=U,K.length>0&&(Q.continuationClasses=K),q!=="."&&(x==="SFX"?Q.match=new RegExp(q+"$"):Q.match=new RegExp("^"+q)),V!="0"&&(x==="SFX"?Q.remove=new RegExp(V+"$"):Q.remove=V),M.push(Q)}n[D]={type:x,combineable:L=="Y",entries:M},c+=s}else if(x==="COMPOUNDRULE"){for(s=parseInt(k[1],10),h=c+1,b=c+1+s;h<b;h++)r=y[h],l=r.split(/\s+/),this.compoundRules.push(l[1]);c+=s}else x==="REP"?(l=r.split(/\s+/),l.length===3&&this.replacementTable.push([l[1],l[2]])):this.flags[x]=k[1]}return n},_removeAffixComments:function(t){return t.match(/^\s*#/,"")?"":t},_parseDIC:function(t){t=this._removeDicComments(t);var n=t.split(/\r?\n/),r={};function o(fe,Oe){r.hasOwnProperty(fe)||(r[fe]=null),Oe.length>0&&(r[fe]===null&&(r[fe]=[]),r[fe].push(Oe))}for(var s=1,l=n.length;s<l;s++){var c=n[s];if(c){var h=c.split("/",2),g=h[0];if(h.length>1){var b=this.parseRuleCodes(h[1]);(!("NEEDAFFIX"in this.flags)||b.indexOf(this.flags.NEEDAFFIX)==-1)&&o(g,b);for(var y=0,k=b.length;y<k;y++){var x=b[y],D=this.rules[x];if(D)for(var L=this._applyRule(g,D),M=0,V=L.length;M<V;M++){var O=L[M];if(o(O,[]),D.combineable)for(var U=y+1;U<k;U++){var K=b[U],q=this.rules[K];if(q&&q.combineable&&D.type!=q.type)for(var Q=this._applyRule(O,q),ne=0,X=Q.length;ne<X;ne++){var se=Q[ne];o(se,[])}}}x in this.compoundRuleCodes&&this.compoundRuleCodes[x].push(g)}}else o(g.trim(),[])}}return r},_removeDicComments:function(t){return t=t.replace(/^\t.*$/mg,""),t},parseRuleCodes:function(t){if(t)if("FLAG"in this.flags)if(this.flags.FLAG==="long"){for(var n=[],r=0,o=t.length;r<o;r+=2)n.push(t.substr(r,2));return n}else return this.flags.FLAG==="num"?t.split(","):this.flags.FLAG==="UTF-8"?Array.from(t):t.split("");else return t.split("");else return[]},_applyRule:function(t,n){for(var r=n.entries,o=[],s=0,l=r.length;s<l;s++){var c=r[s];if(!c.match||t.match(c.match)){var h=t;if(c.remove&&(h=h.replace(c.remove,"")),n.type==="SFX"?h=h+c.add:h=c.add+h,o.push(h),"continuationClasses"in c)for(var g=0,b=c.continuationClasses.length;g<b;g++){var y=this.rules[c.continuationClasses[g]];y&&(o=o.concat(this._applyRule(h,y)))}}}return o},check:function(t){if(!this.loaded)throw"Dictionary not loaded.";if(!t)return!1;var n=t.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(n))return!0;if(n.toUpperCase()===n){var r=n[0]+n.substring(1).toLowerCase();if(this.hasFlag(r,"KEEPCASE"))return!1;if(this.checkExact(r)||this.checkExact(n.toLowerCase()))return!0}var o=n[0].toLowerCase()+n.substring(1);if(o!==n){if(this.hasFlag(o,"KEEPCASE"))return!1;if(this.checkExact(o))return!0}return!1},checkExact:function(t){if(!this.loaded)throw"Dictionary not loaded.";var n=this.dictionaryTable[t],r,o;if(typeof n>"u"){if("COMPOUNDMIN"in this.flags&&t.length>=this.flags.COMPOUNDMIN){for(r=0,o=this.compoundRules.length;r<o;r++)if(t.match(this.compoundRules[r]))return!0}}else{if(n===null)return!0;if(typeof n=="object"){for(r=0,o=n.length;r<o;r++)if(!this.hasFlag(t,"ONLYINCOMPOUND",n[r]))return!0}}return!1},hasFlag:function(t,n,r){if(!this.loaded)throw"Dictionary not loaded.";return!!(n in this.flags&&(typeof r>"u"&&(r=Array.prototype.concat.apply([],this.dictionaryTable[t])),r&&r.indexOf(this.flags[n])!==-1))},alphabet:"",suggest:function(t,n){if(!this.loaded)throw"Dictionary not loaded.";if(n=n||5,this.memoized.hasOwnProperty(t)){var r=this.memoized[t].limit;if(n<=r||this.memoized[t].suggestions.length<r)return this.memoized[t].suggestions.slice(0,n)}if(this.check(t))return[];for(var o=0,s=this.replacementTable.length;o<s;o++){var l=this.replacementTable[o];if(t.indexOf(l[0])!==-1){var c=t.replace(l[0],l[1]);if(this.check(c))return[c]}}if(!this.alphabet){this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ","TRY"in this.flags&&(this.alphabet+=this.flags.TRY),"WORDCHARS"in this.flags&&(this.alphabet+=this.flags.WORDCHARS);var h=this.alphabet.split("");h.sort();for(var g={},o=0;o<h.length;o++)g[h[o]]=!0;this.alphabet="";for(var o in g)this.alphabet+=o}var b=this;function y(x,D){var L={},M,V,O,U,K=b.alphabet.length;if(typeof x=="string"){var q=x;x={},x[q]=!0}for(var q in x)for(M=0,O=q.length+1;M<O;M++){var Q=[q.substring(0,M),q.substring(M)];if(Q[1]&&(U=Q[0]+Q[1].substring(1),(!D||b.check(U))&&(U in L?L[U]+=1:L[U]=1)),Q[1].length>1&&Q[1][1]!==Q[1][0]&&(U=Q[0]+Q[1][1]+Q[1][0]+Q[1].substring(2),(!D||b.check(U))&&(U in L?L[U]+=1:L[U]=1)),Q[1]){var ne=Q[1].substring(0,1).toUpperCase()===Q[1].substring(0,1)?"uppercase":"lowercase";for(V=0;V<K;V++){var X=b.alphabet[V];ne==="uppercase"&&(X=X.toUpperCase()),X!=Q[1].substring(0,1)&&(U=Q[0]+X+Q[1].substring(1),(!D||b.check(U))&&(U in L?L[U]+=1:L[U]=1))}}if(Q[1])for(V=0;V<K;V++){var ne=Q[0].substring(-1).toUpperCase()===Q[0].substring(-1)&&Q[1].substring(0,1).toUpperCase()===Q[1].substring(0,1)?"uppercase":"lowercase",X=b.alphabet[V];ne==="uppercase"&&(X=X.toUpperCase()),U=Q[0]+X+Q[1],(!D||b.check(U))&&(U in L?L[U]+=1:L[U]=1)}}return L}function k(x){var D=y(x),L=y(D,!0),M=L;for(var V in D)b.check(V)&&(V in M?M[V]+=D[V]:M[V]=D[V]);var O,U=[];for(O in M)M.hasOwnProperty(O)&&U.push([O,M[O]]);function K(X,se){var fe=X[1],Oe=se[1];return fe<Oe?-1:fe>Oe?1:se[0].localeCompare(X[0])}U.sort(K).reverse();var q=[],Q="lowercase";x.toUpperCase()===x?Q="uppercase":x.substr(0,1).toUpperCase()+x.substr(1).toLowerCase()===x&&(Q="capitalized");var ne=n;for(O=0;O<Math.min(ne,U.length);O++)Q==="uppercase"?U[O][0]=U[O][0].toUpperCase():Q==="capitalized"&&(U[O][0]=U[O][0].substr(0,1).toUpperCase()+U[O][0].substr(1)),!b.hasFlag(U[O][0],"NOSUGGEST")&&q.indexOf(U[O][0])==-1?q.push(U[O][0]):ne++;return q}return this.memoized[t]={suggestions:k(t),limit:n},this.memoized[t].suggestions}}})(),i.exports=e})(ES);var EW=ES.exports,__=EW;function li(i){if(i=i||{},typeof i.codeMirrorInstance!="function"||typeof i.codeMirrorInstance.defineMode!="function"){console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`");return}String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),i.codeMirrorInstance.defineMode("spell-checker",function(e){if(!li.aff_loading){li.aff_loading=!0;var t=new XMLHttpRequest;t.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),t.onload=function(){t.readyState===4&&t.status===200&&(li.aff_data=t.responseText,li.num_loaded++,li.num_loaded==2&&(li.typo=new __("en_US",li.aff_data,li.dic_data,{platform:"any"})))},t.send(null)}if(!li.dic_loading){li.dic_loading=!0;var n=new XMLHttpRequest;n.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),n.onload=function(){n.readyState===4&&n.status===200&&(li.dic_data=n.responseText,li.num_loaded++,li.num_loaded==2&&(li.typo=new __("en_US",li.aff_data,li.dic_data,{platform:"any"})))},n.send(null)}var r='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',o={token:function(l){var c=l.peek(),h="";if(r.includes(c))return l.next(),null;for(;(c=l.peek())!=null&&!r.includes(c);)h+=c,l.next();return li.typo&&!li.typo.check(h)?"spell-error":null}},s=i.codeMirrorInstance.getMode(e,e.backdrop||"text/plain");return i.codeMirrorInstance.overlayMode(s,o,!0)})}li.num_loaded=0;li.aff_loading=!1;li.dic_loading=!1;li.aff_data="";li.dic_data="";li.typo;var SW=li,SS={};(function(i){function e(Te,Ae){for(var we=0;we<Ae.length;we++){var $=Ae[we];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(Te,c($.key),$)}}function t(Te,Ae,we){return we&&e(Te,we),Object.defineProperty(Te,"prototype",{writable:!1}),Te}function n(){return n=Object.assign?Object.assign.bind():function(Te){for(var Ae=1;Ae<arguments.length;Ae++){var we=arguments[Ae];for(var $ in we)Object.prototype.hasOwnProperty.call(we,$)&&(Te[$]=we[$])}return Te},n.apply(this,arguments)}function r(Te,Ae){if(Te){if(typeof Te=="string")return o(Te,Ae);var we=Object.prototype.toString.call(Te).slice(8,-1);if(we==="Object"&&Te.constructor&&(we=Te.constructor.name),we==="Map"||we==="Set")return Array.from(Te);if(we==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(we))return o(Te,Ae)}}function o(Te,Ae){(Ae==null||Ae>Te.length)&&(Ae=Te.length);for(var we=0,$=new Array(Ae);we<Ae;we++)$[we]=Te[we];return $}function s(Te,Ae){var we=typeof Symbol<"u"&&Te[Symbol.iterator]||Te["@@iterator"];if(we)return(we=we.call(Te)).next.bind(we);if(Array.isArray(Te)||(we=r(Te))||Ae){we&&(Te=we);var $=0;return function(){return $>=Te.length?{done:!0}:{done:!1,value:Te[$++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(Te,Ae){if(typeof Te!="object"||Te===null)return Te;var we=Te[Symbol.toPrimitive];if(we!==void 0){var $=we.call(Te,Ae);if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Te)}function c(Te){var Ae=l(Te,"string");return typeof Ae=="symbol"?Ae:String(Ae)}function h(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}i.defaults=h();function g(Te){i.defaults=Te}var b=/[&<>"']/,y=new RegExp(b.source,"g"),k=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,x=new RegExp(k.source,"g"),D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},L=function(Ae){return D[Ae]};function M(Te,Ae){if(Ae){if(b.test(Te))return Te.replace(y,L)}else if(k.test(Te))return Te.replace(x,L);return Te}var V=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function O(Te){return Te.replace(V,function(Ae,we){return we=we.toLowerCase(),we==="colon"?":":we.charAt(0)==="#"?we.charAt(1)==="x"?String.fromCharCode(parseInt(we.substring(2),16)):String.fromCharCode(+we.substring(1)):""})}var U=/(^|[^\[])\^/g;function K(Te,Ae){Te=typeof Te=="string"?Te:Te.source,Ae=Ae||"";var we={replace:function(Y,de){return de=de.source||de,de=de.replace(U,"$1"),Te=Te.replace(Y,de),we},getRegex:function(){return new RegExp(Te,Ae)}};return we}var q=/[^\w:]/g,Q=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function ne(Te,Ae,we){if(Te){var $;try{$=decodeURIComponent(O(we)).replace(q,"").toLowerCase()}catch{return null}if($.indexOf("javascript:")===0||$.indexOf("vbscript:")===0||$.indexOf("data:")===0)return null}Ae&&!Q.test(we)&&(we=_e(Ae,we));try{we=encodeURI(we).replace(/%25/g,"%")}catch{return null}return we}var X={},se=/^[^:]+:\/*[^/]*$/,fe=/^([^:]+:)[\s\S]*$/,Oe=/^([^:]+:\/*[^/]*)[\s\S]*$/;function _e(Te,Ae){X[" "+Te]||(se.test(Te)?X[" "+Te]=Te+"/":X[" "+Te]=ae(Te,"/",!0)),Te=X[" "+Te];var we=Te.indexOf(":")===-1;return Ae.substring(0,2)==="//"?we?Ae:Te.replace(fe,"$1")+Ae:Ae.charAt(0)==="/"?we?Ae:Te.replace(Oe,"$1")+Ae:Te+Ae}var Ie={exec:function(){}};function re(Te,Ae){var we=Te.replace(/\|/g,function(de,ue,ve){for(var et=!1,ht=ue;--ht>=0&&ve[ht]==="\\";)et=!et;return et?"|":" |"}),$=we.split(/ \|/),Y=0;if($[0].trim()||$.shift(),$.length>0&&!$[$.length-1].trim()&&$.pop(),$.length>Ae)$.splice(Ae);else for(;$.length<Ae;)$.push("");for(;Y<$.length;Y++)$[Y]=$[Y].trim().replace(/\\\|/g,"|");return $}function ae(Te,Ae,we){var $=Te.length;if($===0)return"";for(var Y=0;Y<$;){var de=Te.charAt($-Y-1);if(de===Ae&&!we)Y++;else if(de!==Ae&&we)Y++;else break}return Te.slice(0,$-Y)}function pe(Te,Ae){if(Te.indexOf(Ae[1])===-1)return-1;for(var we=Te.length,$=0,Y=0;Y<we;Y++)if(Te[Y]==="\\")Y++;else if(Te[Y]===Ae[0])$++;else if(Te[Y]===Ae[1]&&($--,$<0))return Y;return-1}function Z(Te){Te&&Te.sanitize&&!Te.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Pe(Te,Ae){if(Ae<1)return"";for(var we="";Ae>1;)Ae&1&&(we+=Te),Ae>>=1,Te+=Te;return we+Te}function je(Te,Ae,we,$){var Y=Ae.href,de=Ae.title?M(Ae.title):null,ue=Te[1].replace(/\\([\[\]])/g,"$1");if(Te[0].charAt(0)!=="!"){$.state.inLink=!0;var ve={type:"link",raw:we,href:Y,title:de,text:ue,tokens:$.inlineTokens(ue)};return $.state.inLink=!1,ve}return{type:"image",raw:we,href:Y,title:de,text:M(ue)}}function wt(Te,Ae){var we=Te.match(/^(\s+)(?:```)/);if(we===null)return Ae;var $=we[1];return Ae.split(`
`).map(function(Y){var de=Y.match(/^\s+/);if(de===null)return Y;var ue=de[0];return ue.length>=$.length?Y.slice($.length):Y}).join(`
`)}var oe=function(){function Te(we){this.options=we||i.defaults}var Ae=Te.prototype;return Ae.space=function($){var Y=this.rules.block.newline.exec($);if(Y&&Y[0].length>0)return{type:"space",raw:Y[0]}},Ae.code=function($){var Y=this.rules.block.code.exec($);if(Y){var de=Y[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:Y[0],codeBlockStyle:"indented",text:this.options.pedantic?de:ae(de,`
`)}}},Ae.fences=function($){var Y=this.rules.block.fences.exec($);if(Y){var de=Y[0],ue=wt(de,Y[3]||"");return{type:"code",raw:de,lang:Y[2]?Y[2].trim().replace(this.rules.inline._escapes,"$1"):Y[2],text:ue}}},Ae.heading=function($){var Y=this.rules.block.heading.exec($);if(Y){var de=Y[2].trim();if(/#$/.test(de)){var ue=ae(de,"#");(this.options.pedantic||!ue||/ $/.test(ue))&&(de=ue.trim())}return{type:"heading",raw:Y[0],depth:Y[1].length,text:de,tokens:this.lexer.inline(de)}}},Ae.hr=function($){var Y=this.rules.block.hr.exec($);if(Y)return{type:"hr",raw:Y[0]}},Ae.blockquote=function($){var Y=this.rules.block.blockquote.exec($);if(Y){var de=Y[0].replace(/^ *>[ \t]?/gm,""),ue=this.lexer.state.top;this.lexer.state.top=!0;var ve=this.lexer.blockTokens(de);return this.lexer.state.top=ue,{type:"blockquote",raw:Y[0],tokens:ve,text:de}}},Ae.list=function($){var Y=this.rules.block.list.exec($);if(Y){var de,ue,ve,et,ht,ft,ut,Et,rt,xt,Ne,dn,Bt=Y[1].trim(),ln=Bt.length>1,Nt={type:"list",raw:"",ordered:ln,start:ln?+Bt.slice(0,-1):"",loose:!1,items:[]};Bt=ln?"\\d{1,9}\\"+Bt.slice(-1):"\\"+Bt,this.options.pedantic&&(Bt=ln?Bt:"[*+-]");for(var zn=new RegExp("^( {0,3}"+Bt+")((?:[	 ][^\\n]*)?(?:\\n|$))");$&&(dn=!1,!(!(Y=zn.exec($))||this.rules.block.hr.test($)));){if(de=Y[0],$=$.substring(de.length),Et=Y[2].split(`
`,1)[0].replace(/^\t+/,function($r){return" ".repeat(3*$r.length)}),rt=$.split(`
`,1)[0],this.options.pedantic?(et=2,Ne=Et.trimLeft()):(et=Y[2].search(/[^ ]/),et=et>4?1:et,Ne=Et.slice(et),et+=Y[1].length),ft=!1,!Et&&/^ *$/.test(rt)&&(de+=rt+`
`,$=$.substring(rt.length+1),dn=!0),!dn)for(var Wn=new RegExp("^ {0,"+Math.min(3,et-1)+"}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))"),Ri=new RegExp("^ {0,"+Math.min(3,et-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),mn=new RegExp("^ {0,"+Math.min(3,et-1)+"}(?:```|~~~)"),ur=new RegExp("^ {0,"+Math.min(3,et-1)+"}#");$&&(xt=$.split(`
`,1)[0],rt=xt,this.options.pedantic&&(rt=rt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(mn.test(rt)||ur.test(rt)||Wn.test(rt)||Ri.test($)));){if(rt.search(/[^ ]/)>=et||!rt.trim())Ne+=`
`+rt.slice(et);else{if(ft||Et.search(/[^ ]/)>=4||mn.test(Et)||ur.test(Et)||Ri.test(Et))break;Ne+=`
`+rt}!ft&&!rt.trim()&&(ft=!0),de+=xt+`
`,$=$.substring(xt.length+1),Et=rt.slice(et)}Nt.loose||(ut?Nt.loose=!0:/\n *\n *$/.test(de)&&(ut=!0)),this.options.gfm&&(ue=/^\[[ xX]\] /.exec(Ne),ue&&(ve=ue[0]!=="[ ] ",Ne=Ne.replace(/^\[[ xX]\] +/,""))),Nt.items.push({type:"list_item",raw:de,task:!!ue,checked:ve,loose:!1,text:Ne}),Nt.raw+=de}Nt.items[Nt.items.length-1].raw=de.trimRight(),Nt.items[Nt.items.length-1].text=Ne.trimRight(),Nt.raw=Nt.raw.trimRight();var Oi=Nt.items.length;for(ht=0;ht<Oi;ht++)if(this.lexer.state.top=!1,Nt.items[ht].tokens=this.lexer.blockTokens(Nt.items[ht].text,[]),!Nt.loose){var ji=Nt.items[ht].tokens.filter(function($r){return $r.type==="space"}),gr=ji.length>0&&ji.some(function($r){return/\n.*\n/.test($r.raw)});Nt.loose=gr}if(Nt.loose)for(ht=0;ht<Oi;ht++)Nt.items[ht].loose=!0;return Nt}},Ae.html=function($){var Y=this.rules.block.html.exec($);if(Y){var de={type:"html",raw:Y[0],pre:!this.options.sanitizer&&(Y[1]==="pre"||Y[1]==="script"||Y[1]==="style"),text:Y[0]};if(this.options.sanitize){var ue=this.options.sanitizer?this.options.sanitizer(Y[0]):M(Y[0]);de.type="paragraph",de.text=ue,de.tokens=this.lexer.inline(ue)}return de}},Ae.def=function($){var Y=this.rules.block.def.exec($);if(Y){var de=Y[1].toLowerCase().replace(/\s+/g," "),ue=Y[2]?Y[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",ve=Y[3]?Y[3].substring(1,Y[3].length-1).replace(this.rules.inline._escapes,"$1"):Y[3];return{type:"def",tag:de,raw:Y[0],href:ue,title:ve}}},Ae.table=function($){var Y=this.rules.block.table.exec($);if(Y){var de={type:"table",header:re(Y[1]).map(function(ut){return{text:ut}}),align:Y[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:Y[3]&&Y[3].trim()?Y[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(de.header.length===de.align.length){de.raw=Y[0];var ue=de.align.length,ve,et,ht,ft;for(ve=0;ve<ue;ve++)/^ *-+: *$/.test(de.align[ve])?de.align[ve]="right":/^ *:-+: *$/.test(de.align[ve])?de.align[ve]="center":/^ *:-+ *$/.test(de.align[ve])?de.align[ve]="left":de.align[ve]=null;for(ue=de.rows.length,ve=0;ve<ue;ve++)de.rows[ve]=re(de.rows[ve],de.header.length).map(function(ut){return{text:ut}});for(ue=de.header.length,et=0;et<ue;et++)de.header[et].tokens=this.lexer.inline(de.header[et].text);for(ue=de.rows.length,et=0;et<ue;et++)for(ft=de.rows[et],ht=0;ht<ft.length;ht++)ft[ht].tokens=this.lexer.inline(ft[ht].text);return de}}},Ae.lheading=function($){var Y=this.rules.block.lheading.exec($);if(Y)return{type:"heading",raw:Y[0],depth:Y[2].charAt(0)==="="?1:2,text:Y[1],tokens:this.lexer.inline(Y[1])}},Ae.paragraph=function($){var Y=this.rules.block.paragraph.exec($);if(Y){var de=Y[1].charAt(Y[1].length-1)===`
`?Y[1].slice(0,-1):Y[1];return{type:"paragraph",raw:Y[0],text:de,tokens:this.lexer.inline(de)}}},Ae.text=function($){var Y=this.rules.block.text.exec($);if(Y)return{type:"text",raw:Y[0],text:Y[0],tokens:this.lexer.inline(Y[0])}},Ae.escape=function($){var Y=this.rules.inline.escape.exec($);if(Y)return{type:"escape",raw:Y[0],text:M(Y[1])}},Ae.tag=function($){var Y=this.rules.inline.tag.exec($);if(Y)return!this.lexer.state.inLink&&/^<a /i.test(Y[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(Y[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(Y[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(Y[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:Y[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Y[0]):M(Y[0]):Y[0]}},Ae.link=function($){var Y=this.rules.inline.link.exec($);if(Y){var de=Y[2].trim();if(!this.options.pedantic&&/^</.test(de)){if(!/>$/.test(de))return;var ue=ae(de.slice(0,-1),"\\");if((de.length-ue.length)%2===0)return}else{var ve=pe(Y[2],"()");if(ve>-1){var et=Y[0].indexOf("!")===0?5:4,ht=et+Y[1].length+ve;Y[2]=Y[2].substring(0,ve),Y[0]=Y[0].substring(0,ht).trim(),Y[3]=""}}var ft=Y[2],ut="";if(this.options.pedantic){var Et=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ft);Et&&(ft=Et[1],ut=Et[3])}else ut=Y[3]?Y[3].slice(1,-1):"";return ft=ft.trim(),/^</.test(ft)&&(this.options.pedantic&&!/>$/.test(de)?ft=ft.slice(1):ft=ft.slice(1,-1)),je(Y,{href:ft&&ft.replace(this.rules.inline._escapes,"$1"),title:ut&&ut.replace(this.rules.inline._escapes,"$1")},Y[0],this.lexer)}},Ae.reflink=function($,Y){var de;if((de=this.rules.inline.reflink.exec($))||(de=this.rules.inline.nolink.exec($))){var ue=(de[2]||de[1]).replace(/\s+/g," ");if(ue=Y[ue.toLowerCase()],!ue){var ve=de[0].charAt(0);return{type:"text",raw:ve,text:ve}}return je(de,ue,de[0],this.lexer)}},Ae.emStrong=function($,Y,de){de===void 0&&(de="");var ue=this.rules.inline.emStrong.lDelim.exec($);if(ue&&!(ue[3]&&de.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var ve=ue[1]||ue[2]||"";if(!ve||ve&&(de===""||this.rules.inline.punctuation.exec(de))){var et=ue[0].length-1,ht,ft,ut=et,Et=0,rt=ue[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(rt.lastIndex=0,Y=Y.slice(-1*$.length+et);(ue=rt.exec(Y))!=null;)if(ht=ue[1]||ue[2]||ue[3]||ue[4]||ue[5]||ue[6],!!ht){if(ft=ht.length,ue[3]||ue[4]){ut+=ft;continue}else if((ue[5]||ue[6])&&et%3&&!((et+ft)%3)){Et+=ft;continue}if(ut-=ft,!(ut>0)){ft=Math.min(ft,ft+ut+Et);var xt=$.slice(0,et+ue.index+(ue[0].length-ht.length)+ft);if(Math.min(et,ft)%2){var Ne=xt.slice(1,-1);return{type:"em",raw:xt,text:Ne,tokens:this.lexer.inlineTokens(Ne)}}var dn=xt.slice(2,-2);return{type:"strong",raw:xt,text:dn,tokens:this.lexer.inlineTokens(dn)}}}}}},Ae.codespan=function($){var Y=this.rules.inline.code.exec($);if(Y){var de=Y[2].replace(/\n/g," "),ue=/[^ ]/.test(de),ve=/^ /.test(de)&&/ $/.test(de);return ue&&ve&&(de=de.substring(1,de.length-1)),de=M(de,!0),{type:"codespan",raw:Y[0],text:de}}},Ae.br=function($){var Y=this.rules.inline.br.exec($);if(Y)return{type:"br",raw:Y[0]}},Ae.del=function($){var Y=this.rules.inline.del.exec($);if(Y)return{type:"del",raw:Y[0],text:Y[2],tokens:this.lexer.inlineTokens(Y[2])}},Ae.autolink=function($,Y){var de=this.rules.inline.autolink.exec($);if(de){var ue,ve;return de[2]==="@"?(ue=M(this.options.mangle?Y(de[1]):de[1]),ve="mailto:"+ue):(ue=M(de[1]),ve=ue),{type:"link",raw:de[0],text:ue,href:ve,tokens:[{type:"text",raw:ue,text:ue}]}}},Ae.url=function($,Y){var de;if(de=this.rules.inline.url.exec($)){var ue,ve;if(de[2]==="@")ue=M(this.options.mangle?Y(de[0]):de[0]),ve="mailto:"+ue;else{var et;do et=de[0],de[0]=this.rules.inline._backpedal.exec(de[0])[0];while(et!==de[0]);ue=M(de[0]),de[1]==="www."?ve="http://"+de[0]:ve=de[0]}return{type:"link",raw:de[0],text:ue,href:ve,tokens:[{type:"text",raw:ue,text:ue}]}}},Ae.inlineText=function($,Y){var de=this.rules.inline.text.exec($);if(de){var ue;return this.lexer.state.inRawBlock?ue=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(de[0]):M(de[0]):de[0]:ue=M(this.options.smartypants?Y(de[0]):de[0]),{type:"text",raw:de[0],text:ue}}},Te}(),z={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Ie,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};z._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,z._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,z.def=K(z.def).replace("label",z._label).replace("title",z._title).getRegex(),z.bullet=/(?:[*+-]|\d{1,9}[.)])/,z.listItemStart=K(/^( *)(bull) */).replace("bull",z.bullet).getRegex(),z.list=K(z.list).replace(/bull/g,z.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+z.def.source+")").getRegex(),z._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",z._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,z.html=K(z.html,"i").replace("comment",z._comment).replace("tag",z._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),z.paragraph=K(z._paragraph).replace("hr",z.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",z._tag).getRegex(),z.blockquote=K(z.blockquote).replace("paragraph",z.paragraph).getRegex(),z.normal=n({},z),z.gfm=n({},z.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),z.gfm.table=K(z.gfm.table).replace("hr",z.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",z._tag).getRegex(),z.gfm.paragraph=K(z._paragraph).replace("hr",z.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",z.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",z._tag).getRegex(),z.pedantic=n({},z.normal,{html:K(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",z._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ie,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:K(z.normal._paragraph).replace("hr",z.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",z.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var ke={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ie,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ie,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};ke._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",ke.punctuation=K(ke.punctuation).replace(/punctuation/g,ke._punctuation).getRegex(),ke.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ke.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,ke._comment=K(z._comment).replace("(?:-->|$)","-->").getRegex(),ke.emStrong.lDelim=K(ke.emStrong.lDelim).replace(/punct/g,ke._punctuation).getRegex(),ke.emStrong.rDelimAst=K(ke.emStrong.rDelimAst,"g").replace(/punct/g,ke._punctuation).getRegex(),ke.emStrong.rDelimUnd=K(ke.emStrong.rDelimUnd,"g").replace(/punct/g,ke._punctuation).getRegex(),ke._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ke._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ke._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ke.autolink=K(ke.autolink).replace("scheme",ke._scheme).replace("email",ke._email).getRegex(),ke._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ke.tag=K(ke.tag).replace("comment",ke._comment).replace("attribute",ke._attribute).getRegex(),ke._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ke._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ke._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ke.link=K(ke.link).replace("label",ke._label).replace("href",ke._href).replace("title",ke._title).getRegex(),ke.reflink=K(ke.reflink).replace("label",ke._label).replace("ref",z._label).getRegex(),ke.nolink=K(ke.nolink).replace("ref",z._label).getRegex(),ke.reflinkSearch=K(ke.reflinkSearch,"g").replace("reflink",ke.reflink).replace("nolink",ke.nolink).getRegex(),ke.normal=n({},ke),ke.pedantic=n({},ke.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:K(/^!?\[(label)\]\((.*?)\)/).replace("label",ke._label).getRegex(),reflink:K(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ke._label).getRegex()}),ke.gfm=n({},ke.normal,{escape:K(ke.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),ke.gfm.url=K(ke.gfm.url,"i").replace("email",ke.gfm._extended_email).getRegex(),ke.breaks=n({},ke.gfm,{br:K(ke.br).replace("{2,}","*").getRegex(),text:K(ke.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function at(Te){return Te.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function lt(Te){var Ae="",we,$,Y=Te.length;for(we=0;we<Y;we++)$=Te.charCodeAt(we),Math.random()>.5&&($="x"+$.toString(16)),Ae+="&#"+$+";";return Ae}var Ee=function(){function Te(we){this.tokens=[],this.tokens.links=Object.create(null),this.options=we||i.defaults,this.options.tokenizer=this.options.tokenizer||new oe,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var $={block:z.normal,inline:ke.normal};this.options.pedantic?($.block=z.pedantic,$.inline=ke.pedantic):this.options.gfm&&($.block=z.gfm,this.options.breaks?$.inline=ke.breaks:$.inline=ke.gfm),this.tokenizer.rules=$}Te.lex=function($,Y){var de=new Te(Y);return de.lex($)},Te.lexInline=function($,Y){var de=new Te(Y);return de.inlineTokens($)};var Ae=Te.prototype;return Ae.lex=function($){$=$.replace(/\r\n|\r/g,`
`),this.blockTokens($,this.tokens);for(var Y;Y=this.inlineQueue.shift();)this.inlineTokens(Y.src,Y.tokens);return this.tokens},Ae.blockTokens=function($,Y){var de=this;Y===void 0&&(Y=[]),this.options.pedantic?$=$.replace(/\t/g,"    ").replace(/^ +$/gm,""):$=$.replace(/^( *)(\t+)/gm,function(ut,Et,rt){return Et+"    ".repeat(rt.length)});for(var ue,ve,et,ht;$;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(ut){return(ue=ut.call({lexer:de},$,Y))?($=$.substring(ue.raw.length),Y.push(ue),!0):!1}))){if(ue=this.tokenizer.space($)){$=$.substring(ue.raw.length),ue.raw.length===1&&Y.length>0?Y[Y.length-1].raw+=`
`:Y.push(ue);continue}if(ue=this.tokenizer.code($)){$=$.substring(ue.raw.length),ve=Y[Y.length-1],ve&&(ve.type==="paragraph"||ve.type==="text")?(ve.raw+=`
`+ue.raw,ve.text+=`
`+ue.text,this.inlineQueue[this.inlineQueue.length-1].src=ve.text):Y.push(ue);continue}if(ue=this.tokenizer.fences($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.heading($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.hr($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.blockquote($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.list($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.html($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.def($)){$=$.substring(ue.raw.length),ve=Y[Y.length-1],ve&&(ve.type==="paragraph"||ve.type==="text")?(ve.raw+=`
`+ue.raw,ve.text+=`
`+ue.raw,this.inlineQueue[this.inlineQueue.length-1].src=ve.text):this.tokens.links[ue.tag]||(this.tokens.links[ue.tag]={href:ue.href,title:ue.title});continue}if(ue=this.tokenizer.table($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.lheading($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(et=$,this.options.extensions&&this.options.extensions.startBlock&&function(){var ut=1/0,Et=$.slice(1),rt=void 0;de.options.extensions.startBlock.forEach(function(xt){rt=xt.call({lexer:this},Et),typeof rt=="number"&&rt>=0&&(ut=Math.min(ut,rt))}),ut<1/0&&ut>=0&&(et=$.substring(0,ut+1))}(),this.state.top&&(ue=this.tokenizer.paragraph(et))){ve=Y[Y.length-1],ht&&ve.type==="paragraph"?(ve.raw+=`
`+ue.raw,ve.text+=`
`+ue.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ve.text):Y.push(ue),ht=et.length!==$.length,$=$.substring(ue.raw.length);continue}if(ue=this.tokenizer.text($)){$=$.substring(ue.raw.length),ve=Y[Y.length-1],ve&&ve.type==="text"?(ve.raw+=`
`+ue.raw,ve.text+=`
`+ue.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ve.text):Y.push(ue);continue}if($){var ft="Infinite loop on byte: "+$.charCodeAt(0);if(this.options.silent){console.error(ft);break}else throw new Error(ft)}}return this.state.top=!0,Y},Ae.inline=function($,Y){return Y===void 0&&(Y=[]),this.inlineQueue.push({src:$,tokens:Y}),Y},Ae.inlineTokens=function($,Y){var de=this;Y===void 0&&(Y=[]);var ue,ve,et,ht=$,ft,ut,Et;if(this.tokens.links){var rt=Object.keys(this.tokens.links);if(rt.length>0)for(;(ft=this.tokenizer.rules.inline.reflinkSearch.exec(ht))!=null;)rt.includes(ft[0].slice(ft[0].lastIndexOf("[")+1,-1))&&(ht=ht.slice(0,ft.index)+"["+Pe("a",ft[0].length-2)+"]"+ht.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(ft=this.tokenizer.rules.inline.blockSkip.exec(ht))!=null;)ht=ht.slice(0,ft.index)+"["+Pe("a",ft[0].length-2)+"]"+ht.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(ft=this.tokenizer.rules.inline.escapedEmSt.exec(ht))!=null;)ht=ht.slice(0,ft.index+ft[0].length-2)+"++"+ht.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;$;)if(ut||(Et=""),ut=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ne){return(ue=Ne.call({lexer:de},$,Y))?($=$.substring(ue.raw.length),Y.push(ue),!0):!1}))){if(ue=this.tokenizer.escape($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.tag($)){$=$.substring(ue.raw.length),ve=Y[Y.length-1],ve&&ue.type==="text"&&ve.type==="text"?(ve.raw+=ue.raw,ve.text+=ue.text):Y.push(ue);continue}if(ue=this.tokenizer.link($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.reflink($,this.tokens.links)){$=$.substring(ue.raw.length),ve=Y[Y.length-1],ve&&ue.type==="text"&&ve.type==="text"?(ve.raw+=ue.raw,ve.text+=ue.text):Y.push(ue);continue}if(ue=this.tokenizer.emStrong($,ht,Et)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.codespan($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.br($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.del($)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(ue=this.tokenizer.autolink($,lt)){$=$.substring(ue.raw.length),Y.push(ue);continue}if(!this.state.inLink&&(ue=this.tokenizer.url($,lt))){$=$.substring(ue.raw.length),Y.push(ue);continue}if(et=$,this.options.extensions&&this.options.extensions.startInline&&function(){var Ne=1/0,dn=$.slice(1),Bt=void 0;de.options.extensions.startInline.forEach(function(ln){Bt=ln.call({lexer:this},dn),typeof Bt=="number"&&Bt>=0&&(Ne=Math.min(Ne,Bt))}),Ne<1/0&&Ne>=0&&(et=$.substring(0,Ne+1))}(),ue=this.tokenizer.inlineText(et,at)){$=$.substring(ue.raw.length),ue.raw.slice(-1)!=="_"&&(Et=ue.raw.slice(-1)),ut=!0,ve=Y[Y.length-1],ve&&ve.type==="text"?(ve.raw+=ue.raw,ve.text+=ue.text):Y.push(ue);continue}if($){var xt="Infinite loop on byte: "+$.charCodeAt(0);if(this.options.silent){console.error(xt);break}else throw new Error(xt)}}return Y},t(Te,null,[{key:"rules",get:function(){return{block:z,inline:ke}}}]),Te}(),xe=function(){function Te(we){this.options=we||i.defaults}var Ae=Te.prototype;return Ae.code=function($,Y,de){var ue=(Y||"").match(/\S*/)[0];if(this.options.highlight){var ve=this.options.highlight($,ue);ve!=null&&ve!==$&&(de=!0,$=ve)}return $=$.replace(/\n$/,"")+`
`,ue?'<pre><code class="'+this.options.langPrefix+M(ue)+'">'+(de?$:M($,!0))+`</code></pre>
`:"<pre><code>"+(de?$:M($,!0))+`</code></pre>
`},Ae.blockquote=function($){return`<blockquote>
`+$+`</blockquote>
`},Ae.html=function($){return $},Ae.heading=function($,Y,de,ue){if(this.options.headerIds){var ve=this.options.headerPrefix+ue.slug(de);return"<h"+Y+' id="'+ve+'">'+$+"</h"+Y+`>
`}return"<h"+Y+">"+$+"</h"+Y+`>
`},Ae.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},Ae.list=function($,Y,de){var ue=Y?"ol":"ul",ve=Y&&de!==1?' start="'+de+'"':"";return"<"+ue+ve+`>
`+$+"</"+ue+`>
`},Ae.listitem=function($){return"<li>"+$+`</li>
`},Ae.checkbox=function($){return"<input "+($?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Ae.paragraph=function($){return"<p>"+$+`</p>
`},Ae.table=function($,Y){return Y&&(Y="<tbody>"+Y+"</tbody>"),`<table>
<thead>
`+$+`</thead>
`+Y+`</table>
`},Ae.tablerow=function($){return`<tr>
`+$+`</tr>
`},Ae.tablecell=function($,Y){var de=Y.header?"th":"td",ue=Y.align?"<"+de+' align="'+Y.align+'">':"<"+de+">";return ue+$+("</"+de+`>
`)},Ae.strong=function($){return"<strong>"+$+"</strong>"},Ae.em=function($){return"<em>"+$+"</em>"},Ae.codespan=function($){return"<code>"+$+"</code>"},Ae.br=function(){return this.options.xhtml?"<br/>":"<br>"},Ae.del=function($){return"<del>"+$+"</del>"},Ae.link=function($,Y,de){if($=ne(this.options.sanitize,this.options.baseUrl,$),$===null)return de;var ue='<a href="'+$+'"';return Y&&(ue+=' title="'+Y+'"'),ue+=">"+de+"</a>",ue},Ae.image=function($,Y,de){if($=ne(this.options.sanitize,this.options.baseUrl,$),$===null)return de;var ue='<img src="'+$+'" alt="'+de+'"';return Y&&(ue+=' title="'+Y+'"'),ue+=this.options.xhtml?"/>":">",ue},Ae.text=function($){return $},Te}(),Ue=function(){function Te(){}var Ae=Te.prototype;return Ae.strong=function($){return $},Ae.em=function($){return $},Ae.codespan=function($){return $},Ae.del=function($){return $},Ae.html=function($){return $},Ae.text=function($){return $},Ae.link=function($,Y,de){return""+de},Ae.image=function($,Y,de){return""+de},Ae.br=function(){return""},Te}(),P=function(){function Te(){this.seen={}}var Ae=Te.prototype;return Ae.serialize=function($){return $.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Ae.getNextSafeSlug=function($,Y){var de=$,ue=0;if(this.seen.hasOwnProperty(de)){ue=this.seen[$];do ue++,de=$+"-"+ue;while(this.seen.hasOwnProperty(de))}return Y||(this.seen[$]=ue,this.seen[de]=0),de},Ae.slug=function($,Y){Y===void 0&&(Y={});var de=this.serialize($);return this.getNextSafeSlug(de,Y.dryrun)},Te}(),R=function(){function Te(we){this.options=we||i.defaults,this.options.renderer=this.options.renderer||new xe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ue,this.slugger=new P}Te.parse=function($,Y){var de=new Te(Y);return de.parse($)},Te.parseInline=function($,Y){var de=new Te(Y);return de.parseInline($)};var Ae=Te.prototype;return Ae.parse=function($,Y){Y===void 0&&(Y=!0);var de="",ue,ve,et,ht,ft,ut,Et,rt,xt,Ne,dn,Bt,ln,Nt,zn,Wn,Ri,mn,ur,Oi=$.length;for(ue=0;ue<Oi;ue++){if(Ne=$[ue],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Ne.type]&&(ur=this.options.extensions.renderers[Ne.type].call({parser:this},Ne),ur!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ne.type))){de+=ur||"";continue}switch(Ne.type){case"space":continue;case"hr":{de+=this.renderer.hr();continue}case"heading":{de+=this.renderer.heading(this.parseInline(Ne.tokens),Ne.depth,O(this.parseInline(Ne.tokens,this.textRenderer)),this.slugger);continue}case"code":{de+=this.renderer.code(Ne.text,Ne.lang,Ne.escaped);continue}case"table":{for(rt="",Et="",ht=Ne.header.length,ve=0;ve<ht;ve++)Et+=this.renderer.tablecell(this.parseInline(Ne.header[ve].tokens),{header:!0,align:Ne.align[ve]});for(rt+=this.renderer.tablerow(Et),xt="",ht=Ne.rows.length,ve=0;ve<ht;ve++){for(ut=Ne.rows[ve],Et="",ft=ut.length,et=0;et<ft;et++)Et+=this.renderer.tablecell(this.parseInline(ut[et].tokens),{header:!1,align:Ne.align[et]});xt+=this.renderer.tablerow(Et)}de+=this.renderer.table(rt,xt);continue}case"blockquote":{xt=this.parse(Ne.tokens),de+=this.renderer.blockquote(xt);continue}case"list":{for(dn=Ne.ordered,Bt=Ne.start,ln=Ne.loose,ht=Ne.items.length,xt="",ve=0;ve<ht;ve++)zn=Ne.items[ve],Wn=zn.checked,Ri=zn.task,Nt="",zn.task&&(mn=this.renderer.checkbox(Wn),ln?zn.tokens.length>0&&zn.tokens[0].type==="paragraph"?(zn.tokens[0].text=mn+" "+zn.tokens[0].text,zn.tokens[0].tokens&&zn.tokens[0].tokens.length>0&&zn.tokens[0].tokens[0].type==="text"&&(zn.tokens[0].tokens[0].text=mn+" "+zn.tokens[0].tokens[0].text)):zn.tokens.unshift({type:"text",text:mn}):Nt+=mn),Nt+=this.parse(zn.tokens,ln),xt+=this.renderer.listitem(Nt,Ri,Wn);de+=this.renderer.list(xt,dn,Bt);continue}case"html":{de+=this.renderer.html(Ne.text);continue}case"paragraph":{de+=this.renderer.paragraph(this.parseInline(Ne.tokens));continue}case"text":{for(xt=Ne.tokens?this.parseInline(Ne.tokens):Ne.text;ue+1<Oi&&$[ue+1].type==="text";)Ne=$[++ue],xt+=`
`+(Ne.tokens?this.parseInline(Ne.tokens):Ne.text);de+=Y?this.renderer.paragraph(xt):xt;continue}default:{var ji='Token with "'+Ne.type+'" type was not found.';if(this.options.silent){console.error(ji);return}else throw new Error(ji)}}}return de},Ae.parseInline=function($,Y){Y=Y||this.renderer;var de="",ue,ve,et,ht=$.length;for(ue=0;ue<ht;ue++){if(ve=$[ue],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ve.type]&&(et=this.options.extensions.renderers[ve.type].call({parser:this},ve),et!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ve.type))){de+=et||"";continue}switch(ve.type){case"escape":{de+=Y.text(ve.text);break}case"html":{de+=Y.html(ve.text);break}case"link":{de+=Y.link(ve.href,ve.title,this.parseInline(ve.tokens,Y));break}case"image":{de+=Y.image(ve.href,ve.title,ve.text);break}case"strong":{de+=Y.strong(this.parseInline(ve.tokens,Y));break}case"em":{de+=Y.em(this.parseInline(ve.tokens,Y));break}case"codespan":{de+=Y.codespan(ve.text);break}case"br":{de+=Y.br();break}case"del":{de+=Y.del(this.parseInline(ve.tokens,Y));break}case"text":{de+=Y.text(ve.text);break}default:{var ft='Token with "'+ve.type+'" type was not found.';if(this.options.silent){console.error(ft);return}else throw new Error(ft)}}}return de},Te}(),W=function(){function Te(we){this.options=we||i.defaults}var Ae=Te.prototype;return Ae.preprocess=function($){return $},Ae.postprocess=function($){return $},Te}();W.passThroughHooks=new Set(["preprocess","postprocess"]);function he(Te,Ae,we){return function($){if($.message+=`
Please report this to https://github.com/markedjs/marked.`,Te){var Y="<p>An error occurred:</p><pre>"+M($.message+"",!0)+"</pre>";if(Ae)return Promise.resolve(Y);if(we){we(null,Y);return}return Y}if(Ae)return Promise.reject($);if(we){we($);return}throw $}}function ge(Te,Ae){return function(we,$,Y){typeof $=="function"&&(Y=$,$=null);var de=n({},$);$=n({},ce.defaults,de);var ue=he($.silent,$.async,Y);if(typeof we>"u"||we===null)return ue(new Error("marked(): input parameter is undefined or null"));if(typeof we!="string")return ue(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(we)+", string expected"));if(Z($),$.hooks&&($.hooks.options=$),Y){var ve=$.highlight,et;try{$.hooks&&(we=$.hooks.preprocess(we)),et=Te(we,$)}catch(rt){return ue(rt)}var ht=function(xt){var Ne;if(!xt)try{$.walkTokens&&ce.walkTokens(et,$.walkTokens),Ne=Ae(et,$),$.hooks&&(Ne=$.hooks.postprocess(Ne))}catch(dn){xt=dn}return $.highlight=ve,xt?ue(xt):Y(null,Ne)};if(!ve||ve.length<3||(delete $.highlight,!et.length))return ht();var ft=0;ce.walkTokens(et,function(rt){rt.type==="code"&&(ft++,setTimeout(function(){ve(rt.text,rt.lang,function(xt,Ne){if(xt)return ht(xt);Ne!=null&&Ne!==rt.text&&(rt.text=Ne,rt.escaped=!0),ft--,ft===0&&ht()})},0))}),ft===0&&ht();return}if($.async)return Promise.resolve($.hooks?$.hooks.preprocess(we):we).then(function(rt){return Te(rt,$)}).then(function(rt){return $.walkTokens?Promise.all(ce.walkTokens(rt,$.walkTokens)).then(function(){return rt}):rt}).then(function(rt){return Ae(rt,$)}).then(function(rt){return $.hooks?$.hooks.postprocess(rt):rt}).catch(ue);try{$.hooks&&(we=$.hooks.preprocess(we));var ut=Te(we,$);$.walkTokens&&ce.walkTokens(ut,$.walkTokens);var Et=Ae(ut,$);return $.hooks&&(Et=$.hooks.postprocess(Et)),Et}catch(rt){return ue(rt)}}}function ce(Te,Ae,we){return ge(Ee.lex,R.parse)(Te,Ae,we)}ce.options=ce.setOptions=function(Te){return ce.defaults=n({},ce.defaults,Te),g(ce.defaults),ce},ce.getDefaults=h,ce.defaults=i.defaults,ce.use=function(){for(var Te=ce.defaults.extensions||{renderers:{},childTokens:{}},Ae=arguments.length,we=new Array(Ae),$=0;$<Ae;$++)we[$]=arguments[$];we.forEach(function(Y){var de=n({},Y);if(de.async=ce.defaults.async||de.async||!1,Y.extensions&&(Y.extensions.forEach(function(ve){if(!ve.name)throw new Error("extension name required");if(ve.renderer){var et=Te.renderers[ve.name];et?Te.renderers[ve.name]=function(){for(var ht=arguments.length,ft=new Array(ht),ut=0;ut<ht;ut++)ft[ut]=arguments[ut];var Et=ve.renderer.apply(this,ft);return Et===!1&&(Et=et.apply(this,ft)),Et}:Te.renderers[ve.name]=ve.renderer}if(ve.tokenizer){if(!ve.level||ve.level!=="block"&&ve.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");Te[ve.level]?Te[ve.level].unshift(ve.tokenizer):Te[ve.level]=[ve.tokenizer],ve.start&&(ve.level==="block"?Te.startBlock?Te.startBlock.push(ve.start):Te.startBlock=[ve.start]:ve.level==="inline"&&(Te.startInline?Te.startInline.push(ve.start):Te.startInline=[ve.start]))}ve.childTokens&&(Te.childTokens[ve.name]=ve.childTokens)}),de.extensions=Te),Y.renderer&&function(){var ve=ce.defaults.renderer||new xe,et=function(ut){var Et=ve[ut];ve[ut]=function(){for(var rt=arguments.length,xt=new Array(rt),Ne=0;Ne<rt;Ne++)xt[Ne]=arguments[Ne];var dn=Y.renderer[ut].apply(ve,xt);return dn===!1&&(dn=Et.apply(ve,xt)),dn}};for(var ht in Y.renderer)et(ht);de.renderer=ve}(),Y.tokenizer&&function(){var ve=ce.defaults.tokenizer||new oe,et=function(ut){var Et=ve[ut];ve[ut]=function(){for(var rt=arguments.length,xt=new Array(rt),Ne=0;Ne<rt;Ne++)xt[Ne]=arguments[Ne];var dn=Y.tokenizer[ut].apply(ve,xt);return dn===!1&&(dn=Et.apply(ve,xt)),dn}};for(var ht in Y.tokenizer)et(ht);de.tokenizer=ve}(),Y.hooks&&function(){var ve=ce.defaults.hooks||new W,et=function(ut){var Et=ve[ut];W.passThroughHooks.has(ut)?ve[ut]=function(rt){if(ce.defaults.async)return Promise.resolve(Y.hooks[ut].call(ve,rt)).then(function(Ne){return Et.call(ve,Ne)});var xt=Y.hooks[ut].call(ve,rt);return Et.call(ve,xt)}:ve[ut]=function(){for(var rt=arguments.length,xt=new Array(rt),Ne=0;Ne<rt;Ne++)xt[Ne]=arguments[Ne];var dn=Y.hooks[ut].apply(ve,xt);return dn===!1&&(dn=Et.apply(ve,xt)),dn}};for(var ht in Y.hooks)et(ht);de.hooks=ve}(),Y.walkTokens){var ue=ce.defaults.walkTokens;de.walkTokens=function(ve){var et=[];return et.push(Y.walkTokens.call(this,ve)),ue&&(et=et.concat(ue.call(this,ve))),et}}ce.setOptions(de)})},ce.walkTokens=function(Te,Ae){for(var we=[],$=function(){var ve=de.value;switch(we=we.concat(Ae.call(ce,ve)),ve.type){case"table":{for(var et=s(ve.header),ht;!(ht=et()).done;){var ft=ht.value;we=we.concat(ce.walkTokens(ft.tokens,Ae))}for(var ut=s(ve.rows),Et;!(Et=ut()).done;)for(var rt=Et.value,xt=s(rt),Ne;!(Ne=xt()).done;){var dn=Ne.value;we=we.concat(ce.walkTokens(dn.tokens,Ae))}break}case"list":{we=we.concat(ce.walkTokens(ve.items,Ae));break}default:ce.defaults.extensions&&ce.defaults.extensions.childTokens&&ce.defaults.extensions.childTokens[ve.type]?ce.defaults.extensions.childTokens[ve.type].forEach(function(Bt){we=we.concat(ce.walkTokens(ve[Bt],Ae))}):ve.tokens&&(we=we.concat(ce.walkTokens(ve.tokens,Ae)))}},Y=s(Te),de;!(de=Y()).done;)$();return we},ce.parseInline=ge(Ee.lexInline,R.parseInline),ce.Parser=R,ce.parser=R.parse,ce.Renderer=xe,ce.TextRenderer=Ue,ce.Lexer=Ee,ce.lexer=Ee.lex,ce.Tokenizer=oe,ce.Slugger=P,ce.Hooks=W,ce.parse=ce;var $e=ce.options,At=ce.setOptions,Ct=ce.use,jt=ce.walkTokens,ct=ce.parseInline,En=ce,Sn=R.parse,Di=Ee.lex;i.Hooks=W,i.Lexer=Ee,i.Parser=R,i.Renderer=xe,i.Slugger=P,i.TextRenderer=Ue,i.Tokenizer=oe,i.getDefaults=h,i.lexer=Di,i.marked=ce,i.options=$e,i.parse=En,i.parseInline=ct,i.parser=Sn,i.setOptions=At,i.use=Ct,i.walkTokens=jt})(SS);var Sd=is,TW=SW,Sb=SS.marked,TS=/Mac/.test(navigator.platform),AW=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),Vf={toggleBold:fg,toggleItalic:mg,drawLink:Eg,toggleHeadingSmaller:zf,toggleHeadingBigger:vg,drawImage:Sg,toggleBlockquote:bg,toggleOrderedList:Cg,toggleUnorderedList:kg,toggleCodeBlock:gg,togglePreview:Dg,toggleStrikethrough:pg,toggleHeading1:wg,toggleHeading2:yg,toggleHeading3:_g,toggleHeading4:xv,toggleHeading5:Ev,toggleHeading6:Sv,cleanBlock:xg,drawTable:Tg,drawHorizontalRule:Ag,undo:Pg,redo:Ig,toggleSideBySide:Qd,toggleFullScreen:_u},PW={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},IW=function(i){for(var e in Vf)if(Vf[e]===i)return e;return null},k0=function(){var i=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(i=!0)}(navigator.userAgent||navigator.vendor||window.opera),i};function DW(i){for(var e;(e=AW.exec(i))!==null;){var t=e[0];if(t.indexOf("target=")===-1){var n=t.replace(/>$/,' target="_blank">');i=i.replace(t,n)}}return i}function RW(i){for(var e=new DOMParser,t=e.parseFromString(i,"text/html"),n=t.getElementsByTagName("li"),r=0;r<n.length;r++)for(var o=n[r],s=0;s<o.children.length;s++){var l=o.children[s];l instanceof HTMLInputElement&&l.type==="checkbox"&&(o.style.marginLeft="-1.5em",o.style.listStyleType="none")}return t.documentElement.innerHTML}function AS(i){return TS?i=i.replace("Ctrl","Cmd"):i=i.replace("Cmd","Ctrl"),i}function OW(i,e,t,n){var r=dp(i,!1,e,t,"button",n);r.classList.add("easymde-dropdown"),r.onclick=function(){r.focus()};var o=document.createElement("div");o.className="easymde-dropdown-content";for(var s=0;s<i.children.length;s++){var l=i.children[s],c;typeof l=="string"&&l in mu?c=dp(mu[l],!0,e,t,"button",n):c=dp(l,!0,e,t,"button",n),c.addEventListener("click",function(h){h.stopPropagation()},!1),o.appendChild(c)}return r.appendChild(o),r}function dp(i,e,t,n,r,o){i=i||{};var s=document.createElement(r);if(i.attributes)for(var l in i.attributes)Object.prototype.hasOwnProperty.call(i.attributes,l)&&s.setAttribute(l,i.attributes[l]);var c=o.options.toolbarButtonClassPrefix?o.options.toolbarButtonClassPrefix+"-":"";s.className=c+i.name,s.setAttribute("type",r),t=t??!0,i.text&&(s.innerText=i.text),i.name&&i.name in n&&(Vf[i.name]=i.action),i.title&&t&&(s.title=MW(i.title,i.action,n),TS&&(s.title=s.title.replace("Ctrl","⌘"),s.title=s.title.replace("Alt","⌥"))),i.title&&s.setAttribute("aria-label",i.title),i.noDisable&&s.classList.add("no-disable"),i.noMobile&&s.classList.add("no-mobile");var h=[];typeof i.className<"u"&&(h=i.className.split(" "));for(var g=[],b=0;b<h.length;b++){var y=h[b];y.match(/^fa([srlb]|(-[\w-]*)|$)/)?g.push(y):s.classList.add(y)}if(s.tabIndex=-1,g.length>0){for(var k=document.createElement("i"),x=0;x<g.length;x++){var D=g[x];k.classList.add(D)}s.appendChild(k)}return typeof i.icon<"u"&&(s.innerHTML=i.icon),i.action&&e&&(typeof i.action=="function"?s.onclick=function(L){L.preventDefault(),i.action(o)}:typeof i.action=="string"&&(s.onclick=function(L){L.preventDefault(),window.open(i.action,"_blank")})),s}function FW(){var i=document.createElement("i");return i.className="separator",i.innerHTML="|",i}function MW(i,e,t){var n,r=i;return e&&(n=IW(e),t[n]&&(r+=" ("+AS(t[n])+")")),r}function xc(i,e){e=e||i.getCursor("start");var t=i.getTokenAt(e);if(!t.type)return{};for(var n=t.type.split(" "),r={},o,s,l=0;l<n.length;l++)o=n[l],o==="strong"?r.bold=!0:o==="variable-2"?(s=i.getLine(e.line),/^\s*\d+\.\s/.test(s)?r["ordered-list"]=!0:r["unordered-list"]=!0):o==="atom"?r.quote=!0:o==="em"?r.italic=!0:o==="quote"?r.quote=!0:o==="strikethrough"?r.strikethrough=!0:o==="comment"?r.code=!0:o==="link"&&!r.image?r.link=!0:o==="image"?r.image=!0:o.match(/^header(-[1-6])?$/)&&(r[o.replace("header","heading")]=!0);return r}var k_="";function _u(i){var e=i.codemirror;e.setOption("fullScreen",!e.getOption("fullScreen")),e.getOption("fullScreen")?(k_=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=k_;var t=e.getWrapperElement(),n=t.nextSibling;if(n.classList.contains("editor-preview-active-side"))if(i.options.sideBySideFullscreen===!1){var r=t.parentNode;e.getOption("fullScreen")?r.classList.remove("sided--no-fullscreen"):r.classList.add("sided--no-fullscreen")}else Qd(i);if(i.options.onToggleFullScreen&&i.options.onToggleFullScreen(e.getOption("fullScreen")||!1),typeof i.options.maxHeight<"u"&&(e.getOption("fullScreen")?(e.getScrollerElement().style.removeProperty("height"),n.style.removeProperty("height")):(e.getScrollerElement().style.height=i.options.maxHeight,i.setPreviewMaxHeight())),i.toolbar_div.classList.toggle("fullscreen"),i.toolbarElements&&i.toolbarElements.fullscreen){var o=i.toolbarElements.fullscreen;o.classList.toggle("active")}}function fg(i){Pv(i,"bold",i.options.blockStyles.bold)}function mg(i){Pv(i,"italic",i.options.blockStyles.italic)}function pg(i){Pv(i,"strikethrough","~~")}function gg(i){var e=i.options.blockStyles.code;function t(Ie){if(typeof Ie!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof Ie+": "+Ie;return Ie.styles&&Ie.styles[2]&&Ie.styles[2].indexOf("formatting-code-block")!==-1}function n(Ie){return Ie.state.base.base||Ie.state.base}function r(Ie,re,ae,pe,Z){ae=ae||Ie.getLineHandle(re),pe=pe||Ie.getTokenAt({line:re,ch:1}),Z=Z||!!ae.text&&Ie.getTokenAt({line:re,ch:ae.text.length-1});var Pe=pe.type?pe.type.split(" "):[];return Z&&n(Z).indentedCode?"indented":Pe.indexOf("comment")===-1?!1:n(pe).fencedChars||n(Z).fencedChars||t(ae)?"fenced":"single"}function o(Ie,re,ae,pe){var Z=re.line+1,Pe=ae.line+1,je=re.line!==ae.line,wt=pe+`
`,oe=`
`+pe;je&&Pe++,je&&ae.ch===0&&(oe=pe+`
`,Pe--),ku(Ie,!1,[wt,oe]),Ie.setSelection({line:Z,ch:0},{line:Pe,ch:0})}var s=i.codemirror,l=s.getCursor("start"),c=s.getCursor("end"),h=s.getTokenAt({line:l.line,ch:l.ch||1}),g=s.getLineHandle(l.line),b=r(s,l.line,g,h),y,k,x;if(b==="single"){var D=g.text.slice(0,l.ch).replace("`",""),L=g.text.slice(l.ch).replace("`","");s.replaceRange(D+L,{line:l.line,ch:0},{line:l.line,ch:99999999999999}),l.ch--,l!==c&&c.ch--,s.setSelection(l,c),s.focus()}else if(b==="fenced")if(l.line!==c.line||l.ch!==c.ch){for(y=l.line;y>=0&&(g=s.getLineHandle(y),!t(g));y--);var M=s.getTokenAt({line:y,ch:1}),V=n(M).fencedChars,O,U,K,q;t(s.getLineHandle(l.line))?(O="",U=l.line):t(s.getLineHandle(l.line-1))?(O="",U=l.line-1):(O=V+`
`,U=l.line),t(s.getLineHandle(c.line))?(K="",q=c.line,c.ch===0&&(q+=1)):c.ch!==0&&t(s.getLineHandle(c.line+1))?(K="",q=c.line+1):(K=V+`
`,q=c.line+1),c.ch===0&&(q-=1),s.operation(function(){s.replaceRange(K,{line:q,ch:0},{line:q+(K?0:1),ch:0}),s.replaceRange(O,{line:U,ch:0},{line:U+(O?0:1),ch:0})}),s.setSelection({line:U+(O?1:0),ch:0},{line:q+(O?1:-1),ch:0}),s.focus()}else{var Q=l.line;if(t(s.getLineHandle(l.line))&&(r(s,l.line+1)==="fenced"?(y=l.line,Q=l.line+1):(k=l.line,Q=l.line-1)),y===void 0)for(y=Q;y>=0&&(g=s.getLineHandle(y),!t(g));y--);if(k===void 0)for(x=s.lineCount(),k=Q;k<x&&(g=s.getLineHandle(k),!t(g));k++);s.operation(function(){s.replaceRange("",{line:y,ch:0},{line:y+1,ch:0}),s.replaceRange("",{line:k-1,ch:0},{line:k,ch:0})}),s.focus()}else if(b==="indented"){if(l.line!==c.line||l.ch!==c.ch)y=l.line,k=c.line,c.ch===0&&k--;else{for(y=l.line;y>=0;y--)if(g=s.getLineHandle(y),!g.text.match(/^\s*$/)&&r(s,y,g)!=="indented"){y+=1;break}for(x=s.lineCount(),k=l.line;k<x;k++)if(g=s.getLineHandle(k),!g.text.match(/^\s*$/)&&r(s,k,g)!=="indented"){k-=1;break}}var ne=s.getLineHandle(k+1),X=ne&&s.getTokenAt({line:k+1,ch:ne.text.length-1}),se=X&&n(X).indentedCode;se&&s.replaceRange(`
`,{line:k+1,ch:0});for(var fe=y;fe<=k;fe++)s.indentLine(fe,"subtract");s.focus()}else{var Oe=l.line===c.line&&l.ch===c.ch&&l.ch===0,_e=l.line!==c.line;Oe||_e?o(s,l,c,e):ku(s,!1,["`","`"])}}function bg(i){Av(i.codemirror,"quote")}function zf(i){Ec(i.codemirror,"smaller")}function vg(i){Ec(i.codemirror,"bigger")}function wg(i){Ec(i.codemirror,void 0,1)}function yg(i){Ec(i.codemirror,void 0,2)}function _g(i){Ec(i.codemirror,void 0,3)}function xv(i){Ec(i.codemirror,void 0,4)}function Ev(i){Ec(i.codemirror,void 0,5)}function Sv(i){Ec(i.codemirror,void 0,6)}function kg(i){var e=i.codemirror,t="*";["-","+","*"].includes(i.options.unorderedListStyle)&&(t=i.options.unorderedListStyle),Av(e,"unordered-list",t)}function Cg(i){Av(i.codemirror,"ordered-list")}function xg(i){LW(i.codemirror)}function Eg(i){var e=i.options,t="https://";if(e.promptURLs){var n=prompt(e.promptTexts.link,t);if(!n)return!1;t=PS(n)}DS(i,"link",e.insertTexts.link,t)}function Sg(i){var e=i.options,t="https://";if(e.promptURLs){var n=prompt(e.promptTexts.image,t);if(!n)return!1;t=PS(n)}DS(i,"image",e.insertTexts.image,t)}function PS(i){return encodeURI(i).replace(/([\\()])/g,"\\$1")}function Tv(i){i.openBrowseFileWindow()}function IS(i,e){var t=i.codemirror,n=xc(t),r=i.options,o=e.substr(e.lastIndexOf("/")+1),s=o.substring(o.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(s))ku(t,n.image,r.insertTexts.uploadedImage,e);else{var l=r.insertTexts.link;l[0]="["+o,ku(t,n.link,l,e)}i.updateStatusBar("upload-image",i.options.imageTexts.sbOnUploaded.replace("#image_name#",o)),setTimeout(function(){i.updateStatusBar("upload-image",i.options.imageTexts.sbInit)},1e3)}function Tg(i){var e=i.codemirror,t=xc(e),n=i.options;ku(e,t.table,n.insertTexts.table)}function Ag(i){var e=i.codemirror,t=xc(e),n=i.options;ku(e,t.image,n.insertTexts.horizontalRule)}function Pg(i){var e=i.codemirror;e.undo(),e.focus()}function Ig(i){var e=i.codemirror;e.redo(),e.focus()}function Qd(i){var e=i.codemirror,t=e.getWrapperElement(),n=t.nextSibling,r=i.toolbarElements&&i.toolbarElements["side-by-side"],o=!1,s=t.parentNode;n.classList.contains("editor-preview-active-side")?(i.options.sideBySideFullscreen===!1&&s.classList.remove("sided--no-fullscreen"),n.classList.remove("editor-preview-active-side"),r&&r.classList.remove("active"),t.classList.remove("CodeMirror-sided")):(setTimeout(function(){e.getOption("fullScreen")||(i.options.sideBySideFullscreen===!1?s.classList.add("sided--no-fullscreen"):_u(i)),n.classList.add("editor-preview-active-side")},1),r&&r.classList.add("active"),t.classList.add("CodeMirror-sided"),o=!0);var l=t.lastChild;if(l.classList.contains("editor-preview-active")){l.classList.remove("editor-preview-active");var c=i.toolbarElements.preview,h=i.toolbar_div;c.classList.remove("active"),h.classList.remove("disabled-for-preview")}var g=function(){var y=i.options.previewRender(i.value(),n);y!=null&&(n.innerHTML=y)};if(e.sideBySideRenderingFunction||(e.sideBySideRenderingFunction=g),o){var b=i.options.previewRender(i.value(),n);b!=null&&(n.innerHTML=b),e.on("update",e.sideBySideRenderingFunction)}else e.off("update",e.sideBySideRenderingFunction);e.refresh()}function Dg(i){var e=i.codemirror,t=e.getWrapperElement(),n=i.toolbar_div,r=i.options.toolbar?i.toolbarElements.preview:!1,o=t.lastChild,s=e.getWrapperElement().nextSibling;if(s.classList.contains("editor-preview-active-side")&&Qd(i),!o||!o.classList.contains("editor-preview-full")){if(o=document.createElement("div"),o.className="editor-preview-full",i.options.previewClass)if(Array.isArray(i.options.previewClass))for(var l=0;l<i.options.previewClass.length;l++)o.classList.add(i.options.previewClass[l]);else typeof i.options.previewClass=="string"&&o.classList.add(i.options.previewClass);t.appendChild(o)}o.classList.contains("editor-preview-active")?(o.classList.remove("editor-preview-active"),r&&(r.classList.remove("active"),n.classList.remove("disabled-for-preview"))):(setTimeout(function(){o.classList.add("editor-preview-active")},1),r&&(r.classList.add("active"),n.classList.add("disabled-for-preview")));var c=i.options.previewRender(i.value(),o);c!==null&&(o.innerHTML=c)}function ku(i,e,t,n){if(!i.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var r,o=t[0],s=t[1],l={},c={};Object.assign(l,i.getCursor("start")),Object.assign(c,i.getCursor("end")),n&&(o=o.replace("#url#",n),s=s.replace("#url#",n)),e?(r=i.getLine(l.line),o=r.slice(0,l.ch),s=r.slice(l.ch),i.replaceRange(o+s,{line:l.line,ch:0})):(r=i.getSelection(),i.replaceSelection(o+r+s),l.ch+=o.length,l!==c&&(c.ch+=o.length)),i.setSelection(l,c),i.focus()}}function Ec(i,e,t){if(!i.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var n=i.getCursor("start"),r=i.getCursor("end"),o=n.line;o<=r.line;o++)(function(s){var l=i.getLine(s),c=l.search(/[^#]/);e!==void 0?c<=0?e=="bigger"?l="###### "+l:l="# "+l:c==6&&e=="smaller"?l=l.substr(7):c==1&&e=="bigger"?l=l.substr(2):e=="bigger"?l=l.substr(1):l="#"+l:c<=0?l="#".repeat(t)+" "+l:c==t?l=l.substr(c+1):l="#".repeat(t)+" "+l.substr(c+1),i.replaceRange(l,{line:s,ch:0},{line:s,ch:99999999999999})})(o);i.focus()}}function Av(i,e,t){if(!i.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var n=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,r=/^\s*/,o=xc(i),s=i.getCursor("start"),l=i.getCursor("end"),c={quote:/^(\s*)>\s+/,"unordered-list":n,"ordered-list":n},h=function(x,D){var L={quote:">","unordered-list":t,"ordered-list":"%%i."};return L[x].replace("%%i",D)},g=function(x,D){var L={quote:">","unordered-list":"\\"+t,"ordered-list":"\\d+."},M=new RegExp(L[x]);return D&&M.test(D)},b=function(x,D,L){var M=n.exec(D),V=h(x,y);return M!==null?(g(x,M[2])&&(V=""),D=M[1]+V+M[3]+D.replace(r,"").replace(c[x],"$1")):L==!1&&(D=V+" "+D),D},y=1,k=s.line;k<=l.line;k++)(function(x){var D=i.getLine(x);o[e]?D=D.replace(c[e],"$1"):(e=="unordered-list"&&(D=b("ordered-list",D,!0)),D=b(e,D,!1),y+=1),i.replaceRange(D,{line:x,ch:0},{line:x,ch:99999999999999})})(k);i.focus()}}function DS(i,e,t,n){if(!(!i.codemirror||i.isPreviewActive())){var r=i.codemirror,o=xc(r),s=o[e];if(!s){ku(r,s,t,n);return}var l=r.getCursor("start"),c=r.getCursor("end"),h=r.getLine(l.line),g=h.slice(0,l.ch),b=h.slice(l.ch);e=="link"?g=g.replace(/(.*)[^!]\[/,"$1"):e=="image"&&(g=g.replace(/(.*)!\[$/,"$1")),b=b.replace(/]\(.*?\)/,""),r.replaceRange(g+b,{line:l.line,ch:0},{line:l.line,ch:99999999999999}),l.ch-=t[0].length,l!==c&&(c.ch-=t[0].length),r.setSelection(l,c),r.focus()}}function Pv(i,e,t,n){if(!(!i.codemirror||i.isPreviewActive())){n=typeof n>"u"?t:n;var r=i.codemirror,o=xc(r),s,l=t,c=n,h=r.getCursor("start"),g=r.getCursor("end");o[e]?(s=r.getLine(h.line),l=s.slice(0,h.ch),c=s.slice(h.ch),e=="bold"?(l=l.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),c=c.replace(/(\*\*|__)/,"")):e=="italic"?(l=l.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),c=c.replace(/(\*|_)/,"")):e=="strikethrough"&&(l=l.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),c=c.replace(/(\*\*|~~)/,"")),r.replaceRange(l+c,{line:h.line,ch:0},{line:h.line,ch:99999999999999}),e=="bold"||e=="strikethrough"?(h.ch-=2,h!==g&&(g.ch-=2)):e=="italic"&&(h.ch-=1,h!==g&&(g.ch-=1))):(s=r.getSelection(),e=="bold"?(s=s.split("**").join(""),s=s.split("__").join("")):e=="italic"?(s=s.split("*").join(""),s=s.split("_").join("")):e=="strikethrough"&&(s=s.split("~~").join("")),r.replaceSelection(l+s+c),h.ch+=t.length,g.ch=h.ch+s.length),r.setSelection(h,g),r.focus()}}function LW(i){if(!i.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var e=i.getCursor("start"),t=i.getCursor("end"),n,r=e.line;r<=t.line;r++)n=i.getLine(r),n=n.replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),i.replaceRange(n,{line:r,ch:0},{line:r,ch:99999999999999})}function Bp(i,e){if(Math.abs(i)<1024)return""+i+e[0];var t=0;do i/=1024,++t;while(Math.abs(i)>=1024&&t<e.length);return""+i.toFixed(1)+e[t]}function RS(i,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]instanceof Array?i[t]=e[t].concat(i[t]instanceof Array?i[t]:[]):e[t]!==null&&typeof e[t]=="object"&&e[t].constructor===Object?i[t]=RS(i[t]||{},e[t]):i[t]=e[t]);return i}function cl(i){for(var e=1;e<arguments.length;e++)i=RS(i,arguments[e]);return i}function C_(i){var e=/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g,t=i.match(e),n=0;if(t===null)return n;for(var r=0;r<t.length;r++)t[r].charCodeAt(0)>=19968?n+=t[r].length:n+=1;return n}var Xn={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},mu={bold:{name:"bold",action:fg,className:Xn.bold,title:"Bold",default:!0},italic:{name:"italic",action:mg,className:Xn.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:pg,className:Xn.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:zf,className:Xn.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:zf,className:Xn["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:vg,className:Xn["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:wg,className:Xn["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:yg,className:Xn["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:_g,className:Xn["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:gg,className:Xn.code,title:"Code"},quote:{name:"quote",action:bg,className:Xn.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:kg,className:Xn["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:Cg,className:Xn["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:xg,className:Xn["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:Eg,className:Xn.link,title:"Create Link",default:!0},image:{name:"image",action:Sg,className:Xn.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:Tv,className:Xn["upload-image"],title:"Import an image"},table:{name:"table",action:Tg,className:Xn.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:Ag,className:Xn["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:Dg,className:Xn.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:Qd,className:Xn["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:_u,className:Xn.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:Xn.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:Pg,className:Xn.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:Ig,className:Xn.redo,noDisable:!0,title:"Redo"}},BW={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},NW={link:"URL for the link:",image:"URL of the image:"},VW={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},zW={bold:"**",code:"```",italic:"*"},HW={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},UW={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function kt(i){i=i||{},i.parent=this;var e=!0;if(i.autoDownloadFontAwesome===!1&&(e=!1),i.autoDownloadFontAwesome!==!0)for(var t=document.styleSheets,n=0;n<t.length;n++)t[n].href&&t[n].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(e=!1);if(e){var r=document.createElement("link");r.rel="stylesheet",r.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(r)}if(i.element)this.element=i.element;else if(i.element===null){console.log("EasyMDE: Error. No element was found.");return}if(i.toolbar===void 0){i.toolbar=[];for(var o in mu)Object.prototype.hasOwnProperty.call(mu,o)&&(o.indexOf("separator-")!=-1&&i.toolbar.push("|"),(mu[o].default===!0||i.showIcons&&i.showIcons.constructor===Array&&i.showIcons.indexOf(o)!=-1)&&i.toolbar.push(o))}if(Object.prototype.hasOwnProperty.call(i,"previewClass")||(i.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(i,"status")||(i.status=["autosave","lines","words","cursor"],i.uploadImage&&i.status.unshift("upload-image")),i.previewRender||(i.previewRender=function(l){return this.parent.markdown(l)}),i.parsingConfig=cl({highlightFormatting:!0},i.parsingConfig||{}),i.insertTexts=cl({},BW,i.insertTexts||{}),i.promptTexts=cl({},NW,i.promptTexts||{}),i.blockStyles=cl({},zW,i.blockStyles||{}),i.autosave!=null&&(i.autosave.timeFormat=cl({},VW,i.autosave.timeFormat||{})),i.iconClassMap=cl({},Xn,i.iconClassMap||{}),i.shortcuts=cl({},PW,i.shortcuts||{}),i.maxHeight=i.maxHeight||void 0,i.direction=i.direction||"ltr",typeof i.maxHeight<"u"?i.minHeight=i.maxHeight:i.minHeight=i.minHeight||"300px",i.errorCallback=i.errorCallback||function(l){alert(l)},i.uploadImage=i.uploadImage||!1,i.imageMaxSize=i.imageMaxSize||2097152,i.imageAccept=i.imageAccept||"image/png, image/jpeg, image/gif, image/avif",i.imageTexts=cl({},HW,i.imageTexts||{}),i.errorMessages=cl({},UW,i.errorMessages||{}),i.imagePathAbsolute=i.imagePathAbsolute||!1,i.imageCSRFName=i.imageCSRFName||"csrfmiddlewaretoken",i.imageCSRFHeader=i.imageCSRFHeader||!1,i.autosave!=null&&i.autosave.unique_id!=null&&i.autosave.unique_id!=""&&(i.autosave.uniqueId=i.autosave.unique_id),i.overlayMode&&i.overlayMode.combine===void 0&&(i.overlayMode.combine=!0),this.options=i,this.render(),i.initialValue&&(!this.options.autosave||this.options.autosave.foundSavedValue!==!0)&&this.value(i.initialValue),i.uploadImage){var s=this;this.codemirror.on("dragenter",function(l,c){s.updateStatusBar("upload-image",s.options.imageTexts.sbOnDragEnter),c.stopPropagation(),c.preventDefault()}),this.codemirror.on("dragend",function(l,c){s.updateStatusBar("upload-image",s.options.imageTexts.sbInit),c.stopPropagation(),c.preventDefault()}),this.codemirror.on("dragleave",function(l,c){s.updateStatusBar("upload-image",s.options.imageTexts.sbInit),c.stopPropagation(),c.preventDefault()}),this.codemirror.on("dragover",function(l,c){s.updateStatusBar("upload-image",s.options.imageTexts.sbOnDragEnter),c.stopPropagation(),c.preventDefault()}),this.codemirror.on("drop",function(l,c){c.stopPropagation(),c.preventDefault(),i.imageUploadFunction?s.uploadImagesUsingCustomFunction(i.imageUploadFunction,c.dataTransfer.files):s.uploadImages(c.dataTransfer.files)}),this.codemirror.on("paste",function(l,c){i.imageUploadFunction?s.uploadImagesUsingCustomFunction(i.imageUploadFunction,c.clipboardData.files):s.uploadImages(c.clipboardData.files)})}}kt.prototype.uploadImages=function(i,e,t){if(i.length!==0){for(var n=[],r=0;r<i.length;r++)n.push(i[r].name),this.uploadImage(i[r],e,t);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",n.join(", ")))}};kt.prototype.uploadImagesUsingCustomFunction=function(i,e){if(e.length!==0){for(var t=[],n=0;n<e.length;n++)t.push(e[n].name),this.uploadImageUsingCustomFunction(i,e[n]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",t.join(", ")))}};kt.prototype.updateStatusBar=function(i,e){if(this.gui.statusbar){var t=this.gui.statusbar.getElementsByClassName(i);t.length===1?this.gui.statusbar.getElementsByClassName(i)[0].textContent=e:t.length===0?console.log("EasyMDE: status bar item "+i+" was not found."):console.log("EasyMDE: Several status bar items named "+i+" was found.")}};kt.prototype.markdown=function(i){if(Sb){var e;if(this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?e=this.options.renderingConfig.markedOptions:e={},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?e.breaks=!1:e.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var t=this.options.renderingConfig.hljs||window.hljs;t&&(e.highlight=function(r,o){return o&&t.getLanguage(o)?t.highlight(o,r).value:t.highlightAuto(r).value})}Sb.setOptions(e);var n=Sb.parse(i);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(n=this.options.renderingConfig.sanitizerFunction.call(this,n)),n=DW(n),n=RW(n),n}};kt.prototype.render=function(i){if(i||(i=this.element||document.getElementsByTagName("textarea")[0]),this._rendered&&this._rendered===i)return;this.element=i;var e=this.options,t=this,n={};for(var r in e.shortcuts)e.shortcuts[r]!==null&&Vf[r]!==null&&function(L){n[AS(e.shortcuts[L])]=function(){var M=Vf[L];typeof M=="function"?M(t):typeof M=="string"&&window.open(M,"_blank")}}(r);n.Enter="newlineAndIndentContinueMarkdownList",n.Tab="tabAndIndentMarkdownList",n["Shift-Tab"]="shiftTabAndUnindentMarkdownList",n.Esc=function(L){L.getOption("fullScreen")&&_u(t)},this.documentOnKeyDown=function(L){L=L||window.event,L.keyCode==27&&t.codemirror.getOption("fullScreen")&&_u(t)},document.addEventListener("keydown",this.documentOnKeyDown,!1);var o,s;e.overlayMode?(Sd.defineMode("overlay-mode",function(L){return Sd.overlayMode(Sd.getMode(L,e.spellChecker!==!1?"spell-checker":"gfm"),e.overlayMode.mode,e.overlayMode.combine)}),o="overlay-mode",s=e.parsingConfig,s.gitHubSpice=!1):(o=e.parsingConfig,o.name="gfm",o.gitHubSpice=!1),e.spellChecker!==!1&&(o="spell-checker",s=e.parsingConfig,s.name="gfm",s.gitHubSpice=!1,typeof e.spellChecker=="function"?e.spellChecker({codeMirrorInstance:Sd}):TW({codeMirrorInstance:Sd}));function l(L,M,V){return{addNew:!1}}if(this.codemirror=Sd.fromTextArea(i,{mode:o,backdrop:s,theme:e.theme!=null?e.theme:"easymde",tabSize:e.tabSize!=null?e.tabSize:2,indentUnit:e.tabSize!=null?e.tabSize:2,indentWithTabs:e.indentWithTabs!==!1,lineNumbers:e.lineNumbers===!0,autofocus:e.autofocus===!0,extraKeys:n,direction:e.direction,lineWrapping:e.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:e.placeholder||i.getAttribute("placeholder")||"",styleSelectedText:e.styleSelectedText!=null?e.styleSelectedText:!k0(),scrollbarStyle:e.scrollbarStyle!=null?e.scrollbarStyle:"native",configureMouse:l,inputStyle:e.inputStyle!=null?e.inputStyle:k0()?"contenteditable":"textarea",spellcheck:e.nativeSpellcheck!=null?e.nativeSpellcheck:!0,autoRefresh:e.autoRefresh!=null?e.autoRefresh:!1}),this.codemirror.getScrollerElement().style.minHeight=e.minHeight,typeof e.maxHeight<"u"&&(this.codemirror.getScrollerElement().style.height=e.maxHeight),e.forceSync===!0){var c=this.codemirror;c.on("change",function(){c.save()})}this.gui={};var h=document.createElement("div");h.classList.add("EasyMDEContainer"),h.setAttribute("role","application");var g=this.codemirror.getWrapperElement();g.parentNode.insertBefore(h,g),h.appendChild(g),e.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),e.status!==!1&&(this.gui.statusbar=this.createStatusbar()),e.autosave!=null&&e.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(t._autosave_timeout),t._autosave_timeout=setTimeout(function(){t.autosave()},t.options.autosave.submit_delay||t.options.autosave.delay||1e3)}));function b(L,M){var V,O=window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","");return L<O?V=M+"px":V=M/L*100+"%",V}var y=this;function k(L,M){L.setAttribute("data-img-src",M.url),L.setAttribute("style","--bg-image:url("+M.url+");--width:"+M.naturalWidth+"px;--height:"+b(M.naturalWidth,M.naturalHeight)),y.codemirror.setSize()}function x(){e.previewImagesInEditor&&h.querySelectorAll(".cm-image-marker").forEach(function(L){var M=L.parentElement;if(M.innerText.match(/^!\[.*?\]\(.*\)/g)&&!M.hasAttribute("data-img-src")){var V=M.innerText.match("\\((.*)\\)");if(window.EMDEimagesCache||(window.EMDEimagesCache={}),V&&V.length>=2){var O=V[1];if(e.imagesPreviewHandler){var U=e.imagesPreviewHandler(V[1]);typeof U=="string"&&(O=U)}if(window.EMDEimagesCache[O])k(M,window.EMDEimagesCache[O]);else{var K=document.createElement("img");K.onload=function(){window.EMDEimagesCache[O]={naturalWidth:K.naturalWidth,naturalHeight:K.naturalHeight,url:O},k(M,window.EMDEimagesCache[O])},K.src=O}}}})}this.codemirror.on("update",function(){x()}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(e.autofocus===!0||i.autofocus)&&this.codemirror.focus();var D=this.codemirror;setTimeout(function(){D.refresh()}.bind(D),0)};kt.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)};function OS(){if(typeof localStorage=="object")try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}else return!1;return!0}kt.prototype.autosave=function(){if(OS()){var i=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId==""){console.log("EasyMDE: You must set a uniqueId to use the autosave feature");return}this.options.autosave.binded!==!0&&(i.element.form!=null&&i.element.form!=null&&i.element.form.addEventListener("submit",function(){clearTimeout(i.autosaveTimeoutId),i.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+i.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var e=i.value();e!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,e):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var t=document.getElementById("autosaved");if(t!=null&&t!=null&&t!=""){var n=new Date,r=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(n),o=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;t.innerHTML=o+r}}else console.log("EasyMDE: localStorage not available, cannot autosave")};kt.prototype.clearAutosavedValue=function(){if(OS()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId==""){console.log("EasyMDE: You must set a uniqueId to clear the autosave value");return}localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")};kt.prototype.openBrowseFileWindow=function(i,e){var t=this,n=this.gui.toolbar.getElementsByClassName("imageInput")[0];n.click();function r(o){t.options.imageUploadFunction?t.uploadImagesUsingCustomFunction(t.options.imageUploadFunction,o.target.files):t.uploadImages(o.target.files,i,e),n.removeEventListener("change",r)}n.addEventListener("change",r)};kt.prototype.uploadImage=function(i,e,t){var n=this;e=e||function(h){IS(n,h)};function r(c){n.updateStatusBar("upload-image",c),setTimeout(function(){n.updateStatusBar("upload-image",n.options.imageTexts.sbInit)},1e4),t&&typeof t=="function"&&t(c),n.options.errorCallback(c)}function o(c){var h=n.options.imageTexts.sizeUnits.split(",");return c.replace("#image_name#",i.name).replace("#image_size#",Bp(i.size,h)).replace("#image_max_size#",Bp(n.options.imageMaxSize,h))}if(i.size>this.options.imageMaxSize){r(o(this.options.errorMessages.fileTooLarge));return}var s=new FormData;s.append("image",i),n.options.imageCSRFToken&&!n.options.imageCSRFHeader&&s.append(n.options.imageCSRFName,n.options.imageCSRFToken);var l=new XMLHttpRequest;l.upload.onprogress=function(c){if(c.lengthComputable){var h=""+Math.round(c.loaded*100/c.total);n.updateStatusBar("upload-image",n.options.imageTexts.sbProgress.replace("#file_name#",i.name).replace("#progress#",h))}},l.open("POST",this.options.imageUploadEndpoint),n.options.imageCSRFToken&&n.options.imageCSRFHeader&&l.setRequestHeader(n.options.imageCSRFName,n.options.imageCSRFToken),l.onload=function(){try{var c=JSON.parse(this.responseText)}catch{console.error("EasyMDE: The server did not return a valid json."),r(o(n.options.errorMessages.importError));return}this.status===200&&c&&!c.error&&c.data&&c.data.filePath?e((n.options.imagePathAbsolute?"":window.location.origin+"/")+c.data.filePath):c.error&&c.error in n.options.errorMessages?r(o(n.options.errorMessages[c.error])):c.error?r(o(c.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),r(o(n.options.errorMessages.importError)))},l.onerror=function(c){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+c.target.status+" ("+c.target.statusText+")"),r(n.options.errorMessages.importError)},l.send(s)};kt.prototype.uploadImageUsingCustomFunction=function(i,e){var t=this;function n(s){IS(t,s)}function r(s){var l=o(s);t.updateStatusBar("upload-image",l),setTimeout(function(){t.updateStatusBar("upload-image",t.options.imageTexts.sbInit)},1e4),t.options.errorCallback(l)}function o(s){var l=t.options.imageTexts.sizeUnits.split(",");return s.replace("#image_name#",e.name).replace("#image_size#",Bp(e.size,l)).replace("#image_max_size#",Bp(t.options.imageMaxSize,l))}i.apply(this,[e,n,r])};kt.prototype.setPreviewMaxHeight=function(){var i=this.codemirror,e=i.getWrapperElement(),t=e.nextSibling,n=parseInt(window.getComputedStyle(e).paddingTop),r=parseInt(window.getComputedStyle(e).borderTopWidth),o=parseInt(this.options.maxHeight),s=o+n*2+r*2,l=s.toString()+"px";t.style.height=l};kt.prototype.createSideBySide=function(){var i=this.codemirror,e=i.getWrapperElement(),t=e.nextSibling;if(!t||!t.classList.contains("editor-preview-side")){if(t=document.createElement("div"),t.className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var n=0;n<this.options.previewClass.length;n++)t.classList.add(this.options.previewClass[n]);else typeof this.options.previewClass=="string"&&t.classList.add(this.options.previewClass);e.parentNode.insertBefore(t,e.nextSibling)}if(typeof this.options.maxHeight<"u"&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return t;var r=!1,o=!1;return i.on("scroll",function(s){if(r){r=!1;return}o=!0;var l=s.getScrollInfo().height-s.getScrollInfo().clientHeight,c=parseFloat(s.getScrollInfo().top)/l,h=(t.scrollHeight-t.clientHeight)*c;t.scrollTop=h}),t.onscroll=function(){if(o){o=!1;return}r=!0;var s=t.scrollHeight-t.clientHeight,l=parseFloat(t.scrollTop)/s,c=(i.getScrollInfo().height-i.getScrollInfo().clientHeight)*l;i.scrollTo(0,c)},t};kt.prototype.createToolbar=function(i){if(i=i||this.options.toolbar,!(!i||i.length===0)){var e;for(e=0;e<i.length;e++)mu[i[e]]!=null&&(i[e]=mu[i[e]]);var t=document.createElement("div");t.className="editor-toolbar",t.setAttribute("role","toolbar");var n=this,r={};for(n.toolbar=i,e=0;e<i.length;e++)if(!(i[e].name=="guide"&&n.options.toolbarGuideIcon===!1)&&!(n.options.hideIcons&&n.options.hideIcons.indexOf(i[e].name)!=-1)&&!((i[e].name=="fullscreen"||i[e].name=="side-by-side")&&k0())){if(i[e]==="|"){for(var o=!1,s=e+1;s<i.length;s++)i[s]!=="|"&&(!n.options.hideIcons||n.options.hideIcons.indexOf(i[s].name)==-1)&&(o=!0);if(!o)continue}(function(h){var g;if(h==="|"?g=FW():h.children?g=OW(h,n.options.toolbarTips,n.options.shortcuts,n):g=dp(h,!0,n.options.toolbarTips,n.options.shortcuts,"button",n),r[h.name||h]=g,t.appendChild(g),h.name==="upload-image"){var b=document.createElement("input");b.className="imageInput",b.type="file",b.multiple=!0,b.name="image",b.accept=n.options.imageAccept,b.style.display="none",b.style.opacity=0,t.appendChild(b)}})(i[e])}n.toolbar_div=t,n.toolbarElements=r;var l=this.codemirror;l.on("cursorActivity",function(){var h=xc(l);for(var g in r)(function(b){var y=r[b];h[b]?y.classList.add("active"):b!="fullscreen"&&b!="side-by-side"&&y.classList.remove("active")})(g)});var c=l.getWrapperElement();return c.parentNode.insertBefore(t,c),t}};kt.prototype.createStatusbar=function(i){i=i||this.options.status;var e=this.options,t=this.codemirror;if(!(!i||i.length===0)){var n=[],r,o,s,l;for(r=0;r<i.length;r++)if(o=void 0,s=void 0,l=void 0,typeof i[r]=="object")n.push({className:i[r].className,defaultValue:i[r].defaultValue,onUpdate:i[r].onUpdate,onActivity:i[r].onActivity});else{var c=i[r];c==="words"?(l=function(k){k.innerHTML=C_(t.getValue())},o=function(k){k.innerHTML=C_(t.getValue())}):c==="lines"?(l=function(k){k.innerHTML=t.lineCount()},o=function(k){k.innerHTML=t.lineCount()}):c==="cursor"?(l=function(k){k.innerHTML="1:1"},s=function(k){var x=t.getCursor(),D=x.line+1,L=x.ch+1;k.innerHTML=D+":"+L}):c==="autosave"?l=function(k){e.autosave!=null&&e.autosave.enabled===!0&&k.setAttribute("id","autosaved")}:c==="upload-image"&&(l=function(k){k.innerHTML=e.imageTexts.sbInit}),n.push({className:c,defaultValue:l,onUpdate:o,onActivity:s})}var h=document.createElement("div");for(h.className="editor-statusbar",r=0;r<n.length;r++){var g=n[r],b=document.createElement("span");b.className=g.className,typeof g.defaultValue=="function"&&g.defaultValue(b),typeof g.onUpdate=="function"&&this.codemirror.on("update",function(k,x){return function(){x.onUpdate(k)}}(b,g)),typeof g.onActivity=="function"&&this.codemirror.on("cursorActivity",function(k,x){return function(){x.onActivity(k)}}(b,g)),h.appendChild(b)}var y=this.codemirror.getWrapperElement();return y.parentNode.insertBefore(h,y.nextSibling),h}};kt.prototype.value=function(i){var e=this.codemirror;if(i===void 0)return e.getValue();if(e.getDoc().setValue(i),this.isPreviewActive()){var t=e.getWrapperElement(),n=t.lastChild,r=this.options.previewRender(i,n);r!==null&&(n.innerHTML=r)}return this};kt.toggleBold=fg;kt.toggleItalic=mg;kt.toggleStrikethrough=pg;kt.toggleBlockquote=bg;kt.toggleHeadingSmaller=zf;kt.toggleHeadingBigger=vg;kt.toggleHeading1=wg;kt.toggleHeading2=yg;kt.toggleHeading3=_g;kt.toggleHeading4=xv;kt.toggleHeading5=Ev;kt.toggleHeading6=Sv;kt.toggleCodeBlock=gg;kt.toggleUnorderedList=kg;kt.toggleOrderedList=Cg;kt.cleanBlock=xg;kt.drawLink=Eg;kt.drawImage=Sg;kt.drawUploadedImage=Tv;kt.drawTable=Tg;kt.drawHorizontalRule=Ag;kt.undo=Pg;kt.redo=Ig;kt.togglePreview=Dg;kt.toggleSideBySide=Qd;kt.toggleFullScreen=_u;kt.prototype.toggleBold=function(){fg(this)};kt.prototype.toggleItalic=function(){mg(this)};kt.prototype.toggleStrikethrough=function(){pg(this)};kt.prototype.toggleBlockquote=function(){bg(this)};kt.prototype.toggleHeadingSmaller=function(){zf(this)};kt.prototype.toggleHeadingBigger=function(){vg(this)};kt.prototype.toggleHeading1=function(){wg(this)};kt.prototype.toggleHeading2=function(){yg(this)};kt.prototype.toggleHeading3=function(){_g(this)};kt.prototype.toggleHeading4=function(){xv(this)};kt.prototype.toggleHeading5=function(){Ev(this)};kt.prototype.toggleHeading6=function(){Sv(this)};kt.prototype.toggleCodeBlock=function(){gg(this)};kt.prototype.toggleUnorderedList=function(){kg(this)};kt.prototype.toggleOrderedList=function(){Cg(this)};kt.prototype.cleanBlock=function(){xg(this)};kt.prototype.drawLink=function(){Eg(this)};kt.prototype.drawImage=function(){Sg(this)};kt.prototype.drawUploadedImage=function(){Tv(this)};kt.prototype.drawTable=function(){Tg(this)};kt.prototype.drawHorizontalRule=function(){Ag(this)};kt.prototype.undo=function(){Pg(this)};kt.prototype.redo=function(){Ig(this)};kt.prototype.togglePreview=function(){Dg(this)};kt.prototype.toggleSideBySide=function(){Qd(this)};kt.prototype.toggleFullScreen=function(){_u(this)};kt.prototype.isPreviewActive=function(){var i=this.codemirror,e=i.getWrapperElement(),t=e.lastChild;return t.classList.contains("editor-preview-active")};kt.prototype.isSideBySideActive=function(){var i=this.codemirror,e=i.getWrapperElement(),t=e.nextSibling;return t.classList.contains("editor-preview-active-side")};kt.prototype.isFullscreenActive=function(){var i=this.codemirror;return i.getOption("fullScreen")};kt.prototype.getState=function(){var i=this.codemirror;return xc(i)};kt.prototype.toTextArea=function(){var i=this.codemirror,e=i.getWrapperElement(),t=e.parentNode;t&&(this.gui.toolbar&&t.removeChild(this.gui.toolbar),this.gui.statusbar&&t.removeChild(this.gui.statusbar),this.gui.sideBySide&&t.removeChild(this.gui.sideBySide)),t.parentNode.insertBefore(e,t),t.remove(),i.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())};var WW=kt;const jW=Hp(WW);window.PlotlyChart=MA;window.ClassicEditor=Cv;window.CKEditorInspector=dW;window.AgGridTable=hW;window.DynamicText=fW;window.EasyMDE=jW;
